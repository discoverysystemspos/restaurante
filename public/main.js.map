{"version":3,"file":"main.js","mappings":"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","sources":["./projects/ngx-printer/src/lib/ngx-print-marker-position.enum.ts","./projects/ngx-printer/src/lib/ngx-printer.component.ts","./projects/ngx-printer/src/lib/ngx-printer.module.ts","./projects/ngx-printer/src/lib/ngx-printer.service.ts","./projects/ngx-printer/src/lib/no-print.directive.ts","./projects/ngx-printer/src/lib/print-item-button.directive.ts","./projects/ngx-printer/src/lib/print-item-marker.directive.ts","./projects/ngx-printer/src/lib/print-item.directive.ts","./projects/ngx-printer/src/lib/print-item.ts","./projects/ngx-printer/src/lib/print-service-config.ts","./projects/ngx-printer/src/public_api.ts","./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/auth/auth.module.ts","./src/app/auth/auth.routing.ts","./src/app/auth/login/login.component.ts","./src/app/auth/login/login.component.html","./src/app/guards/admin.guard.ts","./src/app/guards/auth.guard.ts","./src/app/guards/waiter.guard.ts","./src/app/guards/waiterPrivate.guard.ts","./src/app/menu/menu.component.ts","./src/app/menu/menu.component.html","./src/app/models/user.model.ts","./src/app/nopagefound/nopagefound.component.ts","./src/app/nopagefound/nopagefound.component.html","./src/app/pages/alquiler/alquiler.component.ts","./src/app/pages/alquiler/alquiler.component.html","./src/app/pages/alquileres/alquileres.component.ts","./src/app/pages/alquileres/alquileres.component.html","./src/app/pages/calendario/calendario.component.ts","./src/app/pages/calendario/calendario.component.html","./src/app/pages/clientes/clientes.component.ts","./src/app/pages/clientes/clientes.component.html","./src/app/pages/comanda/comanda.component.ts","./src/app/pages/comanda/comanda.component.html","./src/app/pages/compra/compra.component.ts","./src/app/pages/compra/compra.component.html","./src/app/pages/compras/compras.component.ts","./src/app/pages/compras/compras.component.html","./src/app/pages/compras/facturas-compras/facturas-compras.component.ts","./src/app/pages/compras/facturas-compras/facturas-compras.component.html","./src/app/pages/configuracion/bancos/bancos.component.ts","./src/app/pages/configuracion/bancos/bancos.component.html","./src/app/pages/configuracion/bodega/bodega.component.ts","./src/app/pages/configuracion/bodega/bodega.component.html","./src/app/pages/configuracion/bodegas/bodegas.component.ts","./src/app/pages/configuracion/bodegas/bodegas.component.html","./src/app/pages/configuracion/caja/caja.component.ts","./src/app/pages/configuracion/caja/caja.component.html","./src/app/pages/configuracion/cierres/cierres.component.ts","./src/app/pages/configuracion/cierres/cierres.component.html","./src/app/pages/configuracion/configuracion.component.ts","./src/app/pages/configuracion/configuracion.component.html","./src/app/pages/configuracion/empresa/empresa.component.ts","./src/app/pages/configuracion/empresa/empresa.component.html","./src/app/pages/configuracion/entradas-salidas/entradas-salidas.component.ts","./src/app/pages/configuracion/entradas-salidas/entradas-salidas.component.html","./src/app/pages/configuracion/impuestos/impuestos.component.ts","./src/app/pages/configuracion/impuestos/impuestos.component.html","./src/app/pages/configuracion/mesas/mesas.component.ts","./src/app/pages/configuracion/mesas/mesas.component.html","./src/app/pages/configuracion/mesas/pisos/pisos.component.ts","./src/app/pages/configuracion/mesas/pisos/pisos.component.html","./src/app/pages/configuracion/parqueadero/parqueadero.component.ts","./src/app/pages/configuracion/parqueadero/parqueadero.component.html","./src/app/pages/configuracion/parqueadero/reportes/reportes.component.ts","./src/app/pages/configuracion/parqueadero/reportes/reportes.component.html","./src/app/pages/configuracion/prestamos/prestamo/prestamo.component.ts","./src/app/pages/configuracion/prestamos/prestamo/prestamo.component.html","./src/app/pages/configuracion/prestamos/prestamos.component.ts","./src/app/pages/configuracion/prestamos/prestamos.component.html","./src/app/pages/configuracion/traslado/traslado.component.ts","./src/app/pages/configuracion/traslado/traslado.component.html","./src/app/pages/configuracion/traslados/traslados.component.ts","./src/app/pages/configuracion/traslados/traslados.component.html","./src/app/pages/configuracion/usuarios/usuarios.component.ts","./src/app/pages/configuracion/usuarios/usuarios.component.html","./src/app/pages/corte/corte.component.ts","./src/app/pages/corte/corte.component.html","./src/app/pages/dashboard/dashboard.component.ts","./src/app/pages/dashboard/dashboard.component.html","./src/app/pages/domicilios/domicilios.component.ts","./src/app/pages/domicilios/domicilios.component.html","./src/app/pages/facturas/credito/credito.component.ts","./src/app/pages/facturas/credito/credito.component.html","./src/app/pages/facturas/factura/factura.component.ts","./src/app/pages/facturas/factura/factura.component.html","./src/app/pages/facturas/facturas.component.ts","./src/app/pages/facturas/facturas.component.html","./src/app/pages/facturas/total/total.component.ts","./src/app/pages/facturas/total/total.component.html","./src/app/pages/inventario/inventario.component.ts","./src/app/pages/inventario/inventario.component.html","./src/app/pages/pages.component.ts","./src/app/pages/pages.component.html","./src/app/pages/pages.module.ts","./src/app/pages/pages.routing.ts","./src/app/pages/pedido/pedido.component.ts","./src/app/pages/pedido/pedido.component.html","./src/app/pages/pedidos/pedidos.component.ts","./src/app/pages/pedidos/pedidos.component.html","./src/app/pages/perfil/perfil.component.ts","./src/app/pages/perfil/perfil.component.html","./src/app/pages/productos/categorias/categorias.component.ts","./src/app/pages/productos/categorias/categorias.component.html","./src/app/pages/productos/departamentos/departamentos.component.ts","./src/app/pages/productos/departamentos/departamentos.component.html","./src/app/pages/productos/eliminados/eliminados.component.ts","./src/app/pages/productos/eliminados/eliminados.component.html","./src/app/pages/productos/kardex/kardex.component.ts","./src/app/pages/productos/kardex/kardex.component.html","./src/app/pages/productos/movimientos/movimientos.component.ts","./src/app/pages/productos/movimientos/movimientos.component.html","./src/app/pages/productos/nuevo/nuevo.component.ts","./src/app/pages/productos/nuevo/nuevo.component.html","./src/app/pages/productos/producto.component.ts","./src/app/pages/productos/producto.component.html","./src/app/pages/productos/productos.component.ts","./src/app/pages/productos/productos.component.html","./src/app/pages/proveedores/proveedores.component.ts","./src/app/pages/proveedores/proveedores.component.html","./src/app/pages/vehiculos/vehiculos.component.ts","./src/app/pages/vehiculos/vehiculos.component.html","./src/app/pages/ventas/mesa/mesa.component.ts","./src/app/pages/ventas/mesa/mesa.component.html","./src/app/pages/ventas/print/print.component.ts","./src/app/pages/ventas/print/print.component.html","./src/app/pages/ventas/ticket/ticket.component.ts","./src/app/pages/ventas/ticket/ticket.component.html","./src/app/pages/ventas/ventas.component.ts","./src/app/pages/ventas/ventas.component.html","./src/app/pipes/divisa.pipe.ts","./src/app/pipes/imagen.pipe.ts","./src/app/pipes/pipes.module.ts","./src/app/pipes/split.pipe.ts","./src/app/services/alquileres.service.ts","./src/app/services/bancos.service.ts","./src/app/services/bascula.service.ts","./src/app/services/bodegas.service.ts","./src/app/services/caja.service.ts","./src/app/services/calendario.service.ts","./src/app/services/cars.service.ts","./src/app/services/categoria.service.ts","./src/app/services/client.service.ts","./src/app/services/compras.service.ts","./src/app/services/dataico.service.ts","./src/app/services/department.service.ts","./src/app/services/domicilios.service.ts","./src/app/services/electronica.service.ts","./src/app/services/empresa.service.ts","./src/app/services/entradas.service.ts","./src/app/services/file-upload.service.ts","./src/app/services/impuestos.service.ts","./src/app/services/invoice.service.ts","./src/app/services/log-products.service.ts","./src/app/services/mesas.service.ts","./src/app/services/parqueo.service.ts","./src/app/services/pedidos.service.ts","./src/app/services/pisos.service.ts","./src/app/services/prestamos.service.ts","./src/app/services/product.service.ts","./src/app/services/proveedores.service.ts","./src/app/services/search.service.ts","./src/app/services/traslados.service.ts","./src/app/services/turno.service.ts","./src/app/services/typeparq.service.ts","./src/app/services/user.service.ts","./src/app/services/vehiculos.service.ts","./src/app/shared/footer/footer.component.ts","./src/app/shared/footer/footer.component.html","./src/app/shared/header/header.component.ts","./src/app/shared/header/header.component.html","./src/app/shared/shared.module.ts","./src/app/shop/shop.component.ts","./src/app/shop/shop.component.html","./src/environments/environment.ts","./src/main.ts","ignored|C:\\laboratorio\\dspos\\restaurante-frontend\\node_modules\\xlsx|crypto","ignored|C:\\laboratorio\\dspos\\restaurante-frontend\\node_modules\\xlsx|fs","ignored|C:\\laboratorio\\dspos\\restaurante-frontend\\node_modules\\xlsx|stream"],"sourcesContent":["export enum ngxPrintMarkerPosition {\r\n    Topleft,\r\n    TopRight,\r\n    BottomLeft,\r\n    BottomRight\r\n}\r\n","import {\r\n  Component,\r\n  OnInit,\r\n  Renderer2,\r\n  ElementRef,\r\n  Output,\r\n  EventEmitter\r\n} from '@angular/core';\r\n\r\n/**\r\n * Component used to render content when printed to current window\r\n */\r\n@Component({\r\n  selector: 'ngx-printer',\r\n  template: `\r\n    <ng-content></ng-content>\r\n  `,\r\n  styleUrls: ['./ngx-printer.component.css']\r\n})\r\nexport class NgxPrinterComponent implements OnInit {\r\n\r\n  private _renderClass = 'default';\r\n  public get renderClass() {\r\n    return this._renderClass;\r\n  }\r\n  public set renderClass(value) {\r\n    this._renderClass = value;\r\n    this.setCustomClass();\r\n  }\r\n\r\n  /**\r\n   * Display single image\r\n   */\r\n  private _imgSrc = 'default';\r\n  public get imgSrc() {\r\n    return this._imgSrc;\r\n  }\r\n  public set imgSrc(value) {\r\n    this._imgSrc = value;\r\n    this.addImage(this._imgSrc);\r\n  }\r\n\r\n  @Output() completed = new EventEmitter<boolean>();\r\n\r\n  constructor(private elementRef: ElementRef, private renderer: Renderer2) {}\r\n\r\n  ngOnInit() {}\r\n\r\n  /**\r\n   * Attach custom class to element\r\n   */\r\n  private setCustomClass() {\r\n    const natElement = this.elementRef.nativeElement;\r\n\r\n    this.renderer.removeClass(natElement, 'default');\r\n    this.renderer.addClass(natElement, this._renderClass);\r\n  }\r\n\r\n  /**\r\n   * Add custom image\r\n   * @param source \r\n   */\r\n  private addImage(source: string) {\r\n    const natElement = this.elementRef.nativeElement;\r\n\r\n    const newImgElement = this.renderer.createElement('img');\r\n    this.renderer.setAttribute(newImgElement, 'src', source);\r\n\r\n    this.renderer.listen(newImgElement, 'load', (evt) => {\r\n      console.log('loading completed', evt);\r\n      this.completed.emit(true);\r\n    });\r\n\r\n    this.renderer.appendChild(natElement, newImgElement);\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { NgxPrinterComponent } from './ngx-printer.component';\r\nimport { PrintServiceConfig } from './print-service-config';\r\nimport { PrintItemDirective } from './print-item.directive';\r\nimport { PrintItemButtonDirective } from './print-item-button.directive';\r\nimport { PrintItemMarkerDirective } from './print-item-marker.directive';\r\nimport { NoPrintDirective } from './no-print.directive';\r\n\r\n@NgModule({\r\n    declarations: [NgxPrinterComponent, PrintItemDirective, PrintItemButtonDirective, PrintItemMarkerDirective, NoPrintDirective],\r\n    imports: [],\r\n    exports: [NgxPrinterComponent, PrintItemDirective, PrintItemButtonDirective, PrintItemMarkerDirective, NoPrintDirective]\r\n})\r\nexport class NgxPrinterModule {\r\n  static forRoot(config: PrintServiceConfig): ModuleWithProviders<NgxPrinterModule> {\r\n    return {\r\n      ngModule: NgxPrinterModule,\r\n      providers: [{ provide: PrintServiceConfig, useValue: config }]\r\n    };\r\n  }\r\n}\r\n","import { ngxPrintMarkerPosition } from './ngx-print-marker-position.enum';\r\nimport { PrintItem } from './print-item';\r\nimport {\r\n  Injectable,\r\n  TemplateRef,\r\n  ComponentFactoryResolver,\r\n  Injector,\r\n  Optional,\r\n  Type\r\n} from '@angular/core';\r\nimport { NgxPrinterComponent } from './ngx-printer.component';\r\nimport { Observable, BehaviorSubject } from 'rxjs';\r\nimport { PrintServiceConfig } from './print-service-config';\r\n\r\nexport type Content<T> = string | HTMLElement | TemplateRef<T> | Type<T>;\r\n\r\n/**\r\n * Main print service\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NgxPrinterService {\r\n  private printWindowOpen = new BehaviorSubject<boolean>(false);\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  private _printItems = new BehaviorSubject<PrintItem[]>([]);\r\n  $printItems = this._printItems.asObservable();\r\n\r\n  private openNgxPrinter: HTMLElement;\r\n\r\n  /**\r\n   * Wait time to render before open print dialog in ms\r\n   * Default is 200\r\n   */\r\n  timeToWaitRender = 200;\r\n\r\n  /**\r\n   * Class used in component when printing to current window\r\n   */\r\n  renderClass = 'default';\r\n\r\n  /**\r\n   * Open new window to print or not\r\n   * Default is true\r\n   */\r\n  printOpenWindow = true;\r\n\r\n  /**\r\n   * Name of root component\r\n   * Default is app-root\r\n   */\r\n  appRootName = 'app-root';\r\n\r\n  /**\r\n   * Do not fire print event - just show preview\r\n   * Default is false\r\n   */\r\n  printPreviewOnly = false;\r\n\r\n  appRoot: HTMLElement;\r\n  appRootDislaySetting = '';\r\n\r\n  $printWindowOpen = this.printWindowOpen.asObservable();\r\n  eventadded = [];\r\n  markerPosition: ngxPrintMarkerPosition;\r\n\r\n\r\n  constructor(\r\n    @Optional() config: PrintServiceConfig,\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector\r\n  ) {\r\n    this.setRootConfigOptions(config);\r\n  }\r\n\r\n  /**\r\n   * Set config from forRoot\r\n   * @param config\r\n   */\r\n  private setRootConfigOptions(config: PrintServiceConfig): void {\r\n    if (config) {\r\n      if (config.printOpenWindow) {\r\n        this.printOpenWindow = config.printOpenWindow;\r\n      }\r\n      if (config.timeToWaitRender) {\r\n        this.timeToWaitRender = config.timeToWaitRender;\r\n      }\r\n      if (config.renderClass) {\r\n        this.renderClass = config.renderClass;\r\n      }\r\n      if (config.appRootName) {\r\n        this.appRootName = config.appRootName;\r\n      }\r\n      if (config.markerPosition) {\r\n        this.markerPosition = config.markerPosition;\r\n      }\r\n      if (config.printPreviewOnly) {\r\n        this.printPreviewOnly = config.printPreviewOnly;\r\n      }\r\n    }\r\n  }\r\n\r\n  /***\r\n   * Print a div identified by its id\r\n   * @example\r\n   * this.printerService.printDiv('printDiv');\r\n   */\r\n  public printDiv(divID: string): void {\r\n    const divToPrint = document.getElementById(divID);\r\n\r\n    if (divToPrint) {\r\n      this.print(divToPrint, this.printOpenWindow);\r\n    } else {\r\n      console.log(`div with id ${divID} not found..`);\r\n    }\r\n  }\r\n\r\n  /***\r\n   * Print an Element identified by its className using getElementsByClassName\r\n   * Prints the first one found\r\n   */\r\n  public printByClassName(className: string): void {\r\n    const elementToPrint = document.getElementsByClassName(className);\r\n\r\n    if (elementToPrint && elementToPrint.length > 0) {\r\n      this.print(<HTMLScriptElement>elementToPrint[0], this.printOpenWindow);\r\n    } else {\r\n      console.log('element with id ${className} not found..');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Print Angular TemplateRef or a Component or String\r\n   * @param contentToPrint\r\n   * @example\r\n   * this.printerService.printAngular(this.PrintTemplateTpl);\r\n   */\r\n  public printAngular(contentToPrint: any, context?: any): void {\r\n    const nativeEl = this.createComponent(contentToPrint, null, context);\r\n\r\n    this.print(nativeEl.nativeElement, this.printOpenWindow);\r\n  }\r\n\r\n  /**\r\n   * Print single img\r\n   * @example\r\n   * this.printerService.printImg('assets/bratwurst.jpg');\r\n   */\r\n  public printImg(imgSrc: string): void {\r\n    const compRef = this.createComponent(null, imgSrc);\r\n    const openNewWindow = this.printOpenWindow;\r\n\r\n    compRef.instance.completed.subscribe(val => {\r\n      compRef.hostView.detectChanges();\r\n      console.log('completed:', val);\r\n      this.print(compRef.location.nativeElement, openNewWindow);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Print an native Element (HTML Element)\r\n   * @param nativeElement\r\n   * @example\r\n   * this.printerService.printHTMLElement(this.PrintComponent.nativeElement);\r\n   */\r\n  public printHTMLElement(nativeElement: HTMLElement): void {\r\n    this.print(nativeElement, this.printOpenWindow);\r\n  }\r\n\r\n  /**\r\n   * Create and render component\r\n   * @param contentToRender\r\n   */\r\n  private createComponent(contentToRender: any, imgSrc?: string, context?: any): any {\r\n    // this.viewContainerRef.clear();\r\n    const factory = this.resolver.resolveComponentFactory(NgxPrinterComponent);\r\n    let componentRef: any;\r\n\r\n    if (contentToRender) {\r\n      if (context === undefined) {\r\n        context = null;\r\n      }\r\n      const ngContent = this.resolveNgContent(contentToRender, context);\r\n      componentRef = factory.create(this.injector, ngContent); // this.viewContainerRef.createComponent(factory);\r\n    } else {\r\n      componentRef = factory.create(this.injector);\r\n    }\r\n    componentRef.instance.renderClass = this.renderClass;\r\n    if (imgSrc) {\r\n      componentRef.instance.imgSrc = imgSrc;\r\n      return componentRef;\r\n    }\r\n\r\n    componentRef.hostView.detectChanges();\r\n    return componentRef.location; // location is native element\r\n  }\r\n\r\n  /**\r\n   * Main print function\r\n   * @param printContent\r\n   */\r\n  private print(printContent: any, printOpenWindow: boolean): void {\r\n    if (printOpenWindow === true) {\r\n      const printContentClone = document.importNode(printContent, true); // printContent.cloneNode(true);\r\n      this.hideBeforePrint(printContentClone);\r\n      this.printInNewWindow(printContentClone);\r\n    }\r\n    if (printOpenWindow === false) {\r\n      const printContentClone = document.importNode(printContent, true); // printContent.cloneNode(true);\r\n      this.hideBeforePrint(printContentClone);\r\n      const nativeEl = this.createComponent(printContentClone).nativeElement;\r\n      this.openNgxPrinter = nativeEl;\r\n      document.body.appendChild(this.openNgxPrinter);\r\n      // window.scrollTo(0, 0);\r\n      this.getAppRoot();\r\n      if (this.appRoot) {\r\n        this.appRoot.style.display = 'none';\r\n      }\r\n\r\n      this.printCurrentWindow();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Print using a new window / tab\r\n   * @param divToPrint\r\n   */\r\n  private printInNewWindow(divToPrint: HTMLElement): void {\r\n    const printWindow = window.open('', 'PRINT');\r\n    const title = document.title;\r\n\r\n    printWindow.document.write(\r\n      '<HTML><HEAD><TITLE>' + title + '</TITLE></HEAD><BODY></BODY></HTML>'\r\n    );\r\n    // printWindow.document.write(document.documentElement.innerHTML);\r\n\r\n    const printWindowDoc = printWindow.document;\r\n    this.copyCss(printWindowDoc);\r\n    printWindowDoc.body.style.margin = '0 0';\r\n    printWindowDoc.body.appendChild(divToPrint);\r\n    printWindow.document.close();\r\n    // printWindowDoc.body.innerHTML = divToPrint.outerHTML;\r\n    setTimeout(\r\n      () => this.printTabWindow(printWindow, printWindowDoc),\r\n      this.timeToWaitRender\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Copy Css links to new page\r\n   * @param printWindow\r\n   */\r\n  private copyCss(printWindowDoc: Document) {\r\n\r\n    const links = document.querySelectorAll('link');\r\n    const styles = document.querySelectorAll('style');\r\n    const base = document.querySelector('base');\r\n\r\n    const targetHead = printWindowDoc.getElementsByTagName('head')[0];\r\n\r\n    if (base) {\r\n      targetHead.appendChild(document.importNode(base, true));\r\n    }\r\n\r\n    links.forEach(link => {\r\n      targetHead.appendChild(document.importNode(link, true));\r\n    });\r\n\r\n    styles.forEach(style => {\r\n      targetHead.appendChild(document.importNode(style, true));\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Print window in new tab\r\n   */\r\n  private printTabWindow(printWindow: Window, printWindowDoc: Document): void {\r\n    if (this.printPreviewOnly) {\r\n      return;\r\n    }\r\n    this.registerPrintEvent(printWindow, true);\r\n    this.printWindowOpen.next(true);\r\n    printWindow.focus(); // necessary for IE >= 10*/\r\n    if (printWindowDoc.execCommand('print') === false) {\r\n      printWindow.print();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Print the whole current window\r\n   */\r\n  public printCurrentWindow(): void {\r\n    if (this.printPreviewOnly) {\r\n      return;\r\n    }\r\n    this.registerPrintEvent(window, false);\r\n    setTimeout(() => {\r\n      this.printWindowOpen.next(true);\r\n      if (document.execCommand('print') === false) {\r\n        window.print();\r\n      }\r\n    }, this.timeToWaitRender);\r\n  }\r\n\r\n  /**\r\n   * Listen to print event of window\r\n   * @param printWindow\r\n   */\r\n  private registerPrintEvent(printWindow: Window, printWithOpenInNewWindow: boolean) {\r\n    const that = this;\r\n    printWindow.focus(); // necessary for IE >= 10*/\r\n\r\n    if (that.eventadded[printWindow.name]) {\r\n      return;\r\n    }\r\n    printWindow.addEventListener('afterprint', () => {\r\n      this.eventadded[printWindow.name] = true;\r\n      // console.log('afterprint');\r\n      if (printWithOpenInNewWindow) {\r\n        that.eventadded[printWindow.name] = false;\r\n      }\r\n      that.cleanUp(printWindow, printWithOpenInNewWindow);\r\n      that.printWindowOpen.next(false);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Close tab or clean up dom\r\n   * @internal\r\n   */\r\n  private cleanUp(printWindow: Window, printOpenWindow: boolean): void {\r\n    if (printOpenWindow === true) {\r\n      console.log('close print window');\r\n      printWindow.close();\r\n      setTimeout(() => {\r\n        printWindow.close();\r\n      }, 20);\r\n    }\r\n    if (printOpenWindow === false) {\r\n        if (!this.openNgxPrinter) {\r\n          return;\r\n        }\r\n        if (document.body.getElementsByTagName('ngx-printer').length === 0) {\r\n          return;\r\n        }\r\n\r\n        if (this.appRoot) {\r\n          if (this.appRootDislaySetting !== '') {\r\n            this.appRoot.style.display = this.appRootDislaySetting;\r\n          } else {\r\n            this.appRoot.style.display = '';\r\n          }\r\n        }\r\n\r\n        document.body.removeChild(this.openNgxPrinter);\r\n        this.openNgxPrinter = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create node or angular component\r\n   * @param content\r\n   * @internal\r\n   */\r\n  private resolveNgContent<T>(content: Content<T>, context: any): any {\r\n    if (typeof content === 'string') {\r\n      const element = document.createTextNode(content);\r\n      return [[element]];\r\n    }\r\n\r\n    if (content instanceof TemplateRef) {\r\n      const viewRef = content.createEmbeddedView(context);\r\n      viewRef.detectChanges();\r\n      return [viewRef.rootNodes];\r\n    }\r\n\r\n    if (content instanceof HTMLElement) {\r\n      return [[content]];\r\n    }\r\n\r\n    /** Otherwise it's a component */\r\n    const factory = this.resolver.resolveComponentFactory(content);\r\n\r\n    const componentRef = factory.create(this.injector);\r\n    componentRef.changeDetectorRef.detectChanges();\r\n    return [[componentRef.location.nativeElement]];\r\n  }\r\n\r\n  /**\r\n   * Hide an element before printing\r\n   * @param parentDiv \r\n   */\r\n  private hideBeforePrint(parentDiv: HTMLElement): void {\r\n\r\n    const childrenOfDiv = parentDiv.querySelectorAll('.no_print_indicator');\r\n\r\n    for (let i = 0; i < childrenOfDiv.length; i++) {\r\n      const child = childrenOfDiv[i] as HTMLElement;\r\n      child.style.display = 'none';\r\n     }\r\n  }\r\n\r\n  /**\r\n   * Search for Angular App Root\r\n   * @internal\r\n   */\r\n  private getAppRoot(): void {\r\n    const appRoot = document.body.getElementsByTagName(this.appRootName);\r\n    if (appRoot.length === 0) {\r\n      return null;\r\n    } else {\r\n      this.appRoot = <HTMLElement> appRoot[0];\r\n      this.appRootDislaySetting = this.appRoot.style.display;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add a new item to print\r\n   * Used by directive\r\n   * @internal\r\n   * @param newPrintItem  HTML id\r\n   */\r\n  public addPrintItem(newPrintItem: PrintItem): void {\r\n    const tmpItems = this._printItems.getValue();\r\n    tmpItems.push(newPrintItem);\r\n    this._printItems.next(tmpItems);\r\n  }\r\n\r\n  /**\r\n   * Delete a print item from service\r\n   * Used by directive\r\n   * @internal\r\n   * @param idOfItemToRemove\r\n   */\r\n  public removePrintItem(idOfItemToRemove: string): void {\r\n    const tmpItems = this._printItems.getValue();\r\n    const newIitems = tmpItems.filter(item => item.id !== idOfItemToRemove);\r\n    this._printItems.next(newIitems);\r\n  }\r\n\r\n    /**\r\n   * Gets a single print item from service\r\n   * Used by directive\r\n   * @internal\r\n   * @param idOfItemToFind\r\n   */\r\n  public getPrintItem(idOfItemToRemove: string): PrintItem {\r\n    const tmpItems = this._printItems.getValue();\r\n    const foundItem = tmpItems.find(item => item.id === idOfItemToRemove);\r\n    return foundItem;\r\n  }\r\n\r\n\r\n  /**\r\n   * Print a print Item\r\n   * @param printItemToPrint\r\n   */\r\n  public printPrintItem(printItemToPrint: PrintItem): void {\r\n    this.printHTMLElement(printItemToPrint.nativeElement);\r\n  }\r\n\r\n  /**\r\n   * Print al list of print Items one after the other\r\n   * @param printItemToPrint\r\n   */\r\n  public printPrintItems(printItemsToPrint: PrintItem[], className?: string): void {\r\n    const newDiv = <HTMLDivElement>document.createElement('div');\r\n\r\n    if (className) {\r\n      newDiv.classList.add(className);\r\n    } else {\r\n      newDiv.style.display = 'flex';\r\n      newDiv.style.flexDirection = 'column';\r\n    }\r\n\r\n    printItemsToPrint.forEach(element => {\r\n      newDiv.appendChild(element.nativeElement.cloneNode(true));\r\n    });\r\n\r\n\r\n    this.printHTMLElement(newDiv);\r\n  }\r\n}\r\n","import { Directive, ElementRef, Renderer2 } from '@angular/core';\r\n\r\n/**\r\n * Directive to mark an element so that it should NOT be printed\r\n */\r\n@Directive({\r\n  selector: '[ngxNoPrint]'\r\n})\r\nexport class NoPrintDirective {\r\n\r\n  constructor(private el: ElementRef, private renderer2: Renderer2) {\r\n    if (this.el) {\r\n      this.renderer2.addClass(this.el.nativeElement, 'no_print_indicator');\r\n    }\r\n   }\r\n}\r\n","import { Directive, ElementRef, Input, OnInit } from '@angular/core';\r\nimport { NgxPrinterService } from './ngx-printer.service';\r\nimport { PrintItem } from './print-item';\r\n\r\n/**\r\n * Directly add function to a button to print an item\r\n */\r\n@Directive({\r\n  selector: '[ngxPrintItemButton]'\r\n})\r\nexport class PrintItemButtonDirective implements OnInit {\r\n\r\n  /**\r\n   * Id of print item to be printed\r\n   */\r\n  @Input()\r\n  printItemId = '';\r\n\r\n  /**\r\n   * html id of div to be printed\r\n   */\r\n  @Input()\r\n  divID = '';\r\n\r\n  /**\r\n   * print item by class name\r\n   */\r\n  @Input()\r\n  className = '';\r\n\r\n  /**\r\n   * print current window\r\n   */\r\n  @Input()\r\n  printWindow = 'false';\r\n\r\n\r\n  constructor(\r\n    private el: ElementRef,\r\n    private printerService: NgxPrinterService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    if (this.el.nativeElement && this.checkInputs()) {\r\n        this.el.nativeElement.addEventListener('click', () => {\r\n        if (this.printItemId !== '') {\r\n          this.prinPrintItem();\r\n        }\r\n        if (this.divID !== '') {\r\n          this.printerService.printDiv(this.divID);\r\n        }\r\n        if (this.className !== '') {\r\n          this.printerService.printByClassName(this.className);\r\n        }\r\n        if (this.printWindow !== 'false') {\r\n          this.printerService.printCurrentWindow();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if at least one property is set\r\n   */\r\n  private checkInputs() {\r\n    const check = !(this.printWindow === 'false' && this.printItemId === '' && this.divID === '' && this.className === '');\r\n    return check;\r\n  }\r\n\r\n  /**\r\n   * print item from print items\r\n   */\r\n  private prinPrintItem() {\r\n    const itemToPrint = this.printerService.getPrintItem(this.printItemId);\r\n    if (itemToPrint) {\r\n      this.printerService.printPrintItem(itemToPrint);\r\n    }\r\n  }\r\n}\r\n","import {\r\n  Directive,\r\n  ElementRef,\r\n  Renderer2,\r\n  OnInit,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n} from '@angular/core';\r\nimport { NgxPrinterService } from './ngx-printer.service';\r\nimport { ngxPrintMarkerPosition } from './ngx-print-marker-position.enum';\r\n\r\n\r\n/**\r\n * Mark an div as printable and provide direct print function\r\n */\r\n@Directive({\r\n  selector: '[ngxPrintItemMarker]',\r\n})\r\nexport class PrintItemMarkerDirective implements OnInit {\r\n  @Input()\r\n  customClass = '';\r\n\r\n  @Input()\r\n  directPrint = false;\r\n\r\n  @Input()\r\n  imgPosition = ngxPrintMarkerPosition.Topleft;\r\n\r\n  /**\r\n   * Data for an svg image used as background url\r\n   * @example\r\n   * backgroundImage = 'data:image/svg+xml;base64,PD9....'\r\n   *\r\n   */\r\n  @Input()\r\n  backgroundImage =\r\n    'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNy4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgNTAgNTAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDUwIDUwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwYXRoIGQ9Ik0zOS4zODcsMjEuNDcxSDMyLjI5VjExLjE5OWMwLTAuNTUzLTAuNDQ3LTEtMS0xSDE3LjQ4NGMtMC41NTMsMC0xLDAuNDQ3LTEsMXYxMC4yNzFIOS4zODdjLTAuNTUzLDAtMSwwLjQ0Ny0xLDFWMzUuNDUNCgljMCwwLjU1MywwLjQ0NywxLDEsMWg2Ljg5NHYzLjU2NWMwLDAuNTUzLDAuNDQ3LDEsMSwxaDEzLjgwNmMwLjU1MywwLDEtMC40NDcsMS0xVjM2LjQ1aDcuMzAxYzAuNTUzLDAsMS0wLjQ0NywxLTFWMjIuNDcxDQoJQzQwLjM4NywyMS45MTgsMzkuOTM5LDIxLjQ3MSwzOS4zODcsMjEuNDcxeiBNMTguNDg0LDEyLjE5OUgzMC4yOXY5LjI3MUgxOC40ODRWMTIuMTk5eiBNMzAuMDg2LDM5LjAxNkgxOC4yOHYtNi4zMjloMTEuODA2VjM5LjAxNg0KCXogTTM4LjM4NywzNC40NWgtNi4zMDF2LTIuNzY0YzAtMC41NTMtMC40NDctMS0xLTFIMTcuMjhjLTAuNTUzLDAtMSwwLjQ0Ny0xLDF2Mi43NjRoLTUuODk0VjIzLjQ3MWg2Ljg5NA0KCWMwLjA2OCwwLjAxNCwwLjEzMSwwLjA0MSwwLjIwMywwLjA0MUgzMS4yOWMwLjA3MiwwLDAuMTM2LTAuMDI3LDAuMjAzLTAuMDQxaDYuODkzVjM0LjQ1eiIvPg0KPC9zdmc+DQo=';\r\n\r\n  imgMainStyles = {\r\n    'background-color': '#c3c3b6',\r\n    height: '16px',\r\n    width: '16px',\r\n    position: 'absolute',\r\n    cursor: 'pointer'\r\n  };\r\n\r\n  imgPositionTopLeft = {\r\n    left: '1px',\r\n    top: '1px',\r\n  };\r\n\r\n  imgPositionTopRight = {\r\n    right: '1px',\r\n    top: '1px',\r\n  };\r\n\r\n  imgPositionBottomLeft = {\r\n    left: '1px',\r\n    bottom: '1px',\r\n  };\r\n\r\n  imgPositionBottomRight = {\r\n    right: '1px',\r\n    bottom: '1px',\r\n  };\r\n\r\n  /**\r\n   * Event fired when marker clicked\r\n   * @emits\r\n   */\r\n  @Output()\r\n  printClicked = new EventEmitter<any>();\r\n\r\n  constructor(\r\n    private el: ElementRef,\r\n    private renderer2: Renderer2,\r\n    private printerService: NgxPrinterService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    const newIndicator = document.createElement('div');\r\n    this.imgPosition = this.printerService.markerPosition;\r\n\r\n    this.addIndicatorDiv(this.el, newIndicator);\r\n\r\n    newIndicator.addEventListener('click', () => {\r\n      if (this.directPrint) {\r\n        const elementToPrint = this.el.nativeElement.getElementsByClassName(\r\n          'print_indicator'\r\n        );\r\n\r\n        if (elementToPrint && elementToPrint.length > 0) {\r\n          this.renderer2.setStyle(elementToPrint[0], 'visibility', 'hidden');\r\n          this.printerService.printHTMLElement(this.el.nativeElement);\r\n          this.renderer2.setStyle(elementToPrint[0], 'visibility', 'visible');\r\n        } else {\r\n          console.log('element with indicator class not found..');\r\n        }\r\n      }\r\n      this.printClicked.emit(true);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Change and add div with Indicator\r\n   * @param el\r\n   * @param newIndicator\r\n   */\r\n  private addIndicatorDiv(el: ElementRef<any>, newIndicator: HTMLDivElement) {\r\n    const natElement = el.nativeElement;\r\n    this.renderer2.addClass(newIndicator, 'print_indicator');\r\n    this.renderer2.setStyle(natElement, 'position', 'relative');\r\n    this.renderer2.appendChild(el.nativeElement, newIndicator);\r\n    if (this.customClass === '') {\r\n      this.setCss(newIndicator);\r\n    } else {\r\n      this.renderer2.addClass(newIndicator, this.customClass);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set the default css properties\r\n   * @param newIndicator\r\n   */\r\n  private setCss(newIndicator: HTMLDivElement) {\r\n    Object.keys(this.imgMainStyles).forEach((element) => {\r\n      newIndicator.style.setProperty(`${element}`, this.imgMainStyles[element]);\r\n    });\r\n\r\n    this.setPosition(newIndicator);\r\n\r\n    const imgUrl = 'url(' + this.backgroundImage + ')';\r\n    newIndicator.style.setProperty(`background-image`, imgUrl);\r\n  }\r\n\r\n  /**\r\n   * Set image position\r\n   * @internal\r\n   * @param newIndicator\r\n   */\r\n  private setPosition(newIndicator: HTMLDivElement) {\r\n    switch (this.imgPosition) {\r\n      case ngxPrintMarkerPosition.Topleft: {\r\n        Object.keys(this.imgPositionTopLeft).forEach((element) => {\r\n          newIndicator.style.setProperty(\r\n            `${element}`,\r\n            this.imgPositionTopLeft[element]\r\n          );\r\n        });\r\n        break;\r\n      }\r\n      case ngxPrintMarkerPosition.TopRight: {\r\n        Object.keys(this.imgPositionTopRight).forEach((element) => {\r\n          newIndicator.style.setProperty(\r\n            `${element}`,\r\n            this.imgPositionTopRight[element]\r\n          );\r\n        });\r\n        break;\r\n      }\r\n      case ngxPrintMarkerPosition.BottomLeft: {\r\n        Object.keys(this.imgPositionBottomLeft).forEach((element) => {\r\n          newIndicator.style.setProperty(\r\n            `${element}`,\r\n            this.imgPositionBottomLeft[element]\r\n          );\r\n        });\r\n        break;\r\n      }\r\n      case ngxPrintMarkerPosition.BottomRight: {\r\n        Object.keys(this.imgPositionBottomRight).forEach((element) => {\r\n          newIndicator.style.setProperty(\r\n            `${element}`,\r\n            this.imgPositionBottomRight[element]\r\n          );\r\n        });\r\n        break;\r\n      }\r\n      default: {\r\n        Object.keys(this.imgPositionTopLeft).forEach((element) => {\r\n          newIndicator.style.setProperty(\r\n            `${element}`,\r\n            this.imgPositionTopLeft[element]\r\n          );\r\n        });\r\n        break;\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Directive, ElementRef, OnInit, OnDestroy, Input } from '@angular/core';\r\nimport { NgxPrinterService } from './ngx-printer.service';\r\nimport { PrintItem } from './print-item';\r\n\r\n/**\r\n * A directive to mark and store an HTML-Element as an item which\r\n * can be printed\r\n * An id has to be set\r\n */\r\n@Directive({\r\n  selector: '[ngxPrintItem]'\r\n})\r\nexport class PrintItemDirective implements OnInit, OnDestroy {\r\n\r\n  /**\r\n   * Optional name to be shown in an component\r\n   */\r\n  @Input()\r\n  printName: string;\r\n\r\n  constructor(private el: ElementRef, private printerService: NgxPrinterService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.el.nativeElement.id) {\r\n      const tmpPrintItem = new PrintItem();\r\n      tmpPrintItem.id = this.el.nativeElement.id;\r\n      tmpPrintItem.nativeElement = this.el.nativeElement;\r\n\r\n      this.printerService.addPrintItem(tmpPrintItem);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.el.nativeElement.id) {\r\n      this.printerService.removePrintItem( this.el.nativeElement.id);\r\n    }\r\n  }\r\n\r\n}\r\n","\r\n/**\r\n * A class to store an item which can be printed\r\n */\r\nexport class PrintItem {\r\n  /**\r\n   * HTML id of anchor\r\n   */\r\n  id: string;\r\n\r\n  /**\r\n   * Optional name\r\n   */\r\n  printDisplayName: string;\r\n\r\n  /**\r\n   * HTML Element\r\n   */\r\n  nativeElement: HTMLElement;\r\n\r\n  constructor() {}\r\n}\r\n","import { ngxPrintMarkerPosition } from './ngx-print-marker-position.enum';\r\n/**\r\n * Config for service - used in forRoot\r\n */\r\nexport class PrintServiceConfig {\r\n  /** Print in a new window or not */\r\n  printOpenWindow ? = true;\r\n\r\n  /** Wait time before opening print dialog */\r\n  timeToWaitRender ? = 200;\r\n\r\n  /** Class name to be used when printing in current window */\r\n  renderClass?: string;\r\n\r\n  /* Name ofapp route component - usally 'app-root' used by print to same window */\r\n  appRootName ?  = 'app-root';\r\n\r\n  /* Default postion for image used in directive printerMarker */\r\n  markerPosition ? = ngxPrintMarkerPosition.Topleft;\r\n\r\n  /* Just show preview without fireing the print command - default is false */\r\n  printPreviewOnly ? = false;\r\n}\r\n","/*\r\n * Public API Surface of ngx-printer\r\n */\r\n\r\nexport * from './lib/ngx-printer.service';\r\nexport * from './lib/ngx-printer.component';\r\nexport * from './lib/ngx-printer.module';\r\nexport * from './lib/ngx-print-marker-position.enum';\r\nexport * from './lib/print-item';\r\nexport * from './lib/print-item.directive';\r\nexport * from './lib/no-print.directive';\r\nexport * from './lib/print-item-button.directive';\r\nexport * from './lib/print-service-config';\r\nexport * from './lib/print-item-marker.directive';\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\n// MODULES\r\nimport { PagesRoutingModule } from './pages/pages.routing';\r\nimport { AuthRoutingModule } from './auth/auth.routing';\r\n\r\n// COMPONENTS\r\nimport { NopagefoundComponent } from './nopagefound/nopagefound.component';\r\nimport { MenuComponent } from './menu/menu.component';\r\nimport { ShopComponent } from './shop/shop.component';\r\n\r\nconst routes: Routes = [\r\n  \r\n  { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\r\n  { path: 'menu/:id', component: MenuComponent },\r\n  { path: 'shop', component: ShopComponent },\r\n  { path: '**', component: NopagefoundComponent }  \r\n\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    RouterModule.forRoot(routes),\r\n    PagesRoutingModule,\r\n    AuthRoutingModule\r\n  ],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent {\r\n  title = 'DSPfrontend';\r\n}\r\n","<router-outlet></router-outlet>","import { BrowserModule } from '@angular/platform-browser';\r\nimport { LOCALE_ID, NgModule } from '@angular/core';\r\n\r\nimport localEs from '@angular/common/locales/es-CO'\r\nimport localeEn from '@angular/common/locales/en';\r\nimport { registerLocaleData } from '@angular/common'\r\n\r\nregisterLocaleData(localEs, 'es-CO');\r\nregisterLocaleData(localeEn, 'en-US');\r\n\r\n// MODULES\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { PagesModule } from './pages/pages.module';\r\nimport { AuthModule } from './auth/auth.module';\r\n\r\n// COMPONENTS\r\nimport { AppComponent } from './app.component';\r\nimport { NopagefoundComponent } from './nopagefound/nopagefound.component';\r\n// import { CalendarModule, DateAdapter  } from 'angular-calendar';\r\n// import { adapterFactory } from 'angular-calendar/date-adapters/date-fns';s\r\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { MenuComponent } from './menu/menu.component';\r\nimport { PipesModule } from './pipes/pipes.module';\r\nimport { ShopComponent } from './shop/shop.component';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    NopagefoundComponent,\r\n    MenuComponent,\r\n    ShopComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    AppRoutingModule,\r\n    PagesModule,\r\n    AuthModule,    \r\n    NgbModule,\r\n    PipesModule,\r\n    FormsModule,\r\n    ReactiveFormsModule\r\n  ],\r\n  providers: [\r\n    { provide: LOCALE_ID, useValue: 'es-CO' },\r\n    { provide: LOCALE_ID, useValue: 'en-US' },\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n// MODULES\r\nimport { RouterModule } from '@angular/router';\r\nimport { HttpClientModule } from '@angular/common/http'\r\n\r\n// COMPONENTS\r\nimport { LoginComponent } from './login/login.component';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    LoginComponent\r\n  ],\r\n  exports: [\r\n    LoginComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule,\r\n    HttpClientModule,\r\n    FormsModule,\r\n    ReactiveFormsModule\r\n  ]\r\n})\r\nexport class AuthModule { }\r\n","import { Routes, RouterModule } from '@angular/router';\r\nimport { NgModule } from '@angular/core';\r\n\r\n// COMPONENTS\r\nimport { LoginComponent } from './login/login.component';\r\n\r\n\r\nconst routes: Routes = [\r\n    { path: 'login', component: LoginComponent }\r\n];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forChild(routes)],\r\n    exports: [RouterModule]\r\n})\r\nexport class AuthRoutingModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { Router } from '@angular/router';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport Swal from 'sweetalert2';\r\n\r\n// SERVICES\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport { environment } from 'src/environments/environment';\r\nimport { Meta, Title } from '@angular/platform-browser';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.css']\r\n})\r\nexport class LoginComponent implements OnInit {\r\n  \r\n  // YEAR\r\n  year = new Date().getFullYear();\r\n  public empresaT = environment.empresa; \r\n \r\n  public loginForm = this.fb.group({\r\n    usuario: [ localStorage.getItem('usuario') || '' , [Validators.required]],\r\n    password: ['', [Validators.required]],\r\n    remember: [false]\r\n  });\r\n  \r\n  constructor(  private router: Router,\r\n                private fb:FormBuilder,\r\n                private userService:UserService,\r\n                private titleService: Title,\r\n                private metaService: Meta ) { }\r\n\r\n  ngOnInit(): void {\r\n    // Configuración SEO\r\n    this.titleService.setTitle(this.empresaT.name);\r\n\r\n    // OpenGraph / Facebook\r\n    this.metaService.updateTag({ \r\n      property: 'og:title', \r\n      content: this.empresaT.name \r\n    });\r\n    \r\n    this.metaService.updateTag({ \r\n      property: 'og:url', \r\n      content: window.location.href \r\n    });\r\n  }\r\n  \r\n  /** ================================================================\r\n   *  LOGIN\r\n  ==================================================================== */\r\n  login(){\r\n\r\n    this.userService.login(this.loginForm.value)\r\n                    .subscribe( ({ok, token}) => {  \r\n                                            \r\n                      localStorage.setItem('token', token);\r\n\r\n                      if ( this.loginForm.get('remember').value ) {\r\n                        localStorage.setItem('usuario', this.loginForm.get('usuario').value);\r\n                      }else {\r\n                        localStorage.removeItem('usuario');\r\n                      }\r\n\r\n                      // INGRESAR\r\n                      this.router.navigateByUrl('/');\r\n                      \r\n                    }, (err) => {                                            \r\n                      Swal.fire('Error', err.error.msg, 'error');\r\n                    });\r\n    \r\n  }\r\n  \r\n}\r\n","<section class=\" login bg-dark animated fadeIn\">\r\n    <main class=\"form-signin\">\r\n        <form _lpchecked=\"1\" id=\"loginForm\" autocomplete=\"off\" [formGroup]=\"loginForm\" (ngSubmit)=\"login()\">\r\n\r\n            <h1 class=\"h3 mb-3 fw-normal text-white-50 text-center\">Iniciar Session</h1>\r\n\r\n            <!-- USER -->\r\n            <div class=\"form-floating mb-3\">\r\n\r\n                <input type=\"text\" formControlName=\"usuario\" class=\"form-control\" id=\"floatingInput\" placeholder=\"Usuario\">\r\n\r\n                <label for=\"floatingInput\">Usuario</label>\r\n            </div>\r\n            <!-- USER -->\r\n            <!-- PASSWORD -->\r\n            <div class=\"form-floating\">\r\n\r\n                <input type=\"password\" formControlName=\"password\" class=\"form-control\" id=\"floatingPassword\" placeholder=\"Contraseña\">\r\n\r\n                <label for=\"floatingPassword\">Contraseña</label>\r\n            </div>\r\n            <!-- PASSWORD -->\r\n\r\n            <!-- REMEMBER -->\r\n            <div class=\"form-check\">\r\n                <input class=\"form-check-input\" formControlName=\"remember\" type=\"checkbox\" value=\"\" id=\"flexCheckDefault\">\r\n                <label class=\"form-check-label text-white-50\" for=\"flexCheckDefault\">\r\n                  Recordar Usuario\r\n                </label>\r\n            </div>\r\n            <!-- REMEMBER -->\r\n\r\n            <!-- BUTTON LOGIN -->\r\n            <button class=\"w-100 btnW waves-effect waves-light m-0 btn-lg btn-primary mt-4\" type=\"submit\">Entrar</button>\r\n            <!-- BUTTON LOGIN -->\r\n\r\n            <p class=\"mt-5 mb-3 text-muted text-center\">© {{empresaT.name}} - {{ year }}</p>\r\n        </form>\r\n    </main>\r\n</section>","import { Injectable } from '@angular/core';\r\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree, Router } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport Swal from 'sweetalert2';\r\n\r\n// SERVICE\r\nimport { UserService } from '../services/user.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AdminGuard implements CanActivate {\r\n  \r\n  constructor(  private userService: UserService,\r\n                private router:Router){}\r\n\r\n  canActivate(\r\n    route: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot): boolean {\r\n\r\n    if (this.userService.role === 'ADMIN') {\r\n      return true;\r\n    }else {\r\n\r\n      Swal.fire('Atención', 'No tienes los privilegios para acceder a este modulo', 'info');\r\n      \r\n      this.router.navigateByUrl('/dashboard');\r\n\r\n      return false;\r\n    }\r\n\r\n\r\n  }\r\n  \r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, Router} from '@angular/router';\r\n\r\nimport { tap } from 'rxjs/operators';\r\n\r\n// SERVICES\r\nimport { UserService } from '../services/user.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthGuard implements CanActivate {\r\n\r\n  constructor(  private userService:UserService,\r\n                private router:Router){}\r\n\r\n  canActivate(\r\n    route: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot) {\r\n\r\n      // RETURN\r\n      return this.userService.validateToken()\r\n        .pipe(\r\n          tap( isauthenticated => {\r\n            if (!isauthenticated) {\r\n              this.router.navigateByUrl('/login');\r\n            }\r\n          })\r\n        );\r\n  }\r\n  \r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree, Router } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport Swal from 'sweetalert2';\r\n\r\n// SERVICES\r\nimport { UserService } from '../services/user.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WaiterGuard implements CanActivate {\r\n\r\n  constructor(  private userService: UserService,\r\n    private router:Router){}\r\n\r\n  canActivate(\r\n    route: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot): boolean {\r\n    \r\n      if (this.userService.role === 'ADMIN' || this.userService.role === 'WAITER' || this.userService.role === 'WAITERALL' || this.userService.role === 'STAFF'  || this.userService.role === 'CASHIER') {\r\n        return true;\r\n      }else {\r\n  \r\n        Swal.fire('Atención', 'No tienes los privilegios para acceder a este modulo', 'info');\r\n        \r\n        this.router.navigateByUrl('/dashboard');\r\n  \r\n        return false;\r\n      }\r\n\r\n  }\r\n  \r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree, Router } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport Swal from 'sweetalert2';\r\n\r\n// SERVICES\r\nimport { UserService } from '../services/user.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WaiterGuardPrivate implements CanActivate {\r\n\r\n  constructor(  private userService: UserService,\r\n    private router:Router){}\r\n\r\n  canActivate(\r\n    route: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot): boolean {\r\n    \r\n      if (this.userService.role === 'WAITER' || this.userService.role === 'WAITERALL') {\r\n        Swal.fire('Atención', 'No tienes los privilegios para acceder a este modulo', 'info');\r\n        \r\n        this.router.navigateByUrl('/dashboard');\r\n  \r\n        return false;\r\n      }else {        \r\n        return true;\r\n      }\r\n\r\n  }\r\n  \r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\n\r\nimport Swal from 'sweetalert2';\r\n\r\n// SERVICES\r\nimport { MesasService } from '../services/mesas.service';\r\nimport { ProductService } from '../services/product.service';\r\nimport { SearchService } from '../services/search.service';\r\nimport { ClientService } from '../services/client.service';\r\nimport { DepartmentService } from '../services/department.service';\r\nimport { EmpresaService } from '../services/empresa.service';\r\n\r\n// INTERFACES\r\nimport { Carrito, LoadCarrito, _notas } from '../interfaces/carrito.interface';\r\n\r\n// MODELS\r\nimport { Mesa, _comanda, _ingredientes } from '../models/mesas.model';\r\nimport { Department } from '../models/department.model';\r\nimport { Product } from '../models/product.model';\r\nimport { Datos } from '../models/empresa.model';\r\n\r\n\r\n@Component({\r\n  selector: 'app-menu',\r\n  templateUrl: './menu.component.html',\r\n  styleUrls: ['./menu.component.css']\r\n})\r\nexport class MenuComponent implements OnInit {\r\n\r\n  constructor(  private mesaService: MesasService,\r\n                private searchService: SearchService,\r\n                private productService: ProductService,\r\n                private departmentService: DepartmentService,\r\n                private clientService: ClientService,\r\n                private empresaService: EmpresaService,\r\n                private activatedRoute: ActivatedRoute,\r\n                private router: Router\r\n                ) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // CARGAR MESA\r\n    this.activatedRoute.params.subscribe( ({id}) => {\r\n\r\n      this.mesaID = id;\r\n      \r\n      this.cargarMesa(id);\r\n      \r\n    });\r\n\r\n  };\r\n\r\n  /** ================================================================\r\n   *  CARGAR DATOS DE LA MESA\r\n  ==================================================================== */\r\n  public mesaID: string;\r\n  public carrito: LoadCarrito[] = [];\r\n  public comanda: LoadCarrito[] = [];\r\n  public comandaTemp: LoadCarrito[] = [];\r\n  public mesa: Mesa;\r\n  public empresa: Datos;\r\n  public total: number = 0;\r\n  public comandas: _comanda[] = [];\r\n  public ingredientes: _ingredientes[] = [];\r\n  public productUp: Carrito[] = [];\r\n  public notas: _notas[] = [];\r\n\r\n  cargarMesa(id:string){\r\n    \r\n    this.mesaService.loadMesaId(id)\r\n        .subscribe( (mesa:any) => {\r\n\r\n          this.mesaID = mesa.mid;\r\n          this.carrito = mesa.carrito;\r\n          this.mesa = mesa;\r\n          \r\n          if( !mesa.menu ){\r\n            this.mesa.menu = false;\r\n          }\r\n          \r\n          this.comandas = mesa.comanda;\r\n\r\n          for (let i = 0; i < mesa.carrito.length; i++) {\r\n\r\n            this.productUp.push({\r\n              product: mesa.carrito[i].product._id,\r\n              qty: mesa.carrito[i].qty,\r\n              price: mesa.carrito[i].price,\r\n              mayor: mesa.carrito[i].mayor,\r\n            });\r\n            \r\n            this.comanda.push({\r\n              product: mesa.carrito[i].product.name,\r\n              tipo: mesa.carrito[i].product.tipo,\r\n              comanda: mesa.carrito[i].product.comanda,\r\n              qty: mesa.carrito[i].qty,\r\n              price: mesa.carrito[i].price\r\n            });\r\n                        \r\n          }\r\n\r\n          this.comandaTemp = this.comanda;\r\n\r\n          // OBTENER NOTAS DE LA COMANDAS\r\n          if (this.mesa.nota.length > 0) {\r\n            this.notas = this.mesa.nota;         \r\n          }else{\r\n            this.notas = [];\r\n          }\r\n          \r\n\r\n          this.sumarTotales();\r\n\r\n          // CARGAR PRODUCTOS\r\n          this.cargarProductos();\r\n          // CARGAR DEPARTAMENTOS\r\n          this.cargarDepartamentos();\r\n          \r\n\r\n        }, (err) => { \r\n          Swal.fire('Error', 'La pagina que estas buscando no existe, ponte en contacto con alguien de la empresa', 'error');\r\n          this.router.navigateByUrl('/404');\r\n          return;\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   *   CARGAR PRODUCTOS\r\n  ==================================================================== */\r\n  // @ViewChild('searchProduct') searchProduct: ElementRef;\r\n  public listaProductos: Product[] = [];\r\n  public listaProductosTemp: Product[] = [];\r\n  public totalProductos: number = 0;\r\n\r\n  public resultado: number = 0;\r\n  public desde: number = 0;\r\n  public cargando: boolean = true;\r\n  public sinResultados: boolean = true;\r\n  public btnAtras: string = '';\r\n  public btnAdelante: string = '';\r\n\r\n  public endPoint: string = `?desde=${this.desde}&status=true`;\r\n  cargarProductos(){\r\n\r\n    this.productService.cargarProductos(this.endPoint)\r\n        .subscribe( ({total, products}) => {\r\n\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (products.length === 0) {\r\n            this.sinResultados = false;\r\n            this.cargando = false;\r\n            this.listaProductos = [];\r\n            this.resultado = 0;\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n        \r\n          this.totalProductos = total;\r\n          this.listaProductos = products;\r\n          this.listaProductosTemp = products;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n\r\n        });\r\n\r\n  };\r\n  \r\n\r\n\r\n  /** ============================================================================================\r\n  * =============================================================================================\r\n  * =============================================================================================\r\n  * =============================================================================================\r\n  * =============================================================================================\r\n  * =============================================================================================\r\n  *  DEPARTAMENTOS - DEPARTAMENTOS - DEPARTAMENTOS - DEPARTAMENTOS\r\n  ==================================================================== */\r\n  public departmentos: Department[] = [];\r\n  public departmentosTemp: Department[] = [];\r\n  public totalDepartamentos: number = 0;\r\n\r\n  cargarDepartamentos(){\r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n\r\n    this.departmentService.loadDepartment()\r\n        .subscribe(({ total, departments }) =>{   \r\n\r\n          this.totalDepartamentos = total;\r\n          this.departmentos = departments;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); }\r\n        )\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CARGAR PRODUCTOS POR CATEGORIA\r\n  ==================================================================== */\r\n  cargarProductosDepartamento(department: string){\r\n\r\n    \r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n    this.productService.cargarProductoDepartamento(department)\r\n        .subscribe(({total, products}) => {\r\n            \r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (products.length === 0) {\r\n            this.sinResultados = false;\r\n            this.cargando = false;\r\n            this.listaProductos = [];\r\n            this.resultado = 0;\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n        \r\n          this.totalProductos = total;\r\n          this.listaProductos = products;\r\n          this.listaProductosTemp = products;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n          \r\n            \r\n        });\r\n\r\n  }\r\n\r\n  /** ============================================================================================\r\n  * =============================================================================================\r\n  * =============================================================================================\r\n  * =============================================================================================\r\n  * =============================================================================================\r\n  * =============================================================================================\r\n  *  CARRITO - CARRITO - CARRITO - CARRITO\r\n  ==================================================================== */\r\n  /** ================================================================\r\n   *  AGREGAR PRODUCTO POR BOTON\r\n  ==================================================================== */\r\n  btnAddProducto( product: any, qty: number, precio: number ){\r\n    \r\n    Swal.fire({\r\n      title: 'Cantidad',\r\n      input: 'text',\r\n      inputAttributes: {\r\n        autocapitalize: 'off'\r\n      },\r\n      showCancelButton: true,\r\n      confirmButtonText: 'Confirmar',\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (resp) => {\r\n        \r\n        return resp;\r\n      }\r\n    }).then((result) => {\r\n\r\n      if (result.value > 0) {\r\n        \r\n        qty = result.value;\r\n\r\n        // GUARDAR AL CARRITO\r\n        this.carritoTemp(product, qty, product.price);\r\n        // GUARDAR AL CARRITO\r\n\r\n        return;\r\n      }else{\r\n        return;\r\n      }                \r\n      \r\n    });\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *  AGREGAR PRODUCTO POR BOTON\r\n  ==================================================================== */\r\n\r\n  carritoTemp( product: any, qty: number, precio: number, nota: string = '' ){ \r\n\r\n    const validarItem = this.productUp.findIndex( (resp) =>{      \r\n      if (resp.product === product.pid ) {\r\n        return true;\r\n      }else {\r\n        return false;\r\n      }\r\n    });\r\n    \r\n    let ivaP:number = 0;\r\n\r\n    if (product.tax) {\r\n\r\n      ivaP = Number(product.price * qty) * Number(product.impuesto[0].valor / 100);      \r\n      \r\n    }\r\n\r\n    if ( validarItem === -1 ) {\r\n\r\n\r\n      // AGREGAMOS EL PRODUCTO\r\n      this.productUp.push({\r\n        product: product.pid,\r\n        qty,\r\n        price: precio,\r\n        iva: ivaP,\r\n        mayor: false\r\n      });\r\n\r\n      // AGREGAMOS A LA COMANDA\r\n      this.comanda.push({\r\n        product: product.name,\r\n        comanda: product.comanda,\r\n        tipo: product.tipo,\r\n        qty,  \r\n        price: precio\r\n      });\r\n      \r\n\r\n    }else{\r\n      \r\n      let qtyTemp = this.productUp[validarItem].qty;\r\n      qtyTemp += Number(qty);\r\n\r\n      let ivaTemp = this.productUp[validarItem].iva;\r\n      ivaTemp += Number(ivaP);\r\n\r\n      this.productUp[validarItem].iva = ivaTemp;\r\n      this.productUp[validarItem].qty = qtyTemp;\r\n      this.comanda[validarItem].qty = qtyTemp;\r\n      \r\n    }\r\n    \r\n    this.mesa.carrito =  this.productUp;\r\n\r\n    // COMANDA NUEVA\r\n    this.ingredientes = [];\r\n    \r\n    if (this.mesa.img === 'mesa.svg') {\r\n      \r\n      // AGREGAR LOS INGREDIENTES\r\n      for (let i = 0; i < product.kit.length; i++) {\r\n        \r\n        this.ingredientes.push({\r\n\r\n          name: product.kit[i].product.name,\r\n          qty: product.kit[i].qty,\r\n          status: true\r\n\r\n        });\r\n        \r\n      }\r\n      \r\n      if (qty > 1) {\r\n\r\n        for (let i = 0; i < qty; i++) {\r\n          this.comandas.push({\r\n            product: product.pid,\r\n            ingredientes: this.ingredientes,\r\n            qty: 1,\r\n            nota: nota,\r\n            estado: 'pendiente'\r\n          });\r\n          \r\n        }\r\n        \r\n      }else{\r\n\r\n        this.comandas.push({\r\n          product: product.pid,\r\n          ingredientes: this.ingredientes,\r\n          qty: 1,\r\n          nota: nota,\r\n          estado: 'pendiente'\r\n        });\r\n\r\n      }\r\n      \r\n\r\n      \r\n    }\r\n\r\n    // GUARDAR LA INFORMACION DE LA COMANDA\r\n    this.mesa.comanda = this.comandas;    \r\n\r\n    this.mesaService.updateMesa(this.mesa, this.mesaID)\r\n        .subscribe( (resp:{ok: boolean, mesa: any}) => { \r\n          \r\n          this.carrito = resp.mesa.carrito;\r\n          this.productUp = [];\r\n          this.comanda = [];\r\n          this.comandas = [];\r\n\r\n          this.comandas = resp.mesa.comanda;\r\n\r\n          for (let i = 0; i < resp.mesa.carrito.length; i++) {\r\n\r\n            this.productUp.push({\r\n              product: resp.mesa.carrito[i].product._id,\r\n              qty: resp.mesa.carrito[i].qty,\r\n              price: resp.mesa.carrito[i].price,\r\n              iva: resp.mesa.carrito[i].iva,\r\n              mayor: resp.mesa.carrito[i].mayor\r\n            });\r\n            \r\n            this.comanda.push({\r\n              product:  resp.mesa.carrito[i].product.name,\r\n              comanda:  resp.mesa.carrito[i].product.comanda,\r\n              tipo:     resp.mesa.carrito[i].product.tipo,\r\n              qty:      resp.mesa.carrito[i].qty,\r\n              price:    resp.mesa.carrito[i].price\r\n            });\r\n                        \r\n          }\r\n          this.comandaTemp = this.comanda;\r\n\r\n          this.sumarTotales();          \r\n\r\n          // this.cargarMesa(this.mesaID);\r\n          \r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  ELIMINAR PRODUCTO DEL CARRITO CARRITO\r\n  ==================================================================== */\r\n  eliminarProductoCarrito( i: number, product ){\r\n\r\n    Swal.fire({\r\n      title: 'Estas Seguro?',\r\n      text: \"De eliminar este producto del carrito!\",\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: 'Si, eliminar!'\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n\r\n        this.productUp.splice(i, 1);\r\n        this.comanda.splice(i, 1);\r\n\r\n        // MODIFICAR COMANDAS\r\n        let comandasTemp = [];\r\n        this.comandas.map( (item:any) => {          \r\n          if (item.product._id !== product._id) {            \r\n            comandasTemp.push(item);            \r\n          }\r\n        });\r\n        this.comandas = comandasTemp;\r\n        // MODIFICAR COMANDAS\r\n\r\n        this.mesa.carrito =  this.productUp;\r\n        this.mesa.comanda = this.comandas;\r\n        \r\n        this.mesaService.updateMesa(this.mesa, this.mesaID)\r\n            .subscribe( (resp:{ok: boolean, mesa: any}) => {\r\n\r\n              this.carrito = resp.mesa.carrito;\r\n              this.productUp = [];\r\n              this.comanda = [];\r\n              \r\n              for (let i = 0; i < resp.mesa.carrito.length; i++) {\r\n\r\n                this.productUp.push({\r\n                  product: resp.mesa.carrito[i].product._id,\r\n                  qty: resp.mesa.carrito[i].qty,\r\n                  price: resp.mesa.carrito[i].price,\r\n                  iva: resp.mesa.carrito[i].iva,\r\n                  mayor: resp.mesa.carrito[i].mayor\r\n                });\r\n                \r\n                this.comanda.push({\r\n                  product: resp.mesa.carrito[i].product.name,\r\n                  comanda: resp.mesa.carrito[i].product.comanda,\r\n                  tipo: resp.mesa.carrito[i].product.tipo,\r\n                  qty: resp.mesa.carrito[i].qty,\r\n                  price: resp.mesa.carrito[i].price\r\n                });\r\n                            \r\n              }\r\n\r\n              this.comandaTemp = this.comanda;\r\n\r\n              this.sumarTotales();\r\n\r\n              // this.cargarMesa(this.mesaID);\r\n\r\n            }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n        \r\n\r\n        Swal.fire('Eliminado!', 'El producto se a eliminado con exito.', 'success');\r\n      }\r\n    })   \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  SUMAR TOTALES\r\n  ==================================================================== */\r\n  public totalCosto:number = 0;\r\n  public iva:number = 0;\r\n  public base:number = 0;\r\n\r\n  sumarTotales(){\r\n    \r\n    this.total = 0;\r\n    this.iva = 0;\r\n    this.totalCosto = 0;\r\n    if (this.carrito.length > 0) {\r\n      \r\n      for (let i = 0; i < this.carrito.length; i++) {\r\n        \r\n        this.total += (this.carrito[i].price * this.carrito[i].qty);\r\n        this.totalCosto += (this.carrito[i].product.cost * this.carrito[i].qty);\r\n        this.iva += this.carrito[i].iva;\r\n\r\n      }\r\n\r\n      this.base = this.total;\r\n\r\n      if (this.empresa?.responsable) {\r\n        this.total = this.total + this.iva;\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  /** =============================================================================================\r\n  * PEDIDOS - PEDIDOS - PEDIDOS - PEDIDOS  \r\n  =========================================================================================== */\r\n  confirmarPedido(confirmacion: boolean){\r\n    \r\n    if (confirmacion) {\r\n      confirmacion = false;\r\n      Swal.fire( 'Atención!', 'Ya el pedido esta confirmado', 'info');\r\n      return;\r\n    }else{\r\n      confirmacion = true;\r\n    }\r\n    \r\n    this.mesaService.updatePedidoMesa(this.mesaID, confirmacion)\r\n        .subscribe( (resp:{ ok: boolean, mesa: Mesa }) => {\r\n\r\n          this.mesa = resp.mesa\r\n          \r\n          Swal.fire('Estupendo', 'Se ha confirmado el pedido exitosamente', 'success');\r\n\r\n        }, (err) => { Swal.fire('Ha ocurrido un error, intente nuevamente!', err.error.msg, 'error'); });\r\n    \r\n\r\n  }\r\n\r\n  \r\n  \r\n\r\n\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","<section class=\"container pb-5\">\r\n\r\n    <div class=\"col-auto\">\r\n        <h1 class=\"text-muted fw-normal display-4\"> {{ mesa?.name }}</h1>\r\n\r\n    </div>\r\n\r\n    <!-- DEPARTAMENTOS -->\r\n    <div class=\"p-2 border-bottom mb-2 d-flex overflow-auto\">\r\n\r\n        <ng-container *ngFor=\"let departamento of departmentos\">\r\n\r\n            <div class=\"p-2\" *ngIf=\"departamento.visibility && departamento.status\">\r\n\r\n                <button type=\"button\" (click)=\"cargarProductosDepartamento(departamento.did)\" class=\"btn bg-white btnW waves-effect waves-blue text-muted p-2 text-wrap\"> \r\n                    <img class=\"avatar avatar-xs\" style=\"max-height: 50px; width: auto;\" [src]=\"departamento.img | imagen:'department'\" class=\"card-img-top\" alt=\"...\">\r\n                    <span class=\"fw-bolder \" >{{ departamento.name }}</span>\r\n                </button>\r\n\r\n            </div>\r\n\r\n        </ng-container>\r\n\r\n\r\n    </div>\r\n    <!-- DEPARTAMENTOS -->\r\n\r\n    <button (click)=\" cargarProductos()\" type=\"button\" class=\"btn btn-outline-success mb-3\"> Recargar </button>\r\n\r\n\r\n    <!-- PRODUCTOS -->\r\n    <div class=\"col-12 p-0 align-self-start pb-5\">\r\n\r\n\r\n\r\n        <!-- MENU -->\r\n        <div class=\"d-flex justify-content-center flex-wrap gap-2\">\r\n\r\n            <div *ngIf=\"listaProductos.length < 1\" class=\"py-4\">\r\n                <h4 class=\"text-muted\">Sin Resultados</h4>\r\n            </div>\r\n\r\n            <ng-container *ngFor=\"let producto of listaProductos\">\r\n\r\n                <div class=\"card\" style=\"width: 12rem;\" *ngIf=\"producto.visibility\">\r\n                    <div class=\"position-absolute ms-2 mt-2\">\r\n                        <span *ngIf=\"producto.low && !producto.out\" class=\"badge rounded-pill bg-warning text-dark\">Bajo</span>\r\n                        <span *ngIf=\"producto.out && producto.type !== 'Paquete'\" class=\"badge rounded-pill bg-danger\">Agotado</span>\r\n                        <span *ngIf=\"producto.vencido\" class=\"badge rounded-pill bg-warning\">Vencido</span>\r\n                    </div>\r\n\r\n                    <img class=\"avatar-xxl avatar-img avatar-redondo-lg mx-auto\" style=\"height: 180px; width: auto;\" [src]=\"producto.img | imagen:'products'\" class=\"card-img-top\" alt=\"...\">\r\n\r\n                    <div class=\"card-body py-2 px-2 d-flex align-items-start flex-column\">\r\n\r\n\r\n\r\n                        <div>\r\n                            <p class=\"mb-0\">cant. {{ producto.stock + ( producto.returned || 0 ) + ( producto.bought || 0 ) - (producto.sold || 0) - ( producto.damaged || 0) | number }}</p>\r\n                            <h5 class=\"card-title mb-1\">{{ producto.name }}</h5>\r\n                        </div>\r\n\r\n                        <div class=\"mt-auto w-100\">\r\n\r\n                            <p class=\"mb-0 text-success\">{{ producto.price | currency: 'COP' }}</p>\r\n\r\n                            <button type=\"button\" [disabled]=\"producto.out &&  \r\n                                            producto.type !== 'Paquete' || producto.vencido\" (click)=\"btnAddProducto( producto, 1, producto.price )\" class=\"btn btn-link btn-primary text-white w-100 mx-auto\" style=\"font-size: 1rem;\">\r\n\r\n                                        <i class=\"bi bi-cart-plus\"></i>\r\n\r\n                                    </button>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </ng-container>\r\n\r\n\r\n        </div>\r\n        <!-- MENU -->\r\n\r\n    </div>\r\n    <!-- PRODUCTOS -->\r\n\r\n    <!-- CARRITO -->\r\n\r\n    <!-- Modal -->\r\n    <div class=\"modal fade\" id=\"Carrito\" tabindex=\"-1\" aria-labelledby=\"CarritoLabel\" aria-hidden=\"true\">\r\n        <div class=\"modal-dialog modal-dialog-centered\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\" id=\"CarritoLabel\"> Pedido </h5>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n\r\n                    <button type=\"button\" (click)=\"confirmarPedido(mesa?.menu)\" class=\"btn mb-3\" [ngClass]=\"{'btn-success': mesa?.menu, 'btn-info': !mesa?.menu}\">\r\n                        <span *ngIf=\"!mesa?.menu\">\r\n                            <i class=\"bi bi-check2\"></i>\r\n                            Confirmar pedido\r\n                        </span>\r\n\r\n                        <span *ngIf=\"mesa?.menu\">\r\n                            <i class=\"bi bi-check2-all\"></i>\r\n                            Pedido Confirmado\r\n                        </span>\r\n\r\n                    </button>\r\n\r\n                    <div class=\"table-responsive\">\r\n\r\n                        <table class=\"table table-sm table-striped align-middle\">\r\n                            <thead>\r\n                                <tr class=\"align-middle\">\r\n                                    <th scope=\"col\"></th>\r\n                                    <th scope=\"col\">Nombre</th>\r\n                                    <th scope=\"col\">Precio</th>\r\n                                    <th scope=\"col\">Cantidad</th>\r\n                                    <th scope=\"col\">Monto</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n\r\n                                <tr *ngIf=\"carrito.length === 0\">\r\n                                    <th scope=\"row\" colspan=\"5\"> No has seleccionado ningun producto</th>\r\n                                </tr>\r\n\r\n                                <tr *ngFor=\"let producto of carrito\">\r\n                                    <td>\r\n                                        <button [disabled]=\"mesa?.menu\" (click)=\"eliminarProductoCarrito(i, producto.product)\" class=\"btn btn-link p-1 text-danger\"><i class=\"bi-trash\" style=\"font-size: 0.9rem\"></i></button>\r\n                                    </td>\r\n                                    <th scope=\"row\"> {{ producto.product.name }} </th>\r\n                                    <td> {{ producto.price | currency: 'COP' }} </td>\r\n                                    <td> {{ producto.qty | number }} </td>\r\n                                    <td> {{ (producto.qty * producto.price) | currency: 'COP' }} </td>\r\n                                </tr>\r\n\r\n                            </tbody>\r\n                            <tfoot>\r\n                                <tr>\r\n                                    <td colspan=\"4\" class=\"text-end\"> <span class=\"fw-bold\">TOTAL</span> </td>\r\n                                    <td> <span class=\"fw-bold\"> {{ this.total | currency: 'COP' }} </span> </td>\r\n                                </tr>\r\n                            </tfoot>\r\n                        </table>\r\n                    </div>\r\n\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- CARRITO -->\r\n\r\n\r\n    <nav class=\"navbar fixed-bottom navbar-light bg-light \">\r\n        <div class=\"container-fluid\">\r\n            <a class=\"navbar-brand fw-bolder\" href=\"#\">TOTAL: <span class=\"fw-bold text-success\"> {{ total | currency: 'COP' }} </span> </a>\r\n\r\n            <button class=\"btn btn-primary\" type=\"button\" data-bs-toggle=\"modal\" data-bs-target=\"#Carrito\"> <i class=\"bi-list\"></i> </button>\r\n\r\n        </div>\r\n    </nav>\r\n\r\n</section>","import { environment } from \"../../environments/environment\"\r\nimport { _privilegios } from '../interfaces/load-users.interface';\r\n\r\nconst base_url = environment.base_url;\r\n\r\n\r\n\r\nexport class User {    \r\n\r\n    constructor(\r\n        public usuario: string,\r\n        public name: string,\r\n        public password?: string,\r\n        public role?: 'ADMIN' | 'STAFF' | 'CASHIER' | 'WAITER' | 'WAITERALL',\r\n        public img?: string,\r\n        public uid?: string,\r\n        public status?: boolean,\r\n        public cerrada?: boolean,\r\n        public turno?: string,\r\n        public privilegios?: _privilegios,\r\n    ){}\r\n\r\n    /** ================================================================\r\n    *   GET IMAGE\r\n    ==================================================================== */    \r\n    get getImage(){        \r\n        \r\n        if (this.img) {            \r\n            return `${base_url}/uploads/user/${this.img}`;\r\n        }else{\r\n            return `${base_url}/uploads/user/no-image`;\r\n        }\r\n    }\r\n\r\n};","import { Component, OnInit } from '@angular/core';\r\nimport { MesasService } from '../services/mesas.service';\r\nimport { Router } from '@angular/router';\r\nimport { Mesa } from '../models/mesas.model';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-nopagefound',\r\n  templateUrl: './nopagefound.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class NopagefoundComponent implements OnInit {\r\n\r\n  constructor(  private mesaService: MesasService,\r\n                private router: Router) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // CARGAR MESAS\r\n    this.cargarMesas();\r\n\r\n  }\r\n\r\n  // Cargar Mesas\r\n  public mesas: Mesa[] = [];\r\n  cargarMesas(){\r\n    this.mesaService.loadMesas()\r\n        .subscribe( ({mesas}) => {\r\n\r\n          this.mesas = mesas;         \r\n\r\n        }, (err) => { Swal.fire('Error', 'Hemos tenido un error, intente de nuevo porfavor!', 'error'); });\r\n  }\r\n\r\n  // Seleccionar Mesa\r\n  selectMesa(id: string){\r\n    this.router.navigateByUrl(`menu/${id}`);\r\n    return;\r\n  }\r\n\r\n}\r\n","<div class=\"d-flex col-12 align-items-center text-center text-wrap vh-100\">\r\n\r\n    <div class=\"mx-auto\">\r\n\r\n        <img class=\"w-75 \" src=\"../../assets/img/404.svg\" alt=\"error\">\r\n        <h3 class=\"text-muted mb-0 display-4 fw-bold\"> Ooooops! </h3>\r\n        <h4 class=\"text-muted mb-2 display-5 \"> Lo sentimos... </h4>\r\n        <p class=\"mb-0 text-muted\">Pagina Web no encontrada</p>\r\n        <p class=\"mb-0 text-muted\">Ponte en contacto con nuestro personal</p>\r\n\r\n        <hr>\r\n        <h4><small class=\"text-muted\">O selecciona la mesa donde te encuentras</small></h4>\r\n\r\n        <select class=\"form-select form-select-lg mb-3\" (change)=\"selectMesa(select.value)\" aria-label=\"form-select-lg example\" #select>\r\n          <option selected>Seleccionar mesa</option>\r\n\r\n          <ng-container *ngFor=\"let mesa of mesas\">\r\n              <option [value]=\"mesa.mid\" *ngIf=\"mesa.img === 'mesa.svg'\" > {{ mesa.name }} </option>\r\n          </ng-container>\r\n          \r\n        </select>\r\n\r\n\r\n\r\n    </div>\r\n\r\n\r\n\r\n</div>","import { Component, OnInit, TemplateRef, ViewChild, ElementRef } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Subscription, Observable } from 'rxjs';\r\nimport Swal from 'sweetalert2';\r\n\r\n// PRINTER\r\nimport { NgxPrinterService } from 'projects/ngx-printer/src/lib/ngx-printer.service';\r\nimport { PrintItem } from 'projects/ngx-printer/src/lib/print-item';\r\nimport { ngxPrintMarkerPosition } from 'projects/ngx-printer/src/public_api';\r\n\r\n// MODELS\r\nimport { Alquiler, _Items } from 'src/app/models/alquileres.model';\r\nimport { Banco } from 'src/app/models/bancos.model';\r\nimport { Datos } from 'src/app/models/empresa.model';\r\nimport { Product } from 'src/app/models/product.model';\r\nimport { User } from 'src/app/models/user.model';\r\n\r\n// SERVICES\r\nimport { AlquileresService } from 'src/app/services/alquileres.service';\r\nimport { BancosService } from 'src/app/services/bancos.service';\r\nimport { EmpresaService } from 'src/app/services/empresa.service';\r\nimport { TurnoService } from 'src/app/services/turno.service';\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport { LoadTurno } from 'src/app/interfaces/load-turno.interface';\r\nimport { MesasService } from 'src/app/services/mesas.service';\r\nimport { Mesa } from 'src/app/models/mesas.model';\r\nimport { DataicoInterface } from 'src/app/interfaces/dataico.interface';\r\nimport { Impuestos } from 'src/app/models/impuestos.model';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { ImpuestosService } from 'src/app/services/impuestos.service';\r\nimport { DataicoService } from 'src/app/services/dataico.service';\r\nimport { ElectronicaService } from 'src/app/services/electronica.service';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Carrito, LoadCarrito } from 'src/app/interfaces/carrito.interface';\r\nimport { LoadInvoice } from 'src/app/interfaces/invoice.interface';\r\nimport { InvoiceService } from 'src/app/services/invoice.service';\r\nimport { ProductService } from 'src/app/services/product.service';\r\n\r\ninterface _Department {\r\n  codigo: string,\r\n  departamento: string,\r\n}\r\n\r\n@Component({\r\n  selector: 'app-alquiler',\r\n  templateUrl: './alquiler.component.html',\r\n  styleUrls: ['./alquiler.component.css']\r\n})\r\nexport class AlquilerComponent implements OnInit {\r\n\r\n  @ViewChild('PrintTemplate')\r\n  private PrintTemplateTpl: TemplateRef<any>;\r\n\r\n  title = 'ngx-printer-demo';\r\n\r\n  printWindowSubscription: Subscription;\r\n  $printItems: Observable<PrintItem[]>;\r\n\r\n  public user: User;\r\n\r\n  constructor(  private activateRoute: ActivatedRoute,\r\n                private alquileresService: AlquileresService,\r\n                private bancosService: BancosService,\r\n                private empresaService: EmpresaService,\r\n                private printerService: NgxPrinterService,\r\n                private userService: UserService,\r\n                private turnoService: TurnoService,\r\n                private mesasService: MesasService,\r\n                private modal: NgbModal,\r\n                private impuestosService: ImpuestosService,\r\n                private dataicoService: DataicoService,\r\n                private electronicaService: ElectronicaService,\r\n                private http: HttpClient,\r\n                private invoiceService: InvoiceService,\r\n                private productService: ProductService) { \r\n\r\n                activateRoute.params.subscribe( ({id}) => {\r\n                  this.loadAlquiler(id);                  \r\n                })\r\n\r\n                this.printWindowSubscription = this.printerService.$printWindowOpen.subscribe(\r\n                  val => {\r\n                    console.log('Print window is open:', val);\r\n                  }\r\n                );\r\n            \r\n                this.$printItems = this.printerService.$printItems;\r\n\r\n                this.user = userService.user;\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    \r\n    // CARGAR DATOS\r\n    this.cargarDatos();\r\n\r\n    // CARGAR BANCOS\r\n    this.cargarBancos();\r\n\r\n    // CARGAR BANCOS\r\n    this.cargarTurno();\r\n\r\n    // CARGAR BANCOS\r\n    this.cargarMesasAll();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  OBTENER DEPARTAMENTOS Y CIUDADES\r\n  ==================================================================== */\r\n  public departments: _Department[] = [];\r\n  public cities: any[] = [];\r\n  loadDepartmentAndCitys(){\r\n\r\n    this.http.get('assets/json/departamentos.json')\r\n        .subscribe( (data: any) => {          \r\n          this.departments = data;            \r\n        });\r\n\r\n    this.http.get('assets/json/ciudades.json')\r\n    .subscribe( (data: any) => {          \r\n      this.cities = data;          \r\n    })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  OBTENER CIUDADES DEPENDIENDO DEL DEPARTAMENTO\r\n  ==================================================================== */\r\n  public ListCities: any[] = [];\r\n  searchCities(department: string){\r\n\r\n    this.ListCities = [];\r\n\r\n    if (department.length === 0 ) {\r\n      return;\r\n    }\r\n\r\n    this.ListCities = this.cities.filter( city =>  department === city.departamento );\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  OBTENER DATOS DE LA FACTURA ELECTRONICA\r\n  ==================================================================== */\r\n  public dataDataico: boolean = false;\r\n  public dataico: DataicoInterface;\r\n  loadDataDataico(){\r\n\r\n    this.dataicoService.loadDataDataico()\r\n        .subscribe( ({dataico}) => {\r\n\r\n          delete dataico.actions._id;\r\n          delete dataico.actions.email;\r\n          delete dataico.actions.attachments;\r\n          delete dataico.datid;\r\n          delete dataico.customer;\r\n          delete dataico.numbering._id;\r\n\r\n          if (dataico) {\r\n            this.dataDataico = true;\r\n            this.dataico = dataico;\r\n          }          \r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          \r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR IMPUESTOS\r\n  ==================================================================== */\r\n  public impuestos: Impuestos[] = [];\r\n  cargarImpuestos(){\r\n\r\n    this.impuestosService.loadImpuestos()\r\n        .subscribe( ({taxes}) => {\r\n          this.impuestos = taxes;\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR TODAS LAS MESAS\r\n  ==================================================================== */\r\n  public totalMesas: Mesa[] = [];\r\n  cargarMesasAll(){\r\n\r\n    this.mesasService.loadMesas(0)\r\n        .subscribe( ({mesas}) => {\r\n          \r\n          for (const mesa of mesas) {\r\n            if (mesa.disponible) {\r\n              this.totalMesas.push(mesa);\r\n            }\r\n          }  \r\n        });\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR TURNO\r\n  ==================================================================== */\r\n  public turno: LoadTurno;\r\n  cargarTurno(){\r\n\r\n    this.turnoService.getTurnoId(this.user.turno)\r\n        .subscribe( (turno) => {\r\n          this.turno = turno;\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ABRIR CAJA\r\n  ==================================================================== */\r\n  abrirCaja(){\r\n    \r\n    if (!this.user.cerrada) {\r\n      Swal.fire('Ya existe una caja abierta', 'Debes de cerrar caja para poder abrir he iniciar un turno nuevo', 'warning');\r\n      return;\r\n    }\r\n    \r\n    Swal.fire({\r\n      title: 'Monto Inicial de caja',\r\n      input: 'text',\r\n      inputAttributes: {\r\n        autocapitalize: 'off'\r\n      },\r\n      showCancelButton: true,\r\n      confirmButtonText: 'Confirmar',\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (resp) => {\r\n        \r\n        return resp;\r\n      }\r\n      }).then((result) => {\r\n\r\n        if (result.value > 0) {\r\n\r\n          const initial:number = result.value;\r\n\r\n          const open = {\r\n            initial\r\n          };\r\n\r\n          this.turnoService.createCaja(open)\r\n              .subscribe( (resp:{ ok:boolean, turno:any}) => {\r\n\r\n                this.userService.user.turno = resp.turno.tid;\r\n                this.userService.user.cerrada = false;\r\n                \r\n              });  \r\n              \r\n          return;\r\n        }else{\r\n          return;\r\n        }                \r\n        \r\n    });\r\n\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR BANCOS\r\n  ==================================================================== */\r\n  public bancos: Banco[] = [];\r\n  cargarBancos(){\r\n\r\n    this.bancosService.loadBancos()\r\n        .subscribe( ({bancos}) => {\r\n\r\n          this.bancos = bancos.filter( banco => banco.status === true);          \r\n\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   IMPRIMIR\r\n  ==================================================================== */\r\n  printDiv() {\r\n    this.printerService.printDiv('printDiv');\r\n  }\r\n\r\n  /** ================================================================\r\n   *   IMPRIMIR\r\n  ==================================================================== */\r\n  printDiv2() {\r\n    this.printerService.printDiv('printDiv2');\r\n    setTimeout( () => {\r\n      // Swal.fire('Success', `Se ha creado la factura <strong> #${ this.factura.invoice }</strong>, exitosamente`, 'success');\r\n      Swal.fire({\r\n        icon: 'success',\r\n        title: `Factura #${ this.factura.invoice }`,\r\n        text: `Se ha creado exitosamente`,\r\n        showDenyButton: false,\r\n        showCancelButton: false,\r\n        confirmButtonText: `ok`,\r\n      }).then((result) => {\r\n        window.location.reload();\r\n      })       \r\n    },1500);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR DATOS DE LA EMPRESA\r\n  ==================================================================== */\r\n  public empresa: Datos;\r\n  cargarDatos(){\r\n\r\n    this.empresaService.getDatos()\r\n        .subscribe( datos => {\r\n          this.empresa = datos;\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR ALQUILER\r\n  ==================================================================== */\r\n  public alquiler: Alquiler;\r\n  loadAlquiler(id: string){\r\n\r\n    this.alquileresService.loadAlquilerId(id)\r\n        .subscribe( ({alquiler}) => {\r\n          \r\n          this.alquiler = alquiler;\r\n          \r\n          // CALCULAR LOS DIAS\r\n          this.alquiler.items.map( (item) => {\r\n\r\n            let desde: any = `${new Date(item.desde).getFullYear()}-${new Date(item.desde).getMonth()+1}-${new Date(item.desde).getDate()}`;\r\n            let hasta: any = `${new Date().getFullYear()}-${new Date().getMonth()+1}-${new Date().getDate()}`;\r\n\r\n            if (item.entregado && item.hasta) {\r\n              hasta = `${new Date(item.hasta).getFullYear()}-${new Date(item.hasta).getMonth()+1}-${new Date(item.hasta).getDate()}`;\r\n            }\r\n\r\n            let dias = ((new Date(hasta).getTime() - new Date(desde).getTime())/(1000*60*60*24));\r\n            \r\n            item.dias = dias;\r\n\r\n          });\r\n\r\n          this.sumarTotales();\r\n          \r\n\r\n        }, (err) => { \r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SUMAR TOTALES\r\n  ==================================================================== */\r\n  public amount: number = 0;\r\n  public totalPagos: number = 0;\r\n  sumarTotales(){\r\n\r\n    this.amount = 0;\r\n    this.totalPagos = 0;\r\n\r\n    // SUMAR LOS MONTOS DE LOS PRODUCTOS\r\n    for (const item of this.alquiler.items) {\r\n      this.amount += ((item.price * item.qty) * item.dias);\r\n    }\r\n\r\n    // SUMAR LOS PAGOS\r\n    for (const payment of this.alquiler.payments) {\r\n      this.totalPagos += payment.amount;\r\n    }\r\n\r\n    this.vueltos = this.amount - this.totalPagos;\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ENTREGA DE PRODUCTOS\r\n  ==================================================================== */\r\n  entregaProductos(item: _Items){\r\n\r\n    Swal.fire({\r\n      title: `Cantidad de ${item.product.name} entregada`,\r\n      input: 'number',\r\n      inputValue: `${item.qty}`,\r\n      inputAttributes: {\r\n        autocapitalize: 'off'\r\n      },\r\n      showCancelButton: true,\r\n      confirmButtonText: 'Confirmar',\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (qty) => {\r\n        return qty\r\n      },\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n\r\n        if (Number(result.value) === Number(item.qty)) {\r\n\r\n          this.alquiler.items.map( (itemM) => {\r\n            if (item.product === item.product) {\r\n              itemM.entregado = true;\r\n            }\r\n          });          \r\n          \r\n        }else{\r\n\r\n          this.alquiler.items.map( (itemM) => {\r\n            if (itemM.product === item.product) {\r\n              itemM.entregado = true;\r\n              itemM.hasta = new Date();\r\n            }\r\n          });\r\n\r\n          this.alquiler.items.push({\r\n            product   : item.product,\r\n            qty       : (Number(item.qty) - Number(result.value)),\r\n            price     : item.price,\r\n            desde     : new Date(),\r\n            entregado : false\r\n          })\r\n          \r\n        }\r\n\r\n        this.alquileresService.updateAlquiler({items: this.alquiler.items}, this.alquiler.alid)\r\n            .subscribe( ({alquiler}) => {\r\n\r\n              \r\n              // RETORNAS PRODUCTOS\r\n              let inventario:number = Number(item.product.inventario + Number(result.value));\r\n              let out = false;\r\n              let low = false;\r\n\r\n              if (inventario <= 0) {\r\n                out = true;\r\n              }else if( inventario < item.product.min &&  inventario > 0){\r\n                out = false;\r\n                low = true;\r\n              }\r\n              \r\n              let update = {\r\n                inventario, \r\n                code: item.product.code, \r\n                name: item.product.name, \r\n                low, \r\n                out\r\n              }\r\n\r\n              this.productService.actualizarProducto( update, item.product._id )\r\n                  .subscribe( (resp) => {\r\n                    \r\n                    this.loadAlquiler(this.alquiler.alid);\r\n                    Swal.fire('Estupendo', 'Se a agregado los items que faltaron por agregar', 'success');\r\n              \r\n                    \r\n                  }, (err) => {\r\n                    console.log(err);\r\n                    \r\n                  })\r\n\r\n            }, (err) => {\r\n              console.log(err);\r\n              Swal.fire('Error', err.error.msg, 'error');\r\n              \r\n            })\r\n        \r\n        \r\n      }\r\n    })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   AGREGAR PAGOS\r\n  ==================================================================== */\r\n  @ViewChild('montoAdd') montoAdd: ElementRef;\r\n  public vueltos: number = 0;\r\n  agregarPagos(type: string, description:string = ''){\r\n\r\n    let amount = Number(this.montoAdd.nativeElement.value);\r\n\r\n    if ((this.totalPagos + amount) > this.amount ) {\r\n      this.vueltos = (this.totalPagos + amount) - this.amount;\r\n      amount = this.amount - this.totalPagos;\r\n    }\r\n\r\n    this.alquiler.payments.push({\r\n      type,\r\n      amount,\r\n      description,\r\n      fecha: new Date(),\r\n      turno: this.user.turno\r\n    });\r\n\r\n    this.sumarTotales();\r\n\r\n    this.alquileresService.updateAlquiler({payments: this.alquiler.payments}, this.alquiler.alid!)\r\n        .subscribe( ({alquiler}) => {\r\n          \r\n          let validarAl = this.turno.alquileres.find( (alq) => {\r\n\r\n            if (alq.alquiler === this.alquiler.alid!) {\r\n              return alq;\r\n            }\r\n\r\n          });\r\n          if (validarAl) {\r\n            Swal.fire('Estupendo', 'Se ha agregado el pago correctamente', 'success');\r\n            return;\r\n          }         \r\n\r\n          this.turno.alquileres.push({alquiler: this.alquiler.alid!});\r\n\r\n          this.turnoService.updateTurno( {alquileres: this.turno.alquileres}, this.turno.tid )\r\n              .subscribe( (turno) => {\r\n\r\n                Swal.fire('Estupendo', 'Se ha agregado el pago correctamente', 'success');\r\n              }, (err) => {\r\n                console.log(err);\r\n                Swal.fire('Error', err.error.msg, 'error');\r\n              });          \r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n          \r\n        })\r\n    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ELIMINAR PAGOS\r\n  ==================================================================== */\r\n  eliminarPagos(i: number){\r\n\r\n    Swal.fire({\r\n      title: 'Estas seguro de eliminar este pago',\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: 'Si, eliminar!'\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n\r\n        this.alquiler.payments.splice(i, 1);\r\n        this.sumarTotales();\r\n\r\n        this.alquileresService.updateAlquiler({payments: this.alquiler.payments}, this.alquiler.alid!)\r\n        .subscribe( ({alquiler}) => {\r\n\r\n          Swal.fire('Estupendo', 'Se ha eliminado el pago correctamente', 'success');\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n          \r\n        })\r\n      }\r\n    })    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   LIQUIDAR\r\n  ==================================================================== */\r\n  public itemsReturn: _Items[] = [];\r\n  liquidar(pago: number, typePay: string){\r\n\r\n    for (const item of this.alquiler.items) {\r\n      this.itemsReturn.push(item);\r\n    }\r\n\r\n    this.returnProduct();\r\n\r\n    setTimeout( () => {\r\n\r\n      this.alquiler.items.map( (itemM) => {\r\n        if (!itemM.entregado) {\r\n          itemM.entregado = true;\r\n          itemM.hasta = new Date();\r\n        }\r\n      })\r\n  \r\n      this.alquiler.finalizada = true;\r\n      \r\n      let update: any = {\r\n        items: this.alquiler.items, \r\n        finalizada: this.alquiler.finalizada,\r\n      }\r\n  \r\n      if (pago > 0) {\r\n        this.alquiler.payments.push({\r\n          type: typePay,\r\n          amount: pago,\r\n          description: '',\r\n          fecha: new Date()\r\n        });\r\n        update.payments = this.alquiler.payments;\r\n      }\r\n  \r\n      this.alquileresService.updateAlquiler(update, this.alquiler.alid!)\r\n          .subscribe( ({alquiler}) => {\r\n            this.loadAlquiler(this.alquiler.alid!);\r\n        \r\n          }, (err) => {\r\n            console.log(err);\r\n            Swal.fire('Error', err.error.msg, 'error');\r\n            \r\n          })\r\n\r\n    }, 3000)\r\n\r\n    \r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   RETURN ITEMS\r\n  ==================================================================== */\r\n  returnProduct(){\r\n\r\n    for (const item of this.itemsReturn) {\r\n\r\n      let cant = Number(item.qty * 2);\r\n\r\n      if (!item.entregado) {\r\n        cant = Number(item.qty)\r\n      }\r\n\r\n\r\n      // RETORNAS PRODUCTOS\r\n      let inventario:number = Number(item.product.inventario + cant);\r\n      let out = false;\r\n      let low = false;\r\n\r\n      if (inventario <= 0) {\r\n        out = true;\r\n      }else if( inventario < item.product.min &&  inventario > 0){\r\n        out = false;\r\n        low = true;\r\n      }\r\n      \r\n      let update = {\r\n        inventario, \r\n        code: item.product.code, \r\n        name: item.product.name, \r\n        low, \r\n        out\r\n      }\r\n\r\n      this.productService.actualizarProducto( update, item.product._id )\r\n          .subscribe( (resp) => {      \r\n            \r\n          }, (err) => {\r\n            console.log(err);\r\n            \r\n          })\r\n    }\r\n    \r\n\r\n  }\r\n  \r\n  /** ================================================================\r\n   *   CREAR FACTURA\r\n  ==================================================================== */\r\n  public factura: LoadInvoice;\r\n  public facturando: boolean = false;\r\n  crearFactura(send_dian: boolean, mesa: Mesa, pago: number = 0, typePay: string, continuar: any){\r\n      \r\n\r\n    this.facturando = true;\r\n    pago = Number(pago);\r\n\r\n    if ((this.totalPagos + Number(pago)) < this.amount) {\r\n      this.facturando = false;\r\n      Swal.fire('Atención', 'Estas ingresando un monto inferior, al faltante por cancelar', 'warning');\r\n      return;\r\n    }else if((this.totalPagos + Number(pago)) > this.amount){\r\n      pago = this.amount - this.totalPagos;\r\n    }\r\n\r\n    // AGREGAR PAGOS\r\n    let payments: any[] = []\r\n    payments.push({\r\n      type: typePay,\r\n      amount: pago,\r\n      description: ''\r\n    });\r\n\r\n    let cost: number = 0;\r\n    let iva: number = 0;\r\n    let base: number = 0;\r\n    let products: LoadCarrito[] = []\r\n\r\n    this.impuestos.map( (impuesto) => {\r\n      impuesto.total = 0;\r\n    });\r\n\r\n    for (const item of this.alquiler.items) {\r\n\r\n      let ivaP:number = 0;\r\n\r\n      if (item.product.tax) {\r\n        ivaP = Number(item.product.price * item.qty) * Number(item.product.taxid?.valor / 100);      \r\n      }\r\n\r\n      products.push({\r\n        qty: item.qty,\r\n        product: item.product,\r\n        price: ((item.price * item.qty) * item.dias) / item.qty,\r\n        iva: ivaP\r\n      })\r\n\r\n    }\r\n\r\n    // OTROS CALCULOS DE LA BASE - COSTOS IVA\r\n    for (let i = 0; i < products.length; i++) {\r\n\r\n      base += (products[i].price * products[i].qty);\r\n      cost += (products[i].product.cost * products[i].qty);\r\n\r\n      if (this.empresa?.decimal === false) {          \r\n        this.amount = Math.round(this.amount);\r\n        base = Math.round(base);\r\n        cost = Math.round(cost);\r\n      }\r\n      \r\n\r\n      // SUMAR IMPUESTOS\r\n      if (this.empresa?.impuesto!) {          \r\n        this.impuestos.map( (impuesto) => {            \r\n          \r\n          if (impuesto.taxid === products[i].product.taxid) {\r\n            impuesto.total += products[i].iva;\r\n          }\r\n\r\n        })\r\n\r\n        iva += Math.round(products[i].iva);         \r\n        \r\n      }\r\n      // SUMAR IMPUESTOS\r\n      \r\n    }\r\n\r\n    if (this.empresa?.impuesto) {\r\n      this.amount += iva;\r\n    }\r\n\r\n\r\n\r\n    let invoice = {\r\n      client: this.alquiler.client._id,\r\n      type: typePay,\r\n      amount: this.amount,\r\n\r\n      products: products,\r\n      cost,\r\n      iva,\r\n      base,\r\n\r\n      payments: payments, //Arreglo de pagos\r\n      credito: false,\r\n      mesa: this.totalMesas[0].mid,\r\n      mesero: this.totalMesas[0].mesero._id,\r\n      fechaCredito: null,\r\n      turno: this.turno.tid,\r\n      pago: pago,\r\n      vueltos: (this.totalPagos + pago) - this.amount,\r\n      fecha: new Date(),\r\n      paymentsAlquiler: this.alquiler.payments\r\n    }    \r\n\r\n    this.invoiceService.createInvoice( invoice , this.user.turno)\r\n        .subscribe( (resp:{ok: boolean, invoice: LoadInvoice }) => {\r\n          \r\n          this.factura = resp.invoice;\r\n          this.liquidar(pago, typePay);\r\n          \r\n          if (this.empresa.electronica && send_dian) {\r\n                  \r\n            this.electronicaService.postFacturaDataico(this.factura, this.dataico, this.impuestos)\r\n                .subscribe( (resp: {status, invoice, ok}) => {\r\n\r\n                  this.facturando = false;\r\n                  \r\n                  if (resp.status === 500) {\r\n                    Swal.fire('Atención', 'No se pudo enviar la factura electronica a la DIAN, ve a la factura y vuelve a enviarla, si el problema persiste, ponte en contacto', 'warning');\r\n                    window.open(`./dashboard/factura/${ this.factura.iid }`, '_blank');\r\n                  }\r\n\r\n                  if (this.empresa.printpos) {              \r\n                    // window.open(`./dashboard/ventas/print/${ resp.invoice.iid }`, '_blank');\r\n                    // IMPRIMIR FACTURA\r\n                    if (continuar) {\r\n                      this.createAlquiler();\r\n                    }\r\n                    setTimeout( () => {\r\n                      this.printDiv2();                      \r\n                    },3000);\r\n                    \r\n                  }else{\r\n                    if (continuar) {\r\n                      this.createAlquiler();\r\n                    }\r\n                    window.open(`./dashboard/factura/${ this.factura.iid }`, '_blank');\r\n                    setTimeout( () => {             \r\n                      window.location.reload();\r\n                    },1000);\r\n                  }\r\n                  \r\n                }, (err) => {\r\n                  console.log(err);\r\n                  \r\n                });\r\n            \r\n            \r\n          }else{\r\n\r\n            if (this.empresa.printpos) {              \r\n              // window.open(`./dashboard/ventas/print/${ resp.invoice.iid }`, '_blank');\r\n              // IMPRIMIR FACTURA\r\n              if (continuar) {\r\n                this.createAlquiler();\r\n              }\r\n              setTimeout( () => {\r\n                this.printDiv2();                      \r\n              },2000);\r\n              \r\n            }else{\r\n\r\n              if (continuar) {\r\n                this.createAlquiler();\r\n              }\r\n              window.open(`./dashboard/factura/${ this.factura.iid }`, '_blank');\r\n              setTimeout( () => {             \r\n                window.location.reload();\r\n              },1000);\r\n            }\r\n          }\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        });\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREAR NUEVO ALQUILER CON LA MISMA INFORMACION\r\n  ==================================================================== */\r\n  createAlquiler(){\r\n\r\n    let monto: number = 0;\r\n    let itemNew: any[] = [];\r\n\r\n    for (const item of this.alquiler.items) {\r\n\r\n      if (item.entregado === false) {\r\n        \r\n        itemNew.push({\r\n          product: item.product._id,\r\n          qty: item.qty,\r\n          price: item.price,\r\n          desde: new Date(),\r\n          entregado: false,\r\n        })\r\n\r\n        monto += ((item.price * item.qty) * 1);\r\n      }     \r\n\r\n    }\r\n\r\n    let alq = {\r\n      client: this.alquiler.client._id,\r\n      address: this.alquiler.address,\r\n      items: itemNew,\r\n      amount: monto\r\n    }\r\n\r\n    this.alquileresService.createAlquiler(alq)\r\n        .subscribe( ({alquiler}) => {\r\n\r\n          window.open(`./dashboard/alquiler/${ alquiler.alid }`, '_blank');\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          \r\n        })\r\n\r\n  }\r\n\r\n  \r\n  // FIN DE LA CLASE\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Facturas</h5>\r\n    </div>\r\n\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"facturas-tab\"><i class=\"bi-journal-check\" style=\"font-size: 1rem\"></i> Alquiler <span *ngIf=\"alquiler\"> #{{alquiler.number}} </span> </a>\r\n        </li>\r\n\r\n    </ul>\r\n\r\n</header>\r\n\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<div class=\"container-fluid\">\r\n\r\n\r\n    <ng-container *ngIf=\"alquiler\">\r\n        <!-- TITLE - SUBTITLE -->\r\n        <div class=\"mt-4 \">\r\n            <h5 class=\"text-dark\">DETALLES DEL ALQUILER #{{ alquiler.number }}</h5>\r\n            <p class=\"mb-0\">Cajero: {{ alquiler.user.name }}</p>\r\n\r\n            <div class=\"form-check form-switch ms-2 ml-2\">\r\n                <input class=\"form-check-input\" #colcheck (change)=\"colcheck.checked =  colcheck.checked\" type=\"checkbox\" role=\"switch\" id=\"ocultarcheck\">\r\n                <label class=\"form-check-label\" for=\"ocultarcheck\">Ocultar Columnas</label>\r\n            </div>\r\n\r\n        </div>\r\n        <!-- TITLE - SUBTITLE -->\r\n\r\n        <div>\r\n\r\n            <!-- <ng-container *ngIf=\"empresa\">\r\n                <button *ngIf=\"empresa.printpos\" [routerLink]=\"['/dashboard/ventas/print', factura.iid]\" type=\"button\" class=\"btn btn-outline-primary btn-sm mx-1 my-2\"> \r\n                    <i class=\"bi-printer\"></i> Imprimir\r\n                </button>\r\n\r\n                <button *ngIf=\"!empresa.printpos\" (click)=\"printDiv()\" type=\"button\" class=\"btn btn-outline-primary btn-sm mx-1 my-2\"> \r\n                    <i class=\"bi-printer\"></i> Imprimir\r\n                </button>\r\n            </ng-container> -->\r\n\r\n            <button (click)=\"printDiv()\" type=\"button\" class=\"btn btn-outline-primary btn-sm mx-1 my-2\"> \r\n                <i class=\"bi-printer\"></i> Imprimir\r\n            </button>\r\n\r\n            <!-- facturarAlquiler -->\r\n            <button *ngIf=\"!alquiler.finalizada\" type=\"button\" class=\"btn btn-outline-success btn-sm mx-1 my-2\" data-bs-toggle=\"modal\" data-bs-target=\"#facturarAlquiler\"> \r\n                <i class=\"bi-check\"></i> Liquidar\r\n            </button>\r\n\r\n        </div>\r\n\r\n        <div class=\"row\">\r\n\r\n\r\n            <!-- DETALLES DE LA FACTURA -->\r\n            <div class=\"col-md-8 shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n                <div id=\"printDiv\">\r\n\r\n                    <!-- INFORMACION DEL CLIENTE -->\r\n                    <div class=\"row\">\r\n\r\n                        <!-- Informacion del Cliente -->\r\n                        <div class=\"col-md-8 text-left text-muted\" style=\"color:black\">\r\n\r\n                            <div class=\"mb-2\" *ngIf=\"empresa\">\r\n                                <!-- Image Product-->\r\n                                <img *ngIf=\"empresa.logo\" [src]=\" empresa.logo | imagen:'logo'\" class=\"mx-auto\" width=\"200px\" alt=\"\">\r\n                            </div>\r\n\r\n                            <div class=\"row\" style=\"color:black\">\r\n                                <div class=\"col-md-4\">\r\n                                    <h6 class=\"text-wrap mb-0 text-capitalize\"><strong>CLIENTE / RAZON SOCIAL:  </strong><br><small>{{ alquiler.client?.name || 'Ocasional' }}</small></h6>\r\n                                </div>\r\n                                <div class=\"col\">\r\n                                    <h6 class=\"text-wrap mb-0 text-capitalize\"><strong>CC / Nit: </strong> <br><small> {{ alquiler.client?.cedula || '00000000' }}</small></h6>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"row\" style=\"color:black\">\r\n                                <div class=\"col-md-4\">\r\n                                    <h6 class=\"text-wrap mb-0 text-capitalize\"><strong>TELEFONO: </strong> <br><small *ngIf=\"alquiler.client?.phone\"> {{ alquiler.client?.phone }}</small> </h6>\r\n                                </div>\r\n                                <div class=\"col\">\r\n                                    <h6 class=\"text-wrap mb-0\"><strong>CORREO: </strong> <br><small *ngIf=\"alquiler.client?.email\"> {{ alquiler.client?.email }} </small></h6>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"row\" style=\"color:black\">\r\n                                <div class=\"col\">\r\n                                    <h6 class=\"text-wrap mb-0\"><strong>DIRECCIÓN: </strong> <br><small *ngIf=\"alquiler.client?.address\"> {{ alquiler.client?.address }} <span *ngIf=\"alquiler.client?.city\" > {{ alquiler.client?.city }} </span></small></h6>\r\n\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col\">\r\n                            <div class=\"col-12\" *ngIf=\"empresa\">\r\n                                <!-- <div class=\"mb-2 d-flex justify-content-end\">\r\n                                <img *ngIf=\"empresa.logo\" src=\"{{empresa.logo | imagen:'logo'}}\" class=\"\" width=\"200px\" alt=\"\">\r\n                            </div> -->\r\n                                <h5 class=\"mb-0 d-flex justify-content-end text-wrap text-end fw-bold\"> {{ empresa.name }} </h5>\r\n                                <p class=\"mb-0 d-flex justify-content-end text-wrap text-end\"> {{ empresa.address }} </p>\r\n                                <p class=\"mb-0 d-flex justify-content-end text-wrap text-end\">Nit: {{ empresa.nit }} </p>\r\n\r\n                                <small *ngIf=\"!empresa.impuesto\" class=\"mb-0 d-flex justify-content-end\"> No responsable de IVA </small>\r\n\r\n                                <!-- RESPONSABLE DE IVA O IMPUESTO AL CONSUMO -->\r\n                                <small *ngIf=\"empresa.impuesto && empresa.responsable\" class=\"mb-0 d-flex justify-content-end\"> Responsable de iva </small>\r\n                                <small *ngIf=\"empresa.impuesto && empresa.impuestoconsumo\" class=\"mb-0 d-flex justify-content-end text-right\"> Responsable nacional al consumo </small>\r\n\r\n                                <small *ngIf=\"empresa.impuesto\" class=\"mb-0 d-flex justify-content-end\"> Resolución: {{ empresa.resolucion }} </small>\r\n                                <small *ngIf=\"empresa.impuesto\" class=\"mb-0 d-flex justify-content-end\"> Prefijo Pos: {{ empresa.prefijopos }} </small>\r\n                                <!-- RESPONSABLE DE IVA O IMPUESTO AL CONSUMO -->\r\n\r\n                                <h3 class=\"display-5 mb-0 d-flex justify-content-end text-primary\"> {{ alquiler.number }} </h3>\r\n                                <small class=\"mb-0 d-flex justify-content-end\"> {{ alquiler.fecha | date:'medium' }} </small>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <!-- INFORMACION DEL CLIENTE -->\r\n\r\n\r\n\r\n                    <div class=\" table-responsive \">\r\n\r\n                        <table class=\"table table-borderless table-striped table-sm \">\r\n                            <thead class=\"border-bottom\">\r\n                                <tr>\r\n                                    <th scope=\"col\">Cant.</th>\r\n                                    <th scope=\"col\">Producto</th>\r\n                                    <th scope=\"col\">Precio</th>\r\n                                    <th class=\"text-center\" scope=\"col\">Fechas</th>\r\n                                    <th class=\"text-center\" scope=\"col\">Dias</th>\r\n                                    <th class=\"text-end\" scope=\"col\">Monto</th>\r\n                                    <th></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody class=\"text-dark\">\r\n\r\n                                <tr *ngIf=\"alquiler.items.length === 0\">\r\n                                    <th colspan=\"6\">No se a seleccionado ningun producto...</th>\r\n                                </tr>\r\n\r\n                                <ng-container *ngIf=\"alquiler.items.length > 0\">\r\n                                    <tr *ngFor=\"let item of alquiler.items\">\r\n                                        <td> <span *ngIf=\"!colcheck.checked\"> {{ item.qty }} </span> </td>\r\n                                        <td> {{ item.product.name }} </td>\r\n                                        <td> <span *ngIf=\"!colcheck.checked\"> {{ item.price | currency: 'COP' }}</span> </td>\r\n                                        <td>\r\n                                            <div class=\"d-flex justify-content-center gap-2\">\r\n                                                <span class=\"badge bg-dark\" *ngIf=\"item.desde\"> {{item.desde | date:'dd/M/y'}} </span>\r\n                                                <span class=\"badge bg-success\" *ngIf=\"item.hasta\"> {{item.hasta | date:'dd/M/y'}} </span>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td class=\"text-center\"> <span *ngIf=\"!colcheck.checked\"> {{ item.dias }}</span> </td>\r\n                                        <td class=\"text-end\"> <span *ngIf=\"!colcheck.checked\"> {{ (item.price * item.qty) * item.dias | currency: 'COP' }}</span> </td>\r\n\r\n                                        <td>\r\n                                            <button (click)=\"entregaProductos(item)\" *ngIf=\"!item.entregado\" type=\"button\" class=\"btn btn-link p-1 text-primary text-right\"> \r\n                                                <i class=\"bi-arrow-counterclockwise\"></i> \r\n                                            </button>\r\n\r\n                                            <span *ngIf=\"item.entregado\" class=\"text-success\"> <i class=\"bi-check\"></i>  </span>\r\n                                        </td>\r\n\r\n                                    </tr>\r\n                                </ng-container>\r\n\r\n                            </tbody>\r\n                            <tfoot>\r\n                                <tr>\r\n                                    <th colspan=\"5\" class=\"text-end\">Total</th>\r\n                                    <th class=\"text-end\"> <span *ngIf=\"!colcheck.checked\"> {{ amount | currency:'COP'}} </span> </th>\r\n                                </tr>\r\n                            </tfoot>\r\n                        </table>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <!-- INFORMACION DE LA FACTURA -->\r\n\r\n            </div>\r\n            <!-- DETALLES DE LA FACTURA -->\r\n\r\n            <!-- PAGOS -->\r\n            <div class=\"col-md-4\">\r\n\r\n                <!-- TABLE PAGOS-->\r\n                <div class=\"shadow-lg p-3 mb-5 rounded bg-white\" style=\"max-height: 400px; height: auto;\">\r\n\r\n                    <div class=\"d-flex\">\r\n\r\n                        <h5 class=\"\">\r\n                            Pagos\r\n                        </h5>\r\n\r\n                        <div class=\"ms-auto\">\r\n                            <button *ngIf=\"user.cerrada\" (click)=\"abrirCaja()\" type=\"button\" class=\"btn btn-sm btn-success ms-auto me-2\">Abrir Caja</button>\r\n                            <button type=\"button\" class=\"btn btn-sm btn-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#pagos\">Agregar</button>\r\n                        </div>\r\n\r\n\r\n                    </div>\r\n                    <!-- CARGANDO -->\r\n                    <div *ngIf=\"cargandoAgotados\">\r\n                        <div class=\"text-center p-4\">\r\n                            <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                                <span class=\"visually-hidden\">Loading...</span>\r\n                            </div>\r\n                        </div>\r\n                        <small class=\"text-muted\">cargando...</small>\r\n                    </div>\r\n                    <!-- CARGANDO -->\r\n\r\n                    <div *ngIf=\"!cargandoAgotados\" style=\"max-height: 100vh\">\r\n\r\n                        <div class=\"table-responsive \" class=\"overflow-auto\" style=\"max-height: 200px;\">\r\n                            <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                                <thead class=\"border-bottom \">\r\n                                    <tr>\r\n                                        <th class=\"text-muted \" scope=\"col \">Descripcion</th>\r\n                                        <th class=\"text-muted \" scope=\"col \">Tipo</th>\r\n                                        <th class=\"text-muted \" scope=\"col \">Monto</th>\r\n                                    </tr>\r\n                                </thead>\r\n\r\n                                <tbody>\r\n\r\n                                    <tr class=\"text-danger\">\r\n                                        <td>\r\n                                            Total de Pagos\r\n                                        </td>\r\n                                        <td>\r\n                                            --\r\n                                        </td>\r\n                                        <td> {{ amount | currency: 'COP' }} </td>\r\n                                    </tr>\r\n\r\n                                    <tr class=\"trHover\" *ngFor=\"let pay of alquiler.payments; let i = index\">\r\n                                        <td>\r\n                                            <span>{{ pay.description || 'Sin descripcion' }}</span>\r\n                                        </td>\r\n                                        <td>{{ pay.type }}</td>\r\n                                        <td>{{ pay.amount | currency: 'COP' }} </td>\r\n                                    </tr>\r\n\r\n                                </tbody>\r\n                                <tfoot>\r\n                                    <tr class=\"border-top\">\r\n                                        <td colspan=\"2\"> <span class=\"fw-bold\"> Restante </span></td>\r\n                                        <td> <span class=\"fw-bold\">{{ ( amount - totalPagos) | currency: 'COP' }}</span> </td>\r\n                                    </tr>\r\n                                </tfoot>\r\n\r\n                            </table>\r\n\r\n                        </div>\r\n\r\n                        <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                        <div class=\"row\">\r\n                            <div class=\"col\">\r\n                                <small class=\"text-muted\">Total de pagos: ({{ 0}})</small>\r\n                            </div>\r\n                        </div>\r\n                        <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n                    </div>\r\n                </div>\r\n                <!-- TABLE PAGOS-->\r\n\r\n            </div>\r\n            <!-- PAGOS -->\r\n\r\n        </div>\r\n\r\n    </ng-container>\r\n\r\n\r\n\r\n</div>\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    MODAL Pagos \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"pagos\" tabindex=\"-1\" aria-labelledby=\"pagosModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-xl modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-body p-0\">\r\n\r\n                <div class=\"container-fluid\">\r\n                    <div class=\"py-2\">\r\n\r\n                        <!-- COLUMNA IZQ -->\r\n                        <div class=\"col px-0 bg-white\">\r\n\r\n                            <!-- TITULO -->\r\n                            <div class=\"bg-header-blue py-1 px-2\">\r\n                                <h4 class=\"text-white fw-normal mb-0\">Pagos o Abonos</h4>\r\n                            </div>\r\n\r\n                            <div class=\"container-fluid py-4\">\r\n\r\n                                <div *ngIf=\"user.cerrada\" class=\"alert alert-warning alert-dismissible fade show\" role=\"alert\">\r\n                                    <strong>Atención:</strong> Debes de abrir caja\r\n                                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\" aria-label=\"Close\"></button>\r\n                                </div>\r\n\r\n                                <!-- TOTAL -->\r\n                                <div class=\"text-center my-3\">\r\n                                    <ng-container *ngIf=\"alquiler\">\r\n                                        <h4 class=\"display-4 text-primary\">{{ amount | currency:'COP' }}</h4>\r\n                                    </ng-container>\r\n\r\n\r\n                                    <small *ngIf=\"totalPagos > 0 && totalPagos < amount\" class=\"text-danger animated fadeIn\">Resta</small>\r\n                                    <small *ngIf=\"totalPagos > 0 && totalPagos >= amount\" class=\"text-success animated fadeIn\">Vueltos</small>\r\n                                    <h4 class=\"mb-0 fw-normal animated fadeIn\" [ngClass]=\" {   'text-danger': totalPagos < amount, 'text-success': totalPagos >= amount }\" *ngIf=\"totalPagos > 0\">\r\n                                        {{ vueltos | currency: 'COP' }}\r\n                                    </h4>\r\n\r\n                                </div>\r\n                                <!-- TOTAL -->\r\n\r\n\r\n                                <div class=\"d-flex justify-content-center\">\r\n\r\n                                    <div>\r\n\r\n                                        <!-- FORM INVOICE - FORM INVOICE -->\r\n                                        <div class=\"row text-center\">\r\n                                            <div class=\"col p-2\">\r\n\r\n                                                <input type=\"radio\" class=\"btn-check\" name=\"type\" id=\"efectivo-outlined\" value=\"efectivo\" autocomplete=\"off\" checked #cheT (change)=\"cheT.value = 'efectivo'\">\r\n                                                <label class=\"btn btn-outline-success\" for=\"efectivo-outlined\">\r\n                                                    <i class=\"px-3 bi-cash-stack\" style=\"font-size: 1.5rem;\"></i>\r\n                                                    <p class=\"mb-0\">Efectivo</p>\r\n    \r\n                                                </label>\r\n\r\n                                            </div>\r\n\r\n                                            <div class=\"col p-2\">\r\n\r\n                                                <input type=\"radio\" class=\"btn-check\" name=\"type\" id=\"transferencia-outlined\" value=\"transferencia\" autocomplete=\"off\" #cheT2 (change)=\"cheT.value = cheT2.value\">\r\n                                                <label class=\"btn btn-outline-info\" for=\"transferencia-outlined\">\r\n                                                        <i class=\"px-3 bi-credit-card\" style=\"font-size: 1.5rem;\"></i>\r\n                                                        <p class=\"mb-0\">Transferencia</p>\r\n                                                    </label>\r\n\r\n                                            </div>\r\n\r\n                                            <div class=\"col p-2\">\r\n\r\n                                                <input type=\"radio\" class=\"btn-check\" name=\"type\" id=\"tarjeta-outlined\" value=\"tarjeta\" autocomplete=\"off\" #cheT3 (change)=\"cheT.value = cheT3.value\">\r\n                                                <label class=\"btn btn-outline-primary\" for=\"tarjeta-outlined\">\r\n                                                    <i class=\"px-3 bi-credit-card\" style=\"font-size: 1.5rem;\"></i>\r\n                                                    <p class=\"mb-0\">Tarjeta</p>\r\n                                                </label>\r\n\r\n                                            </div>\r\n\r\n                                            <div class=\"col p-2\">\r\n                                                <input type=\"radio\" class=\"btn-check\" name=\"options-outlined\" name=\"type\" id=\"mixto-outlined\" value=\"mixto\" autocomplete=\"off\" #cheT4 (change)=\"cheT.value = cheT4.value\">\r\n                                                <label class=\"btn btn-outline-dark\" for=\"mixto-outlined\">\r\n                                                    <i class=\"px-3 bi-patch-question\" style=\"font-size: 1.5rem;\"></i>\r\n                                                    <p class=\"mb-0\">Mixto</p>\r\n                                                    </label>\r\n                                            </div>\r\n\r\n                                        </div>\r\n\r\n                                        <div class=\"mx-auto\">\r\n\r\n                                            <!-- TABLA -->\r\n                                            <div class=\"table-responsive\">\r\n                                                <table class=\"table table-sm table-borderless\">\r\n                                                    <thead>\r\n                                                        <tr>\r\n                                                            <th>#</th>\r\n                                                            <th>Descripcion</th>\r\n                                                            <th>Monto</th>\r\n                                                            <th></th>\r\n                                                        </tr>\r\n                                                    </thead>\r\n                                                    <tbody>\r\n\r\n                                                        <ng-container *ngIf=\"alquiler\">\r\n\r\n                                                            <tr class=\"trHover\" *ngFor=\"let control of alquiler.payments; let i = index\">\r\n                                                                <th>{{ i + 1}}</th>\r\n                                                                <td>\r\n                                                                    <p class=\"mb-0\">{{ control.type }} <span *ngIf=\"control.description\">- {{ control.description }}</span></p>\r\n                                                                </td>\r\n                                                                <td> {{ control.amount | currency: 'COP' }} </td>\r\n                                                                <td>\r\n                                                                    <button type=\"button\" class=\"btn btn-link p-1 text-danger text-right\" (click)=\"eliminarPagos(i)\"> <i class=\"bi-trash\"></i> </button>\r\n                                                                </td>\r\n                                                            </tr>\r\n                                                        </ng-container>\r\n\r\n\r\n                                                    </tbody>\r\n                                                </table>\r\n\r\n                                            </div>\r\n                                            <!-- TABLA -->\r\n\r\n                                            <!-- AGREGAR METODO DE PAGO -->\r\n                                            <div class=\"row g-3 d-flex justify-content-center\">\r\n\r\n                                                <div class=\"col-auto\">\r\n                                                    <select class=\"form-select\" aria-label=\"Default select example\" (change)=\"typeAdd.value\" #typeAdd>\r\n                                                        <option *ngIf=\"cheT.value === 'efectivo' || cheT.value === 'mixto' || cheT.value === 'credito'\" value=\"efectivo\">Efectivo</option>\r\n                                                        <option *ngIf=\"cheT.value === 'transferencia' || cheT.value === 'mixto' || cheT.value === 'credito'\" value=\"transferencia\">Transferencia</option>\r\n                                                        <option *ngIf=\"cheT.value === 'tarjeta' || cheT.value === 'mixto' || cheT.value === 'credito'\" value=\"tarjeta\">Tarjeta</option>\r\n                                                        <ng-container *ngIf=\"cheT.value !== 'efectivo'\">\r\n                                                            <option *ngFor=\"let banco of bancos\" [value]=\"banco.name\"> {{banco.name}}</option>                                                                \r\n                                                        </ng-container>\r\n                                                    </select>\r\n                                                </div>\r\n\r\n                                                <div class=\"col-auto\">\r\n                                                    <label for=\"Descripción\" class=\"visually-hidden\">Descripción</label>\r\n                                                    <input type=\"text\" class=\"form-control w100\" id=\"Descripción\" placeholder=\"Descripción\" (keyup)=\"descripcionAdd.value\" #descripcionAdd>\r\n                                                </div>\r\n\r\n                                                <div class=\"col-auto\">\r\n                                                    <label for=\"monto\" class=\"visually-hidden\">Monto</label>\r\n\r\n                                                    <ng-container>\r\n                                                        <input type=\"number\" class=\"form-control\" [value]=\"vueltos\" id=\"monto\" placeholder=\"Monto\" autofocus=\"true\" (keyup)=\"montoAdd.value = montoAdd.value\" #montoAdd>\r\n                                                    </ng-container>\r\n\r\n                                                </div>\r\n\r\n                                                <!-- BTN CREAR FACTURA -->\r\n                                                <div class=\"my-4 float-end\">\r\n                                                    <button type=\"button\" (click)=\"agregarPagos(typeAdd.value, montoAdd.value)\" class=\"btn btn-outline-primary\">\r\n\r\n                                                                Guardar\r\n                                                    </button>\r\n                                                </div>\r\n\r\n\r\n\r\n                                            </div>\r\n                                            <!-- AGREGAR METODO DE PAGO -->\r\n\r\n                                        </div>\r\n                                        <!-- FORM INVOICE - FORM INVOICE -->\r\n\r\n                                    </div>\r\n\r\n                                </div>\r\n                            </div>\r\n\r\n\r\n                        </div>\r\n                        <!-- COLUMNA IZQ -->\r\n\r\n\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    MODAL FACTURAR \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    FACTURAR\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"facturarAlquiler\" tabindex=\"-1\" aria-labelledby=\"facturarAlquilerModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-lg modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"facturarAlquilerModal\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Facturar Alquiler</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n                <div>\r\n\r\n                    <!-- TOTALES -->\r\n                    <div class=\"text-center\">\r\n                        <p class=\"mb-0\">Total</p>\r\n                        <h3 class=\"mb-2 display-4 text-primary\"> {{ amount | currency:'COP' }} </h3>\r\n\r\n                        <h5 *ngIf=\"(totalPagos + (pago.value * 1)) < amount\" class=\"text-danger\">Faltante: {{ totalPagos - amount | currency:'COP' }} </h5>\r\n                        <h5 *ngIf=\"(totalPagos + (pago.value * 1)) > amount\" class=\"text-success\">Vueltos: {{ (totalPagos + (pago.value * 1 )) - amount | currency:'COP' }} </h5>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"pago\" class=\"form-label\"> Restante </label>\r\n                        <input (keyup)=\"pago.value\" #pago type=\"number\" class=\"form-control\" id=\"pago\">\r\n                    </div>\r\n\r\n                    <label class=\"form-label\"> Forma de pago </label>\r\n                    <select #typePay class=\"form-select mb-3\" aria-label=\"Default select example\">\r\n                        <option value=\"efectivo\"> Efectivo </option>\r\n                        <option *ngFor=\"let banco of bancos\" [value]=\"banco.name\"> {{banco.name}}</option>\r\n                    </select>\r\n\r\n                    <label class=\"form-label\"> Seleccionar Ticket </label>\r\n                    <select #sMesa class=\"form-select\" aria-label=\"Default select example\">\r\n                        <option value=\"\" *ngIf=\"totalMesas.length === 0\"> No tienes tickets Disponibles </option>\r\n                        <ng-container *ngFor=\"let mesa of totalMesas\">\r\n                            <option [value]=\"mesa\" *ngIf=\"mesa.disponible\"> {{ mesa.name }} </option>\r\n                        </ng-container>\r\n                    </select>\r\n\r\n                    <div class=\"form-check\">\r\n                        <input class=\"form-check-input\" type=\"checkbox\" id=\"lqCont\" #liqCont>\r\n                        <label class=\"form-check-label\" for=\"lqCont\">\r\n                        Liquidar y Continuar\r\n                      </label>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <div class=\"d-flex justify-content-end gap-2\">\r\n                    <!-- BTN CREAR FACTURA -->\r\n                    <div class=\"my-4 float-end\">\r\n                        <button type=\"button\" [disabled]=\"facturando == true\" (click)=\"crearFactura(false, sMesa.value, pago.value, typePay.value, liqCont.checked)\" class=\"btn btn-outline-primary\">\r\n                        Crear Factura Pos\r\n                    </button>\r\n                    </div>\r\n                    <!-- BTN CREAR FACTURA -->\r\n\r\n                    <!-- BTN CREAR FACTURA -->\r\n                    <div class=\"my-4 float-end\" *ngIf=\"empresa?.electronica\">\r\n                        <button type=\"button\" [disabled]=\"facturando == true\" (click)=\"crearFactura(true, sMesa.value, pago.value, typePay.value, liqCont.checked)\" class=\"btn btn-outline-success\">\r\n                        Crear Factura Electronica\r\n                    </button>\r\n                    </div>\r\n                    <!-- BTN CREAR FACTURA -->\r\n                </div>\r\n\r\n                <div class=\"d-flex justify-content-center\">\r\n                    <div class=\"card border-0 pb-4\" style=\"width: 14rem; color:black; background: white;\" id=\"printDiv2\" *ngIf=\"factura\">\r\n\r\n                        <!-- EMPRESA -->\r\n                        <div class=\"card-body px-1 mb-2\" style=\"border-bottom: 2px solid black;\" *ngIf=\"empresa\">\r\n\r\n                            <div class=\"col-10 mx-auto\">\r\n                                <img *ngIf=\"empresa.logo\" [src]=\"empresa.logo | imagen:'logo'\" class=\"mx-auto\" width=\"200px\" alt=\"\">\r\n                            </div>\r\n\r\n                            <h4 class=\"card-title mb-0 text-wrap text-center\"> {{ empresa.name }} </h4>\r\n                            <p class=\"mb-0 text-wrap fw-bolder text-center lh-sm\" *ngIf=\"empresa.nit\">{{ empresa.nit }}</p>\r\n                            <p class=\"mb-0 text-center text-wrap\" style=\"font-size: 0.7rem;\"> </p>\r\n                            <p class=\"mb-0 text-wrap text-center\" *ngIf=\"empresa.address\">{{ empresa.address }}</p>\r\n                            <p class=\"mb-0 text-wrap text-center\" *ngIf=\"empresa.phone\">{{ empresa.phone }}</p>\r\n\r\n                            <p *ngIf=\"!empresa.impuesto\" class=\"mb-0 text-wrap text-center\" style=\"font-size: 0.7rem;\">No responsable de IVA</p>\r\n\r\n                            <!-- RESPONSABLE DE IVA O IMPUESTO AL CONSUMO -->\r\n                            <p *ngIf=\"empresa.impuesto && empresa.responsable\" class=\"mb-0 text-wrap text-center\" style=\"font-size: 0.7rem;\">Responsable de iva</p>\r\n                            <p *ngIf=\"empresa.impuesto && empresa.impuestoconsumo\" class=\"mb-0 text-wrap text-center\" style=\"font-size: 0.7rem;\">Responsable nacional al consumo</p>\r\n                            <p *ngIf=\"empresa.impuesto\" class=\"mb-0 text-wrap text-center\" style=\"font-size: 0.7rem;\">Resolución: {{ empresa.resolucion }}</p>\r\n                            <p *ngIf=\"empresa.impuesto\" class=\"mb-1 text-wrap text-center\" style=\"font-size: 0.7rem;\">Prefijo Pos: {{ empresa.prefijopos }}</p>\r\n                            <!-- RESPONSABLE DE IVA O IMPUESTO AL CONSUMO -->\r\n\r\n                        </div>\r\n                        <!-- EMPRESA -->\r\n\r\n                        <!-- CLIENTE -->\r\n                        <div class=\"pb-2\" style=\"border-bottom: 2px solid black;\">\r\n                            <h6 class=\"mb-0 text-wrap text-left\">\r\n                                CLIENTE / RAZON SOCIAL <br>\r\n                                <small *ngIf=\"factura.client\" class=\"text-wrap fw-normal\"> {{ factura.client.name }} </small>\r\n                                <small *ngIf=\"!factura.client\" class=\"text-wrap fw-normal\"> ocasional </small>\r\n                            </h6>\r\n\r\n                            <h6 class=\"mb-0 text-wrap text-left\">\r\n                                CC / NIT <br>\r\n                                <small *ngIf=\"factura.client\" class=\"text-wrap fw-normal\"> {{ factura.client.cedula }} </small>\r\n                                <small *ngIf=\"!factura.client\" class=\"text-wrap fw-normal\"> 00000000 </small>\r\n                            </h6>\r\n                            <h6 class=\"mb-0 text-wrap text-left\">\r\n                                TELEFONO <br>\r\n                                <small *ngIf=\"factura.client\" class=\"text-wrap fw-normal\"> {{ factura.client.phone }} </small>\r\n                            </h6>\r\n                            <h6 class=\"mb-0 text-wrap text-left\" *ngIf=\"factura.client\">\r\n                                DIRECCIÓN <br>\r\n                                <small *ngIf=\"factura.client\" class=\"text-wrap fw-normal\"> {{ factura.client.address || '----------'}} </small>\r\n                            </h6>\r\n\r\n                            <h6 class=\"mb-0 text-wrap text-left\">\r\n                                <p class=\"text-wrap fw-normal mb-0\"> {{ factura.mesa.name }} - {{ factura.mesero.name }} </p>\r\n                            </h6>\r\n                        </div>\r\n                        <!-- CLIENTE -->\r\n\r\n                        <!-- FACTURA -->\r\n                        <div class=\"py-2\" style=\"border-bottom: 2px solid black;\">\r\n                            <h6 class=\"mb-0 text-wrap text-left\">Factura de venta pos: {{ factura.invoice }}</h6>\r\n                            <h6 class=\"mb-0 text-wrap text-left\">Control: {{ factura?.control }}</h6>\r\n                            <small class=\"mb-0 text-wrap text-left\">Fecha: {{ factura.fecha | date:'short' }}</small>\r\n                        </div>\r\n                        <!-- FACTURA -->\r\n\r\n                        <table class=\"table table-borderless table-hover table-sm\">\r\n                            <tbody style=\"color: black;\">\r\n                                <tr *ngFor=\"let item of factura.products\" class=\"trHover\">\r\n                                    <td>\r\n                                        <small class=\"text-wrap\"> {{ item.qty }} x {{item.price | divisa}} </small> <br>\r\n                                        <small class=\"text-wrap\"> {{ item.product.name }} </small>\r\n                                    </td>\r\n                                    <td> <small class=\"text-wrap\"> {{ item.qty * item.price | divisa }} </small> </td>\r\n                                </tr>\r\n                                <tr class=\"\" style=\"border-top: 2px solid black;\">\r\n                                    <td>\r\n                                        <h6 class=\"mb-0 text-wrap text-left\">Sub-total</h6>\r\n                                    </td>\r\n                                    <td class=\"fw-bold\">\r\n                                        <h6 class=\"mb-0 text-wrap text-rigth\"> {{ factura.base | divisa }} </h6>\r\n                                    </td>\r\n                                </tr>\r\n\r\n                                <!-- DESCUENTO -->\r\n                                <tr class=\"\" style=\"border-top: 2px solid black;\">\r\n                                    <td>\r\n                                        <h6 class=\"mb-0 text-wrap text-left\">Descuento</h6>\r\n                                    </td>\r\n                                    <td class=\"fw-bold\">\r\n                                        <h6 class=\"mb-0 text-wrap text-rigth\" *ngIf=\"factura.descuento\"> {{ (factura.base * factura.porcentaje )/100 | divisa }} </h6>\r\n                                    </td>\r\n                                </tr>\r\n\r\n\r\n                                <!-- <p class=\"h6 fw-normal text-primary mb-0\">Sub-total {{ base | divisa }}</p>\r\n\r\n                                <ng-container *ngFor=\"let impuesto of impuestos\">\r\n                                    <p class=\"h6 fw-normal text-primary mb-0\" *ngIf=\"impuesto.total > 0\"> {{ impuesto.name }} {{ impuesto.total | divisa }}</p>\r\n                                </ng-container>\r\n\r\n                                <p class=\"h6 fw-normal text-danger mb-0\" *ngIf=\"mesa?.descuento\">Descuento {{ (base * mesa?.porcentaje) / 100 | divisa }}</p>\r\n                                <h4 class=\"fw-normal text-primary\" *ngIf=\"empresa.impuesto\">{{ total | divisa }}</h4> -->\r\n                                <ng-container *ngIf=\"!empresa.impuesto\">\r\n                                    <tr class=\"\" style=\"border-top: 2px solid black;\">\r\n                                        <td>\r\n                                            <h6 *ngIf=\"!empresa.impuestos\" class=\"mb-0 text-wrap text-left\">No responsable de IVA</h6>\r\n                                        </td>\r\n                                        <td class=\"fw-bold\">\r\n                                            <h6 class=\"mb-0 text-wrap text-rigth\"> 0 </h6>\r\n                                        </td>\r\n                                    </tr>\r\n                                </ng-container>\r\n\r\n                                <ng-container *ngIf=\"empresa.impuesto\">\r\n                                    <ng-container *ngFor=\"let impuesto of impuestos\">\r\n\r\n                                        <tr *ngIf=\"impuesto.total > 0\" class=\"\" style=\"border-top: 2px solid black;\">\r\n                                            <td>\r\n                                                <h6 class=\"mb-0 text-wrap text-left\"> {{ impuesto.name }} </h6>\r\n\r\n                                            </td>\r\n                                            <td class=\"fw-bold\">\r\n                                                <h6 class=\"mb-0 text-wrap text-rigth\"> {{ impuesto.total | divisa }} </h6>\r\n                                            </td>\r\n                                        </tr>\r\n                                    </ng-container>\r\n                                </ng-container>\r\n\r\n                                <tr class=\"\" style=\"border-top: 2px solid black;\">\r\n                                    <td>\r\n                                        <h6 class=\"mb-0 text-wrap text-left\">Total</h6>\r\n                                    </td>\r\n                                    <td class=\"fw-bold\">\r\n                                        <h6 class=\"mb-0 text-wrap text-rigth\"> {{ factura.amount | divisa}} </h6>\r\n                                    </td>\r\n                                </tr>\r\n\r\n                                <tr class=\"\" style=\"border-top: 2px solid black;\" *ngIf=\"empresa.tip\">\r\n                                    <td>\r\n                                        <h6 class=\"mb-0 text-wrap text-left\">Propina Sugerida del {{empresa.propina}}%</h6>\r\n                                    </td>\r\n                                    <td class=\"fw-bold\">\r\n                                        <h6 class=\"mb-0 text-wrap text-rigth\"> {{ (factura.amount * empresa.propina)/100 | divisa }} </h6>\r\n                                    </td>\r\n                                </tr>\r\n                                <tr class=\"\" style=\"border-top: 2px solid black;\" *ngIf=\"empresa.tip\">\r\n                                    <td>\r\n                                        <h6 class=\"mb-0 text-wrap text-left\">Total + Propina</h6>\r\n                                    </td>\r\n                                    <td class=\"fw-bold\">\r\n                                        <h6 *ngIf=\"empresa.responsable\" class=\"mb-0 text-wrap text-rigth\"> {{ factura.amount+ (factura.amount * empresa.propina)/100 + (factura.amount * empresa.tax)/100 | divisa}} </h6>\r\n                                        <h6 *ngIf=\"!empresa.responsable\" class=\"mb-0 text-wrap text-rigth\"> {{ factura.amount + (factura.amount * empresa.propina)/100 | divisa }} </h6>\r\n                                    </td>\r\n                                </tr>\r\n\r\n                            </tbody>\r\n                        </table>\r\n\r\n                        <hr class=\"my-1\">\r\n                        <div *ngIf=\"!factura.apartado\">\r\n                            <p class=\"mb-0 mx-auto\"><small class=\"text-wrap text-center mb-0\">Pago con: {{factura.pago | divisa}} </small></p>\r\n                            <p class=\"mb-0 mx-auto\"><small class=\"text-wrap text-center mb-0\">Vueltos: {{factura.vueltos | divisa}} </small></p>\r\n                        </div>\r\n\r\n                        <div *ngIf=\"factura.apartado\">\r\n                            <h6 class=\"mb-2 fw-bold\">Historial de pagos</h6>\r\n                            <table class=\"table table-sm\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th scope=\"col\">Desc</th>\r\n                                        <th scope=\"col\">Pago</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr *ngFor=\"let pay of factura.payments\">\r\n                                        <td>Abono {{ pay.type }} </td>\r\n                                        <td> {{ pay.amount | divisa }} </td>\r\n                                    </tr>\r\n\r\n                                </tbody>\r\n                                <tfoot>\r\n                                    <tr>\r\n                                        <th>Restante</th>\r\n                                        <th> {{ factura.amount - totalPagos | divisa }} </th>\r\n                                    </tr>\r\n                                </tfoot>\r\n                            </table>\r\n\r\n                        </div>\r\n\r\n                        <hr class=\"my-1\">\r\n                        <h6 *ngIf=\"factura.nota\" class=\"mb-0\">Nota:</h6>\r\n                        <p *ngIf=\"factura.nota\" class=\"\">- {{ factura.nota }} </p>\r\n\r\n\r\n                        <hr *ngIf=\"factura.nota\" class=\"my-1\">\r\n\r\n                        <h5 class=\"text-center\"> GRACIAS POR SU COMPRA </h5>\r\n                        <small class=\"text-wrap text-center mb-0\"> Factura impresa por SIMIDS </small>\r\n                        <small class=\"text-wrap text-center mb-0\" style=\"font-size: 0.7rem;\">(Nataly Castillo)</small>\r\n                        <small class=\"text-wrap text-center mb-0\">NIT. 1090502421-0</small>\r\n\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    FACTURAR\r\n========================================================================= -->","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport Swal from 'sweetalert2';\r\n\r\nimport { Alquiler } from 'src/app/models/alquileres.model';\r\nimport { Client } from 'src/app/models/client.model';\r\nimport { Product } from 'src/app/models/product.model';\r\n\r\nimport { AlquileresService } from 'src/app/services/alquileres.service';\r\nimport { SearchService } from 'src/app/services/search.service';\r\nimport { ProductService } from 'src/app/services/product.service';\r\n\r\ninterface _item {\r\n    product: string;\r\n    producto: Product;\r\n    qty: number;\r\n    price: number;\r\n    dias: number;\r\n    entregado: boolean;\r\n    desde?: Date;\r\n    hasta?: Date;\r\n}\r\n\r\ninterface _query{\r\n  desde: number;\r\n  hasta: number;\r\n  client?: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-alquileres',\r\n  templateUrl: './alquileres.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class AlquileresComponent implements OnInit {\r\n\r\n  public resultado: number = 0;\r\n  public cargando: boolean = true;\r\n  public sinResultados: boolean = true;\r\n\r\n  public btnAtras: string = '';\r\n  public btnAdelante: string = '';\r\n\r\n  constructor(  private alquileresService: AlquileresService,\r\n                private fb: FormBuilder,\r\n                private searchService: SearchService,\r\n                private productService: ProductService) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // CARGAR ALQUILERES\r\n    this.cargarAlquileres();\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR ALQUILERES\r\n  ==================================================================== */\r\n  public query: _query = {\r\n    desde: 0,\r\n    hasta: 50\r\n  };\r\n  public alquileres: Alquiler[] = [];\r\n  public alquileresTemp: Alquiler[] = [];\r\n  public total: number = 0;\r\n  cargarAlquileres(){\r\n\r\n    this.alquileresService.loadAlquileres(this.query)\r\n        .subscribe( ({alquileres, total}) => {\r\n\r\n          this.alquileres = alquileres;\r\n          this.alquileresTemp = alquileres;\r\n          this.total = total;\r\n          this.cargando = false;\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREAR ALQUILER\r\n  ==================================================================== */\r\n  @ViewChild('inAddress') inAddress: ElementRef;\r\n  public formSubmitted: boolean = false;\r\n  public createForm = this.fb.group({\r\n    client: '',\r\n    monto: 0,\r\n    address: '',\r\n    items: [],\r\n    amount: 0\r\n  });\r\n  \r\n  crearAlquiler(){\r\n\r\n    this.createForm.value.address = this.inAddress.nativeElement.value;\r\n\r\n    if (this.items.length === 0) {\r\n      Swal.fire('Atención', 'Debes de agregar un producto para poder crear el alquiler', 'warning');\r\n      return;\r\n    }\r\n\r\n    this.formSubmitted = true;\r\n\r\n    if (this.createForm.invalid) {\r\n      return;\r\n    }\r\n    \r\n    this.createForm.value.client = this.clientS.cid;\r\n    this.createForm.value.amount = this.amount;\r\n    this.createForm.value.items = this.items;\r\n    \r\n\r\n    this.alquileresService.createAlquiler(this.createForm.value)\r\n        .subscribe( ({alquiler}) => {\r\n\r\n          delete this.clientS;\r\n          this.amount = 0;\r\n\r\n          this.descontarInventario();\r\n\r\n          this.cargarAlquileres();\r\n          Swal.fire('Estupendo', 'Se ha creado el alquiler exitosamente!', 'success');\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        });\r\n    \r\n  }\r\n  \r\n  /** ================================================================\r\n   *  VALIDAR\r\n  ==================================================================== */\r\n  campoValido(campo: string): boolean{\r\n\r\n    if (this.createForm.get(campo).invalid && this.formSubmitted) {      \r\n      return true;\r\n    }else{\r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  DESCONTAR ITEMS DEL INVENTARIO\r\n  ==================================================================== */\r\n  descontarInventario(){\r\n\r\n    if (this.items.length > 0) {\r\n      \r\n      for (const item of this.items) {        \r\n        \r\n        let inventario:number = Number(item.producto.inventario - item.qty);\r\n        let out = false;\r\n        let low = false;\r\n\r\n        if (inventario <= 0) {\r\n          out = true;\r\n        }else if( inventario < item.producto.min &&  inventario > 0){\r\n          out = false;\r\n          low = true;\r\n        }\r\n        \r\n        let update = {\r\n          inventario, \r\n          code: item.producto.code, \r\n          name: item.producto.name, \r\n          low, \r\n          out\r\n        }\r\n\r\n        this.productService.actualizarProducto( update, item.product )\r\n            .subscribe( (resp) => {\r\n              \r\n              // ELIMINAMOS LOS ITEMS\r\n              this.eliminarItem(item);\r\n              \r\n            }, (err) => {\r\n              console.log(err);\r\n              \r\n            })\r\n\r\n\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n  /** ================================================================\r\n  /** ================================================================\r\n  /** ================================================================\r\n  /** ================================================================\r\n  /** ================================================================\r\n  /** ================================================================\r\n   *   CLIENTES BUSCAR\r\n  ==================================================================== */\r\n  @ViewChild('searchC') searchC: ElementRef;\r\n  public listClients: Client[] = [];\r\n  public clientS!: Client;\r\n  searchClient(termino: string){\r\n\r\n    if (termino.length === 0 || termino.length < 3) {\r\n      this.listClients = [];\r\n      return;\r\n    }\r\n\r\n    this.searchService.search('clients', termino)\r\n        .subscribe( ({resultados}) => {\r\n\r\n          this.listClients = resultados;\r\n          \r\n        }, (err) => {\r\n          console.log(err);\r\n          \r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SEARCH CLIENT\r\n  ==================================================================== */\r\n  public clients: any[] = [];\r\n  public clientSeleted: Client;\r\n  buscarClient(termino: string){\r\n\r\n    this.listClients = [];\r\n    \r\n    if (termino.length < 1) {\r\n      this.listClients = [];\r\n      return;      \r\n    }\r\n    \r\n    this.searchService.search('clients', termino)\r\n    .subscribe( ({resultados}) => {      \r\n\r\n        this.clients = resultados;          \r\n\r\n      }, (err) => {\r\n        console.log(err);\r\n        \r\n      });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR ALQUILERES DEL CLIENTE\r\n  ==================================================================== */\r\n  @ViewChild('searchCl') searchCl: ElementRef;\r\n  /**\r\n   * The function \"buscarAlquilerClient\" clears the search input, resets the clients array, sets the\r\n   * query client to the given cid, and loads the rentals.\r\n   * @param {string} cid - string - the client ID to search for in the rental database.\r\n   */\r\n  buscarAlquilerClient(cid: string){\r\n\r\n    this.searchCl.nativeElement.value = '';\r\n    this.clients = [];\r\n\r\n    this.query.client = cid;\r\n\r\n    this.cargarAlquileres();\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n  /** ================================================================\r\n  /** ================================================================\r\n  /** ================================================================\r\n  /** ================================================================\r\n  /** ================================================================\r\n  /** ================================================================\r\n   *   PRODUCTOS BUSCAR\r\n  ==================================================================== */\r\n  @ViewChild('searchP') searchP: ElementRef;\r\n  public listProducts: Client[] = [];\r\n  public items: _item[] = [];\r\n  public productS: Product;\r\n  searchProduct(termino: string){\r\n\r\n    if (termino.length === 0 || termino.length < 3) {\r\n      this.listClients = [];\r\n      return;\r\n    }\r\n\r\n    this.searchService.search('products', termino)\r\n        .subscribe( ({resultados}) => {\r\n\r\n          this.listProducts = resultados;\r\n          \r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          \r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   AGREGAR PRODUCTOS\r\n  ==================================================================== */\r\n  agregarItems(qty: number, dias: number, price: number){\r\n\r\n    let item: _item = {\r\n      product: this.productS.pid,\r\n      producto: this.productS,\r\n      qty,\r\n      price: price,\r\n      dias: dias,\r\n      entregado: false\r\n    }\r\n\r\n    this.items.push(item);\r\n    this.sumarTotales();\r\n\r\n    this.searchP.nativeElement.value = '';\r\n    this.searchP.nativeElement.focus();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ELIMINAR PRODUCTOS\r\n  ==================================================================== */\r\n  eliminarItem(item: any){\r\n\r\n    this.items.splice(item, 1);\r\n    this.sumarTotales();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SUMAR TOTALES\r\n  ==================================================================== */\r\n  public amount: number = 0;\r\n  sumarTotales(){\r\n\r\n    this.amount = 0;\r\n\r\n    for (const item of this.items) {\r\n      this.amount += ((item.price * item.qty) * item.dias);\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CANCELAR ALQUILER\r\n  ==================================================================== */\r\n  statusUpdate(alquiler: Alquiler){\r\n\r\n    let status = false;\r\n    if( !alquiler.status ){\r\n      status = true;\r\n    }\r\n\r\n    this.alquileresService.updateAlquiler({status}, alquiler.alid)\r\n        .subscribe( ({alquiler}) => {\r\n\r\n          Swal.fire('Estupendo', 'Se ha cambiado el estado del alquiler exitosamente', 'success');\r\n          this.alquileres.map( (alq) => {\r\n\r\n            if (alq.alid === alquiler.alid) {\r\n              alq.status = status;\r\n            }\r\n\r\n          })\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  \r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Alquileres</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"ticket1-tab\"><i class=\"bi-gear\" style=\"font-size: 1rem\"></i> Tablero Principal</a>\r\n        </li>\r\n\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<div class=\"container-fluid my-4\">\r\n\r\n    <div class=\"d-flex flex-wrap gap-3\">\r\n        <!-- BUSCADOR DE CLIENTES  -->\r\n        <div class=\"col-md-3 col-auto\">\r\n            <div class=\"shadow-lg p-3 rounded bg-white\">\r\n                <div class=\"mb-3\">\r\n                    <h4 class=\"text-muted\">Buscar Cliente</h4>\r\n                    <div>\r\n                        <input type=\"text\" class=\"form-control\" placeholder=\"buscar cliente\" (keyup)=\"buscarClient(searchCl.value)\" #searchCl>\r\n                    </div>\r\n\r\n                    <hr>\r\n\r\n                    <div *ngIf=\"clients.length > 0\" class=\"bg-white py-3 px-2 shadow\" style=\"position: absolute; z-index: 1020;\">\r\n\r\n                        <div *ngIf=\"cargandoCliente\" class=\"text-center py-3\">\r\n                            <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                                <span class=\"visually-hidden\">Loading...</span>\r\n                            </div>\r\n                            <div>\r\n                                <small class=\"text-muted\">Cargando...</small>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <ul *ngIf=\"!cargandoCliente\" class=\"list-group list-group-flush overflow-auto\" style=\"max-height: 200px; min-width: 250px;\">\r\n\r\n                            <li class=\"list-group-item\">\r\n                                <h6>Resultados: ({{ clients.length }})</h6>\r\n                            </li>\r\n\r\n                            <li class=\"list-group-item\" *ngFor=\"let item of clients\">\r\n                                <button (click)=\"buscarAlquilerClient(item.cid)\" type=\"button\" style=\"background: none; border: 0;\">\r\n                                    <div class=\"d-flex \">\r\n                                        <div class=\"align-self-center\">\r\n                                            <span class=\"text-capitalize fw-bold\"> {{ item.name }} </span><br>\r\n                                            <small> C.C: {{ item.cedula }} </small>\r\n                                        </div>\r\n        \r\n                                        <div class=\"ms-auto\">\r\n                                            <i class=\"text-success bi-arrow-90deg-right\"></i>\r\n                                        </div>\r\n                                    </div>\r\n                                </button>\r\n                            </li>\r\n                        </ul>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- BUSCADOR DE CLIENTES  -->\r\n\r\n        <!-- TABLE ALQUILERES -->\r\n        <div class=\"shadow-lg p-3 mb-5 rounded bg-white  col-auto\">\r\n\r\n            <!-- CARGANDO -->\r\n            <div *ngIf=\"cargando\">\r\n                <div class=\"text-center p-4\">\r\n                    <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                        <span class=\"visually-hidden\">Loading...</span>\r\n                    </div>\r\n                </div>\r\n                <small class=\"text-muted\">cargando...</small>\r\n            </div>\r\n            <!-- CARGANDO -->\r\n\r\n            <div *ngIf=\"!cargando\">\r\n\r\n                <!-- BTN CREAR IMPUESTO -->\r\n                <div class=\"d-flex justify-content-between\">\r\n                    <button (click)=\"query = {desde: 0, hasta: 0}; cargarAlquileres()\" type=\"button\" class=\"btn btn-sm btn-success btnW waves-effect waves-ligth\">Limpiar</button>\r\n                    <button type=\"button\" class=\"btn btn-sm btn-primary btnW waves-effect waves-ligth\" data-bs-toggle=\"modal\" data-bs-target=\"#nuevoAlquiler\">Crear</button>\r\n                </div>\r\n                <!-- BTN CREAR IMPUESTO -->\r\n\r\n                <div class=\"table-responsive \">\r\n                    <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                        <thead class=\"border-bottom \">\r\n                            <tr>\r\n                                <th class=\"text-muted \" scope=\"col \">#</th>\r\n                                <th class=\"text-muted \" scope=\"col \">Cliente</th>\r\n                                <th class=\"text-muted \" scope=\"col \">Entrega</th>\r\n                                <th class=\"text-muted \" scope=\"col \">Fecha</th>\r\n                                <th class=\"text-muted \" scope=\"col \">Estado</th>\r\n                                <th class=\"text-muted w100 \" scope=\"col \">Acciones</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr *ngIf=\"alquileres.length === 0\" class=\"text-center \">\r\n                                <th colspan=\"10\" class=\"py-4\">\r\n                                    <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                                </th>\r\n                            </tr>\r\n\r\n                            <tr class=\"trHover\" *ngFor=\"let alquiler of alquileres; let i = index\">\r\n                                <td>{{ alquiler.number }}</td>\r\n                                <td>{{ alquiler.client.name }}</td>\r\n                                <td>\r\n                                    <span class=\"badge bg-success\" *ngIf=\"alquiler.finalizada\">Finalizada</span>\r\n                                    <span class=\"badge bg-warning\" *ngIf=\"!alquiler.finalizada\">Pendiente</span>\r\n                                </td>\r\n                                <td>{{ alquiler.fecha | date:'short' }}</td>\r\n                                <td>\r\n                                    <button *ngIf=\"alquiler.status\" (click)=\"statusUpdate(alquiler)\" type=\"button\" class=\"btn btnW waves-effect waves-ligth btn-success btn-sm\">Activo</button>\r\n                                    <button *ngIf=\"!alquiler.status\" (click)=\"statusUpdate(alquiler)\" type=\"button\" class=\"btn btnW waves-effect waves-ligth btn-danger btn-sm\">Desactivo</button>\r\n                                </td>\r\n                                <td class=\"text-center\">\r\n                                    <a [routerLink]=\"['/dashboard/alquiler', alquiler.alid]\" class=\"btn btn-link p-1 text-primary\">\r\n                                        <i class=\"bi bi-box-arrow-up-right\"></i>\r\n                                    </a>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n\r\n                    </table>\r\n\r\n                </div>\r\n\r\n                <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                <div class=\"row\">\r\n                    <div class=\"col col-md-4\">\r\n                        <small class=\"text-muted\">Total de Alquileres: ({{total}})</small>\r\n                        <small *ngIf=\"resultado !== 0\" class=\"text-muted\"> - (Resultados: {{ alquileres.length }})</small>\r\n                        <small *ngIf=\"desde !== 0\" class=\"text-muted\"> - (Desde el: {{ query.desde + 1}} Hasta el: {{ query.desde + alquileres.length }})</small>\r\n                    </div>\r\n\r\n                    <div class=\"col d-flex justify-content-end\">\r\n                        <button type=\"button\" (click)=\" query.desde = query.desde - query.hasta; cargarAlquileres() \" [disabled]=\"query.desde == 0\" class=\"btn btn-sm btn-dark btnW waves-effect waves-light px-3\">Anterior</button>\r\n                        <button type=\"button\" (click)=\"query.desde = query.desde + query.hasta; cargarAlquileres()\" [disabled]=\"(query.desde + query.hasta) > total\" class=\"btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2\">Siguiente</button>\r\n                    </div>\r\n                </div>\r\n                <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n            </div>\r\n        </div>\r\n        <!-- TABLE ALQUILERES -->\r\n\r\n    </div>\r\n\r\n\r\n\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    NUEVO ALQUILER\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"nuevoAlquiler\" tabindex=\"-1\" aria-labelledby=\"nuevoBancoModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-lg modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"nuevoBancoModal\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Crear Alquiler Nuevo</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n                <!-- BUSADOR DE CLIENTES -->\r\n                <div>\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"buscarCC\" class=\"form-label\">Buscar Cliente</label>\r\n                        <input autocomplete=\"false\" type=\"search\" class=\"form-control\" id=\"buscarCC\" placeholder=\"Buscar Cliente\" (keyup)=\"searchClient(searchC.value)\" #searchC>\r\n                        <div *ngIf=\"listClients.length > 0 && searchC.value.length !== 0\" class=\"bg-white px-2 shadow col-auto\" style=\"position: absolute; z-index: 1020;\">\r\n\r\n                            <ul class=\"list-group list-group-flush overflow-auto\" style=\"max-height: 150px;\">\r\n\r\n                                <li class=\"list-group-item py-1\">\r\n                                    <h6>Resultados: ({{ listClients.length }})</h6>\r\n                                </li>\r\n\r\n                                <li class=\"list-group-item py-1\" *ngFor=\"let cliente of listClients\">\r\n                                    <button [disabled]=\"!cliente.status\" class=\"border-0 bg-white w-100 text-start\" (click)=\"clientS = cliente; listClients = []; createForm.value.address = cliente.address\" type=\"button\">\r\n                                        <div class=\"d-flex\">\r\n                                            <div class=\"align-self-center\">\r\n                                                <span> {{ cliente.name }} </span>\r\n                                                <span> {{ cliente.cedula }} </span>\r\n                                                <span> {{ cliente.phone }} </span>\r\n                                                <span *ngIf=\"!cliente.status\" class=\"badge rounded-pill bg-danger\">Eliminado</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </button>\r\n                                </li>\r\n\r\n                            </ul>\r\n\r\n                        </div>\r\n\r\n                        <!-- FORM -->\r\n                        <form [formGroup]=\"createForm\" (ngSubmit)=\"crearAlquiler()\">\r\n\r\n                            <div *ngIf=\"clientS\">\r\n\r\n                                <div class=\"row g-3 align-items-center\">\r\n                                    <div class=\"col-auto\">\r\n                                        <label for=\"Clien\" class=\"col-form-label\">Cliente</label>\r\n                                        <input type=\"text\" id=\"Clien\" class=\"form-control\" readonly [value]=\"clientS.name || ''\">\r\n                                    </div>\r\n\r\n                                    <div class=\"col-4\">\r\n                                        <label for=\"phone\" class=\"col-form-label\">Telefono</label>\r\n                                        <input type=\"text\" id=\"phone\" class=\"form-control\" readonly [value]=\"clientS.phone || ''\">\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class=\"mb-3\">\r\n                                    <label for=\"addres\" class=\"col-form-label\">Direccion</label>\r\n                                    <input #inAddress [value]=\"clientS.address || ''\" type=\" text \" id=\"addres \" class=\"form-control \">\r\n                                    <p *ngIf=\"campoValido( 'address') \" class=\"mb-0 \"> <small class=\"text-danger \"> Este campo es obligatorio </small> </p>\r\n                                </div>\r\n\r\n                                <div class=\"my-3 \">\r\n                                    <h3>Productos</h3>\r\n                                    <label for=\"buscarP \" class=\"form-label \">Buscar Produtos</label>\r\n                                    <input type=\"text\" class=\"form-control \" id=\"buscarP \" placeholder=\"Buscar Producto \" (keyup)=\"searchProduct(searchP.value) \" #searchP>\r\n                                    <div *ngIf=\"listProducts.length> 0 && searchP.value.length !== 0\" class=\"bg-white px-2 shadow col-auto\" style=\"position: absolute; z-index: 1020;\">\r\n\r\n                                        <ul class=\"list-group list-group-flush overflow-auto\" style=\"max-height: 150px;\">\r\n\r\n                                            <li class=\"list-group-item py-1\">\r\n                                                <h6>Resultados: ({{ listProducts.length }})</h6>\r\n                                            </li>\r\n\r\n                                            <li class=\"list-group-item py-1\" *ngFor=\"let product of listProducts\">\r\n                                                <button *ngIf=\"product.status\" (click)=\"productS = product; listProducts = []\" [disabled]=\"product.inventario <= 0\" class=\"border-0 bg-white w-100 text-start\" type=\"button\">\r\n                                                    <div class=\"d-flex\">\r\n                                                        <div class=\"align-self-center\">\r\n                                                            <span> {{ product.name }} </span>\r\n                                                            <span> {{ product.code }} </span>\r\n                                                            <span> {{ product.inventario }} </span>\r\n                                                            <span *ngIf=\"product.inventario <= 0\" class=\"badge rounded-pill bg-danger\">Agotado</span>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </button>\r\n                                            </li>\r\n\r\n                                        </ul>\r\n\r\n                                    </div>\r\n\r\n                                </div>\r\n\r\n                                <!-- AGREGAR EL PRODUCTO -->\r\n                                <div class=\"mb-3\">\r\n\r\n                                    <div class=\"row g-3 align-items-center\">\r\n                                        <div class=\"col-4\">\r\n                                            <label for=\"cod\" class=\"col-form-label\">Codigo</label>\r\n                                            <input type=\"text\" id=\"cod\" class=\"form-control\" readonly [value]=\"productS?.code || ''\">\r\n                                        </div>\r\n                                        <div class=\"col-auto\">\r\n                                            <label for=\"ppp\" class=\"col-form-label\">Producto</label>\r\n                                            <input type=\"text\" id=\"ppp\" class=\"form-control\" readonly [value]=\"productS?.name || ''\">\r\n                                        </div>\r\n                                        <div class=\"col-auto\">\r\n                                            <label for=\"ccc\" class=\"col-form-label\">Disponible</label>\r\n                                            <input type=\"text\" id=\"ccc\" class=\"form-control\" readonly [value]=\"productS?.inventario || 0\">\r\n                                        </div>\r\n\r\n                                    </div>\r\n\r\n                                    <div class=\"row g-3 align-items-center\">\r\n                                        <div class=\"col-4\">\r\n                                            <label for=\"cant\" class=\"col-form-label\">Cantidad</label>\r\n                                            <input type=\"number\" min=\"1\" id=\"cant\" class=\"form-control\" #cant>\r\n                                        </div>\r\n\r\n                                        <div class=\"col-4\">\r\n                                            <label for=\"dias\" class=\"col-form-label\">Dias</label>\r\n                                            <input type=\"number\" min=\"1\" id=\"dias\" class=\"form-control\" #dias>\r\n                                        </div>\r\n\r\n                                        <div class=\"col-4\">\r\n                                            <label for=\"prec\" class=\"col-form-label\">Precio</label>\r\n                                            <input type=\"number\" min=\"1\" id=\"prec\" class=\"form-control\" [value]=\"productS?.price || 0\" #prec>\r\n                                        </div>\r\n\r\n\r\n                                    </div>\r\n\r\n                                    <button (click)=\"agregarItems(cant.value, dias.value, prec.value)\" type=\"button\" class=\"btn btn-primary my-3 w-100\">Agregar</button>\r\n\r\n\r\n                                </div>\r\n\r\n\r\n                                <div>\r\n                                    <table class=\"table table-sm\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th scope=\"col\"></th>\r\n                                                <th scope=\"col\">Cant.</th>\r\n                                                <th scope=\"col\">Producto</th>\r\n                                                <th scope=\"col\">Precio</th>\r\n                                                <th class=\"text-center\" scope=\"col\">Dias</th>\r\n                                                <th class=\"text-end\" scope=\"col\">Monto</th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                            <tr *ngIf=\"items.length === 0\">\r\n                                                <th colspan=\"6\">No se a seleccionado ningun producto...</th>\r\n                                            </tr>\r\n\r\n                                            <ng-container *ngIf=\"items.length > 0\">\r\n                                                <tr *ngFor=\"let item of items\">\r\n                                                    <td>\r\n                                                        <button (click)=\"eliminarItem(item)\" type=\"button\" class=\"btn btn-link p-1 text-danger text-right\"> \r\n                                                            <i class=\"bi-trash\"></i> \r\n                                                        </button>\r\n                                                    </td>\r\n                                                    <td> {{ item.qty }} </td>\r\n                                                    <td> {{ item.producto.name }} </td>\r\n                                                    <td> {{ item.price | currency: 'COP' }} </td>\r\n                                                    <td class=\"text-center\"> {{ item.dias }} </td>\r\n                                                    <td class=\"text-end\"> {{ (item.price * item.qty) * item.dias | currency: 'COP' }} </td>\r\n                                                </tr>\r\n                                            </ng-container>\r\n\r\n                                        </tbody>\r\n                                        <tfoot>\r\n                                            <tr>\r\n                                                <th colspan=\"5\" class=\"text-end\">Total</th>\r\n                                                <th class=\"text-end\"> {{amount | currency:'COP'}} </th>\r\n                                            </tr>\r\n                                        </tfoot>\r\n                                    </table>\r\n                                </div>\r\n\r\n                                <button class=\"btn btn-primary ms-auto\" type=\"submit\"> Crear </button>\r\n\r\n                            </div>\r\n\r\n\r\n                        </form>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n\r\n\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    NUEVO ALQUILER\r\n========================================================================= -->","import { Component, OnInit, ChangeDetectionStrategy, ViewChild, TemplateRef } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport { Subject } from 'rxjs';\r\nimport Swal from 'sweetalert2';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\n\r\nimport {\r\n  startOfDay,\r\n  endOfDay,\r\n  subDays,\r\n  addDays,\r\n  endOfMonth,\r\n  isSameDay,\r\n  isSameMonth,\r\n  addHours,\r\n  setHours, \r\n  setMinutes\r\n} from 'date-fns';\r\n\r\nimport {\r\n  CalendarEvent,\r\n  CalendarEventAction,\r\n  CalendarEventTimesChangedEvent,\r\n  CalendarView,\r\n} from 'angular-calendar';\r\n\r\nimport { registerLocaleData } from '@angular/common';\r\nimport localeEs from '@angular/common/locales/es';\r\n\r\n// SERVICES\r\nimport { CalendarioService } from '../../services/calendario.service';\r\n\r\n// MODELS\r\nimport { Calendario } from 'src/app/models/calendario.model';\r\n\r\nregisterLocaleData(localeEs);\r\n\r\nconst colors: any = {\r\n  red: {\r\n    primary: '#ad2121',\r\n    secondary: '#FAE3E3',\r\n  },\r\n  blue: {\r\n    primary: '#1e90ff',\r\n    secondary: '#D1E8FF',\r\n  },\r\n  yellow: {\r\n    primary: '#e3bc08',\r\n    secondary: '#FDF1BA',\r\n  },\r\n};\r\n\r\n// @Component({\r\n//   selector: 'app-calendario',\r\n//   templateUrl: './calendario.component.html',\r\n//   styles: [\r\n//   ]\r\n// })\r\n\r\n@Component({\r\n  selector: 'app-calendario',\r\n  templateUrl: './calendario.component.html',\r\n  styles: [\r\n  ]\r\n})\r\n\r\n\r\nexport class CalendarioComponent implements OnInit {\r\n\r\n  @ViewChild('modalContent', { static: true }) modalContent: TemplateRef<any>;\r\n\r\n  public view: CalendarView = CalendarView.Month;\r\n\r\n  CalendarView = CalendarView;\r\n\r\n  viewDate: Date = new Date();\r\n\r\n  modalData: {\r\n    action: string;\r\n    event: CalendarEvent;\r\n  };\r\n\r\n  // ELIMINAR EVENTOS\r\n  \r\n  actions: CalendarEventAction[] = [\r\n    {\r\n      label: '<i class=\"bi-trash\"></i>',\r\n      a11yLabel: 'Delete',\r\n      onClick: ({ event }: { event: any }): void => {\r\n        \r\n        console.log(event);\r\n\r\n        this.calendarioService.deleteCalendario(event.id)\r\n            .subscribe( (resp: { ok: boolean, msg: string }) => {\r\n\r\n              if (resp.ok) {\r\n                \r\n                this.events = this.events.filter((iEvent) => iEvent !== event);\r\n                this.handleEvent('Deleted', event);\r\n                \r\n                Swal.fire('Estupendo', resp.msg, 'success');\r\n                \r\n              }else{\r\n                \r\n                Swal.fire('Error', resp.msg, 'error');\r\n              }\r\n              \r\n\r\n            });\r\n        \r\n      },\r\n    },\r\n  ];\r\n  // ELIMINAR EVENTOS\r\n\r\n  refresh: Subject<any> = new Subject();\r\n\r\n  events: CalendarEvent[] = [\r\n    {\r\n      start: addHours(startOfDay(new Date()), 2),\r\n      end: addHours(new Date(), 2),\r\n      title: 'A draggable and resizable event',\r\n      color: colors.blue,\r\n      actions: this.actions,\r\n      resizable: {\r\n        beforeStart: true,\r\n        afterEnd: true,\r\n      },\r\n      draggable: false,\r\n    },\r\n  ];\r\n\r\n  activeDayIsOpen: boolean = true;\r\n\r\n  // =====================================================================================\r\n  // CONSTRUCTOR\r\n  // =====================================================================================\r\n\r\n  constructor(  private modal: NgbModal,\r\n                private fb:FormBuilder,\r\n                private calendarioService: CalendarioService) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // CARGAR CALENDARIOS\r\n    this.cargarCalendario();\r\n    \r\n  }\r\n\r\n  // =====================================================================================\r\n  // CONSTRUCTOR\r\n  // =====================================================================================\r\n\r\n  dayClicked({ date, events }: { date: Date; events: CalendarEvent[] }): void {\r\n    if (isSameMonth(date, this.viewDate)) {\r\n      if (\r\n        (isSameDay(this.viewDate, date) && this.activeDayIsOpen === true) ||\r\n        events.length === 0\r\n      ) {\r\n        this.activeDayIsOpen = false;\r\n      } else {\r\n        this.activeDayIsOpen = true;\r\n      }\r\n      this.viewDate = date;\r\n    }\r\n  }\r\n\r\n  eventTimesChanged({\r\n    event,\r\n    newStart,\r\n    newEnd,\r\n  }: CalendarEventTimesChangedEvent): void {\r\n    this.events = this.events.map((iEvent) => {\r\n      if (iEvent === event) {\r\n        return {\r\n          ...event,\r\n          start: newStart,\r\n          end: newEnd,\r\n        };\r\n      }\r\n      return iEvent;\r\n    });\r\n    this.handleEvent('Dropped or resized', event);\r\n  }\r\n\r\n  handleEvent(action: string, event: CalendarEvent): void {\r\n\r\n    if (action !== 'Deleted') {      \r\n      this.modalData = { event, action };\r\n      this.modal.open(this.modalContent, { size: 'sm' });\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREAR CALENDARIO\r\n  ==================================================================== */\r\n  public formSubmitted = false;\r\n  public evento: any;\r\n  public newCalendarioForm = this.fb.group({\r\n    start: [ '' , [Validators.required]],\r\n    end: ['', [Validators.required]],\r\n    title: ['', [Validators.required]],\r\n  });\r\n\r\n  crearCalendario(){\r\n\r\n    this.formSubmitted = true;\r\n\r\n    if (this.newCalendarioForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    // SET HOURS  \r\n    let inicial;\r\n    let final;    \r\n\r\n    inicial = new Date(this.newCalendarioForm.value.start);      \r\n    const initial = new Date(inicial.getTime() - 1000 * 60 * 60 * 5);\r\n    \r\n\r\n    final = new Date(this.newCalendarioForm.value.end);\r\n    const end = new Date(final.getTime() - 1000 * 60 * 60 * 5);\r\n    \r\n    // // SET HOURS \r\n\r\n    this.newCalendarioForm.value.start = initial;\r\n    this.newCalendarioForm.value.end = end;\r\n    \r\n    this.newCalendarioForm.value.title = `${this.newCalendarioForm.value.title} - ${ inicial.getHours()}:${inicial.getMinutes()}`\r\n\r\n    this.calendarioService.createCalendario(this.newCalendarioForm.value)\r\n        .subscribe((resp:{ok:boolean, calendario: Calendario}) => {\r\n\r\n          Swal.fire('Estupendo', 'Se ha creado exitosamente en el calendario!', 'success');\r\n\r\n          this.evento = resp.calendario;\r\n\r\n          this.formSubmitted = false;\r\n          this.newCalendarioForm.reset();    \r\n\r\n          this.addEvent();\r\n\r\n        });\r\n        \r\n  }\r\n\r\n  addEvent(): void {\r\n\r\n    // SET HOURS  \r\n    let inicial;\r\n    let final;    \r\n\r\n    inicial = new Date(this.evento.start);      \r\n    const initial = new Date(inicial.getTime() + 1000 * 60 * 60 * 5);\r\n    \r\n\r\n    final = new Date(this.evento.end);\r\n    const end = new Date(final.getTime() + 1000 * 60 * 60 * 5);    \r\n    // SET HOURS \r\n    \r\n    this.events = [\r\n      ...this.events,\r\n      {\r\n        title: `${this.evento.title}`,\r\n        start: initial,\r\n        end: end,\r\n        color: colors.blue,\r\n        actions: this.actions,\r\n        resizable: {\r\n          beforeStart: true,\r\n          afterEnd: true,\r\n         },\r\n      },\r\n    ];\r\n  } \r\n\r\n  /** ================================================================\r\n   *  VALIDAR CAMPOS\r\n  ==================================================================== */\r\n  campoValido(campo: string): boolean{\r\n\r\n    if ( this.newCalendarioForm.get(campo).invalid &&  this.formSubmitted) {      \r\n      return true;      \r\n    } else{\r\n            \r\n      return false;\r\n    }\r\n  \r\n  }\r\n  // ===================================================================\r\n  // CARGAR CALENDARIO\r\n  // ===================================================================\r\n  cargarCalendario(){\r\n\r\n    this.calendarioService.loadCalendario()\r\n        .subscribe( ({calendarios}) => {\r\n\r\n          this.events = [];\r\n          \r\n          calendarios.forEach((calendario:any) => {\r\n\r\n           // SET HOURS  \r\n           let inicial;\r\n           let final;    \r\n\r\n           inicial = new Date(calendario.start);      \r\n           const initial = new Date(inicial.getTime() + 1000 * 60 * 60 * 5);\r\n           \r\n\r\n           final = new Date(calendario.end);\r\n           const end = new Date(final.getTime() + 1000 * 60 * 60 * 5);    \r\n           // SET HOURS \r\n           \r\n           this.events = [\r\n             ...this.events,\r\n             {\r\n               title: calendario.title,\r\n               id: calendario.calid,\r\n               start: addDays(setHours(setMinutes(new Date(initial), Number(initial.getMinutes())), Number(initial.getHours())), 0),\r\n               color: colors.blue,\r\n               actions: this.actions,\r\n               resizable: {\r\n                 beforeStart: true,\r\n                 afterEnd: true,\r\n                },\r\n               end: addDays(setHours(setMinutes(new Date(end), Number(end.getMinutes())), Number(end.getHours())),0),\r\n             },\r\n           ];\r\n                        \r\n          });\r\n\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  ELIMINAR CALENDARIO\r\n  ==================================================================== */\r\n  deleteEvent(eventToDelete: CalendarEvent) {\r\n    this.events = this.events.filter((event) => event !== eventToDelete);    \r\n  }\r\n\r\n  setView(view: CalendarView) {\r\n    this.view = view;\r\n  }\r\n\r\n  closeOpenMonthViewDay() {\r\n    this.activeDayIsOpen = false;\r\n  }\r\n\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Facturas</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"facturas-tab\" data-bs-toggle=\"tab\" href=\"#facturas\" role=\"tab\" aria-controls=\"facturas\" aria-selected=\"true\"><i class=\"bi-calendar3\" style=\"font-size: 1rem\"></i> Calendario</a>\r\n        </li>\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n<div class=\"container-fluid mt-4 bg-light2\">\r\n\r\n    <!-- TITLE - SUBTITLE -->\r\n    <div>\r\n        <h5 class=\"text-dark\">CALENDARIOS Y CITAS</h5>\r\n        <p>Usa este modulo para crear eventos y citas</p>\r\n    </div>\r\n    <!-- TITLE - SUBTITLE -->\r\n\r\n    <!-- CALENDARIO -->\r\n    <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n        <!-- BTN CREAR CALENDARIO -->\r\n        <div class=\"d-flex justify-content-end mb-4\">\r\n            <button type=\"button\" class=\"btn btn-sm btn-primary btnW waves-effect waves-ligth\" data-bs-toggle=\"modal\" data-bs-target=\"#nuevoEvento\">Crear Evento</button>\r\n        </div>\r\n        <!-- BTN CREAR CALENDARIO -->\r\n\r\n        <div class=\"row text-center\">\r\n            <div class=\"col-md-4\">\r\n                <div class=\"btn-group\">\r\n                    <div class=\"btn btn-primary\" mwlCalendarPreviousView [view]=\"view\" [(viewDate)]=\"viewDate\" (viewDateChange)=\"closeOpenMonthViewDay()\">\r\n                        Atras\r\n                    </div>\r\n                    <div class=\"btn btn-outline-secondary\" mwlCalendarToday [(viewDate)]=\"viewDate\">\r\n                        Hoy\r\n                    </div>\r\n                    <div class=\"btn btn-primary\" mwlCalendarNextView [view]=\"view\" [(viewDate)]=\"viewDate\" (viewDateChange)=\"closeOpenMonthViewDay()\">\r\n                        Siguiente\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-md-4\">\r\n                <h3>{{ viewDate | calendarDate:(view + 'ViewTitle'):'es' }}</h3>\r\n            </div>\r\n            <div class=\"col-md-4\">\r\n                <div class=\"btn-group\">\r\n                    <div class=\"btn btn-primary\" (click)=\"setView(CalendarView.Month)\" [class.active]=\"view === CalendarView.Month\">\r\n                        Mes\r\n                    </div>\r\n                    <div class=\"btn btn-primary\" (click)=\"setView(CalendarView.Week)\" [class.active]=\"view === CalendarView.Week\">\r\n                        Semana\r\n                    </div>\r\n                    <div class=\"btn btn-primary\" (click)=\"setView(CalendarView.Day)\" [class.active]=\"view === CalendarView.Day\">\r\n                        Dia\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <br />\r\n\r\n        <div [ngSwitch]=\"view\">\r\n            <mwl-calendar-month-view locale=\"es\" *ngSwitchCase=\"CalendarView.Month\" [viewDate]=\"viewDate\" [events]=\"events\" [refresh]=\"refresh\" [activeDayIsOpen]=\"activeDayIsOpen\" (dayClicked)=\"dayClicked($event.day)\" (eventClicked)=\"handleEvent('Clicked', $event.event)\"\r\n                (eventTimesChanged)=\"eventTimesChanged($event)\">\r\n            </mwl-calendar-month-view>\r\n\r\n            <mwl-calendar-week-view locale=\"es\" precision=\"minutes\" *ngSwitchCase=\"CalendarView.Week\" [viewDate]=\"viewDate\" [events]=\"events\" [refresh]=\"refresh\" (eventClicked)=\"handleEvent('Clicked', $event.event)\" (eventTimesChanged)=\"eventTimesChanged($event)\">\r\n            </mwl-calendar-week-view>\r\n\r\n            <mwl-calendar-day-view locale=\"es\" precision=\"minutes\" *ngSwitchCase=\"CalendarView.Day\" [viewDate]=\"viewDate\" [events]=\"events\" [refresh]=\"refresh\" (eventClicked)=\"handleEvent('Clicked', $event.event)\" (eventTimesChanged)=\"eventTimesChanged($event)\">\r\n            </mwl-calendar-day-view>\r\n        </div>\r\n\r\n\r\n\r\n\r\n        <!-- CALENDARIO -->\r\n\r\n\r\n\r\n    </div>\r\n\r\n    <!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n\r\n    <!-- =========================================================================\r\n    NUEVO EVENTO \r\n========================================================================= -->\r\n    <div class=\"modal fade\" id=\"nuevoEvento\" tabindex=\"-1\" aria-labelledby=\"nuevoEventoModal\" aria-hidden=\"true\">\r\n        <div class=\"modal-dialog modal-dialog-centered\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\" id=\"nuevoEventoModal\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Crear Evento</h5>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n\r\n\r\n                    <form id=\"newCategoriaForm\" autocomplete=\"off\" [formGroup]=\"newCalendarioForm\" (ngSubmit)=\"crearCalendario()\">\r\n\r\n                        <!-- =======================================================================\r\n                        Informacion del EVENTO\r\n                    =========================================================================== -->\r\n                        <h5 class=\"text-muted\">Informacion</h5>\r\n\r\n                        <div class=\"row mb-3\">\r\n                            <div class=\"col-md-12 px-md-1\">\r\n\r\n                                <div class=\"form-floating mb-2\">\r\n                                    <input formControlName=\"title\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombre de la Categoria\">\r\n                                    <label for=\"floatingInput\">Titulo</label>\r\n                                </div>\r\n\r\n                                <div class=\"\">\r\n                                    <label class=\"\" for=\"\">Desde</label>\r\n                                    <input formControlName=\"start\" type=\"datetime-local\" class=\"form-control\" (change)=\"initial.value\" #initial>\r\n                                </div>\r\n\r\n                                <div class=\"\">\r\n                                    <label class=\"\" for=\"\">Hasta</label>\r\n                                    <input formControlName=\"end\" type=\"datetime-local\" class=\"form-control\" (change)=\"end.value\" #end>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"row\">\r\n                            <div class=\"text-danger mb-2\">\r\n                                <p *ngIf=\"campoValido('title')\" class=\"mb-1 animated fadeIn\">- El titulo es obligatorio</p>\r\n                                <p *ngIf=\"campoValido('start')\" class=\"mb-1 animated fadeIn\">- Agrega una fecha de inicio</p>\r\n                                <p *ngIf=\"campoValido('end')\" class=\"mb-1 animated fadeIn\">- Agrega una fecha final</p>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                        <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                    </form>\r\n\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- =========================================================================\r\n    NUEVO EVENTO \r\n========================================================================= -->\r\n\r\n    <!-- =========================================================================\r\n        MODAL EVENTO \r\n    ========================================================================= -->\r\n    <!-- MODAL -->\r\n    <ng-template #modalContent let-close=\"close\">\r\n        <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\">Información</h5>\r\n            <button type=\"button\" class=\"close\" (click)=\"close()\">\r\n        <span aria-hidden=\"true\">&times;</span>\r\n      </button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n            <div>\r\n                <h3 class=\"text-center text-wrapp\">\r\n                    {{ modalData?.event.title }}\r\n                </h3>\r\n            </div>\r\n            <div>\r\n                <ul class=\"list-group list-group-flush\">\r\n                    <li class=\"list-group-item\">\r\n                        <i class=\"bi-calendar-range\"></i> <span class=\"fw-bold\"> Desde: </span>\r\n                        <p class=\"mb-0\">{{ modalData?.event.start | date : 'medium' }}</p>\r\n                    </li>\r\n                    <li class=\"list-group-item\">\r\n                        <i class=\"bi-calendar-range\"></i> <span class=\"fw-bold\"> Hasta: </span>\r\n                        <p class=\"mb-0\">{{ modalData?.event.end | date : 'medium' }}</p>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"close()\">\r\n        OK\r\n      </button>\r\n        </div>\r\n    </ng-template>\r\n    <!-- MODAL -->\r\n    <!-- =========================================================================\r\n        MODAL EVENTO \r\n    ========================================================================= -->","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport Swal from 'sweetalert2';\r\n\r\n// EXCEL\r\nimport * as XLSX from 'xlsx';\r\n\r\n// MODELS\r\nimport { Client } from 'src/app/models/client.model';\r\n\r\n// SERVICES\r\nimport { ClientService } from '../../services/client.service';\r\nimport { SearchService } from '../../services/search.service';\r\nimport { InvoiceService } from '../../services/invoice.service';\r\nimport { LoadInvoice, ListInvoice, ListCreditoCliente } from '../../interfaces/invoice.interface';\r\nimport { BancosService } from 'src/app/services/bancos.service';\r\nimport { Banco } from 'src/app/models/bancos.model';\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport { User } from 'src/app/models/user.model';\r\nimport { Invoice } from 'src/app/models/invoice.model';\r\nimport { TurnoService } from 'src/app/services/turno.service';\r\nimport { LoadTurno } from 'src/app/interfaces/load-turno.interface';\r\nimport { EmpresaService } from 'src/app/services/empresa.service';\r\nimport { Datos } from 'src/app/models/empresa.model';\r\nimport { DataicoService } from 'src/app/services/dataico.service';\r\nimport { DataicoInterface } from 'src/app/interfaces/dataico.interface';\r\n\r\ninterface _Department {\r\n  codigo: string,\r\n  departamento: string,\r\n}\r\n\r\n@Component({\r\n  selector: 'app-clientes',\r\n  templateUrl: './clientes.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class ClientesComponent implements OnInit {\r\n\r\n  \r\n  \r\n  public totalClientes: number = 0;\r\n  public resultado: number = 0;\r\n  public clientes: Client[] = [];\r\n  public clientesTemp: Client[] = [];\r\n  public desde: number = 0;\r\n  public cargando: boolean = true;\r\n  public sinResultados: boolean = true;\r\n\r\n  public btnAtras: string = '';\r\n  public btnAdelante: string = '';\r\n\r\n  public user: User;\r\n  \r\n\r\n  constructor(  private clientService: ClientService,\r\n                private searchService: SearchService,\r\n                private fb:FormBuilder,\r\n                private invoicesService: InvoiceService,\r\n                private bancosService: BancosService,\r\n                private userService: UserService,\r\n                private turnoService: TurnoService,\r\n                private dataicoService: DataicoService,\r\n                private empresaService: EmpresaService,\r\n                private http: HttpClient) {  \r\n                  this.user = userService.user;\r\n                }\r\n\r\n  ngOnInit(): void {\r\n    \r\n    this.cargarClientes();\r\n\r\n    this.cargarDatos();    \r\n\r\n    this.cargarBancos();\r\n\r\n    // CARGAR TURNO\r\n    this.cargarTurno();\r\n\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR DATOS\r\n  ==================================================================== */\r\n  public empresa: Datos;\r\n  cargarDatos(){\r\n  \r\n      this.empresaService.getDatos()\r\n          .subscribe( datos => {\r\n            this.empresa = datos;  \r\n            this.loadDepartmentAndCitys();\r\n            this.loadDataico();  \r\n  \r\n          }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n    }\r\n\r\n  /** ================================================================\r\n   *   CARGAR DATOS DATAICO\r\n  ==================================================================== */\r\n  public dataico: DataicoInterface;\r\n  loadDataico(){\r\n\r\n    this.dataicoService.loadDataDataico()\r\n        .subscribe( ({dataico}) => {\r\n\r\n          if (dataico) {\r\n            this.dataico = dataico;\r\n          }\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR BANCOS\r\n  ==================================================================== */\r\n  public bancos: Banco[] = [];\r\n  cargarBancos(){\r\n\r\n    this.bancosService.loadBancos()\r\n        .subscribe( ({bancos}) => {\r\n\r\n          this.bancos = bancos.filter( banco => banco.status === true);          \r\n\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  ABONOS A CREDITOS\r\n  ==================================================================== */\r\n  public turno: LoadTurno;\r\n  cargarTurno(){\r\n\r\n    this.turnoService.getTurnoId(this.user.turno)\r\n        .subscribe( (turno) => {\r\n          this.turno = turno;                    \r\n        });\r\n\r\n  }\r\n\r\n\r\n  /** ================================================================\r\n   *  ABONOS A CREDITOS\r\n  ==================================================================== */\r\n  @ViewChild ('descripcionAdd') descripcionAdd: ElementRef;\r\n  @ViewChild ('montoAdd') montoAdd: ElementRef;\r\n  agregarPagos(type: string, monto: any, description: string){\r\n\r\n    monto = Number(monto);\r\n\r\n    if (monto === 0 || monto < 1) {\r\n      Swal.fire('Atención', 'No has agregado un monto', 'info');\r\n      return;      \r\n    }\r\n\r\n    if (this.user.cerrada) {\r\n      Swal.fire('Atención', 'Debes de abrir caja primero', 'info');\r\n      return;    \r\n    }\r\n\r\n    for (let i = 0; i < this.creditos.length; i++) {\r\n      const factura = this.creditos[i];\r\n\r\n      console.log(monto);\r\n\r\n      if (monto <= 0) {\r\n        console.log('ES 0');\r\n        return;\r\n      }     \r\n\r\n      // SI EL MONTO ES MENOR A LA DEUDA DE LA FACTURA\r\n      if (monto < (factura.amount - factura.totalAbonado)) {\r\n\r\n        console.log('Menor');        \r\n\r\n        factura.paymentsCredit.push({\r\n          type,\r\n          amount: monto,\r\n          description,\r\n          turno: this.user.turno\r\n        }); \r\n\r\n        monto = 0;\r\n        factura.totalAbonado += factura.paymentsCredit[factura.paymentsCredit.length - 1].amount;\r\n        this.totalAbonado += factura.paymentsCredit[factura.paymentsCredit.length - 1].amount;\r\n\r\n        \r\n\r\n        // this.invoicesService.updateInvoice( {paymentsCredit: factura.paymentsCredit, credito: factura.credito }, factura.iid )\r\n        //     .subscribe( async ( resp:{ok: boolean, invoice: Invoice } ) => {\r\n\r\n        //       this.descripcionAdd.nativeElement.value = '';\r\n        //       this.montoAdd.nativeElement.value = '';\r\n        //       Swal.fire('Estupendo', 'Se ha agregado el pago exitosamente', 'success');\r\n\r\n        //       let payTurno = {\r\n        //         factura: factura.iid,\r\n        //         pay: resp.invoice.paymentsCredit[resp.invoice.paymentsCredit.length - 1]._id,\r\n        //         monto: resp.invoice.paymentsCredit[factura.paymentsCredit.length - 1].amount,\r\n        //       }\r\n    \r\n        //       this.turno.abonos.push(payTurno);\r\n              \r\n        //       this.turnoService.updateTurno({abonos:this.turno.abonos}, this.user.turno)\r\n        //       .subscribe( resp => {       \r\n        //         }, (err) => {\r\n        //           console.log(err);              \r\n        //       })\r\n\r\n        //     }, (err) => {\r\n        //       console.log(err);\r\n        //       Swal.fire('Error', err.error.msg, 'error');\r\n              \r\n        //     })\r\n        \r\n      }else if (monto >= (factura.amount - factura.totalAbonado)) {\r\n\r\n        console.log('MAYOR');\r\n\r\n        factura.paymentsCredit.push({\r\n          type,\r\n          amount: (factura.amount - factura.totalAbonado),\r\n          description,\r\n          turno: this.user.turno\r\n        });\r\n\r\n        factura.credito = false;\r\n\r\n        monto -= factura.paymentsCredit[factura.paymentsCredit.length - 1].amount;\r\n\r\n        factura.totalAbonado += factura.paymentsCredit[factura.paymentsCredit.length - 1].amount;\r\n        this.totalAbonado += factura.paymentsCredit[factura.paymentsCredit.length - 1].amount;        \r\n        \r\n      }else{\r\n        console.log('RETORNO');\r\n        return;\r\n      }\r\n\r\n      console.log('Agregar pago');\r\n\r\n      this.invoicesService.updateInvoice( {paymentsCredit: factura.paymentsCredit, credito: factura.credito }, factura.iid )\r\n            .subscribe( ( resp:{ok: boolean, invoice: Invoice } ) => {\r\n\r\n              this.descripcionAdd.nativeElement.value = '';\r\n              this.montoAdd.nativeElement.value = '';\r\n              Swal.fire('Estupendo', 'Se ha agregado el pago exitosamente', 'success');\r\n\r\n              let payTurno = {\r\n                factura: resp.invoice.iid,\r\n                pay: resp.invoice.paymentsCredit[resp.invoice.paymentsCredit.length - 1]._id,\r\n                monto: resp.invoice.paymentsCredit[resp.invoice.paymentsCredit.length - 1].amount,\r\n              }\r\n    \r\n              this.turno.abonos.push(payTurno);\r\n              \r\n              this.turnoService.updateTurno({abonos:this.turno.abonos}, this.user.turno)\r\n              .subscribe( resp => {\r\n\r\n                }, (err) => {\r\n                  console.log(err);              \r\n              })\r\n\r\n            }, (err) => {\r\n              console.log(err);\r\n              Swal.fire('Error', err.error.msg, 'error');\r\n              \r\n            })\r\n      \r\n    }\r\n    \r\n  }\r\n\r\n\r\n  /** ================================================================\r\n   *  OBTENER DEPARTAMENTOS Y CIUDADES\r\n  ==================================================================== */\r\n  public departments: _Department[] = [];\r\n  public cities: any[] = [];\r\n  loadDepartmentAndCitys(){\r\n\r\n    let JsonCity: string = 'assets/json/ciudades.json';\r\n    let JsonDepartment: string = 'assets/json/departamentos.json';\r\n\r\n    if (this.empresa.pais === 'USA') {\r\n      JsonCity = 'assets/json/usaciudades.json';\r\n      JsonDepartment = 'assets/json/usadepartamentos.json';\r\n    }\r\n\r\n    this.http.get(JsonDepartment)\r\n        .subscribe( (data: any) => {          \r\n          this.departments = data;            \r\n        });\r\n\r\n    this.http.get(JsonCity)\r\n    .subscribe( (data: any) => {          \r\n      this.cities = data;          \r\n    })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  OBTENER CIUDADES DEPENDIENDO DEL DEPARTAMENTO\r\n  ==================================================================== */\r\n  public ListCities: any[] = [];\r\n  searchCities(department: string){\r\n\r\n    this.ListCities = [];\r\n\r\n    if (department.length === 0 ) {\r\n      return;\r\n    }\r\n\r\n    this.ListCities = this.cities.filter( city =>  department === city.departamento );\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREAR CLIENTES\r\n  ==================================================================== */\r\n  // FORMULARIO\r\n  public formSubmitted = false;\r\n  public newClientForm = this.fb.group({\r\n    party_type: ['PERSONA_NATURAL', [Validators.required]],\r\n    tax_level_code: ['NO_RESPONSABLE_DE_IVA', [Validators.required]],\r\n    party_identification_type: ['CC', [Validators.required]],\r\n    company_name: '',\r\n    first_name: '',\r\n    family_name: '',\r\n    address_line: '',\r\n    regimen: ['SIMPLE',],\r\n    party_identification: '',\r\n    codigodepartamento: '',\r\n    codigociudad: '',\r\n    sendemail: false,\r\n    // OLD\r\n    name: [''],\r\n    cedula: ['', [Validators.required, Validators.minLength(3)]],\r\n    email: [''],\r\n    phone: [''],\r\n    address: [''],\r\n    city: [''],\r\n    department: [''],\r\n    zip: [''],\r\n    mayoreo: false,\r\n    contratista: false,\r\n  });\r\n\r\n  async crearCliente(){\r\n\r\n    // OBTENER CODIGO DEL DEPARTAMENTO Y CIUDAD\r\n    // let ciudaQ = await this.cities.find( city =>  {\r\n    //   if ( this.newClientForm.value.city === city.ciudad && this.newClientForm.value.department === city.departamento) {\r\n    //     return city\r\n    //   }\r\n    // });\r\n    \r\n    // this.newClientForm.value.codigodepartamento  = ciudaQ['codigo departamento'];\r\n    // this.newClientForm.value.codigociudad  = ciudaQ['codigo'];\r\n\r\n    // OBTENER CODIGO DEL DEPARTAMENTO Y CIUDAD\r\n    if (this.newClientForm.value.city === '' || !this.newClientForm.value.city) {\r\n      \r\n      let ciudaQ = await this.cities.find( city =>  {\r\n        if ( this.dataico.city === city.codigo && this.dataico.department === city['codigo departamento']) {\r\n          return city\r\n        }\r\n      });\r\n      \r\n      this.newClientForm.value.codigodepartamento  = ciudaQ['codigo departamento'];\r\n      this.newClientForm.value.codigociudad  = ciudaQ['codigo'];\r\n      this.newClientForm.value.department  = ciudaQ.departamento;\r\n      this.newClientForm.value.city  = ciudaQ.ciudad;\r\n    \r\n    }else{\r\n\r\n      let ciudaQ = await this.cities.find( city =>  {\r\n        if ( this.newClientForm.value.city === city.ciudad && this.newClientForm.value.department === city.departamento) {\r\n          return city\r\n        }\r\n      });\r\n      \r\n      this.newClientForm.value.codigodepartamento  = ciudaQ['codigo departamento'];\r\n      this.newClientForm.value.codigociudad  = ciudaQ['codigo'];\r\n\r\n    }\r\n\r\n    this.formSubmitted = true;\r\n\r\n    if (this.newClientForm.invalid) {\r\n      return;\r\n    }\r\n    \r\n    if (this.newClientForm.value.party_type === 'PERSONA_NATURAL') {      \r\n      this.newClientForm.value.name = `${this.newClientForm.value.first_name} ${this.newClientForm.value.family_name}`\r\n    }else{\r\n      this.newClientForm.value.name = this.newClientForm.value.company_name;\r\n    }\r\n\r\n    this.newClientForm.value.party_identification = this.newClientForm.value.cedula;\r\n\r\n    this.clientService.createClient(this.newClientForm.value)\r\n        .subscribe((resp: any) => {\r\n\r\n          Swal.fire('Estupendo', 'Se ha creado el cliente exitosamente!', 'success');\r\n          this.cargarClientes();\r\n\r\n          this.formSubmitted = false;\r\n          this.newClientForm.reset();          \r\n          \r\n        }, (err) =>{\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n        });\r\n  }\r\n\r\n  // VALIDAR CAMPOS\r\n  campoValido(campo: string): boolean{\r\n\r\n    if ( this.newClientForm.get(campo).invalid &&  this.formSubmitted) {      \r\n      return true;      \r\n    } else{\r\n            \r\n      return false;\r\n    }\r\n  \r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR CLIENTES\r\n  ==================================================================== */\r\n  cargarClientes(){\r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n    this.clientService.cargarClientes(this.desde)\r\n    .subscribe(({total, clients}) => {\r\n        \r\n        // COMPROBAR SI EXISTEN RESULTADOS\r\n        if (clients.length === 0) {\r\n          this.sinResultados = false;\r\n          this.clientes = [];\r\n          this.resultado = 0;\r\n          return;                \r\n        }\r\n        // COMPROBAR SI EXISTEN RESULTADOS\r\n      \r\n        this.totalClientes = total;\r\n        this.clientes = clients;\r\n        this.clientesTemp = clients;\r\n        this.resultado = 0;\r\n        this.cargando = false;\r\n\r\n        // BOTONOS DE ADELANTE Y ATRAS          \r\n        if (this.desde === 0 && this.totalClientes > 10) {\r\n          this.btnAtras = 'disabled';\r\n          this.btnAdelante = '';\r\n        }else if(this.desde === 0 && this.totalClientes < 11){\r\n          this.btnAtras = 'disabled';\r\n          this.btnAdelante = 'disabled';\r\n        }else if((this.desde + 10) >= this.totalClientes){\r\n          this.btnAtras = '';\r\n          this.btnAdelante = 'disabled';\r\n        }else{\r\n          this.btnAtras = '';\r\n          this.btnAdelante = '';\r\n        }   \r\n        // BOTONOS DE ADELANTE Y ATRAS\r\n          \r\n      });\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CAMBIAR PAGINA\r\n  ==================================================================== */\r\n  cambiarPagina (valor: number){\r\n    this.desde += valor;\r\n\r\n    if (this.desde < 0) {\r\n      this.desde = 0;\r\n    }else if( this.desde > this.totalClientes ){\r\n      this.desde -= valor;\r\n    }\r\n\r\n    this.cargarClientes();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR\r\n  ==================================================================== */\r\n  buscar( termino:string ){\r\n\r\n    this.sinResultados = true;\r\n\r\n    if (termino.length === 0) {\r\n      this.clientes = this.clientesTemp;\r\n      this.resultado = 0;\r\n      return;\r\n    }else{\r\n      this.sinResultados = true;\r\n\r\n      this.searchService.search('clients', termino)\r\n            .subscribe(({total, resultados}) => {\r\n\r\n              // COMPROBAR SI EXISTEN RESULTADOS\r\n              if (resultados.length === 0) {\r\n                this.sinResultados = false;\r\n                this.clientes = [];\r\n                this.resultado = 0;\r\n                return;                \r\n              }\r\n              // COMPROBAR SI EXISTEN RESULTADOS\r\n\r\n              this.totalClientes = total;\r\n              this.clientes = resultados; \r\n              this.resultado = resultados.length;          \r\n            });\r\n    }    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BORRAR CLIENTE\r\n  ==================================================================== */\r\n  borrarCliente(_id: string){\r\n\r\n    this.clientService.deleteClient(_id)\r\n        .subscribe((resp:{client, ok}) =>{\r\n\r\n          if (resp.client.status) {\r\n            Swal.fire('Estupendo', 'Se ha habilitado el cliente exitosamente!', 'success');\r\n          }else{\r\n            Swal.fire('Estupendo', 'Se ha eliminado el cliente exitosamente!', 'success');\r\n          }\r\n\r\n          this.cargarClientes();\r\n        }, (err) =>{\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n        });\r\n  }\r\n\r\n  /** ================================================================\r\n   *   Actualizar CLIENTE\r\n  ==================================================================== */\r\n  public formSubmittedUp = false;\r\n  public upClientForm = this.fb.group({\r\n    party_type: ['PERSONA_NATURAL', [Validators.required]],\r\n    tax_level_code: ['NO_RESPONSABLE_DE_IVA', [Validators.required]],\r\n    party_identification_type: ['CC', [Validators.required]],\r\n    company_name: '',\r\n    first_name: '',\r\n    family_name: '',\r\n    regimen: ['SIMPLE',],\r\n    party_identification: '',\r\n    codigodepartamento: '',\r\n    codigociudad: '',\r\n    // OLD\r\n    _id: [ '' , [Validators.required, Validators.minLength(24)]],\r\n    name: [''],\r\n    cedula: ['', [Validators.required, Validators.minLength(3)]],\r\n    email: [''],\r\n    phone: [''],\r\n    address: [''],\r\n    city: [''],\r\n    department: [''],\r\n    zip: [''],\r\n    credit: false,\r\n    mayoreo: false,\r\n    contratista: false,\r\n  });\r\n\r\n  // OBTENER LA INFORMACION DEL CLIENTE\r\n  async actualizarCliente(cliente: Client){\r\n\r\n    await this.searchCities(cliente.department);\r\n\r\n\r\n    this.upClientForm.reset();\r\n\r\n\r\n    this.upClientForm.setValue({\r\n\r\n      party_type: cliente.party_type || 'PERSONA_NATURAL',\r\n      tax_level_code: cliente.tax_level_code || 'NO_RESPONSABLE_DE_IVA',\r\n      party_identification_type: cliente.party_identification_type || 'CC',\r\n      company_name: cliente.company_name || '',\r\n      first_name: cliente.first_name || '',\r\n      family_name: cliente.family_name || '',\r\n      regimen: cliente.regimen || 'SIMPLE',\r\n      party_identification: cliente.party_identification || '',\r\n      codigodepartamento: cliente.codigodepartamento || '',\r\n      codigociudad: cliente.codigociudad || '',\r\n      // OLD\r\n      _id: cliente.cid,\r\n      name: cliente.name || '',\r\n      cedula: cliente.cedula || '', \r\n      email: cliente.email || '',\r\n      phone: cliente.phone || '',\r\n      address: cliente.address || '',\r\n      city: cliente.city || '',\r\n      department: cliente.department || '',\r\n      zip: cliente.zip || '',\r\n      credit : cliente.credit || false,\r\n      mayoreo : cliente.mayoreo || false,\r\n      contratista : cliente.contratista || false\r\n\r\n    });\r\n    \r\n    \r\n  }\r\n  \r\n  /** ================================================================\r\n   *  ACTUALIZAR CLIENTE\r\n  ==================================================================== */\r\n  async updateCLiente(){\r\n\r\n    // OBTENER CODIGO DEL DEPARTAMENTO Y CIUDAD\r\n    let ciudaQ = await this.cities.find( city =>  {\r\n      if ( this.upClientForm.value.city === city.ciudad && this.upClientForm.value.department === city.departamento) {\r\n        return city\r\n      }\r\n    });\r\n\r\n    this.upClientForm.value.codigodepartamento  = ciudaQ['codigo departamento'];\r\n    this.upClientForm.value.codigociudad  = ciudaQ['codigo'];\r\n\r\n    this.formSubmittedUp = true;\r\n\r\n    if (this.upClientForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    if (this.upClientForm.value.party_type === 'PERSONA_NATURAL') {      \r\n      this.upClientForm.value.name = `${this.upClientForm.value.first_name} ${this.upClientForm.value.family_name}`\r\n    }else{\r\n      this.upClientForm.value.name = this.upClientForm.value.company_name;\r\n    }\r\n\r\n    this.upClientForm.value.party_identification = this.upClientForm.value.cedula;\r\n    \r\n    this.clientService.updateClient(this.upClientForm.value, this.upClientForm.value._id)\r\n          .subscribe( resp => {\r\n\r\n            Swal.fire('Estupendo', `Se ha actualizado el cliente ${ this.upClientForm.value.name } exitosamente!`, 'success');\r\n            this.cargarClientes();\r\n  \r\n            this.formSubmittedUp = false;\r\n\r\n          }, (err) => {\r\n            Swal.fire('Error', err.error.msg, 'error');\r\n          });\r\n    \r\n    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  VALIDAR CAMPOScredito\r\n  ==================================================================== */\r\n  campoValidoUpdate(campo: string): boolean{\r\n\r\n    if ( this.upClientForm.get(campo).invalid &&  this.formSubmittedUp) {      \r\n      return true;      \r\n    } else{\r\n            \r\n      return false;\r\n    }\r\n  \r\n  }\r\n\r\n  /** ================================================================\r\n   *  CARGAR LAS FACTURAS A CREDITO DEL CLIENTE\r\n  ==================================================================== */\r\n  public creditos: LoadInvoice[] = [];\r\n  public clienteCredito: Client;\r\n  public totalAbonado: number = 0;\r\n  public totalCredito: number = 0;\r\n  credito(client: Client, credito: boolean){\r\n\r\n    this.creditos = [];\r\n    this.clienteCredito = client;\r\n    this.totalAbonado = 0;\r\n    this.totalCredito = 0;\r\n\r\n    this.invoicesService.loadInvoiceCreditClient(client.cid, credito)\r\n        .subscribe( (invoices) => {\r\n\r\n          this.creditos = invoices;\r\n          \r\n          for (let i = 0; i < this.creditos.length; i++) {\r\n            const factura = this.creditos[i];\r\n\r\n            factura.totalAbonado = 0;\r\n\r\n            this.totalCredito += factura.amount;\r\n\r\n            for (const pago of factura.payments) {\r\n              this.totalAbonado += pago.amount;\r\n              factura.totalAbonado += pago.amount;\r\n            }\r\n\r\n            for (const pago of factura.paymentsCredit) {\r\n              this.totalAbonado += pago.amount;\r\n              factura.totalAbonado += pago.amount;\r\n            }            \r\n            \r\n          }\r\n\r\n        });\r\n  }\r\n\r\n  /** ================================================================\r\n   *   IMPORTAR EXCEL\r\n  ==================================================================== */\r\n  arrayBuffer:any;\r\n  file:File;\r\n  public totalItems: number = 0;\r\n  public sendExcel: boolean = false;\r\n\r\n  public clients: any[] = [];\r\n\r\n  incomingfile(event: any){\r\n    this.file= event.target.files[0]; \r\n  }\r\n\r\n  uploadExcel() {\r\n\r\n    if (!this.file) {\r\n      Swal.fire('Atención', 'No has seleccionado ningun archivo de excel', 'info');\r\n      return;\r\n    }\r\n\r\n    this.sendExcel = true;\r\n\r\n\r\n    let fileReader = new FileReader();\r\n      fileReader.onload = (e) => {\r\n\r\n          this.arrayBuffer = fileReader.result;\r\n          var data = new Uint8Array(this.arrayBuffer);\r\n          var arr = new Array();\r\n\r\n          for(var i = 0; i != data.length; ++i) arr[i] = String.fromCharCode(data[i]);\r\n          \r\n          var bstr = arr.join(\"\");\r\n          var workbook = XLSX.read(bstr, {type:\"binary\"});\r\n          var first_sheet_name = workbook.SheetNames[0];\r\n          var worksheet = workbook.Sheets[first_sheet_name];\r\n          \r\n          const clientsArr: any[] = XLSX.utils.sheet_to_json(worksheet,{raw:true});\r\n\r\n          for (const client of clientsArr) {\r\n\r\n            if (client.party_type === 'PERSONA_NATURAL') {\r\n              client.name = `${client.nombre} ${client.apellido}`;\r\n              client.first_name = client.nombre;\r\n              client.family_name = client.apellido;\r\n            }else if (client.party_type === 'PERSONA_JURIDICA') {\r\n              client.company_name = client.nombre;\r\n              client.name = client.nombre;\r\n            }\r\n\r\n            this.http.get('assets/json/ciudades.json')\r\n            .subscribe( (data: any) => {          \r\n              this.cities = data;          \r\n            })\r\n\r\n            let data = this.cities.find( city => client.city === city.ciudad)\r\n\r\n            client.department = data.departamento;\r\n            client.codigodepartamento = data['codigo departamento'];\r\n            client.codigociudad = data.codigo;\r\n\r\n            this.clients.push(client);\r\n\r\n          }\r\n          \r\n          this.clientService.createClientExcel({clients: this.clients})\r\n              .subscribe( ({total}) => {\r\n\r\n                Swal.fire('Estupendo', `Se guardaron ${total} clientes exitosamente!`, 'success');                \r\n                this.sendExcel = false;\r\n                location.reload();\r\n\r\n              }, (err) => {\r\n                this.sendExcel = false;\r\n                console.log(err);\r\n                Swal.fire('Error', err.error.msg, 'error');                \r\n              })\r\n\r\n      }\r\n      \r\n      fileReader.readAsArrayBuffer(this.file);\r\n  };\r\n\r\n  /** ================================================================\r\n   *   PLANTILLA\r\n  ==================================================================== */\r\n  plantilla(){\r\n\r\n    let products = [{\r\n      nombre: 'Pedro',\r\n      apellido: 'Perez',\r\n      party_type: 'PERSONA_NATURAL',\r\n      tax_level_code: 'NO_RESPONSABLE_DE_IVA',\r\n      party_identification_type: 'CC',\r\n      cedula: '1111111',\r\n      city: 'BUCARAMANGA',\r\n      address: 'calle 22 #35',\r\n      phone: '22222222',\r\n      email: 'pedro@gmail.com',\r\n      },\r\n      {\r\n        nombre: 'drogueria aaa',\r\n        apellido: '',\r\n        party_type: 'PERSONA_JURIDICA',\r\n        tax_level_code: 'NO_RESPONSABLE_DE_IVA',\r\n        party_identification_type: 'NIT',\r\n        cedula: '3333333333',\r\n        city: 'CUCUTA',\r\n        address: 'el bosque',\r\n        phone: '4444444444',\r\n        email: 'drogueria@gmail.com',\r\n      }\r\n    ];\r\n\r\n    /* generate a worksheet */\r\n    var ws = XLSX.utils.json_to_sheet(products);\r\n\r\n    /* add to workbook */\r\n    var wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, ws, \"Clientes\");\r\n\r\n    /* title */\r\n    let title = 'clientes.xls';\r\n\r\n    /* write workbook and force a download */\r\n    XLSX.writeFile(wb, title);\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   EXPORT EXCEL\r\n  ==================================================================== */\r\n  exportExcel(){\r\n\r\n    let query = {\r\n      desde: 0,\r\n      hasta: 1000000,\r\n    }\r\n\r\n    this.clientService.loadClientsQuery(query)\r\n        .subscribe( ({clients }) => {\r\n\r\n          /* generate a worksheet */\r\n          var ws = XLSX.utils.json_to_sheet(clients);\r\n      \r\n          /* add to workbook */\r\n          var wb = XLSX.utils.book_new();\r\n          XLSX.utils.book_append_sheet(wb, ws, \"Clientes\");\r\n      \r\n          /* title */\r\n          let title = 'clients.xls';\r\n      \r\n          /* write workbook and force a download */\r\n          XLSX.writeFile(wb, title);\r\n          \r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n  \r\n  // FIN DE LA CLASE\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-dark py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">CLIENTES</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link active\" id=\"home-tab\" data-bs-toggle=\"tab\" href=\"#home\" role=\"tab\" aria-controls=\"home\" aria-selected=\"true\"><i class=\"bi-people\" style=\"font-size: 1rem\"></i> Administración de clientes </a>\r\n        </li>\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-success cursor\" id=\"crear-tab\" data-bs-toggle=\"modal\" data-bs-target=\"#nuevoCliente\"><i class=\"bi-person-plus\" style=\"font-size: 1rem\"></i> Nuevo Cliente </a>\r\n        </li>\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n<div class=\"tab-content mt-4 bg-light2\" id=\"myTabContent\">\r\n\r\n    <!-- TAB 1 -->\r\n    <div class=\"tab-pane fade show active\" id=\"home\" role=\"tabpanel\" aria-labelledby=\"home-tab\">\r\n        <div class=\"px-3\">\r\n            <!-- TITLE - SUBTITLE -->\r\n            <div>\r\n                <h5 class=\"text-dark\">ADMINISTRACIÓN DE CLIENTES</h5>\r\n                <p>Administra todos los clientes de tu negocio (crédito, facturación, etc) de forma centralizada.</p>\r\n            </div>\r\n            <!-- TITLE - SUBTITLE -->\r\n\r\n            <!-- TABLE CLIENTS -->\r\n            <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n                <!-- CARGANDO -->\r\n                <div *ngIf=\"cargando\">\r\n                    <div class=\"text-center p-4\">\r\n                        <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                            <span class=\"visually-hidden\">Loading...</span>\r\n                        </div>\r\n                    </div>\r\n                    <small class=\"text-muted\">cargando...</small>\r\n                </div>\r\n                <!-- CARGANDO -->\r\n\r\n                <div *ngIf=\"!cargando\">\r\n                    <div>\r\n                        <div class=\"form-floating mb-2\">\r\n                            <span class=\"position-absolute top-50 start-90 translate-middle\"><i class=\" bi-search \" style=\"font-size: 1rem \"></i></span>\r\n                            <input type=\"text\" class=\"form-control\" id=\"floatingInput\" placeholder=\"Buscar Cliente\" (keyup)=\"buscar(search.value)\" #search>\r\n                            <label for=\"floatingInput \">Buscar Cliente</label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"d-flex flex-wrap\">\r\n\r\n                        <div class=\"ms-auto text-end\">\r\n                            <div class=\"my-2\">\r\n                                <button class=\"btn btn-success btn-sm mr-2\" data-bs-toggle=\"modal\" data-bs-target=\"#updateExcel\"> <i class=\"bi bi-file-earmark-excel\"></i> Subir excel</button>\r\n                                <button (click)=\"exportExcel()\" class=\"btn btn-info btn-sm mr-2\"> <i class=\"bi bi-cloud-arrow-down\"></i> Exportar excel</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"table-responsive \">\r\n                        <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                            <thead class=\"border-bottom \">\r\n                                <tr>\r\n                                    <th class=\"text-muted \" scope=\"col \">#</th>\r\n                                    <th class=\"text-muted \" scope=\"col \" colspan=\"2 \">Nombres</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Cedula</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Email</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Telefono</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Dirección</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Departamento</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Codigo Postal</th>\r\n                                    <th class=\"text-muted w100 \" scope=\"col \">Acciones</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr *ngIf=\"!sinResultados\" class=\"text-center \">\r\n                                    <th colspan=\"10\" class=\"py-4\">\r\n                                        <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                                    </th>\r\n                                </tr>\r\n                                <tr class=\"trHover\" *ngFor=\"let cliente of clientes; let i=index \">\r\n                                    <th *ngIf=\"desde===0 \" scope=\"row \">{{ i + 1}}</th>\r\n                                    <th *ngIf=\"desde> 0\" scope=\"row\">{{ (i + 1) + desde }}</th>\r\n                                    <td colspan=\"2\">\r\n                                        {{ cliente.name }}\r\n                                        <span *ngIf=\"!cliente.status\" class=\"badge rounded-pill bg-danger\">Eliminado</span>\r\n                                    </td>\r\n                                    <td>{{ cliente.cedula }}</td>\r\n                                    <td>{{ cliente.email }}</td>\r\n                                    <td>{{ cliente.phone }}</td>\r\n                                    <td>{{ cliente.address }}</td>\r\n                                    <td>{{ cliente.department }} <span *ngIf=\"cliente.city || cliente.department\">-</span> {{ cliente.city }}</td>\r\n                                    <td>{{ cliente.zip }}</td>\r\n                                    <td class=\"text-center\">\r\n                                        <button type=\"button\" (click)=\"credito(cliente, true)\" class=\"btn btn-link p-1 text-warning\" data-bs-toggle=\"modal\" data-bs-target=\"#credito\"><i class=\"bi-calendar-event\" style=\"font-size: 0.9rem\"></i></button>\r\n                                        <button type=\"button\" (click)=\"actualizarCliente(cliente)\" class=\"btn btn-link p-1 text-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#actualizarCLienteM\"><i class=\"bi-pen\" style=\"font-size: 0.9rem\"></i></button>\r\n                                        <button type=\"button\" (click)=\"borrarCliente(cliente.cid)\" class=\"btn btn-link p-1 text-danger\"><i class=\"bi-trash\" style=\"font-size: 0.9rem\"></i></button>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n\r\n                        </table>\r\n\r\n                    </div>\r\n\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                    <div class=\"row\">\r\n                        <div class=\"col col-md-4\">\r\n                            <small class=\"text-muted\">Total de clientes: ({{totalClientes}})</small>\r\n                            <small *ngIf=\"resultado !== 0\" class=\"text-muted\"> - (Resultados: {{ resultado }})</small>\r\n                            <small *ngIf=\"desde !== 0\" class=\"text-muted\"> - (Desde el: {{ desde + 1}} Hasta el: {{ desde + clientes.length }})</small>\r\n                        </div>\r\n\r\n                        <div *ngIf=\"search.value.length === 0\" class=\"col d-flex justify-content-end\">\r\n                            <button type=\"button\" (click)=\"cambiarPagina(-10)\" class=\"{{btnAtras}} btn btn-sm btn-dark btnW waves-effect waves-light px-3\">Anterior</button>\r\n                            <button type=\"button\" (click)=\"cambiarPagina(10)\" class=\"{{btnAdelante}} btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2\">Siguiente</button>\r\n                        </div>\r\n                    </div>\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n                </div>\r\n            </div>\r\n            <!-- TABLE CLIENTS -->\r\n\r\n\r\n\r\n        </div>\r\n    </div>\r\n    <!-- TAB 1 -->\r\n\r\n</div>\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n<!-- =========================================================================\r\n    NUEVO CLIENTE  credito\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"nuevoCliente\" tabindex=\"-1\" aria-labelledby=\"nuevoClienteModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"nuevoClienteModal\"><i class=\"bi-person-plus\" style=\"font-size: 2rem\"></i> Nuevo Cliente</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form id=\"newClientForm\" autocomplete=\"off\" [formGroup]=\"newClientForm\" (ngSubmit)=\"crearCliente()\">\r\n\r\n                    <!-- =======================================================================\r\n                        DATOS PERSONALES \r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Datos Personales</h5>\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <!-- Tipo de empresa ** -->\r\n                        <div class=\"col-md-12 mb-3 px-md-1\">\r\n                            <label for=\"partyType\" class=\"col-sm-auto col-form-label\">Tipo de empresa</label>\r\n                            <select formControlName=\"party_type\" class=\"form-select\" id=\"partyType\" #partyType (change)=\"partyType.value\" aria-label=\"Floating label select example\">\r\n                                <option value=\"PERSONA_NATURAL\">Persona Natural</option>\r\n                                <option value=\"PERSONA_JURIDICA\" >Persona Juridica</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        <!-- Nombre de la empresa -->\r\n                        <div *ngIf=\"partyType.value === 'PERSONA_JURIDICA'\" class=\"col-md-12 mb-3 px-md-1\">\r\n                            <label for=\"companyName\">Nombre de la empresa </label>\r\n                            <div class=\"form-floating\">\r\n                                <input id=\"companyName\" formControlName=\"company_name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombre de la empresa\">\r\n                                <label for=\"floatingInput\">Nombre de la empresa </label>\r\n                            </div>\r\n                            <p *ngIf=\"campoValido('company_name')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                        </div>\r\n\r\n                        <!-- Nombres de la persona natural -->\r\n                        <div *ngIf=\"partyType.value === 'PERSONA_NATURAL'\" class=\"col-md-12 mb-3 px-md-1\">\r\n                            <label for=\"firstName\">Nombres de la persona natural </label>\r\n                            <div class=\"form-floating\">\r\n                                <input id=\"firstName\" formControlName=\"first_name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombres de la persona natural\">\r\n                                <label for=\"floatingInput\">Nombres de la persona natural </label>\r\n                            </div>\r\n                            <p *ngIf=\"campoValido('first_name')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                        </div>\r\n\r\n                        <!-- Apellidos de la persona natural -->\r\n                        <div *ngIf=\"partyType.value === 'PERSONA_NATURAL'\" class=\"col-md-12 mb-3 px-md-1\">\r\n                            <label for=\"familyName\">Apellidos de la persona natural </label>\r\n                            <div class=\"form-floating\">\r\n                                <input id=\"familyName\" formControlName=\"family_name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Apellidos de la persona natural\">\r\n                                <label for=\"floatingInput\">Apellidos de la persona natural </label>\r\n                            </div>\r\n                            <p *ngIf=\"campoValido('family_name')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                        </div>\r\n\r\n                        <!-- TIPO DE DOCUMENTO -->\r\n                        <div class=\"col-md-12 mb-3 px-md-1\">\r\n                            <label for=\"indentityType\" class=\"col-sm-auto col-form-label\">Tipo de documento</label>\r\n                            <select formControlName=\"party_identification_type\" class=\"form-select\" id=\"indentityType\" aria-label=\"Floating label select example\">\r\n                                <option value=\"NIT\">NIT</option>\r\n                                <option value=\"CC\" selected>CC</option>\r\n                                <option value=\"PASAPORTE\" >PASAPORTE</option>\r\n                                <option value=\"CE\" >CE</option>\r\n                                <option value=\"TE\" >TE</option>\r\n                                <option value=\"PEP\" >PEP</option>\r\n                                <option value=\"TI\" >TI</option>\r\n                                <option value=\"RC\" >RC</option>\r\n                                <option value=\"IE\" >IE</option>\r\n                                <option value=\"NIT_OTRO_PAIS\" >Nit de otro pais</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-6 px-md-1 \">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"cedula\" type=\"text\" class=\"form-control\" placeholder=\"Cedula de ciudadania\">\r\n                                <label for=\"floatingInput\">Cedula de ciudadania</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <div class=\"col-md-6 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"email\" type=\"email\" class=\"form-control\" placeholder=\"Email\">\r\n                                <label for=\"floatingInput\">Email</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div class=\"col-md-6 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"phone\" type=\"text\" class=\"form-control\" placeholder=\"Telefono\">\r\n                                <label for=\"floatingInput\">Telefono</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- =======================================================================\r\n                        DIRECCION\r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">DIRECCIÓN</h5>\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"address\" type=\"text\" class=\"form-control\" placeholder=\"Dirección\">\r\n                                <label for=\"floatingInput\">Dirección</label>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <!-- DEPARTAMENTO ** -->\r\n                        <div class=\"col-md-12 mb-3 px-md-1\">\r\n                            <label for=\"departamentoS\" class=\"col-sm-auto col-form-label\">Departamento</label>\r\n                            <select formControlName=\"department\" class=\"form-select\" id=\"departamentoS\" #departmentSS (change)=\"searchCities(departmentSS.value)\">\r\n                                <option >Seleccionar Departamento</option>\r\n                                <option *ngFor=\"let department of departments\" [value]=\"department.departamento\" >{{department.departamento}}</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        <!-- CIUDAD ** -->\r\n                        <div class=\"col-md-12 mb-3 px-md-1\">\r\n                            <label for=\"ciudadS\" class=\"col-sm-auto col-form-label\">Ciudad</label>\r\n                            <select formControlName=\"city\" class=\"form-select\" id=\"ciudadS\" aria-label=\"Floating label select example\">\r\n                                <option value=\"\" selected>Seleccionar Ciudad</option>\r\n                                <option *ngFor=\"let city of ListCities\" [value]=\"city.ciudad\" >{{city.ciudad}}</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-2 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"zip\" type=\"text\" class=\"form-control\" placeholder=\"ZIP\">\r\n                                <label for=\"floatingInput\">ZIP</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <!-- REGIMEN -->\r\n                        <div class=\"col-md-12 mb-3 px-md-1\">\r\n                            <label for=\"regimen\" class=\"col-sm-auto col-form-label\">Regimen</label>\r\n                            <select formControlName=\"regimen\" class=\"form-select\" id=\"regimen\" aria-label=\"Floating label select example\">\r\n                                <option value=\"SIMPLE\">SIMPLE</option>\r\n                                <option value=\"AUTORRETENEDOR\" >AUTORRETENEDOR</option>\r\n                                <option value=\"AGENTE_RETENCION_IVA\" >AGENTE RETENCION IVA</option>\r\n                                <option value=\"ORDINARIO\" >ORDINARIO</option>\r\n                                <option value=\"GRAN_CONTRIBUYENTE\" >GRAN CONTRIBUYENTE</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        <!-- TIPO DE IMPUESTO ** -->\r\n                        <div class=\"col-md-12 mb-3 px-md-1\">\r\n                            <label for=\"taxLevel\" class=\"col-sm-auto col-form-label\">Tipo de impuesto</label>\r\n                            <select formControlName=\"tax_level_code\" class=\"form-select\" id=\"taxLevel\" aria-label=\"Floating label select example\">\r\n                                <option value=\"SIMPLIFICADO\">SIMPLIFICADO</option>\r\n                                <option value=\"RESPONSABLE_DE_IVA\" >RESPONSABLE DE IVA</option>\r\n                                <option value=\"NO_RESPONSABLE_DE_IVA\" selected>NO RESPONSABLE DE IVA</option>\r\n                                <option value=\"COMUN\" >COMUN</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"col-md-1 px-md-1\">\r\n                        <div class=\"col-md-4 px-md-1\">\r\n                            <div class=\"form-check mt-2\">\r\n                                <input formControlName=\"mayoreo\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"mayoreo\">\r\n                                <label class=\"form-check-label\" for=\"mayoreo\">\r\n                                    Mayoreo\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-4 px-md-1\">\r\n                            <div class=\"form-check mt-2\">\r\n                                <input formControlName=\"contratista\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"contratista\">\r\n                                <label class=\"form-check-label\" for=\"contratista\">\r\n                                    Contratista\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"text-danger mb-2\">\r\n                            <p *ngIf=\"campoValido('name')\" class=\"mb-1 animated fadeIn\">- El nombre es obligatorio</p>\r\n                            <p *ngIf=\"campoValido('cedula')\" class=\"mb-1 animated fadeIn\">- La cedula de ciudadania es obligatoria</p>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    NUEVO CLIENTE \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    ACTUALIZAR CLIENTE\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"actualizarCLienteM\" tabindex=\"-1\" aria-labelledby=\"actualizarCLienteMModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"actualizarCLienteMModal\"><i class=\"bi-pencil\" style=\"font-size: 1rem\"></i> Actualizar Cliente</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form action=\"\" id=\"upClientForm\" autocomplete=\"off\" [formGroup]=\"upClientForm\" (ngSubmit)=\"updateCLiente()\">\r\n\r\n                    <!-- =======================================================================\r\n                        DATOS PERSONALES \r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Datos Personales</h5>\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <!-- Tipo de empresa ** -->\r\n                        <div class=\"col-md-12 mb-3 px-md-1\">\r\n                            <label for=\"partyType\" class=\"col-sm-auto col-form-label\">Tipo de empresa</label>\r\n                            <select formControlName=\"party_type\" class=\"form-select\" id=\"partyType\" #partyTypeUp (change)=\"partyTypeUp.value\" aria-label=\"Floating label select example\">\r\n                                <option value=\"PERSONA_NATURAL\">Persona Natural</option>\r\n                                <option value=\"PERSONA_JURIDICA\" >Persona Juridica</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        <!-- Nombre de la empresa -->\r\n                        <div *ngIf=\"partyTypeUp.value === 'PERSONA_JURIDICA'\" class=\"col-md-12 mb-3 px-md-1\">\r\n                            <label for=\"companyName\">Nombre de la empresa </label>\r\n                            <div class=\"form-floating\">\r\n                                <input id=\"companyName\" formControlName=\"company_name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombre de la empresa\">\r\n                                <label for=\"floatingInput\">Nombre de la empresa </label>\r\n                            </div>\r\n                            <p *ngIf=\"campoValido('company_name')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                        </div>\r\n\r\n                        <!-- Nombres de la persona natural -->\r\n                        <div *ngIf=\"partyTypeUp.value === 'PERSONA_NATURAL'\" class=\"col-md-12 mb-3 px-md-1\">\r\n                            <label for=\"firstName\">Nombres de la persona natural </label>\r\n                            <div class=\"form-floating\">\r\n                                <input id=\"firstName\" formControlName=\"first_name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombres de la persona natural\">\r\n                                <label for=\"floatingInput\">Nombres de la persona natural </label>\r\n                            </div>\r\n                            <p *ngIf=\"campoValido('first_name')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                        </div>\r\n\r\n                        <!-- Apellidos de la persona natural -->\r\n                        <div *ngIf=\"partyTypeUp.value === 'PERSONA_NATURAL'\" class=\"col-md-12 mb-3 px-md-1\">\r\n                            <label for=\"familyName\">Apellidos de la persona natural </label>\r\n                            <div class=\"form-floating\">\r\n                                <input id=\"familyName\" formControlName=\"family_name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Apellidos de la persona natural\">\r\n                                <label for=\"floatingInput\">Apellidos de la persona natural </label>\r\n                            </div>\r\n                            <p *ngIf=\"campoValido('family_name')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                        </div>\r\n\r\n                        <!-- TIPO DE DOCUMENTO -->\r\n                        <div class=\"col-md-12 mb-3 px-md-1\">\r\n                            <label for=\"indentityType\" class=\"col-sm-auto col-form-label\">Tipo de documento</label>\r\n                            <select formControlName=\"party_identification_type\" class=\"form-select\" id=\"indentityType\" aria-label=\"Floating label select example\">\r\n                                <option value=\"NIT\">NIT</option>\r\n                                <option value=\"CC\" selected>CC</option>\r\n                                <option value=\"PASAPORTE\" >PASAPORTE</option>\r\n                                <option value=\"CE\" >CE</option>\r\n                                <option value=\"TE\" >TE</option>\r\n                                <option value=\"PEP\" >PEP</option>\r\n                                <option value=\"TI\" >TI</option>\r\n                                <option value=\"RC\" >RC</option>\r\n                                <option value=\"IE\" >IE</option>\r\n                                <option value=\"NIT_OTRO_PAIS\" >Nit de otro pais</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-6 px-md-1 \">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"cedula\" type=\"text\" class=\"form-control\" placeholder=\"Cedula de ciudadania\">\r\n                                <label for=\"floatingInput\">Cedula de ciudadania</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <div class=\"col-md-6 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"email\" type=\"email\" class=\"form-control\" placeholder=\"Email\">\r\n                                <label for=\"floatingInput\">Email</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div class=\"col-md-6 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"phone\" type=\"text\" class=\"form-control\" placeholder=\"Telefono\">\r\n                                <label for=\"floatingInput\">Telefono</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- =======================================================================\r\n                        DIRECCION\r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">DIRECCIÓN</h5>\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"address\" type=\"text\" class=\"form-control\" placeholder=\"Dirección\">\r\n                                <label for=\"floatingInput\">Dirección</label>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <!-- DEPARTAMENTO ** -->\r\n                        <div class=\"col-md-12 mb-3 px-md-1\">\r\n                            <label for=\"departamentoS\" class=\"col-sm-auto col-form-label\">Departamento</label>\r\n                            <select formControlName=\"department\" class=\"form-select\" id=\"departamentoS\" #departmentSSUp (change)=\"searchCities(departmentSSUp.value)\">\r\n                                <option value=\"\" >Seleccionar Departamento</option>\r\n                                <option *ngFor=\"let department of departments\" [value]=\"department.departamento\" >{{department.departamento}}</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        <!-- CIUDAD ** -->\r\n                        <div class=\"col-md-12 mb-3 px-md-1\">\r\n                            <label for=\"ciudadS\" class=\"col-sm-auto col-form-label\">Ciudad</label>\r\n                            <select formControlName=\"city\" class=\"form-select\" id=\"ciudadS\" aria-label=\"Floating label select example\">\r\n                                <option value=\"\" selected>Seleccionar Ciudad</option>\r\n                                <option *ngFor=\"let city of ListCities\" [value]=\"city.ciudad\" >{{city.ciudad}}</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-2 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"zip\" type=\"text\" class=\"form-control\" placeholder=\"ZIP\">\r\n                                <label for=\"floatingInput\">ZIP</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <!-- REGIMEN -->\r\n                        <div class=\"col-md-12 mb-3 px-md-1\">\r\n                            <label for=\"regimen\" class=\"col-sm-auto col-form-label\">Regimen</label>\r\n                            <select formControlName=\"regimen\" class=\"form-select\" id=\"regimen\" aria-label=\"Floating label select example\">\r\n                                <option value=\"SIMPLE\">SIMPLE</option>\r\n                                <option value=\"AUTORRETENEDOR\" >AUTORRETENEDOR</option>\r\n                                <option value=\"AGENTE_RETENCION_IVA\" >AGENTE RETENCION IVA</option>\r\n                                <option value=\"ORDINARIO\" >ORDINARIO</option>\r\n                                <option value=\"GRAN_CONTRIBUYENTE\" >GRAN CONTRIBUYENTE</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        <!-- TIPO DE IMPUESTO ** -->\r\n                        <div class=\"col-md-12 mb-3 px-md-1\">\r\n                            <label for=\"taxLevel\" class=\"col-sm-auto col-form-label\">Tipo de impuesto</label>\r\n                            <select formControlName=\"tax_level_code\" class=\"form-select\" id=\"taxLevel\" aria-label=\"Floating label select example\">\r\n                                <option value=\"SIMPLIFICADO\">SIMPLIFICADO</option>\r\n                                <option value=\"RESPONSABLE_DE_IVA\" >RESPONSABLE DE IVA</option>\r\n                                <option value=\"NO_RESPONSABLE_DE_IVA\" selected>NO RESPONSABLE DE IVA</option>\r\n                                <option value=\"COMUN\" >COMUN</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <h5 class=\"text-muted\">TIPO DE CLIENTE</h5>\r\n\r\n                    <div class=\"row mb-3 gap-2\">\r\n\r\n                        <div class=\"col-auto\">\r\n                            <div class=\"form-check mt-2\">\r\n                                <input (change)=\"upClientForm.value.mayoreo = false; upClientForm.value.contratista = false; mayoreoCheck.checked = false; contratistaCheck.checked = false\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"cliente\" [checked]=\"mayoreoCheck.checked == false && contratistaCheck.checked == false \">\r\n                                <label class=\"form-check-label\" for=\"cliente\">\r\n                                    Cliente\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-auto\">\r\n                            <div class=\"form-check mt-2\">\r\n                                <input (change)=\"upClientForm.value.contratista = false; mayoreoCheck.checked = true; contratistaCheck.checked = false\" formControlName=\"mayoreo\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"mayoreo\" #mayoreoCheck>\r\n                                <label class=\"form-check-label\" for=\"mayoreo\">\r\n                                    Mayoreo\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-auto\">\r\n                            <div class=\"form-check mt-2\">\r\n                                <input (change)=\"upClientForm.value.mayoreo = false; mayoreoCheck.checked = false; contratistaCheck.checked = true \" formControlName=\"contratista\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"contratista\" #contratistaCheck>\r\n                                <label class=\"form-check-label\" for=\"contratista\">\r\n                                    Contratista\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row \">\r\n                        <div class=\"text-danger mb-2 \">\r\n                            <p *ngIf=\"campoValidoUpdate( 'name') \" class=\"mb-1 animated fadeIn \">- El nombre es obligatorio</p>\r\n                            <p *ngIf=\"campoValidoUpdate( 'cedula') \" class=\"mb-1 animated fadeIn \">- La cedula de ciudadania es obligatoria</p>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit \" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary \">Guardar</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer \">\r\n                <button type=\"button \" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    ACTUALIZAR CLIENTE\r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    LISTAR FACTURAS A CREDITOS  \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"credito\" tabindex=\"-1\" aria-labelledby=\"creditoModal\" aria-hidden=\"true\">\r\n    <!-- <div class=\"modal fade\" id=\"credito\" tabindex=\"-1\" aria-labelledby=\"creditoModal\" aria-hidden=\"true\"> -->\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n\r\n                <div *ngIf=\"clienteCredito \">\r\n                    <h5 class=\"modal-title \" id=\"creditoModal \">\r\n                        <i class=\"bi-calendar-event \" style=\"font-size: 2rem \"></i> LISTAR FACTURAS A CREDITOS\r\n                    </h5>\r\n                    <p class=\"mb-0 text-muted \">{{ clienteCredito?.name}} - {{ clienteCredito?.cedula}} </p>\r\n                    <p class=\"mb-0 text-muted \">{{ clienteCredito?.phone}} </p>\r\n                </div>\r\n\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body \">\r\n\r\n                <div class=\"d-flex flex-wrap justify-content-between gap-2 mb-3\">\r\n\r\n                    <div class=\"card shadow bg-warning border-0\">\r\n\r\n                        <div class=\"card-body text-white\">\r\n                            <h5 class=\"card-title mb-0 text-center\">Credito</h5>\r\n                            <h6 class=\"text-center\"> {{ totalCredito | divisa }} </h6>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"card shadow bg-primary border-0\">\r\n\r\n                        <div class=\"card-body text-white\">\r\n                            <h5 class=\"card-title mb-0 text-center\">Abonado</h5>\r\n                            <h6 class=\"text-center\"> {{ totalAbonado | divisa }} </h6>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"card shadow bg-dark border-0\">\r\n\r\n                        <div class=\"card-body text-white\">\r\n                            <h5 class=\"card-title mb-0 text-center\">Restante</h5>\r\n                            <h6 class=\"text-center\"> {{ totalCredito - totalAbonado | divisa }} </h6>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <button class=\"btn btn-primary mb-3\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapseExample\" aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                    Agregar Pagos\r\n                </button>\r\n\r\n                <div class=\"collapse mb-3\" id=\"collapseExample\">\r\n\r\n                    <!-- AGREGAR METODO DE PAGO -->\r\n                    <div class=\"row g-3 d-flex justify-content-center\">\r\n\r\n                        <div class=\"col-auto\">\r\n\r\n                            <select class=\"form-select\" aria-label=\"Default select example\" (change)=\"typeAdd.value\" #typeAdd>\r\n                                <option value=\"efectivo\">Efectivo</option>\r\n                                <ng-container *ngIf=\"bancos.length > 0\">\r\n                                    <option *ngFor=\"let banco of bancos\" [value]=\"banco.name\"> {{banco.name}}</option>                                                                \r\n                                </ng-container>\r\n                            </select>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-auto\">\r\n                            <label for=\"Descripción\" class=\"visually-hidden\">Descripción</label>\r\n                            <input type=\"text\" class=\"form-control w100\" id=\"Descripción\" placeholder=\"Descripción\" (keyup)=\"descripcionAdd.value\" #descripcionAdd>\r\n                        </div>\r\n\r\n                        <div class=\"col-auto\">\r\n                            <label for=\"monto\" class=\"visually-hidden\">Monto</label>\r\n\r\n                            <ng-container>\r\n                                <input type=\"number\" class=\"form-control\" id=\"monto\" placeholder=\"Monto\" autofocus=\"true\" (keyup)=\"montoAdd.value\" #montoAdd>\r\n                            </ng-container>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-auto\">\r\n                            <button type=\"button\" class=\"btn btn-primary mb-3\" (click)=\"agregarPagos(typeAdd.value, montoAdd.value, descripcionAdd.value)\">Agregar</button>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <!-- AGREGAR METODO DE PAGO -->\r\n                </div>\r\n\r\n                <!-- TABLA DE FACTURAS A CREDITOS DEL CLIENTE -->\r\n                <div class=\"table-responsive \">\r\n                    <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn overflow-auto \">\r\n                        <thead class=\"border-bottom \">\r\n                            <tr>\r\n                                <th class=\"text-muted \" scope=\"col \">#</th>\r\n                                <th class=\"text-muted \" scope=\"col \" colspan=\"2 \">Cliente</th>\r\n                                <th class=\"text-muted \" scope=\"col \">Cedula</th>\r\n                                <th class=\"text-muted \" scope=\"col \" colspan=\"2 \">Ruta</th>\r\n                                <th class=\"text-muted \" scope=\"col \">Monto</th>\r\n                                <th class=\"text-muted \" scope=\"col \">Abonado</th>\r\n                                <th class=\"text-muted \" scope=\"col \">Metodo</th>\r\n                                <th class=\"text-muted \" scope=\"col \">fecha</th>\r\n                                <th class=\"text-muted \" scope=\"col \"></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr *ngIf=\"creditos.length===0 \" class=\"text-center \">\r\n                                <th colspan=\"10 \" class=\"py-4 \">\r\n                                    <h4 class=\"text-muted \">Este Clinte no tiene facturas a credito</h4>\r\n                                </th>\r\n                            </tr>\r\n\r\n                            <ng-container *ngFor=\"let factura of creditos; let i=index \">\r\n\r\n                                <tr class=\"trHover \" tabindex=\"0 \" data-bs-toggle=\"tooltip \" title=\"Cajero: {{ factura.user.name }} \">\r\n                                    <th>{{ factura.invoice }}</th>\r\n                                    <td colspan=\"2 \">\r\n                                        {{ factura.client.name }}\r\n                                        <span *ngIf=\"!factura.status \" class=\"badge rounded-pill bg-danger \">Cancelada</span>\r\n                                        <span *ngIf=\"factura.credito && factura.status \" class=\"badge rounded-pill bg-warning \">Credito <span *ngIf=\"factura.apartado\" >- Apartado </span> </span>\r\n                                    </td>\r\n                                    <td> {{ factura.client.cedula }} </td>\r\n                                    <td colspan=\"2 \"> {{ factura.mesa.name }} </td>\r\n                                    <td> {{ factura.amount | currency: 'COP' }} </td>\r\n                                    <td> {{ factura.totalAbonado | currency: 'COP' }} </td>\r\n                                    <td> {{ factura.type }} </td>\r\n                                    <td> {{ factura.fecha | date:'medium' }} </td>\r\n                                    <td class=\"text-center \">\r\n                                        <a [routerLink]=\"[ '/dashboard/factura', factura.iid] \" class=\"btn btn-link p-1 text-primary\" data-bs-dismiss=\"modal\" aria-label=\"Close\"><i class=\"bi bi-box-arrow-up-right \"></i></a>\r\n                                    </td>\r\n                                </tr>\r\n\r\n                            </ng-container>\r\n\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n                <!-- TABLA DE FACTURAS A CREDITOS DEL CLIENTE -->\r\n\r\n            </div>\r\n            <div class=\"modal-footer \">\r\n                <button type=\"button \" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    LISTAR FACTURAS A CREDITOS \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    ACTUALIZAR TODOS LOS PRODUCTOS DESDE EL EXCEL\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"updateExcel\" tabindex=\"-1\" aria-labelledby=\"updateExcelModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"updateExcelModal\"> Subir Excel de clientes</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n                <h4 class=\"text-muted\">Importar Clientes <span> <a class=\"btn btn-sm text-primary\" type=\"button\" (click)=\"plantilla()\" >Descargar Plantilla</a> </span></h4>\r\n\r\n                <div class=\"row\">\r\n                    <div class=\"col-10\">\r\n                        <input type=\"file\" class=\"form-control form-control-sm\" (change)=\"incomingfile($event)\" placeholder=\"Importar\" accept=\".xlsx\">\r\n                    </div>\r\n                    <div class=\"col-auto\">\r\n                        <button [disabled]=\"sendExcel\" type=\"button\" class=\"btn btn-sm btnW btn-primary waves-effect waves-light mt-2\" (click)=\"uploadExcel()\">\r\n                            <span *ngIf=\"!sendExcel\">\r\n                                Importar\r\n                            </span>\r\n                            <span *ngIf=\"sendExcel\">\r\n                                Enviando...                                \r\n                            </span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit, QueryList, ViewChildren, ElementRef, ViewChild, TemplateRef } from '@angular/core';\r\nimport { Subscription, Observable } from 'rxjs';\r\n\r\n// PRINTER\r\nimport { NgxPrinterService } from 'projects/ngx-printer/src/lib/ngx-printer.service';\r\nimport { PrintItem } from 'projects/ngx-printer/src/lib/print-item';\r\nimport { ngxPrintMarkerPosition } from 'projects/ngx-printer/src/public_api';\r\n\r\n// MODELS\r\nimport { Mesa } from '../../models/mesas.model';\r\nimport { MesasService } from '../../services/mesas.service';\r\nimport { UserService } from '../../services/user.service';\r\nimport { Carrito, LoadCarrito } from '../../interfaces/carrito.interface';\r\nimport Swal from 'sweetalert2';\r\nimport { Router } from '@angular/router';\r\nimport { User } from 'src/app/models/user.model';\r\n\r\n@Component({\r\n  selector: 'app-comanda',\r\n  templateUrl: './comanda.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class ComandaComponent implements OnInit {\r\n\r\n  @ViewChild('PrintTemplate')\r\n  private PrintTemplateTpl: TemplateRef<any>;\r\n\r\n  title = 'ngx-printer-demo';\r\n\r\n  printWindowSubscription: Subscription;\r\n  $printItems: Observable<PrintItem[]>;\r\n\r\n  public listaMesas: Mesa[] = [];\r\n  public listaMesasTemp: Mesa[] = [];\r\n  public totalMesas: number = 0;\r\n\r\n  public resultado: number = 0;\r\n  public desde: number = 0;\r\n  public cargando: boolean = true;\r\n  public sinResultados: boolean = true;\r\n  public user:User;\r\n\r\n  constructor(  private mesasService: MesasService,\r\n                private printerService: NgxPrinterService,\r\n                private router: Router,\r\n                private userService:UserService) {\r\n\r\n                  const reloadMesa = setInterval( () => {\r\n\r\n                    let ruta = window.location.href;\r\n                    let rutaArray = ruta.split('/');\r\n                  \r\n                    if (rutaArray[rutaArray.length - 1] !== 'comandas' ) {\r\n                      clearInterval(reloadMesa);\r\n                    }else{\r\n                      this.cargarMesas();\r\n                    }\r\n            \r\n                  }, 5000);\r\n\r\n                  // IMPRIMIR\r\n                  this.printWindowSubscription = this.printerService.$printWindowOpen.subscribe(\r\n                    val => {  \r\n\r\n                      console.log('Print window is open:', val);\r\n                      \r\n                    }\r\n                  );\r\n              \r\n                  this.$printItems = this.printerService.$printItems;\r\n\r\n                  this.user = userService.user;\r\n\r\n                  if (!userService.user.privilegios.comandas) {\r\n                    Swal.fire('Atención', 'No tienes los privilegios para el modulo de comandas', 'warning');\r\n                    this.router.navigateByUrl('/');\r\n                    return\r\n                  }\r\n\r\n                }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // CARGAR MESAS\r\n    this.cargarMesas();\r\n  }\r\n\r\n  /** ================================================================\r\n   *   IMPRIMIR\r\n  ==================================================================== */\r\n  printDiv(imprimir: string, tipo: any[]) {\r\n\r\n    this.printerService.printDiv(imprimir);\r\n\r\n    tipo.map( (item) => {\r\n\r\n      if (item.estado === 'pendiente') {\r\n        this.cambiarEstado(this.comanda.comanda, item.product, 'Preparando', this.comanda);\r\n      }\r\n\r\n    });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR MESAS\r\n  ==================================================================== */\r\n  public pendientes: number = 0;\r\n  public preparandos: number = 0;\r\n  public entregados: number = 0;\r\n  cargarMesas(){\r\n    \r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n\r\n    let pendientes = 0;\r\n    let preparandos = 0;\r\n    let entregados = 0;\r\n\r\n    this.mesasService.loadMesasComanda()\r\n        .subscribe(({ total, mesas }) => {\r\n          this.totalMesas = total;\r\n          this.listaMesas = mesas;         \r\n\r\n          for (const mesa of mesas) {\r\n            mesa.comanda.map( (me) => {\r\n\r\n              if (me.estado === 'pendiente') {\r\n                pendientes ++;\r\n              }else if(me.estado === 'Preparando'){\r\n                preparandos ++;\r\n              }else{\r\n                entregados ++;\r\n              }\r\n\r\n            })\r\n          }\r\n\r\n          this.pendientes = pendientes;\r\n          this.preparandos = preparandos;\r\n          this.entregados = entregados;\r\n          \r\n\r\n        });    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   CAMBIAR EL ESTADO DE LA COMANDA\r\n  ==================================================================== */\r\n  public carrito: LoadCarrito[]= [];\r\n  public mesa: Mesa;\r\n  cambiarEstado(carrito:any, id: any, estado:any, mesa:Mesa){\r\n    \r\n\r\n    this.carrito = [];\r\n    this.carrito = carrito;\r\n\r\n    this.carrito.map( (cart) =>{\r\n\r\n      if (cart.product === id) {\r\n\r\n        // VERIFICAR EL ROLE\r\n        if (this.user.role === 'WAITER' || this.user.role === 'WAITERALL') {\r\n\r\n          // VERIFICAR EL ESTADO\r\n          if (estado === 'pendiente' || cart.estado === 'Entregado' || estado === 'Preparando' && cart.estado === 'Entregado') {\r\n            Swal.fire('Atención', 'no puedes volver a un estado anterior', 'warning');\r\n            return;\r\n          }\r\n\r\n          cart.estado = estado;\r\n          \r\n        }else{\r\n          cart.estado = estado;\r\n        }\r\n\r\n      }\r\n\r\n    })\r\n\r\n    this.mesa = mesa;\r\n    const mesaID = mesa.mid;\r\n\r\n    this.mesasService.updateMesa(this.mesa, mesaID)\r\n        .subscribe( (resp:{ok: boolean, mesa: any}) => {\r\n\r\n          this.comandaModal(this.mesa);\r\n\r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SCROLL AL FONDO\r\n  ==================================================================== */\r\n  @ViewChildren('messages') messages: QueryList<any>;\r\n  @ViewChild('content') content: ElementRef;\r\n\r\n  ngAfterViewInit() {\r\n    this.scrollToBottom();\r\n    this.messages.changes.subscribe(this.scrollToBottom);\r\n  }\r\n\r\n  scrollToBottom = () => {\r\n    try {\r\n      this.content.nativeElement.scrollTop = this.content.nativeElement.scrollHeight;\r\n    } catch (err) {}\r\n  }\r\n\r\n  /** ================================================================\r\n   *   COMANDA\r\n  ==================================================================== */\r\n  public comanda: Mesa;\r\n  public barra    =  [];\r\n  public bebidas  =  [];\r\n  public cocina   =  [];\r\n  comandaModal(comanda: Mesa){\r\n\r\n    this.cocina = [];\r\n    this.barra = [];\r\n    this.bebidas = [];\r\n\r\n    this.comanda = comanda;\r\n\r\n    comanda.comanda.map( (item) => {\r\n\r\n      if (item.product.tipo === 'Cocina') {\r\n        this.cocina.push(item);\r\n      }else if(item.product.tipo === 'Barra'){\r\n        this.barra.push(item);\r\n      }else if(item.product.tipo === 'Bebidas'){\r\n        this.bebidas.push(item);\r\n      }\r\n\r\n    });\r\n\r\n  }\r\n\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Comandas</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"comandas-tab\" data-bs-toggle=\"tab\" href=\"#comandas\" role=\"tab\" aria-controls=\"comandas\" aria-selected=\"true\"><i class=\"bi-app\" style=\"font-size: 1rem\"></i> Comandas</a>\r\n        </li>\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n<div class=\"container-fluid mt-4 bg-light2\">\r\n\r\n    <!-- TITLE - SUBTITLE -->\r\n    <div>\r\n        <h5 class=\"text-dark\">Comandas</h5>\r\n    </div>\r\n    <!-- TITLE - SUBTITLE -->\r\n\r\n    <div class=\"d-flex flex-wrap gap-2\">\r\n\r\n        <div class=\"card card-body\">\r\n            <p class=\"mb-0\">Pendientes</p>\r\n            <h4 class=\"display-4\"> {{ pendientes }} </h4>\r\n        </div>\r\n        <div class=\"card card-body\">\r\n            <p class=\"mb-0\">Preparando</p>\r\n            <h4 class=\"display-4\"> {{ preparandos }} </h4>\r\n        </div>\r\n        <div class=\"card card-body\">\r\n            <p class=\"mb-0\">Entregados</p>\r\n            <h4 class=\"display-4\"> {{ entregados }} </h4>\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <!-- COMANDAS -->\r\n    <div class=\"d-flex flex-wrap\">\r\n\r\n        <div *ngFor=\"let mesa of listaMesas; let i = index\">\r\n            <div class=\"p-2\" *ngIf=\"mesa.img === 'mesa.svg'\">\r\n\r\n\r\n                <div style=\"width: 22rem;\" class=\" text-wrap bg-white p-3 position-relative\">\r\n                    <h2 class=\"mb-2 text-center\">Orden # {{ mesa.fecha | date: 'H-ms' }}</h2>\r\n                    <i [ngClass]=\"{'text-danger': mesa.disponible == false, 'text-success': mesa.disponible == true}\" class=\"bi-dot position-absolute top-0 start-100 translate-middle pe-4 pt-2\" style=\"font-size: 2.5rem;\"></i>\r\n                    <h5 class=\"mb-0 text-center text-wrap text-capitalize\">{{ mesa.name }}</h5>\r\n                    <h6 class=\"mb-0 text-center text-wrap text-capitalize fw-normal\"> {{ mesa.mesero.name }} </h6>\r\n                    <p class=\"mb-0 text-center\"> Fecha: {{ mesa.fecha | date: \"medium\" }} </p>\r\n                    <h5 class=\"mb-0 text-center text-wrap text-capitalize\" *ngIf=\"mesa.cliente?.name\">{{ mesa.cliente?.name }}</h5>\r\n\r\n                    <div class=\"d-flex justify-content-end my-2\">\r\n                        <button type=\"button\" (click)=\"comandaModal(mesa)\" data-bs-toggle=\"modal\" data-bs-target=\"#comanda\" class=\"btn btn-sm btn-primary btnW waves-effect waves-ligth\">\r\n                            Ver comanda\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div class=\"table-responsive\">\r\n\r\n                        <table class=\"table table-sm align-middle\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th scope=\"col\">Item</th>\r\n                                    <th scope=\"col\">Estado</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n\r\n                                <ng-container *ngFor=\"let item of mesa.comanda; let i = index\">\r\n\r\n                                    <tr [ngClass]=\" { 'table-danger': item.estado === 'Pendiente', 'table-warning': item.estado === 'Preparando', 'table-success': item.estado === 'Entregado'}\">\r\n                                        <td>\r\n                                            <p class=\"mb-0 lh-1\"> <small class=\"lh-1 fw-bold\">01 - {{item.product.name}}  </small></p>\r\n                                            <small> {{ item.fecha | date:'short' }} </small>\r\n\r\n                                            <ng-container *ngFor=\"let ingrediente of item.ingredientes\">\r\n                                                <small *ngIf=\"!ingrediente.status\" class=\"text-danger me-1\"> X {{ ingrediente.name }} </small>\r\n                                            </ng-container>\r\n\r\n\r\n                                        </td>\r\n                                        <td>\r\n                                            <select class=\"form-select form-select-sm\" aria-label=\".form-select-sm example\" (change)=\"cambiarEstado(mesa.comanda, item.product, esta.value, mesa)\" #esta>\r\n                                                <option class=\"text-danger\" value=\"pendiente\" [selected]=\"item.estado === 'pendiente'\">Pendiente</option>\r\n                                                <option class=\"text-warning\" value=\"Preparando\" [selected]=\"item.estado === 'Preparando'\">Preparando</option>\r\n                                                <option class=\"text-success\" value=\"Entregado\" [selected]=\"item.estado === 'Entregado'\">Entregado</option>\r\n                                            </select>\r\n                                        </td>\r\n                                    </tr>\r\n                                </ng-container>\r\n                            </tbody>\r\n                        </table>\r\n\r\n                        <!-- NOTAS -->\r\n                        <div *ngIf=\"mesa?.nota.length > 0\" class=\"container border rounded overflow-auto\" #content style=\"max-height: 15rem; min-height: 5rem; overflow-x: hidden!important;\">\r\n                            <ul class=\"list-group list-group-flush py-2\" #messages>\r\n                                <li class=\"list-group-item border-0 py-1 px-1\" *ngFor=\"let nota of mesa.nota\">\r\n                                    <div class=\"d-flex justify-content-start\">\r\n                                        <!-- <div>\r\n                                            <button type=\"button\" disabled class=\"btn btn-link p-1 text-danger\">\r\n                                                <i class=\"bi-trash\" style=\"font-size: 0.9rem\"></i>\r\n                                            </button>\r\n                                        </div> -->\r\n                                        <div class=\"badge bg-light2 text-muted px-2 py-2 text-wrap text-start\" style=\"width: auto;\">\r\n                                            <h6 class=\"mb-0 text-break\">\r\n                                                {{ nota.nota }}\r\n                                            </h6>\r\n                                            <p class=\"mb-0 text-end\" *ngIf=\"nota.date \"><small class=\"text-muted\"> {{ nota?.date  | date: \"medium\" }} </small></p>\r\n                                        </div>\r\n                                    </div>\r\n                                </li>\r\n\r\n                            </ul>\r\n                        </div>\r\n                        <!-- NOTAS -->\r\n\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    VER DETALLES DE LA COMANDA\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"comanda\" tabindex=\"-1\" aria-labelledby=\"comandaModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n\r\n                <div>\r\n                    <h5 class=\"modal-title text-capitalize\" id=\"comandaModal\">\r\n                        <i class=\"bi-app\" style=\"font-size: 2rem\"></i> Detalles de la comanda\r\n                    </h5>\r\n                </div>\r\n\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n\r\n            <div class=\"modal-body\">\r\n\r\n                <!-- COCINA -->\r\n                <div *ngIf=\"cocina.length > 0\">\r\n\r\n                    <hr>\r\n                    <h4>Cocina</h4>\r\n\r\n                    <div class=\"d-flex justify-content-end my-2\">\r\n                        <button type=\"button\" (click)=\"printDiv('printDiv1', cocina)\" class=\"btn btn-sm btn-success btnW waves-effect waves-ligth\">\r\n                        Imprimir\r\n                    </button>\r\n                    </div>\r\n\r\n                    <!-- DETALLES DE LA COMANDA -->\r\n                    <div id=\"printDiv1\">\r\n\r\n                        <div class=\"\" *ngIf=\"comanda.img === 'mesa.svg'\" style=\"color: black;\">\r\n                            <div style=\"width: 22rem;\" class=\" text-wrap\">\r\n\r\n                                <h2 class=\"mb-2 text-center\">Orden # {{ comanda?.fecha | date: 'H-ms' }}</h2>\r\n                                <h5 class=\" mb-0 text-center text-wrap text-capitalize\">{{ comanda?.name }}</h5>\r\n                                <h6 class=\" mb-0 text-center text-wrap text-capitalize fw-normal\"> {{ comanda?.mesero.name }} </h6>\r\n                                <p class=\" mb-0 text-center\"> Fecha: {{ comanda?.fecha | date: \"medium\" }} </p>\r\n                                <h5 class=\" mb-0 text-center text-wrap text-capitalize\">{{ comanda.cliente?.name }}</h5>\r\n\r\n                                <div class=\"table-responsive\">\r\n\r\n                                    <table class=\"table table-sm align-middle mb-1\" style=\"color: #000 important!;\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th>Item</th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n\r\n                                            <ng-container *ngFor=\"let item of cocina; let i = index\">\r\n\r\n                                                <tr style=\"color: black;\" *ngIf=\"item.estado === 'pendiente'\">\r\n                                                    <td>\r\n                                                        <p class=\"mb-0 lh-1 text-capitalize fs-4  fw-bolder\" style=\"color: #000;\"> \r\n                                                            <span class=\"lh-1\">01 - {{item.product.name}}  </span>\r\n                                                        </p>\r\n                                                        \r\n                                                        <!-- <span *ngFor=\"let ingrediente of item.ingredientes\" class=\"badge rounded-pill bg-light text-primary fw-normal\"> {{ ingrediente.name }} </span> -->\r\n                                                        <ng-container *ngFor=\"let ingrediente of item.ingredientes\">\r\n                                                            <p *ngIf=\"!ingrediente.status\" class=\"mb-0\"> X {{ ingrediente.name }} </p>\r\n                                                        </ng-container>\r\n                                                        <span style=\"font-size: 0.8rem;\"> {{ item.fecha | date:'short' }} </span>\r\n\r\n                                                    </td>\r\n                                                </tr>\r\n                                            </ng-container>\r\n                                        </tbody>\r\n                                    </table>\r\n\r\n                                    <!-- NOTAS -->\r\n                                    <div class=\"col-10\" *ngIf=\"comanda?.nota\">\r\n                                        <p class=\"fw-bold mb-1\">NOTAS:</p>\r\n                                        <p class=\"mb-0 text-break\" *ngFor=\"let nota of comanda?.nota\">\r\n                                            - {{ nota.nota }}\r\n                                        </p>\r\n                                    </div>\r\n                                    <!-- NOTAS -->\r\n\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <!-- DETALLES DE LA COMANDA -->\r\n\r\n                </div>\r\n                <!-- COCINA -->\r\n\r\n\r\n\r\n                <!-- BEBIDAS -->\r\n                <div *ngIf=\"bebidas.length > 0\">\r\n\r\n                    <hr>\r\n                    <h4>Bebidas</h4>\r\n\r\n                    <div class=\"d-flex justify-content-end my-2\">\r\n                        <button type=\"button\" (click)=\"printDiv('printDiv2', bebidas)\" class=\"btn btn-sm btn-success btnW waves-effect waves-ligth\">\r\n                        Imprimir\r\n                    </button>\r\n                    </div>\r\n\r\n                    <!-- DETALLES DE LA COMANDA -->\r\n                    <div id=\"printDiv2\">\r\n\r\n                        <div class=\"\" *ngIf=\"comanda.img === 'mesa.svg'\" style=\"color: black;\">\r\n                            <div style=\"width: 22rem;\" class=\" text-wrap\">\r\n\r\n                                <h2 class=\"mb-2 text-center\">Orden # {{ comanda?.fecha | date: 'H-ms' }}</h2>\r\n                                <h5 class=\" mb-0 text-center text-wrap text-capitalize\">{{ comanda?.name }}</h5>\r\n                                <h6 class=\" mb-0 text-center text-wrap text-capitalize fw-normal\"> {{ comanda?.mesero.name }} </h6>\r\n                                <p class=\" mb-0 text-center\"> Fecha: {{ comanda?.fecha | date: \"medium\" }} </p>\r\n                                <h5 class=\" mb-0 text-center text-wrap text-capitalize\">{{ comanda.cliente?.name }}</h5>\r\n\r\n                                <div class=\"table-responsive\">\r\n\r\n                                    <table class=\"table table-sm align-middle mb-1\" style=\"color: #000 important!;\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th>Item</th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n\r\n                                            <ng-container *ngFor=\"let item of bebidas; let i = index\">\r\n\r\n                                                <tr style=\"color: black;\" *ngIf=\"item.estado === 'pendiente'\">\r\n                                                    <td>\r\n                                                        <p class=\"mb-0 lh-1 text-capitalize fs-4  fw-bolder\" style=\"color: #000;\"> \r\n                                                            <span class=\"lh-1\">01 - {{item.product.name}}  </span>\r\n                                                        </p>\r\n                                                        \r\n                                                        <!-- <span *ngFor=\"let ingrediente of item.ingredientes\" class=\"badge rounded-pill bg-light text-primary fw-normal\"> {{ ingrediente.name }} </span> -->\r\n                                                        <ng-container *ngFor=\"let ingrediente of item.ingredientes\">\r\n                                                            <p *ngIf=\"!ingrediente.status\" class=\"mb-0\"> X {{ ingrediente.name }} </p>\r\n                                                        </ng-container>\r\n                                                        <span style=\"font-size: 0.8rem;\"> {{ item.fecha | date:'short' }} </span>\r\n\r\n                                                    </td>\r\n                                                </tr>\r\n                                            </ng-container>\r\n                                        </tbody>\r\n                                    </table>\r\n\r\n                                    <!-- NOTAS -->\r\n                                    <div class=\"col-10 border rounded py-2\">\r\n                                        <p class=\"fw-bold mb-1\">NOTAS:</p>\r\n                                        <p class=\"mb-0 text-break\" *ngFor=\"let nota of comanda?.nota\">\r\n                                            - {{ nota.nota }}\r\n                                        </p>\r\n                                    </div>\r\n                                    <!-- NOTAS -->\r\n\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <!-- DETALLES DE LA COMANDA -->\r\n\r\n                </div>\r\n                <!-- BEBIDAS -->\r\n\r\n                <!-- BARRA -->\r\n                <div *ngIf=\"barra.length > 0\">\r\n\r\n                    <hr>\r\n                    <h4>Barra</h4>\r\n\r\n                    <div class=\"d-flex justify-content-end my-2\">\r\n                        <button type=\"button\" (click)=\"printDiv('printDiv3', barra)\" class=\"btn btn-sm btn-success btnW waves-effect waves-ligth\">\r\n                        Imprimir\r\n                    </button>\r\n                    </div>\r\n\r\n                    <!-- DETALLES DE LA COMANDA -->\r\n                    <div id=\"printDiv3\">\r\n\r\n                        <div class=\"\" *ngIf=\"comanda.img === 'mesa.svg'\" style=\"color: black;\">\r\n                            <div style=\"width: 22rem;\" class=\" text-wrap\">\r\n\r\n                                <h2 class=\"mb-2 text-center\">Orden # {{ comanda?.fecha | date: 'H-ms' }}</h2>\r\n                                <h5 class=\" mb-0 text-center text-wrap text-capitalize\">{{ comanda?.name }}</h5>\r\n                                <h6 class=\" mb-0 text-center text-wrap text-capitalize fw-normal\"> {{ comanda?.mesero.name }} </h6>\r\n                                <p class=\" mb-0 text-center\"> Fecha: {{ comanda?.fecha | date: \"medium\" }} </p>\r\n                                <h5 class=\" mb-0 text-center text-wrap text-capitalize\">{{ comanda.cliente?.name }}</h5>\r\n\r\n                                <div class=\"table-responsive\">\r\n\r\n                                    <table class=\"table table-sm align-middle mb-1\" style=\"color: #000 important!;\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th>Item</th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n\r\n                                            <ng-container *ngFor=\"let item of barra; let i = index\">\r\n\r\n                                                <tr style=\"color: black;\" *ngIf=\"item.estado === 'pendiente'\">\r\n                                                    <td>\r\n                                                        <p class=\"mb-0 lh-1 text-capitalize fs-4  fw-bolder\" style=\"color: #000;\"> \r\n                                                            <span class=\"lh-1\">01 - {{item.product.name}}  </span>\r\n                                                        </p>\r\n                                                        \r\n                                                        <!-- <span *ngFor=\"let ingrediente of item.ingredientes\" class=\"badge rounded-pill bg-light text-primary fw-normal\"> {{ ingrediente.name }} </span> -->\r\n                                                        <ng-container *ngFor=\"let ingrediente of item.ingredientes\">\r\n                                                            <p *ngIf=\"!ingrediente.status\" class=\"mb-0\"> X {{ ingrediente.name }} </p>\r\n                                                        </ng-container>\r\n                                                        <span style=\"font-size: 0.8rem;\"> {{ item.fecha | date:'short' }} </span>\r\n\r\n                                                    </td>\r\n                                                </tr>\r\n                                            </ng-container>\r\n                                        </tbody>\r\n                                    </table>\r\n\r\n                                    <!-- NOTAS -->\r\n                                    <div class=\"col-10 border rounded py-2\">\r\n                                        <p class=\"fw-bold mb-1\">NOTAS:</p>\r\n                                        <p class=\"mb-0 text-break\" *ngFor=\"let nota of comanda?.nota\">\r\n                                            - {{ nota.nota }}\r\n                                        </p>\r\n                                    </div>\r\n                                    <!-- NOTAS -->\r\n\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <!-- DETALLES DE LA COMANDA -->\r\n\r\n                </div>\r\n                <!-- BARRA -->\r\n\r\n            </div>\r\n\r\n\r\n\r\n            <div class=\"modal-footer \">\r\n                <button type=\"button \" class=\"btn btn-secondary \" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    VER DETALLES DE LA COMANDA \r\n========================================================================= -->","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { _payments } from 'src/app/interfaces/carrito.interface';\r\nimport { Banco } from 'src/app/models/bancos.model';\r\nimport { Compra } from 'src/app/models/compras.model';\r\nimport { User } from 'src/app/models/user.model';\r\nimport { BancosService } from 'src/app/services/bancos.service';\r\nimport { ComprasService } from 'src/app/services/compras.service';\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-compra',\r\n  templateUrl: './compra.component.html',\r\n  styleUrls: ['./compra.component.css']\r\n})\r\nexport class CompraComponent implements OnInit {\r\n\r\n  public user: User;\r\n\r\n  constructor(  private activatedRoute: ActivatedRoute,\r\n                private usersService: UserService,\r\n                private bancosService: BancosService,\r\n                private comprasService: ComprasService\r\n  ) { \r\n\r\n    activatedRoute.params.subscribe( ({id}) => {\r\n      \r\n      this.cargarFactura(id);\r\n      this.user = usersService.user;\r\n      \r\n    });\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.loadBancos();\r\n  }\r\n\r\n  /** ================================================================\r\n     *   BANCOS\r\n    ==================================================================== */\r\n    public bancos: Banco[] = [];\r\n    loadBancos(){\r\n  \r\n      this.bancosService.loadBancos()\r\n          .subscribe( ({bancos}) => {\r\n            this.bancos = bancos;\r\n          }, (err) => {\r\n            console.log(err);\r\n            Swal.fire('Error', err.error.msg, 'error');          \r\n          })\r\n  \r\n    }\r\n\r\n  /** ================================================================\r\n   *   CARGAR FACTURA DE COMPRA\r\n  ==================================================================== */\r\n  public factura: Compra;\r\n  public totalPagos: number = 0;\r\n  cargarFactura(id: string){\r\n\r\n    this.comprasService.loadCompraID(id)\r\n        .subscribe( ({compra}) => {\r\n          \r\n          this.factura = compra;\r\n          for (const paid of compra.payments) {\r\n            this.totalPagos += paid.amount;\r\n          }\r\n          \r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n     *   AGREGAR PAGO\r\n    ==================================================================== */\r\n    public base: number = 0;\r\n    public total: number = 0;\r\n    public payments: _payments[] = []    \r\n    @ViewChild ('nDescripcion') nDescripcion: ElementRef;  \r\n    @ViewChild ('nMonto') nMonto: ElementRef;\r\n    addPay(type: string, amount: any, description: string){\r\n  \r\n      amount = Number(amount);\r\n  \r\n      if (amount <= 0) {\r\n        Swal.fire('Atención', 'El monto no puede ser menor a cero', 'warning');\r\n        return;\r\n      }\r\n  \r\n      if ((amount + this.totalPagos) > this.factura.amount) {\r\n        Swal.fire('Atención', `El monto supera al total de la factura, la diferencia es $${this.factura.amount - this.totalPagos}`, 'warning');\r\n        return;\r\n      }\r\n  \r\n      this.factura.payments.push({\r\n        type,\r\n        amount,\r\n        description\r\n      });\r\n      \r\n      this.nDescripcion.nativeElement.value = '';    \r\n      this.nMonto.nativeElement.value = '';  \r\n      this.sumarPagos();\r\n    }\r\n  \r\n    /** ================================================================\r\n     *   ELIMINAR PAGO\r\n    ==================================================================== */\r\n    delPaid(i: any){\r\n      this.factura.payments.splice(i, 1);\r\n      this.sumarPagos();\r\n    }\r\n  \r\n    /** ================================================================\r\n     *   SUMAR PAGOS\r\n    ==================================================================== */\r\n    sumarPagos(){\r\n      this.totalPagos = 0;\r\n      for (const paid of this.factura.payments) {\r\n        this.totalPagos += paid.amount;\r\n      }\r\n\r\n      if (this.totalPagos >= this.factura.amount) {\r\n        this.factura.credito = false;\r\n      }\r\n\r\n      this.comprasService.updateCompra({payments: this.factura.payments, credito: this.factura.credito}, this.factura.comid!)\r\n          .subscribe( ({compra}) => {\r\n\r\n            this.factura.payments = compra.payments;\r\n            Swal.fire('Estupendo', 'Se ha agregado la factura exitosamente!', 'success');\r\n\r\n          })\r\n  \r\n    }\r\n\r\n  /** ================================================================\r\n   *   DEVOLVER FACTURA DE COMPRA\r\n  ==================================================================== */\r\n  devolucion(id: string){\r\n\r\n    Swal.fire({\r\n      title: \"Estas seguro?\",\r\n      text: \"De devolver esta factura!\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#3085d6\",\r\n      cancelButtonColor: \"#d33\",\r\n      confirmButtonText: \"Si, devolver\",\r\n      cancelButtonText: 'Cancelar'\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n        \r\n        this.comprasService.returnCompra(id)\r\n            .subscribe( ({msg}) => {\r\n\r\n              Swal.fire('Estupendo', 'Se ha devuelto la factura de compra exitosamente', 'success');\r\n              this.factura.status = false;\r\n\r\n            }, (err) => {\r\n              console.log(err);\r\n              Swal.fire('Error', err.error.msg, 'error');              \r\n            })\r\n\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Facturas</h5>\r\n    </div>\r\n\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"facturas-tab\"><i class=\"bi-journal-check\" style=\"font-size: 1rem\"></i> Factura <span *ngIf=\"factura\"> #{{factura.invoice}} </span> </a>\r\n        </li>\r\n\r\n    </ul>\r\n\r\n</header>\r\n\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<div class=\"container-fluid\">\r\n\r\n\r\n    <ng-container *ngIf=\"factura\">\r\n        <!-- TITLE - SUBTITLE -->\r\n        <div class=\"mt-4\">\r\n            <h5 class=\"text-dark\">DETALLES DE LA FACTURA DE COMPRA #{{ factura.invoice }}</h5>\r\n            <p class=\"mb-0\">Cajero: {{ factura.user.name }}</p>\r\n\r\n        </div>\r\n        <!-- TITLE - SUBTITLE -->\r\n\r\n        <!-- BTNS -->\r\n         <div>\r\n            <button *ngIf=\"factura.status\" (click)=\"devolucion(factura.comid)\" [disabled]=\"user.role !== 'ADMIN'\" type=\"button\" class=\"btn btn-outline-danger btn-sm mx-1 my-2\"> \r\n                <i class=\"bi-arrow-counterclockwise\"></i> devolver Factura\r\n            </button>\r\n         </div>\r\n\r\n        <div class=\"row\">\r\n\r\n            <!-- DETALLES DE LA FACTURA -->\r\n             <div class=\"col-md-8\">\r\n\r\n             \r\n                <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n                    <div id=\"printDiv\">\r\n\r\n                        <!-- SI ES A CREDITO -->\r\n                        <span *ngIf=\"factura.credito\" class=\"badge rounded-pill bg-warning text-dark mb-2\">A Credito <span *ngIf=\"factura.apartado\">- Apartado </span> </span>\r\n                        <span *ngIf=\"!factura.status\" class=\"badge rounded-pill bg-danger text-white mb-2\">Devuelta </span>\r\n\r\n                        <!-- INFORMACION DEL CLIENTE -->\r\n                        <div class=\"row\">\r\n\r\n                            <!-- Informacion del Cliente -->\r\n                            <div class=\"col-md-8 text-left text-muted\" style=\"color:black\">\r\n\r\n\r\n                                <div class=\"row\" style=\"color:black\">\r\n                                    <div class=\"col-md-4\">\r\n                                        <h6 class=\"text-wrap mb-0 text-capitalize\"><strong>Proveedor:  </strong><br><small>{{ factura.proveedor?.name || 'Ocasional' }}</small></h6>\r\n                                    </div>\r\n                                    <div class=\"col\">\r\n                                        <h6 class=\"text-wrap mb-0 text-capitalize\"><strong>CC / Nit: </strong> <br><small> {{ factura.proveedor?.cedula || '00000000' }}</small></h6>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class=\"row\" style=\"color:black\">\r\n                                    <div class=\"col-md-4\">\r\n                                        <h6 class=\"text-wrap mb-0 text-capitalize\"><strong>TELEFONO: </strong> <br><small *ngIf=\"factura.proveedor?.phone\"> {{ factura.proveedor?.phone }}</small> </h6>\r\n                                    </div>\r\n                                    <div class=\"col\">\r\n                                        <h6 class=\"text-wrap mb-0\"><strong>CORREO: </strong> <br><small *ngIf=\"factura.proveedor?.email\"> {{ factura.proveedor?.email }} </small></h6>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class=\"row\" style=\"color:black\">\r\n                                    <div class=\"col\">\r\n                                        <h6 class=\"text-wrap mb-0\"><strong>DIRECCIÓN: </strong> <br><small *ngIf=\"factura.proveedor?.address\"> {{ factura.proveedor?.address }} <span *ngIf=\"factura.proveedor?.city\" > {{ factura.proveedor?.city }} </span></small></h6>\r\n\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n                        <!-- INFORMACION DEL CLIENTE -->\r\n\r\n                        <!-- INFORMACION DE LA FACTURA -->\r\n                        <h4 class=\"text-center text-wrap\"> Factura de Compra </h4>\r\n\r\n                        <div class=\" table-responsive \">\r\n\r\n                            <table class=\"table table-borderless table-striped table-sm \">\r\n                                <thead class=\"border-bottom\">\r\n                                    <tr>\r\n                                        <th scope=\"col\">#</th>\r\n                                        <th scope=\"col\">Codigo de barras</th>\r\n                                        <th class=\" text-left\" scope=\"col \" colspan=\"2 \">Nombre del Producto</th>\r\n                                        <th scope=\"col\">tipo</th>\r\n                                        <th scope=\"col\">Precio</th>\r\n                                        <th scope=\"col\">Cantidad</th>\r\n                                        <th scope=\"col\">Monto</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody class=\"text-dark\">\r\n\r\n                                    <tr *ngFor=\"let producto of factura.products; let i = index\">\r\n                                        <th> {{ i + 1 }} </th>\r\n                                        <td><small class=\"text-wrap\">{{ producto.product.code }}</small></td>\r\n                                        <td colspan=\"2\">{{ producto.product.name }} <strong *ngIf=\"producto.mayor\">M</strong> </td>\r\n                                        <td>{{ producto.product.type }}</td>\r\n                                        <td>{{ producto.price | currency : '$': symbol: '1.0-0'}}</td>\r\n                                        <td class=\"text-center\">{{ producto.qty }}</td>\r\n                                        <td>{{ producto.price * producto.qty | currency : '$': symbol: '1.0-0'}}</td>\r\n                                    </tr>\r\n\r\n                                </tbody>\r\n                                <tfoot>\r\n                                    <tr>\r\n                                        <th colspan=\"7\">ITEMS</th>\r\n                                        <th> {{ factura.totalItems || 0 }} </th>\r\n                                    </tr>\r\n                                </tfoot>\r\n                            </table>\r\n\r\n                        </div>\r\n\r\n                        <!-- TOTAL -->\r\n                        <div>\r\n                            <div class=\"d-flex py-2\">\r\n\r\n                                <div class=\"ms-auto d-flex justify-content-end\">\r\n                                    <div class=\"border-start col px-4\">\r\n                                        <!-- TOTAL -->\r\n                                        <h5 class=\"display-6 fw-bold text-primary\">{{ factura.amount | currency : '$': symbol: '1.0-0' }}</h5>\r\n                                        <!-- TOTAL -->\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                        <!-- TOTAL -->\r\n\r\n                    </div>\r\n\r\n                    <!-- INFORMACION DE LA FACTURA -->\r\n\r\n                </div>\r\n            </div>\r\n            <!-- DETALLES DE LA FACTURA -->\r\n\r\n            <!-- PAGOS -->\r\n            <div class=\"col-md-4\">\r\n\r\n                <!-- METODOS DE PAGO Y CREDITO -->\r\n             <div *ngIf=\"factura.credito\" class=\"card\">\r\n                <div class=\"card-body\">\r\n\r\n                    <h3 class=\"mb-2\">Metodo de abono</h3>\r\n                    \r\n                    <div class=\"form-group\">\r\n                        <label for=\"typeP\" class=\"\">Metodo de pago</label>\r\n                        <select class=\"form-select\" aria-label=\"typeP\" #typeP>\r\n                            <option value=\"efectivo\">Efectivo</option>\r\n                            <option *ngFor=\"let banco of bancos\" [value]=\"banco.name\"> {{ banco.name }} </option>\r\n                          </select>\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <label for=\"descripcion\" class=\"\">Descripción</label>\r\n                        <input type=\"text\" class=\"form-control\" id=\"descripcion\" placeholder=\"Descripción\" #nDescripcion>\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <label for=\"nMonto\" class=\"\">Monto</label>\r\n                        <input type=\"number\" class=\"form-control\" id=\"nMonto\" placeholder=\"Monto\" #nMonto>\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <button type=\"button\" (click)=\"addPay(typeP.value, nMonto.value, nDescripcion.value)\" class=\"btn btn-primary\">Agregar</button>\r\n                    </div>\r\n\r\n                </div>\r\n             </div>\r\n\r\n                <!-- TABLE PAGOS-->\r\n                <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n                    <div class=\"d-flex justify-content-center\">\r\n                        <div id=\"printPagos\" style=\"color: #000;\">\r\n                            <div class=\"d-flex justify-content-between\">\r\n                                <h5 class=\"\">\r\n                                    Pagos\r\n                                </h5>\r\n                                <h5 class=\"\">\r\n                                    #{{ factura.invoice }}\r\n                                </h5>\r\n                            </div>\r\n\r\n                            <div>\r\n\r\n                                <div class=\"table-responsive \" class=\"overflow-auto\">\r\n                                    <table class=\"table table-borderless table-stripe table-hover table-sm animated fadeIn \">\r\n                                        <thead class=\"border-bottom \">\r\n                                            <tr style=\"color: #000;\">\r\n                                                <th scope=\"col\">Descripcion</th>\r\n                                                <th scope=\"col\">Tipo</th>\r\n                                                <th scope=\"col\">Monto</th>\r\n                                            </tr>\r\n                                        </thead>\r\n\r\n                                        <tbody>\r\n\r\n                                            <tr style=\"color: #000;\">\r\n                                                <td class=\"fw-bold\">\r\n                                                    Total de la factura\r\n                                                </td>\r\n                                                <td class=\"fw-normal\">\r\n                                                    --\r\n                                                </td>\r\n                                                <td class=\"fw-bold\"> {{ factura.amount || 0 | currency: '$' : symbol: '1.0-0' }} </td>\r\n                                            </tr>\r\n\r\n                                            <tr *ngIf=\"factura.payments.length === 0 \">\r\n                                                <td colspan=\"3\">\r\n                                                    No tiene registro de pagos...\r\n                                                </td>\r\n                                            </tr>\r\n\r\n                                            <tr class=\"trHover\" *ngFor=\"let pay of factura.payments; let i = index\" style=\"color: #000;\">\r\n                                                <td class=\"fw-normal\">\r\n                                                    <span>{{ pay.description || 'Sin descripción' }} </span>\r\n                                                    <br *ngIf=\"pay.fecha\">\r\n                                                    <small *ngIf=\"pay.fecha\"> {{ pay.fecha | date:'short' }} </small>\r\n                                                </td>\r\n                                                <td class=\"fw-normal\">{{ pay.type }}</td>\r\n                                                <td class=\"fw-normal\">{{ pay.amount | currency: '$' : symbol: '1.0-0' }} </td>\r\n                                            </tr>\r\n\r\n                                        </tbody>\r\n                                        <tfoot>\r\n                                            <tr class=\"border-top\" style=\"color: #000;\">\r\n                                                <td colspan=\"2\"> <span class=\"fw-bold\"> Restante </span></td>\r\n                                                <td> <span class=\"fw-bold\">{{ ( (factura.amount || 0) - totalPagos) | currency: '$' : symbol: '1.0-0' }}</span> </td>\r\n                                            </tr>\r\n                                        </tfoot>\r\n\r\n                                    </table>\r\n\r\n                                </div>\r\n\r\n                                <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                                <div class=\"row\">\r\n                                    <div class=\"col\" style=\"color: #000;\">\r\n                                        <small>Total de pagos: ({{factura.payments.length}})</small>\r\n                                    </div>\r\n                                </div>\r\n                                <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <!-- TABLE PAGOS-->\r\n\r\n            </div>\r\n            <!-- PAGOS -->\r\n\r\n        </div>\r\n\r\n    </ng-container>\r\n\r\n\r\n\r\n</div>\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport { _payments } from 'src/app/interfaces/carrito.interface';\r\nimport { Banco } from 'src/app/models/bancos.model';\r\nimport { itemCompra } from 'src/app/models/compras.model';\r\nimport { Product } from 'src/app/models/product.model';\r\nimport { Proveedor } from 'src/app/models/proveedor.model';\r\nimport { User } from 'src/app/models/user.model';\r\nimport { BancosService } from 'src/app/services/bancos.service';\r\nimport { ComprasService } from 'src/app/services/compras.service';\r\nimport { ProveedoresService } from 'src/app/services/proveedores.service';\r\nimport { SearchService } from 'src/app/services/search.service';\r\nimport { TurnoService } from 'src/app/services/turno.service';\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-compras',\r\n  templateUrl: './compras.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class ComprasComponent implements OnInit {\r\n\r\n  public user: User;\r\n\r\n  constructor(  private searchService: SearchService,\r\n                private comprasService: ComprasService,\r\n                private userService: UserService,\r\n                private proveedoresService: ProveedoresService,\r\n                private fb: FormBuilder,\r\n                private bancosService: BancosService,\r\n                private turnoService: TurnoService,\r\n  ) { \r\n    this.user = userService.user;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.loadBancos();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BANCOS\r\n  ==================================================================== */\r\n  public bancos: Banco[] = [];\r\n  loadBancos(){\r\n\r\n    this.bancosService.loadBancos()\r\n        .subscribe( ({bancos}) => {\r\n          this.bancos = bancos;\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ABRIR CAJA\r\n  ==================================================================== */\r\n  abrirCaja(){\r\n    \r\n    if (!this.user.cerrada) {\r\n      Swal.fire('Ya existe una caja abierta', 'Debes de cerrar caja para poder abrir he iniciar un turno nuevo', 'warning');\r\n      return;\r\n    }\r\n    \r\n    Swal.fire({\r\n      title: 'Monto Inicial de caja',\r\n      input: 'text',\r\n      inputAttributes: {\r\n        autocapitalize: 'off'\r\n      },\r\n      showCancelButton: true,\r\n      confirmButtonText: 'Confirmar',\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (resp) => {\r\n        \r\n        return resp;\r\n      }\r\n      }).then((result) => {\r\n\r\n        if (result.value > 0) {\r\n\r\n          const initial:number = result.value;\r\n\r\n          const open = {\r\n            initial\r\n          };\r\n\r\n          this.turnoService.createCaja(open)\r\n              .subscribe( (resp:{ ok:boolean, turno:any}) => {\r\n\r\n                this.userService.user.turno = resp.turno.tid;\r\n                this.userService.user.cerrada = false;\r\n                \r\n              });  \r\n              \r\n          return;\r\n        }else{\r\n          return;\r\n        }                \r\n        \r\n    });\r\n\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   PROVEEDOR\r\n  ==================================================================== */\r\n  public listProveedores: Proveedor[] = [];\r\n  public proveedor: Proveedor;\r\n  searchProveedor(termino: string){\r\n\r\n    if (termino.length === 0) {\r\n      return;\r\n    }\r\n\r\n    this.searchService.search('proveedores', termino)\r\n        .subscribe( (resp) => {\r\n\r\n          this.listProveedores = resp.resultados;\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SELECT PROVEEDOR\r\n  ==================================================================== */\r\n  @ViewChild('searchP') searchP:ElementRef;\r\n  selectProveedor(proveedor: Proveedor){\r\n    this.proveedor = proveedor;\r\n\r\n    this.searchP.nativeElement.value = '';\r\n    this.listProveedores = [];\r\n\r\n  }\r\n\r\n  \r\n  /** ================================================================\r\n   *   BUSCAR PRODUCTO\r\n  ==================================================================== */\r\n  public listProducts: any[] = [];\r\n  searchProduct(termino: string){\r\n\r\n    if (termino.length === 0) {\r\n      return;\r\n    }\r\n\r\n    this.searchService.search('products', termino)\r\n        .subscribe( (resp) => {\r\n\r\n          this.listProducts = resp.resultados;\r\n          \r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SELECT PRODUCT\r\n  ==================================================================== */\r\n  @ViewChild('search') search: ElementRef;  \r\n  @ViewChild('psCode') psCode: ElementRef;  \r\n  @ViewChild('psName') psName: ElementRef;\r\n  @ViewChild('psCost') psCost: ElementRef;\r\n  @ViewChild('psPrice') psPrice: ElementRef;\r\n  @ViewChild('psWholesale') psWholesale: ElementRef;\r\n  @ViewChild('psQty') psQty: ElementRef;\r\n\r\n  public productS: Product;\r\n\r\n  selectProduct(product: Product){\r\n\r\n    this.psCode.nativeElement.value = product.code;\r\n    this.psName.nativeElement.value = product.name;\r\n    this.psCost.nativeElement.value = product.cost;\r\n    this.psPrice.nativeElement.value = product.price;\r\n    this.psWholesale.nativeElement.value = product.wholesale;\r\n    this.psQty.nativeElement.focus();\r\n    \r\n    this.listProducts = [];\r\n    this.productS = product;\r\n    \r\n    this.search.nativeElement.value = '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   AGREGAR PRODUCT\r\n  ==================================================================== */\r\n  agregarProducto(qty: any){\r\n\r\n    qty = Number(qty);\r\n\r\n    if(qty <= 0 ){\r\n      Swal.fire('Atención', 'debes de agregar una cantidad valida', 'warning');\r\n      return;\r\n    }\r\n\r\n    if(Number(this.psPrice.nativeElement.value) <= 0 ){\r\n      Swal.fire('Atención', 'debes de agregar un precio de venta valido', 'warning');\r\n      return;\r\n    }\r\n\r\n    if (Number(this.psWholesale.nativeElement.value) > 0) {\r\n      this.items.push({\r\n        product: this.productS,\r\n        qty,\r\n        cost: this.psCost.nativeElement.value,\r\n        price: this.psPrice.nativeElement.value,\r\n        wholesale: this.psWholesale.nativeElement.value\r\n      })\r\n      \r\n    }else{\r\n      this.items.push({\r\n        product: this.productS,\r\n        qty,\r\n        cost: this.psCost.nativeElement.value,\r\n        price: this.psPrice.nativeElement.value,\r\n      })\r\n    }\r\n\r\n    this.total += Number(this.psCost.nativeElement.value) * qty;\r\n\r\n    this.psCode.nativeElement.value = '';\r\n    this.psName.nativeElement.value = '';\r\n    this.psCost.nativeElement.value = '';\r\n    this.psPrice.nativeElement.value = '';\r\n    this.psWholesale.nativeElement.value = '';\r\n    this.psQty.nativeElement.value = '';\r\n\r\n    delete this.productS;\r\n    this.search.nativeElement.focus();    \r\n\r\n  }\r\n\r\n\r\n\r\n  /** ================================================================\r\n   *   DELETE PRODUCT\r\n  ==================================================================== */\r\n  deleteProduct(i: any){\r\n\r\n    this.items.splice(i,1);\r\n\r\n    this.total = 0;\r\n    for (const it of this.items) {\r\n      this.total += it.qty * it.cost;\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ITEMS\r\n  ==================================================================== */\r\n  public items: itemCompra[] = [];\r\n\r\n  /** ================================================================\r\n   *   SUMAR TOTALES\r\n  ==================================================================== */\r\n  public base: number = 0;\r\n  public total: number = 0;\r\n\r\n\r\n  /** ================================================================\r\n   *   AGREGAR PAGO\r\n  ==================================================================== */\r\n  public payments: _payments[] = []\r\n  \r\n  @ViewChild ('nDescripcion') nDescripcion: ElementRef;  \r\n  @ViewChild ('nMonto') nMonto: ElementRef;\r\n  addPay(type: string, amount: any, description: string){\r\n\r\n    amount = Number(amount);\r\n\r\n    if (amount <= 0) {\r\n      Swal.fire('Atención', 'El monto no puede ser menor a cero', 'warning');\r\n      return;\r\n    }\r\n\r\n    if ((amount + this.totalPayments) > this.total) {\r\n      Swal.fire('Atención', `El monto supera al total de la factura, la diferencia es $${this.total - this.totalPayments}`, 'warning');\r\n      return;\r\n    }\r\n\r\n    this.payments.push({\r\n      type,\r\n      amount,\r\n      description\r\n    });\r\n    \r\n    this.nDescripcion.nativeElement.value = '';    \r\n    this.nMonto.nativeElement.value = '';  \r\n    this.sumarPagos();\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ELIMINAR PAGO\r\n  ==================================================================== */\r\n  delPaid(i: any){\r\n    this.payments.splice(i, 1);\r\n    this.sumarPagos();\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SUMAR PAGOS\r\n  ==================================================================== */\r\n  public totalPayments: number = 0;\r\n  sumarPagos(){\r\n    this.totalPayments = 0;\r\n    for (const paid of this.payments) {\r\n      this.totalPayments += paid.amount;\r\n    }\r\n\r\n  }\r\n  \r\n  /** ================================================================\r\n   *   CREAR FACTURA DE COMPRA\r\n  ==================================================================== */\r\n  @ViewChild ('icredito') icredito: ElementRef;\r\n  createInvoice(){\r\n\r\n    if (!this.proveedor) {\r\n      Swal.fire('Atención', 'Debes de agregar un proveedor', 'warning');\r\n      return;\r\n    }\r\n\r\n    let products = [];\r\n\r\n    for (const it of this.items) {\r\n      \r\n      if (it.wholesale) {\r\n        \r\n        products.push({\r\n          product: it.product.pid,\r\n          qty: it.qty,\r\n          cost: it.cost,\r\n          price: it.price,\r\n          wholesale: it.wholesale\r\n        })\r\n      }else{\r\n        products.push({\r\n          product: it.product.pid,\r\n          qty: it.qty,\r\n          cost: it.cost,\r\n          price: it.price\r\n        })\r\n      }\r\n\r\n    }\r\n\r\n    let credito = this.icredito.nativeElement.checked;\r\n\r\n    let data: any = {\r\n      proveedor: this.proveedor.provid,\r\n      products,\r\n      amount: this.total,\r\n      base: this.total,\r\n      credito,\r\n      payments: this.payments\r\n    }\r\n\r\n    this.comprasService.createCompra(data)\r\n        .subscribe( ({compra}) => {\r\n\r\n          Swal.fire('Estupendo', 'se ha creado la factura de compra exitosamente', 'success');\r\n\r\n          delete this.proveedor;\r\n          this.items = [];\r\n          this.total = 0;\r\n          this.totalPayments = 0;\r\n          this.payments = [];\r\n          this.icredito.nativeElement.checked = false;\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n     *   CREAR PROVEEDOR\r\n    ==================================================================== */\r\n    // FORMULARIO\r\n    public formSubmitted = false;\r\n    public newProveedorForm = this.fb.group({\r\n      name: [ '' , [Validators.required, Validators.minLength(3)]],\r\n      cedula: ['', [Validators.required, Validators.minLength(3)]],\r\n      phone: [''],\r\n      email: [''],\r\n      address: [''],\r\n      city: [''],\r\n      department: [''],\r\n      zip: ['']\r\n    });\r\n  \r\n    crearProveedor(){\r\n  \r\n      this.formSubmitted = true;\r\n  \r\n      if (this.newProveedorForm.invalid) {\r\n        return;\r\n      }    \r\n  \r\n      this.proveedoresService.createProveedor(this.newProveedorForm.value)\r\n          .subscribe(({proveedor}) => {\r\n  \r\n            Swal.fire('Estupendo', 'Se ha creado el cliente exitosamente!', 'success');\r\n            \r\n            this.formSubmitted = false;\r\n            this.newProveedorForm.reset();          \r\n            this.selectProveedor(proveedor);\r\n            \r\n          }, (err) =>{\r\n            Swal.fire('Error', err.error.msg, 'error');\r\n          });\r\n    }\r\n  \r\n    // VALIDAR CAMPOS\r\n    campoValido(campo: string): boolean{\r\n  \r\n      if ( this.newProveedorForm.get(campo).invalid &&  this.formSubmitted) {      \r\n        return true;      \r\n      } else{\r\n              \r\n        return false;\r\n      }\r\n    \r\n    }\r\n\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Configuraciones / Compras</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark\" routerLinkActive=\"active\" routerLink=\"/dashboard/configuracion/compras\"  id=\"ticket1-tab\"><i class=\"bi-gear\" style=\"font-size: 1rem\"></i> Tablero Principal</a>\r\n        </li>\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark\" routerLinkActive=\"active\" routerLink=\"/dashboard/facturas-compras\" id=\"ticket1-tab\"><i class=\"bi-ticket\" style=\"font-size: 1rem\"></i> Facturas de Compras</a>\r\n        </li>\r\n\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<div class=\"container-fluid my-4\">\r\n\r\n    <div class=\"ms-auto mb-3\">\r\n        <button *ngIf=\"user.cerrada\" (click)=\"abrirCaja()\" type=\"button\" class=\"btn btn-sm btn-success ms-auto me-2\">Abrir Caja</button>\r\n    </div>\r\n\r\n    <div class=\"d-flex flex-wrap\">\r\n\r\n        <div class=\"col-md-8 p-0\">\r\n\r\n\r\n\r\n            <!-- AGREGAR PRODUCTOS -->\r\n            <div class=\"card mb-3\">\r\n\r\n                <div class=\"card-body\">\r\n\r\n                    <h4>Agregar Productos</h4>\r\n\r\n                    <div class=\"w-100 mb-2\">\r\n                        <div class=\"form-group\">\r\n                            <input type=\"text\" class=\"form-control\" placeholder=\"Buscar producto con codigo de barra o nombre\" (keyup.enter)=\"searchProduct(search.value)\" #search>\r\n\r\n                            <!-- LIST PRODUCTS -->\r\n                            <div *ngIf=\"listProducts.length > 0\" class=\"shadow rounded bg-white\" style=\"z-index: 1; position: absolute; max-height: 200px; overflow-y: auto;\">\r\n                                <div class=\"w-100\">\r\n\r\n                                    <p class=\"mb-0 text-muted pl-2\"><small> resultados: {{ listProducts.length }} </small> </p>\r\n                                    <ul class=\"list-group list-group-flush\">\r\n                                        <li class=\"list-group-item list-group-item-action\" *ngFor=\"let product of listProducts\">\r\n                                            <a class=\"pointer\" (click)=\"selectProduct(product)\">\r\n                                                <h5 class=\"mb-0\"> {{ product.name }} </h5>\r\n                                                <p *ngIf=\"product.code\" class=\"mb-0 text-muted\"><small> <i class=\"ti ti-id-badge\"></i>  {{ product.code }} </small> </p>\r\n                                            </a>\r\n                                        </li>\r\n                                    </ul>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- AGREGAR ITEMS -->\r\n                    <div class=\"row g-3 d-flex align-items-end\">\r\n\r\n                        <div class=\"col-md-6\">\r\n                            <label for=\"codigo\" class=\"\">Codigo</label>\r\n                            <input #psCode readonly type=\"text\" class=\"form-control\" id=\"codigo\" placeholder=\"Codigo\">\r\n                        </div>\r\n\r\n                        <div class=\"col-md-6\">\r\n                            <label for=\"producto\" class=\"\">Producto</label>\r\n                            <input #psName readonly type=\"text\" class=\"form-control\" id=\"producto\" placeholder=\"Producto\">\r\n                        </div>\r\n\r\n                        <div class=\"col-md-3\">\r\n                            <label for=\"costo\" class=\"\">Costo</label>\r\n                            <input #psCost type=\"number\" min=\"0\" class=\"form-control\" id=\"costo\" placeholder=\"costo\">\r\n                        </div>\r\n\r\n                        <div class=\"col-md-3\">\r\n                            <label for=\"Precio\" class=\"\">Precio</label>\r\n                            <input #psPrice type=\"number\" min=\"0\" class=\"form-control\" id=\"Precio\" placeholder=\"Precio\">\r\n                        </div>\r\n\r\n                        <div class=\"col-md-3\">\r\n                            <label for=\"mayor\" class=\"\">Precio Mayor</label>\r\n                            <input #psWholesale type=\"number\" min=\"0\" class=\"form-control\" id=\"mayor\" placeholder=\"mayor\">\r\n                        </div>\r\n\r\n                        <div class=\"col-md-3\">\r\n                            <label for=\"cantidad\" class=\"\">Cantidad</label>\r\n                            <input #psQty type=\"number\" min=\"0\" class=\"form-control\" id=\"cantidad\" placeholder=\"cantidad\">\r\n                        </div>\r\n\r\n                        <div class=\"col-auto\">\r\n                            <button type=\"button\" (click)=\"agregarProducto(psQty.value)\" class=\"btn btn-primary\">Agregar</button>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n\r\n\r\n            <!-- PRODUCTOS -->\r\n            <div class=\"card \">\r\n\r\n                <div class=\"card-body\">\r\n\r\n                    <h3 class=\"text-center mb-1\">ITEMS</h3>\r\n                    <div class=\"table-responsive\" style=\"clear: both;\">\r\n                        <table class=\"table table-hover\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th></th>\r\n                                    <th>Producto</th>\r\n                                    <th class=\"text-right\">Precio</th>\r\n                                    <th class=\"text-right\">Mayor</th>\r\n                                    <th class=\"text-right\">Cantidad</th>\r\n                                    <th class=\"text-right\">Costo</th>\r\n                                    <th class=\"text-right\">Monto</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n\r\n                                <tr *ngIf=\"items.length === 0\">\r\n                                    <td colspan=\"7\" class=\"text-center\">Aun no has seleccionado ningun producto...</td>\r\n                                </tr>\r\n\r\n                                <tr *ngFor=\"let item of items; let i = index\">\r\n                                    <td>\r\n                                        <button type=\"button\" (click)=\"deleteProduct(i)\" class=\"btn btn-link p-1 text-danger\">\r\n                                            <i class=\"text-danger bi-trash\"></i>\r\n                                        </button> #{{i+1}}\r\n                                    </td>\r\n                                    <td> {{ item.product.name }} <br> <small>{{ item.product!.code }}</small> </td>\r\n                                    <td class=\"text-right\"> {{ item.price | currency :'$' }} </td>\r\n                                    <td class=\"text-right\"> {{ item.wholesale || 0 | currency :'$' }} </td>\r\n                                    <td class=\"text-right\"> {{ item.qty }} </td>\r\n                                    <td class=\"text-right\"> {{ item.cost | currency :'$' }} </td>\r\n                                    <td class=\"text-right\"> {{ item.qty * item.cost | currency :'$' }}</td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                    <div class=\"col-md-12\">\r\n                        <div class=\"pull-right m-t-30 text-right\">\r\n                            <h3><b>Total :</b> {{total | currency: '$'}}</h3>\r\n                        </div>\r\n                        <div class=\"clearfix\"></div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            <!-- PRODUCTOS -->\r\n\r\n        </div>\r\n\r\n\r\n\r\n        <div class=\"col-md-4\">\r\n\r\n            <!-- PROVEEDOR -->\r\n            <div *ngIf=\"proveedor\" class=\"card card-body mb-3\">\r\n\r\n                <!-- CLIENTE -->\r\n                <div class=\"col-md-12\">\r\n                    <p class=\"mb-0\">Nombre o Razón Social</p>\r\n                    <h5 class=\"box-title m-b-0\"> {{ proveedor.name }} </h5>\r\n                </div>\r\n\r\n                <div class=\"d-flex flex-wrap\">\r\n                    <div class=\"col-md-6\">\r\n                        <p class=\"mb-0\">CC/NIT</p>\r\n                        <h5 class=\"m-b-0\"> {{proveedor.cedula || '--- -----'}} </h5>\r\n                    </div>\r\n                    <div class=\"col-md-6\">\r\n                        <p class=\"mb-0\">Telefono</p>\r\n                        <h5 class=\"m-b-0\"> {{proveedor.phone || '--- -----'}} </h5>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col-12\">\r\n                    <p class=\"mb-0\">Email</p>\r\n                    <p class=\"m-b-0\">{{ proveedor.email || '----------' }}</p>\r\n                </div>\r\n\r\n                <div class=\"col-12\">\r\n                    <p class=\"mb-0\">Dirección</p>\r\n                    <p class=\"m-b-0\"> {{ proveedor.address || 'no aplica' }} </p>\r\n                </div>\r\n                <!-- CLIENTE -->\r\n\r\n            </div>\r\n\r\n            <div class=\"card mb-3\">\r\n                <div class=\"card-body\">\r\n\r\n                    <!-- BUSCAR Y SELECCIONAR PROVEEDOR -->\r\n                    <div class=\"w-100\">\r\n                        \r\n                        <div class=\"form-group mb-0\">\r\n                            <div class=\"d-flex flex-wrap justify-content-between align-items-end pb-3\">\r\n                                <label for=\"searchC\">Buscar Proveedor</label>\r\n                                <button type=\"button\" class=\"btn btn-primary btn-sm\" data-bs-toggle=\"modal\" data-bs-target=\"#nuevoProveedor\">\r\n                                    <i class=\"bi bi-plus\"></i>\r\n                                </button>\r\n                                \r\n                            </div>\r\n                            <input id=\"searchC\" type=\"text\" class=\"form-control\" placeholder=\"Buscar Proveedor\" (keyup)=\"searchProveedor(searchP.value)\" #searchP>\r\n                        </div>\r\n\r\n                        <div *ngIf=\"listProveedores.length > 0\" class=\"shadow rounded bg-white\" style=\"z-index: 1; position: absolute; max-height: 200px; overflow-y: auto;\">\r\n                            <div class=\"w-100\">\r\n\r\n                                <p class=\"mb-0 text-muted pl-2\"><small> resultados: {{ listProveedores.length }} </small> </p>\r\n                                <ul class=\"list-group list-group-flush\">\r\n                                    <li class=\"list-group-item list-group-item-action\" *ngFor=\"let proveedor of listProveedores\">\r\n                                        <a class=\"pointer\" (click)=\"selectProveedor(proveedor)\">\r\n                                            <h5 class=\"mb-0\"> {{ proveedor.name }} </h5>\r\n                                            <p *ngIf=\"proveedor.cedula\" class=\"mb-0 text-muted\"><small> <i class=\"ti ti-id-badge\"></i>  {{ proveedor.cedula }} </small> </p>\r\n                                            <p *ngIf=\"proveedor.email\" class=\"mb-0 text-muted\"><small> <i class=\"ti ti-email\"></i> {{ proveedor.email }} </small> </p>\r\n                                        </a>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                    <!-- BUSCAR Y SELECCIONAR CLIENTE -->\r\n\r\n                </div>\r\n            </div>\r\n\r\n            <!-- METODOS DE PAGO Y CREDITO -->\r\n             <div class=\"card\">\r\n                <div class=\"card-body\">\r\n\r\n                    <h3 class=\"mb-2\">Metodo de pago</h3>\r\n\r\n                    <div class=\"form-check mb-3\">\r\n                        <input class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"iCredito\" #icredito>\r\n                        <label class=\"form-check-label\" for=\"iCredito\">\r\n                          Credito\r\n                        </label>\r\n                    </div>\r\n\r\n                    \r\n                    <div class=\"form-group\">\r\n                        <label for=\"typeP\" class=\"\">Metodo de pago</label>\r\n                        <select class=\"form-select\" aria-label=\"typeP\" #typeP>\r\n                            <option value=\"efectivo\">Efectivo</option>\r\n                            <option *ngFor=\"let banco of bancos\" [value]=\"banco.name\"> {{ banco.name }} </option>\r\n                          </select>\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <label for=\"descripcion\" class=\"\">Descripción</label>\r\n                        <input type=\"text\" class=\"form-control\" id=\"descripcion\" placeholder=\"Descripción\" #nDescripcion>\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <label for=\"nMonto\" class=\"\">Monto</label>\r\n                        <input type=\"number\" class=\"form-control\" id=\"nMonto\" placeholder=\"Monto\" #nMonto>\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <button type=\"button\" (click)=\"addPay(typeP.value, nMonto.value, nDescripcion.value)\" class=\"btn btn-primary\">Agregar</button>\r\n                    </div>\r\n\r\n                    <hr *ngIf=\"payments.length > 0\">\r\n\r\n                    <div *ngIf=\"payments.length > 0\">\r\n\r\n                        <div class=\"table-responsive\">\r\n                            <table class=\"table table-sm\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th scope=\"col\">Metodo</th>\r\n                                        <th scope=\"col\">Descripción</th>\r\n                                        <th scope=\"col\">Monto</th>\r\n                                        <th scope=\"col\"></th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr *ngFor=\"let paid of payments; let i = index\">\r\n                                        <td> {{paid.type}} </td>\r\n                                        <td>{{paid.description}}</td>\r\n                                        <td>{{paid.amount | currency: '$'}}</td>\r\n                                        <td> \r\n                                            <button (click)=\"delPaid(i)\" type=\"button\" class=\"btn btn-link p-1 text-danger\">\r\n                                                <i class=\"bi bi-trash\"></i>\r\n                                            </button> \r\n                                        </td>\r\n                                    </tr>\r\n                                </tbody>\r\n                                <tfoot>\r\n                                    <tr>\r\n                                        <th colspan=\"2\">TOTAL</th>\r\n                                        <th> {{ totalPayments | currency: '$' }} </th>\r\n                                    </tr>\r\n                                </tfoot>\r\n                            </table>\r\n                        </div>\r\n                        \r\n\r\n                    </div>\r\n\r\n                </div>\r\n             </div>\r\n\r\n            <div class=\"card\">\r\n                <div class=\"card-body\">\r\n\r\n                    <!-- CREAR FACTURA -->\r\n                    <div>\r\n                        <button (click)=\"createInvoice()\" [disabled]=\"items.length === 0 \" type=\"button\" class=\"btn btn-success w-100\">Guardar Factura</button>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n\r\n\r\n    </div>\r\n\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    NUEVO PROVEEDOR\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"nuevoProveedor\" tabindex=\"-1\" aria-labelledby=\"nuevoProveedorModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"nuevoProveedorModal\"><i class=\"bi-person-plus\" style=\"font-size: 2rem\"></i> Nuevo Proveedor</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form id=\"newProveedorForm\" autocomplete=\"off\" [formGroup]=\"newProveedorForm\" (ngSubmit)=\"crearProveedor()\">\r\n\r\n                    <!-- =======================================================================\r\n                        DATOS PROVEEDOR \r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Datos Del Proveedor</h5>\r\n\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-6 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombres\">\r\n                                <label for=\"floatingInput\">Nombres</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div class=\"col-md-6 px-md-1 \">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"cedula\" type=\"text\" class=\"form-control\" placeholder=\"Cedula de ciudadania\">\r\n                                <label for=\"floatingInput\">Cedula de ciudadania</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <div class=\"col-md-6 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"email\" type=\"email\" class=\"form-control\" placeholder=\"Email\">\r\n                                <label for=\"floatingInput\">Email</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div class=\"col-md-6 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"phone\" type=\"text\" class=\"form-control\" placeholder=\"Telefono\">\r\n                                <label for=\"floatingInput\">Telefono</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- =======================================================================\r\n                        DIRECCION\r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">DIRECCIÓN</h5>\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"address\" type=\"text\" class=\"form-control\" placeholder=\"Dirección\">\r\n                                <label for=\"floatingInput\">Dirección</label>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <div class=\"col-md-5 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"department\" type=\"text\" class=\"form-control\" placeholder=\"Departamento\">\r\n                                <label for=\"floatingInput\">Departamento</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-md-5 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"city\" type=\"text\" class=\"form-control\" placeholder=\"Ciudad\">\r\n                                <label for=\"floatingInput\">Ciudad</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-md-2 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"zip\" type=\"text\" class=\"form-control\" placeholder=\"ZIP\">\r\n                                <label for=\"floatingInput\">ZIP</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"text-danger mb-2\">\r\n                            <p *ngIf=\"campoValido('name')\" class=\"mb-1 animated fadeIn\">- El nombre es obligatorio</p>\r\n                            <p *ngIf=\"campoValido('cedula')\" class=\"mb-1 animated fadeIn\">-El NIT o La cedula de ciudadania es obligatoria</p>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { Compra } from 'src/app/models/compras.model';\r\nimport { Proveedor } from 'src/app/models/proveedor.model';\r\nimport { ComprasService } from 'src/app/services/compras.service';\r\nimport { SearchService } from 'src/app/services/search.service';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-facturas-compras',\r\n  templateUrl: './facturas-compras.component.html',\r\n  styleUrls: ['./facturas-compras.component.css']\r\n})\r\nexport class FacturasComprasComponent implements OnInit {\r\n  \r\n\r\n  constructor(  private comprasService: ComprasService,\r\n                private searchService: SearchService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.loadQueryInvoices(); \r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR QUERY\r\n  ==================================================================== */\r\n  public facturas: Compra[] = [];\r\n  public resultado: number = 0;\r\n  public total: number = 0;\r\n  public totalAmount: number = 0;\r\n  public totalAbonado: number = 0;\r\n  public cargando: boolean = true;\r\n  public query: any = {\r\n    desde: 0,\r\n    hasta: 50,\r\n    sort: {invoice: -1}\r\n  }\r\n\r\n  loadQueryInvoices(){\r\n\r\n    this.totalAmount = 0; \r\n    this.totalAbonado = 0;\r\n    this.cargando = true;\r\n\r\n    this.comprasService.loadCompras(this.query)\r\n        .subscribe( ({compras, total}) => {\r\n          \r\n          this.total = total;\r\n          this.cargando = false;\r\n          this.facturas = compras; \r\n          this.resultado = compras.length;\r\n\r\n          for (const compra of compras) {\r\n\r\n            if (!compra.status) {\r\n              return;\r\n            }\r\n\r\n            this.totalAmount += compra.amount;\r\n\r\n            if (compra.credito) {\r\n              \r\n              for (const paid of compra.payments) {\r\n                this.totalAbonado += paid.amount;\r\n              }\r\n              \r\n            }\r\n\r\n          }\r\n\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n          \r\n        })\r\n\r\n  }\r\n\r\n\r\n  /** ================================================================\r\n   *   CAMBIAR PAGINA\r\n  ==================================================================== */\r\n  @ViewChild('mostrar') mostrar!: ElementRef;\r\n  cambiarPagina (valor: number){\r\n    \r\n    this.query.desde += valor;\r\n\r\n    if (this.query.desde < 0) {\r\n      this.query.desde = 0;\r\n    }\r\n    \r\n    this.loadQueryInvoices();\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   CHANGE LIMITE\r\n  ==================================================================== */\r\n  limiteChange( cantidad: any ){  \r\n\r\n    this.query.hasta = Number(cantidad);    \r\n    this.loadQueryInvoices();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   RECARGAR\r\n  ==================================================================== */\r\n  recargar(){\r\n    this.query ={\r\n      desde: 0,\r\n      hasta: 50,\r\n      sort: {invoice: -1}\r\n    }\r\n\r\n    this.loadQueryInvoices();\r\n  }\r\n\r\n  /** ================================================================\r\n     *   BUSCAR CLIENTE\r\n    ==================================================================== */\r\n    public sinResultadosProveedor: boolean = false;\r\n    public cargandoProveedor: boolean = true;\r\n    public listaProveedores: Proveedor[] = [];\r\n    public listaProveedoresTemp: Proveedor[] = [];\r\n    public totalProveedores: number = 0;\r\n    public proveedor: Proveedor;\r\n    @ViewChild('searchClient') searchClient: ElementRef;\r\n    buscarProveedor(termino: string){\r\n  \r\n      this.cargandoProveedor = false;\r\n      this.sinResultadosProveedor = false;\r\n  \r\n      if (termino.length === 0) {\r\n        this.listaProveedores = this.listaProveedoresTemp;\r\n        this.sinResultadosProveedor = true;\r\n        this.cargandoProveedor = true;\r\n        return;\r\n      }else{\r\n      \r\n        this.searchService.search('proveedores', termino)\r\n            .subscribe(({total, resultados}) => {   \r\n              \r\n            this.cargandoProveedor = false;\r\n            \r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            if (resultados.length === 0) {\r\n              this.listaProveedores = [];\r\n              this.totalProveedores = 0;\r\n              this.sinResultadosProveedor = true;\r\n              return;                \r\n            }\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            \r\n            this.listaProveedores = resultados;\r\n            this.totalProveedores = total;\r\n  \r\n          });\r\n      }\r\n  \r\n    }\r\n\r\n    /** ================================================================\r\n     *   SELECT CLIENT\r\n    ==================================================================== */\r\n    selectC(proveedor: Proveedor){\r\n  \r\n      this.proveedor = proveedor;\r\n      this.query.proveedor = this.proveedor.provid!;\r\n      this.loadQueryInvoices();\r\n      this.searchClient.nativeElement.value = '';\r\n      this.listaProveedores = [];\r\n  \r\n    }\r\n\r\n    /** ================================================================\r\n    *   DELETE CLIENT CLIENT\r\n    ==================================================================== */\r\n    deleteProveedor(){\r\n      delete this.query.proveedor;\r\n      delete this.proveedor;\r\n      this.loadQueryInvoices();\r\n    }\r\n\r\n    /** ================================================================\r\n   *   SEARCH FOR DATE\r\n  ==================================================================== */\r\n  searchForDates(inicial:Date, final: Date){\r\n\r\n    if (inicial === null && final === null || !inicial || !final) {\r\n      return;\r\n    }\r\n\r\n    // SET HOURS      \r\n    inicial = new Date(inicial);      \r\n    let initial = new Date(inicial.getTime() + 1000 * 60 * 60 * 5);\r\n\r\n    final = new Date(final);\r\n    let end = new Date(final.getTime() + 1000 * 60 * 60 * 5);      \r\n    // SET HOURS \r\n\r\n    let url = document.URL.split(':');\r\n    if (url[0] === 'https') {\r\n      initial = new Date(inicial.getTime() + 1000 * 60 * 60 - 7200000); \r\n      end = new Date(final.getTime() + 1000 * 60 * 60 - 3600000);        \r\n    }\r\n\r\n    this.query.$and = [{ fecha: { $gte: new Date(initial), $lt: new Date(end) } }];\r\n\r\n    this.loadQueryInvoices();   \r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   LOAD FOR STATUS\r\n  ==================================================================== */\r\n  searchStatus(status: boolean){\r\n\r\n    if (status) {\r\n      delete this.query.status;\r\n    }else{\r\n      this.query.status = status;\r\n    }\r\n\r\n    this.loadQueryInvoices();   \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   TIPO DE FACTURA\r\n  ==================================================================== */\r\n  searchInvoiceType(type: string){\r\n\r\n    if (type === 'all') {\r\n      delete this.query.credito;      \r\n    }else if (type === 'credito') {\r\n      this.query.credito = true;      \r\n    }else{\r\n      this.query.credito = false;\r\n    }\r\n\r\n    this.loadQueryInvoices();\r\n\r\n  }\r\n\r\n\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Configuraciones / Compras</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark\" routerLinkActive=\"active\" routerLink=\"/dashboard/configuracion/compras\"  id=\"ticket1-tab\"><i class=\"bi-gear\" style=\"font-size: 1rem\"></i> Tablero Principal</a>\r\n        </li>\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark\" routerLinkActive=\"active\" routerLink=\"/dashboard/facturas-compras\" id=\"ticket1-tab\"><i class=\"bi-ticket\" style=\"font-size: 1rem\"></i> Facturas de Compras</a>\r\n        </li>\r\n\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<div class=\"container-fluid py-4\">\r\n\r\n    <!-- TITLE - SUBTITLE -->\r\n    <div>\r\n        <h5 class=\"text-dark\">FACTURAS DE COMPRAS</h5>\r\n        <p>Lista de todas las facturas de compras.</p>\r\n    </div>\r\n    <!-- TITLE - SUBTITLE -->\r\n\r\n    <!-- TARJETAS -->\r\n    <div class=\"col-12\">\r\n\r\n        <div class=\"d-flex flex-wrap gap-2\">\r\n\r\n            <div class=\"col-xl-2 col-md-3 mb-4\">\r\n                <!-- Dashboard info widget 1-->\r\n                <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-primary h-100 bg-white\">\r\n                    <div class=\"card-body\">\r\n                        <div class=\"d-flex align-items-center flex-wrap\">\r\n                            <div class=\"flex-grow-1\">\r\n                                <div class=\"small font-weight-bold text-primary mb-1\">Monto Total Facturas</div>\r\n                                <div class=\"h5\">({{totalAmount | currency: '$'}})</div>\r\n                                \r\n                            </div>\r\n                            <div class=\"ms-2\">\r\n                                <i class=\"bi bi-receipt text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"col-xl-2 col-md-3 mb-4\" *ngIf=\"query.credito\">\r\n                <!-- Dashboard info widget 1-->\r\n                <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-warning h-100 bg-white\">\r\n                    <div class=\"card-body\">\r\n                        <div class=\"d-flex align-items-center flex-wrap\">\r\n                            <div class=\"flex-grow-1\">\r\n                                <div class=\"small font-weight-bold text-warning mb-1\">Total Abonado</div>\r\n                                <div class=\"h5\"> {{ totalAbonado | currency: '$' }} </div>\r\n                                \r\n                            </div>\r\n                            <div class=\"ms-2\">\r\n                                <i class=\"bi bi-cash text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"col-xl-2 col-md-3 mb-4\" *ngIf=\"query.credito\">\r\n                <!-- Dashboard info widget 1-->\r\n                <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-warning h-100 bg-white\">\r\n                    <div class=\"card-body\">\r\n                        <div class=\"d-flex align-items-center flex-wrap\">\r\n                            <div class=\"flex-grow-1\">\r\n                                <div class=\"small font-weight-bold text-warning mb-1\">Pendiente por pagar</div>\r\n                                <div class=\"h5\"> {{ totalAmount - totalAbonado | currency: '$' }} </div>\r\n                                \r\n                            </div>\r\n                            <div class=\"ms-2\">\r\n                                <i class=\"bi bi-cash text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <div class=\"row\">\r\n\r\n        <div class=\"col-md-3\">\r\n            <div class=\"shadow-lg mb-5 py-3 rounded bg-white text-break container\">\r\n\r\n                <!-- BUSCADOR DE PROVEEDOR  -->\r\n                <div class=\"mb-3\">\r\n                    <h4 class=\"text-muted\">Buscar PROVEEDOR</h4>\r\n                    <div *ngIf=\"proveedor\" class=\"d-flex flex-wrap align-items-center \">\r\n                        <button type=\"button\" (click)=\"deleteProveedor()\" class=\"btn btn-link p-1 text-danger\"><i class=\"bi-trash\" style=\"font-size: 0.9rem\"></i></button>\r\n                        <samll  class=\"mb-0\">{{ proveedor.name }} </samll>\r\n                    </div>\r\n                    <div>\r\n                        <input type=\"text\" class=\"form-control\" placeholder=\"buscar proveedor\" (keyup)=\"buscarProveedor(searchProveed.value)\" #searchProveed>\r\n                    </div>\r\n\r\n                    <div *ngIf=\"listaProveedores.length > 0\" class=\"bg-white py-3 px-2 shadow\" style=\"position: absolute; z-index: 1020;\">\r\n\r\n                        <div *ngIf=\"cargandoProveedor\" class=\"text-center py-3\">\r\n                            <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                                <span class=\"visually-hidden\">Loading...</span>\r\n                            </div>\r\n                            <div>\r\n                                <small class=\"text-muted\">Cargando...</small>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <ul *ngIf=\"!cargandoProveedor\" class=\"list-group list-group-flush overflow-auto\" style=\"max-height: 200px; min-width: 250px;\">\r\n\r\n                            <li class=\"list-group-item\">\r\n                                <h6>Resultados: ({{ listaProveedores.length }})</h6>\r\n                            </li>\r\n\r\n                            <li class=\"list-group-item\" *ngFor=\"let item of listaProveedores\">\r\n                                <div class=\"d-flex \">\r\n                                    <div class=\"align-self-center\">\r\n                                        <span class=\"text-capitalize fw-bold\"> {{ item.name }} </span><br>\r\n                                        <small> C.C: {{ item.cedula }} </small>\r\n                                    </div>\r\n\r\n                                    <div class=\"ms-auto\">\r\n                                        <button class=\"btn btn-link p-1 text-success float-end\" (click)=\"selectC(item)\"> <i class=\"bi-arrow-90deg-right\"></i></button>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </li>\r\n                        </ul>\r\n\r\n                    </div>\r\n                </div>\r\n                <!-- BUSCADOR DE PROVEEDORES  -->\r\n\r\n                <h4 class=\"text-muted\">Filtros</h4>\r\n\r\n                <div class=\"col-12\">\r\n                    <h6 class=\"text-muted\">Activa ó Cancelada</h6>\r\n                    <div class=\"form-check form-switch\">\r\n                        <input (change)=\"searchStatus(estado.checked)\" class=\"form-check-input\" type=\"checkbox\" id=\"flexSwitchCheckChecked\" checked #estado>\r\n                        <label class=\"form-check-label\" for=\"flexSwitchCheckChecked\">\r\n                            <span *ngIf=\"estado.checked\">Todas las facturas</span>\r\n                            <span *ngIf=\"!estado.checked\">Solo las canceladas</span>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n\r\n                <hr>\r\n\r\n                <div class=\"form-group\">\r\n                    <h6 class=\"text-muted\">Tipo de factura</h6>\r\n                    <select class=\"form-select\" aria-label=\"Default select example\" (change)=\"searchInvoiceType(typeF.value)\" #typeF>\r\n                        <option value=\"all\" selected>Todas</option>\r\n                        <option value=\"facturas\">Facturas</option>\r\n                        <option value=\"credito\">Facturas a credito</option>\r\n                     </select>\r\n                </div>\r\n\r\n                <hr>\r\n\r\n                <div class=\"form-group mb-3\">\r\n                    <label class=\"\" for=\"\">Desde</label>\r\n                    <input type=\"datetime-local\" class=\"form-control\" (change)=\"initial.value\" #initial>\r\n                </div>\r\n\r\n                <div class=\"form-group mb-3\">\r\n                    <label class=\"\" for=\"\">Hasta</label>\r\n                    <input type=\"datetime-local\" class=\"form-control\" (change)=\"end.value\" #end>\r\n                </div>\r\n                \r\n                <button type=\"button\" class=\"btn btn-outline-primary btn-sm py-auto w-100\" (click)=\"searchForDates(initial.value, end.value)\"> \r\n                    <i class=\"bi-search\"></i> Buscar \r\n                </button>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div class=\"col-md-9\">\r\n\r\n            <!-- TABLE FACTURAS -->\r\n            <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n                <!-- CARGANDO -->\r\n                <div *ngIf=\"cargando\">\r\n                    <div class=\"text-center p-4\">\r\n                        <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                            <span class=\"visually-hidden\">Loading...</span>\r\n                        </div>\r\n                    </div>\r\n                    <small class=\"text-muted\">cargando...</small>\r\n                </div>\r\n                <!-- CARGANDO -->\r\n\r\n                <div *ngIf=\"!cargando\">\r\n\r\n                    <!-- BUSCADOR -->\r\n                    <div class=\"d-flex justify-content-between flex-wrap\">\r\n\r\n                        <div>\r\n                            <button type=\"button\" class=\"btn btn-outline-primary btn-sm\" (click)=\"recargar()\"> <i class=\"bi-arrow-clockwise\"></i> Recargar </button>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label for=\"mostrar\" class=\"me-2\">Mostrar: </label>\r\n                            <select name=\"\" id=\"\" [value]=\"query.hasta\" #mostrar (change)=\"limiteChange(mostrar.value)\">\r\n                                <option value=\"10\">10</option>\r\n                                <option value=\"25\">25</option>\r\n                                <option value=\"50\">50</option>\r\n                                <option value=\"100\">100</option>\r\n                                <option value=\"250\">250</option>\r\n                                <option value=\"500\">500</option>\r\n                                <option value=\"1000\">1000</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <!-- BUSCADOR -->\r\n\r\n                    <div class=\"table-responsive \">\r\n                        <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn overflow-auto\">\r\n                            <thead class=\"border-bottom \">\r\n                                <tr>\r\n                                    <th class=\"text-muted\" scope=\"col \">#</th>\r\n                                    <th class=\"text-muted\" scope=\"col \" colspan=\"2\">Proveedor</th>\r\n                                    <th class=\"text-muted\" scope=\"col \">Nit / CC</th>\r\n                                    <th class=\"text-muted\" scope=\"col \">Monto</th>\r\n                                    <th class=\"text-muted\" scope=\"col \">fecha</th>\r\n                                    <th class=\"text-muted\" scope=\"col \"></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n\r\n                                <tr *ngIf=\"facturas.length === 0\" class=\"text-center \">\r\n                                    <th colspan=\"10\" class=\"py-4\">\r\n                                        <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                                    </th>\r\n                                </tr>\r\n\r\n                                <ng-container *ngFor=\"let factura of facturas; let i=index \">\r\n\r\n                                    <tr class=\"trHover\" tabindex=\"0\" data-bs-toggle=\"tooltip\" title=\"Cajero: {{ factura.user?.name }}\">\r\n                                        <th>\r\n                                            <span>{{ factura.invoice }}</span>\r\n                                        </th>\r\n                                        <td colspan=\"2\">\r\n                                            {{ factura.proveedor?.name || 'Consumidor Final' }}\r\n                                            <span *ngIf=\"!factura.status\" class=\"badge rounded-pill bg-danger\">Cancelada</span>\r\n                                            <span *ngIf=\"factura.credito && factura.status\" class=\"badge rounded-pill bg-warning\">Credito <small *ngIf=\"factura.apartado\">- Apartado</small> </span>\r\n                                            <span *ngIf=\"factura.mayor\" class=\"badge rounded-pill bg-success\">M </span>\r\n                                        </td>\r\n                                        <td> {{ factura.proveedor?.cedula || '222222222222' }} </td>\r\n                                        <td> {{ factura.amount | currency: '$' }} </td>\r\n                                        <td> {{ factura.fecha | date:'medium' }} </td>\r\n                                        <td class=\"text-center\">\r\n                                            <a [routerLink]=\"['/dashboard/compra', factura.comid]\" class=\"btn btn-link p-1 text-primary\">\r\n                                                <i class=\"bi bi-box-arrow-up-right\"></i>\r\n                                            </a>\r\n                                        </td>\r\n                                    </tr>\r\n\r\n                                </ng-container>\r\n\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                    <div class=\"row\">\r\n                        <div class=\"col col-md-4\">\r\n                            <small class=\"text-muted\">Total de facturas: ({{total}})</small>\r\n                            <small *ngIf=\"resultado !== 0\" class=\"text-muted\"> - (Resultados: {{ resultado || 0 }})</small>\r\n                            <small *ngIf=\"desde !== 0\" class=\"text-muted\"> - (Desde el: {{ query.desde + 1}} Hasta el: {{ query.desde + query.hasta }})</small>\r\n                        </div>\r\n\r\n                        <div class=\"col d-flex justify-content-end\">\r\n                            <button [disabled]=\"query.desde === 0\" type=\"button\" (click)=\"cambiarPagina((query.hasta * -1))\" class=\"btn btn-sm btn-dark btnW waves-effect waves-light px-3\">Anterior</button>\r\n                            <button [disabled]=\"query.hasta  > facturas.length || query.hasta > total\" type=\"button\" (click)=\"cambiarPagina(query.hasta)\" class=\"btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2\">Siguiente</button>\r\n                        </div>\r\n                    </div>\r\n                    <!-- BTN SIGUIENTE Y ANTERIORS -->\r\n\r\n                </div>\r\n\r\n            </div>\r\n            <!-- TABLE FACTURAS -->\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport { Banco } from 'src/app/models/bancos.model';\r\n\r\n// SEVICES\r\nimport { BancosService } from 'src/app/services/bancos.service';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-bancos',\r\n  templateUrl: './bancos.component.html',\r\n  styleUrls: ['./bancos.component.css']\r\n})\r\nexport class BancosComponent implements OnInit {\r\n\r\n  public resultado: number = 0;\r\n  public desde: number = 0;\r\n  public cargando: boolean = true;\r\n  public sinResultados: boolean = true;\r\n\r\n  public btnAtras: string = '';\r\n  public btnAdelante: string = '';\r\n\r\n  constructor(  private bancosService: BancosService,\r\n                private fb: FormBuilder) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // CARGAR BANCOS\r\n    this.cargarBancos();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR BANCOS\r\n  ==================================================================== */\r\n  public listaBancos: Banco[] = [];\r\n  public listaBancosTemp: Banco[] = [];\r\n  public totalImpuesto: number = 0;\r\n  cargarBancos(){\r\n\r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n\r\n    this.bancosService.loadBancos()\r\n        .subscribe(({ total, bancos }) => {\r\n\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (bancos.length === 0) {\r\n            this.sinResultados = false;\r\n            this.cargando = false;\r\n            this.listaBancos = [];\r\n            this.resultado = 0;\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n\r\n          this.totalImpuesto = total;\r\n          this.listaBancos = bancos;\r\n          this.listaBancosTemp = bancos;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n\r\n        });\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREAR BANCO\r\n  ==================================================================== */\r\n  public formSubmitted:boolean = false;\r\n  public newBancoForm = this.fb.group({\r\n    name: ['', [Validators.required]],\r\n  })\r\n\r\n  crearBanco(){\r\n\r\n    this.formSubmitted = true;\r\n    \r\n    if (this.newBancoForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    this.bancosService.createBanco(this.newBancoForm.value)\r\n        .subscribe( ({banco}) => {\r\n\r\n          this.cargarBancos();\r\n          Swal.fire('Estupendo', 'Se ha creado el banco exitosamente', 'success');\r\n\r\n      }, (err) => {\r\n        console.log(err);\r\n        Swal.fire('Error', err.error.msg, 'error');\r\n        \r\n      });\r\n\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   VALIDAR CAMPOS\r\n  ==================================================================== */\r\n  campoValido(campo: string): boolean{\r\n\r\n    if ( this.newBancoForm.get(campo).invalid &&  this.formSubmitted) {      \r\n      return true;      \r\n    } else{      \r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SELECT BANCO\r\n  ==================================================================== */\r\n  selectBanco(banco: Banco){\r\n\r\n    this.bancoSelect = banco;\r\n    this.editBancoForm.setValue({\r\n      name: banco.name\r\n    })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   EDITAR BANCO\r\n  ==================================================================== */\r\n  public bancoSelect!: Banco;\r\n  public formSubmittedEdit:boolean = false;\r\n  public editBancoForm = this.fb.group({\r\n    name: ['', [Validators.required]],\r\n  })\r\n\r\n  editarBanco(){\r\n\r\n    this.formSubmittedEdit = true;\r\n    \r\n    if (this.editBancoForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    this.bancosService.updateBanco(this.editBancoForm.value, this.bancoSelect.baid!)\r\n        .subscribe( ({banco}) => {\r\n          \r\n          this.cargarBancos();\r\n          this.formSubmittedEdit = false;\r\n          Swal.fire('Estupendo', 'Se ha actualizado el banco exitosamente', 'success');\r\n          \r\n      }, (err) => {\r\n        console.log(err);\r\n        Swal.fire('Error', err.error.msg, 'error');\r\n        \r\n      });\r\n\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   VALIDAR CAMPOS\r\n  ==================================================================== */\r\n  campoValidoEdit(campo: string): boolean{\r\n\r\n    if ( this.editBancoForm.get(campo).invalid && this.formSubmittedEdit) {      \r\n      return true;      \r\n    } else{      \r\n      return false;\r\n    }\r\n    \r\n  }\r\n  \r\n  /** ================================================================\r\n   *   CAMBIAR STATUS\r\n  ==================================================================== */\r\n  statusUpdate(id: string){\r\n\r\n    Swal.fire({\r\n      title: 'Atencion',\r\n      text: \"Estas seguro de desactivar este banco?\",\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: 'Si, desactivar ahora',\r\n      cancelButtonText: 'Cancelar'\r\n    }).then((result) => {  \r\n\r\n      if (result.isConfirmed) {\r\n\r\n        this.bancosService.statusUpdateBanco(id)\r\n            .subscribe( resp => {\r\n\r\n              this.cargarBancos();\r\n              Swal.fire('Estupendo', 'Se ha actualizado el banco exitosamente!', 'success');\r\n\r\n            }, (err) => {\r\n\r\n              console.log(err);\r\n              Swal.fire('Error', err.error.msg, 'error');\r\n              \r\n\r\n            });\r\n\r\n      }\r\n\r\n    });\r\n\r\n\r\n  }\r\n\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Configuraciones / Bancos</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"ticket1-tab\"><i class=\"bi-gear\" style=\"font-size: 1rem\"></i> Tablero Principal</a>\r\n        </li>\r\n\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<div class=\"container-fluid my-4\">\r\n\r\n    <!-- TABLE BANCOS -->\r\n    <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n        <!-- CARGANDO -->\r\n        <div *ngIf=\"cargando\">\r\n            <div class=\"text-center p-4\">\r\n                <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                    <span class=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n            </div>\r\n            <small class=\"text-muted\">cargando...</small>\r\n        </div>\r\n        <!-- CARGANDO -->\r\n\r\n        <div *ngIf=\"!cargando\">\r\n\r\n            <!-- BTN CREAR IMPUESTO -->\r\n            <div class=\"d-flex justify-content-end\">\r\n                <button type=\"button\" class=\"btn btn-sm btn-primary btnW waves-effect waves-ligth\" data-bs-toggle=\"modal\" data-bs-target=\"#nuevoBanco\">Crear</button>\r\n            </div>\r\n            <!-- BTN CREAR IMPUESTO -->\r\n\r\n            <div class=\"table-responsive \">\r\n                <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                    <thead class=\"border-bottom \">\r\n                        <tr>\r\n                            <th class=\"text-muted \" scope=\"col \">Nombre</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Estado</th>\r\n                            <th class=\"text-muted w100 \" scope=\"col \">Acciones</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr *ngIf=\"!sinResultados\" class=\"text-center \">\r\n                            <th colspan=\"10\" class=\"py-4\">\r\n                                <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                            </th>\r\n                        </tr>\r\n\r\n                        <tr class=\"trHover\" *ngFor=\"let banco of listaBancos; let i = index\">\r\n                            <td>{{ banco.name }}</td>\r\n                            <td>\r\n                                <button *ngIf=\"banco.status\" (click)=\"statusUpdate(banco.baid)\" type=\"button\" class=\"btn btnW waves-effect waves-ligth btn-success btn-sm\">Activo</button>\r\n                                <button *ngIf=\"!banco.status\" (click)=\"statusUpdate(banco.baid)\" type=\"button\" class=\"btn btnW waves-effect waves-ligth btn-danger btn-sm\">Desactivo</button>\r\n                            </td>\r\n                            <td class=\"text-center\">\r\n                                <button (click)=\"selectBanco(banco)\" type=\"button\" class=\"btn btn-link p-1 text-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#editarBanco\">\r\n                                    <i class=\"bi bi-box-arrow-up-right\"></i>\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n\r\n                </table>\r\n\r\n            </div>\r\n\r\n            <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n            <div class=\"row\">\r\n                <div class=\"col col-md-4\">\r\n                    <small class=\"text-muted\">Total de Bancos: ({{totalImpuesto}})</small>\r\n                    <small *ngIf=\"resultado !== 0\" class=\"text-muted\"> - (Resultados: {{ resultado }})</small>\r\n                    <small *ngIf=\"desde !== 0\" class=\"text-muted\"> - (Desde el: {{ desde + 1}} Hasta el: {{ desde + listaImpuesto.length }})</small>\r\n                </div>\r\n            </div>\r\n            <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n        </div>\r\n    </div>\r\n    <!-- TABLE BANCOS -->\r\n\r\n\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    NUEVA BANCO \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"nuevoBanco\" tabindex=\"-1\" aria-labelledby=\"nuevoBancoModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"nuevoBancoModal\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Crear Banco Nuevo</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form autocomplete=\"off\" [formGroup]=\"newBancoForm\" (ngSubmit)=\"crearBanco()\">\r\n\r\n                    <!-- =======================================================================\r\n                        Informacion del BANCO\r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Informaciòn</h5>\r\n\r\n\r\n                    <div class=\"row mb-2\">\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n                            <label for=\"\">Nombre</label>\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Numero del banco\">\r\n                                <label for=\"floatingInput\">Nombre</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"text-danger mb-2\">\r\n                            <p *ngIf=\"campoValido('name')\" class=\"mb-1 animated fadeIn\">- El nombre del impuesto es obligatorio</p>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">crear</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    NUEVA BANCO \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    EDITAR BANCO\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"editarBanco\" tabindex=\"-1\" aria-labelledby=\"editarBancoModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"editarBancoModal\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Actualizar Banco</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form autocomplete=\"off\" [formGroup]=\"editBancoForm\" (ngSubmit)=\"editarBanco()\">\r\n\r\n                    <!-- =======================================================================\r\n                        Informacion del BANCO\r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Informaciòn</h5>\r\n\r\n\r\n                    <div class=\"row mb-2\">\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n                            <label for=\"\">Nombre</label>\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Numero del Banco\">\r\n                                <label for=\"floatingInput\">Nombre</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"text-danger mb-2\">\r\n                            <p *ngIf=\"campoValidoEdit('name')\" class=\"mb-1 animated fadeIn\">- El nombre del impuesto es obligatorio</p>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">actualizar</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    EDITAR BANCO\r\n========================================================================= -->","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Bodega } from 'src/app/models/bodegas.model';\r\nimport { Product } from 'src/app/models/product.model';\r\nimport { Traslado } from 'src/app/models/traslados.model';\r\nimport { BodegasService } from 'src/app/services/bodegas.service';\r\nimport { SearchService } from 'src/app/services/search.service';\r\nimport { TrasladosService } from 'src/app/services/traslados.service';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-bodega',\r\n  templateUrl: './bodega.component.html',\r\n  styleUrls: ['./bodega.component.css']\r\n})\r\nexport class BodegaComponent implements OnInit {\r\n\r\n  constructor(  private activatedRoute: ActivatedRoute,\r\n                private bodegasService: BodegasService,\r\n                private trasladosService: TrasladosService,\r\n                private searchService: SearchService\r\n  ) { \r\n\r\n    activatedRoute.params.subscribe( ({id}) => {\r\n\r\n      this.loadBodega(id);\r\n\r\n    })\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  /** ================================================================\r\n   *   LOAD BODEGAth\r\n  ==================================================================== */\r\n  public bodega: Bodega;\r\n  loadBodega(id: string){\r\n\r\n    this.bodegasService.loadBodegaId(id)\r\n        .subscribe( ({bodega}) => {\r\n\r\n          this.bodega = bodega;\r\n          this.loadTraslados();\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   LOAD TRASLADOS OF BODEGA\r\n  ==================================================================== */\r\n  public traslados: Traslado[] = [];\r\n  public query: any = {\r\n    desde: 0,\r\n    hasta: 50,\r\n    sort: {fecha : -1}\r\n  }\r\n\r\n  loadTraslados(){\r\n\r\n    this.query.bodega = this.bodega.bid;\r\n    \r\n    this.trasladosService.loadTraslados(this.query)\r\n        .subscribe( ({traslados}) => {\r\n\r\n          this.traslados = traslados;\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR PRODUCTO\r\n  ==================================================================== */\r\n  @ViewChild('search') search: ElementRef;  \r\n  @ViewChild('psCode') psCode: ElementRef;  \r\n  @ViewChild('psName') psName: ElementRef;\r\n  @ViewChild('psCost') psCost: ElementRef;\r\n  @ViewChild('psPrice') psPrice: ElementRef;\r\n  @ViewChild('psWholesale') psWholesale: ElementRef;\r\n  @ViewChild('psQty') psQty: ElementRef;\r\n\r\n  public productS: Product;\r\n  public listProducts: any[] = [];\r\n  searchProduct(termino: string){\r\n\r\n    if (termino.length === 0) {\r\n      return;\r\n    }\r\n\r\n    this.searchService.search('products', termino)\r\n        .subscribe( (resp) => {\r\n\r\n          this.listProducts = resp.resultados;\r\n          \r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  selectProduct(product: Product){\r\n\r\n    this.psCode.nativeElement.value = product.code;\r\n    this.psName.nativeElement.value = product.name;\r\n    this.psCost.nativeElement.value = product.cost;\r\n    this.psPrice.nativeElement.value = product.price;\r\n    this.psWholesale.nativeElement.value = product.wholesale;\r\n    this.psQty.nativeElement.focus();\r\n    \r\n    this.listProducts = [];\r\n    this.productS = product;\r\n    \r\n    this.search.nativeElement.value = '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   AGREGAR PRODUCT\r\n  ==================================================================== */\r\n  public items: any[] = [];\r\n  agregarProducto(qty: any){\r\n\r\n    qty = Number(qty);\r\n\r\n    if(qty <= 0 ){\r\n      Swal.fire('Atención', 'debes de agregar una cantidad valida', 'warning');\r\n      return;\r\n    }\r\n\r\n    if(Number(this.psCost.nativeElement.value) <= 0 ){\r\n      Swal.fire('Atención', 'debes de agregar un precio de costo valido', 'warning');\r\n      return;\r\n    }\r\n\r\n    if(Number(this.psCost.nativeElement.value) <= 0 ){\r\n      Swal.fire('Atención', 'debes de agregar un precio de venta valido', 'warning');\r\n      return;\r\n    }\r\n\r\n    if (Number(this.psWholesale.nativeElement.value) > 0) {\r\n      this.items.push({\r\n        product: this.productS,\r\n        code: this.psCode.nativeElement.value,\r\n        qty,\r\n        cost: this.psCost.nativeElement.value,\r\n        price: this.psPrice.nativeElement.value,\r\n        wholesale: this.psWholesale.nativeElement.value\r\n      })\r\n      \r\n    }else{\r\n      this.items.push({\r\n        product: this.productS,\r\n        code: this.psCode.nativeElement.value,\r\n        qty,\r\n        cost: this.psCost.nativeElement.value,\r\n        price: this.psCost.nativeElement.value\r\n      })\r\n    }\r\n\r\n    this.psCode.nativeElement.value = '';\r\n    this.psName.nativeElement.value = '';\r\n    this.psCost.nativeElement.value = '';\r\n    this.psPrice.nativeElement.value = '';\r\n    this.psWholesale.nativeElement.value = '';\r\n    this.psQty.nativeElement.value = '';\r\n\r\n    delete this.productS;\r\n    this.search.nativeElement.focus();    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   DELETE PRODUCT\r\n  ==================================================================== */\r\n  deleteProduct(i: any){\r\n\r\n    this.items.splice(i,1);\r\n\r\n  }\r\n\r\n}\r\n","<div class=\"container-fluid my-4\">\r\n\r\n    <div class=\"d-flex flex-wrap\">\r\n\r\n        <!-- TRASLADOS -->\r\n        <div class=\"col-md-8 p-0\">\r\n\r\n            <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n                <div>\r\n\r\n                    <!-- BTN CREAR IMPUESTO -->\r\n                    <div class=\"d-flex justify-content-end\">\r\n                        <button type=\"button\" class=\"btn btn-sm btn-primary btnW waves-effect waves-ligth\" data-bs-toggle=\"modal\" data-bs-target=\"#nuevaBodega\">Crear</button>\r\n                    </div>\r\n                    <!-- BTN CREAR IMPUESTO -->\r\n\r\n                    <div class=\"table-responsive \">\r\n                        <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                            <thead class=\"border-bottom \">\r\n                                <tr>\r\n                                    <th class=\"text-muted \" scope=\"col \">Referencia</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Estado</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Fecha</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Usuario</th>\r\n                                    <th class=\"text-muted w100 \" scope=\"col \">Acciones</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr *ngIf=\"traslados.length === 0\" class=\"text-center \">\r\n                                    <th colspan=\"5\" class=\"py-4\">\r\n                                        <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                                    </th>\r\n                                </tr>\r\n\r\n                                <tr class=\"trHover\" *ngFor=\"let traslado of traslados; let i = index\">\r\n                                    <td>{{ traslado.referencia }}</td>\r\n                                    <td>{{ traslado.estado }}</td>\r\n                                    <td>{{ traslado.fecha | date: 'short' }}</td>\r\n                                    <td>{{ traslado.user }}</td>\r\n                                    <td class=\"text-center\">\r\n                                        <a routerLink=\"/dashboard/configuracion/bodega/{{bodega.bid}}\" class=\"btn btn-link p-1 text-primary\">\r\n                                            <i class=\"bi bi-box-arrow-up-right\"></i>\r\n                                        </a>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n\r\n                        </table>\r\n\r\n                    </div>\r\n\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                    <div class=\"row\">\r\n                        <div class=\"col col-md-4\">\r\n                            <small class=\"text-muted\">Total de bodegas: ({{traslados.length}})</small>\r\n                            <small *ngIf=\"traslados.length !== 0\" class=\"text-muted\"> - (Resultados: {{ traslados.length }})</small>\r\n                        </div>\r\n                    </div>\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <!-- CREAR TRASLADOS -->\r\n        <div class=\"col-md-4\">\r\n\r\n            <!-- AGREGAR PRODUCTOS -->\r\n            <div class=\"card mb-3\">\r\n\r\n                <div class=\"card-body\">\r\n\r\n                    <h4>Agregar Productos</h4>\r\n\r\n                    <div class=\"w-100 mb-2\">\r\n                        <div class=\"form-group\">\r\n                            <input type=\"text\" class=\"form-control\" placeholder=\"Buscar producto con codigo de barra o nombre\" (keyup.enter)=\"searchProduct(search.value)\" #search>\r\n\r\n                            <!-- LIST PRODUCTS -->\r\n                            <div *ngIf=\"listProducts.length > 0\" class=\"shadow rounded bg-white\" style=\"z-index: 1; position: absolute; max-height: 200px; overflow-y: auto;\">\r\n                                <div class=\"w-100\">\r\n\r\n                                    <p class=\"mb-0 text-muted pl-2\"><small> resultados: {{ listProducts.length }} </small> </p>\r\n                                    <ul class=\"list-group list-group-flush\">\r\n                                        <li class=\"list-group-item list-group-item-action\" *ngFor=\"let product of listProducts\">\r\n                                            <a class=\"pointer\" (click)=\"selectProduct(product)\">\r\n                                                <h5 class=\"mb-0\"> {{ product.name }} </h5>\r\n                                                <p *ngIf=\"product.code\" class=\"mb-0 text-muted\"><small> <i class=\"ti ti-id-badge\"></i>  {{ product.code }} </small> </p>\r\n                                            </a>\r\n                                        </li>\r\n                                    </ul>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- AGREGAR ITEMS -->\r\n                    <div class=\"row g-3 d-flex align-items-end\">\r\n\r\n                        <div class=\"col-md-6\">\r\n                            <label for=\"codigo\" class=\"\">Codigo</label>\r\n                            <input #psCode readonly type=\"text\" class=\"form-control\" id=\"codigo\" placeholder=\"Codigo\">\r\n                        </div>\r\n\r\n                        <div class=\"col-md-6\">\r\n                            <label for=\"producto\" class=\"\">Producto</label>\r\n                            <input #psName readonly type=\"text\" class=\"form-control\" id=\"producto\" placeholder=\"Producto\">\r\n                        </div>\r\n\r\n                        <div class=\"col-md-6\">\r\n                            <label for=\"costo\" class=\"\">Costo</label>\r\n                            <input #psCost type=\"number\" min=\"0\" class=\"form-control\" id=\"costo\" placeholder=\"costo\">\r\n                        </div>\r\n\r\n                        <div class=\"col-md-6\">\r\n                            <label for=\"Precio\" class=\"\">Precio</label>\r\n                            <input #psPrice type=\"number\" min=\"0\" class=\"form-control\" id=\"Precio\" placeholder=\"Precio\">\r\n                        </div>\r\n\r\n                        <div class=\"col-md-6\">\r\n                            <label for=\"mayor\" class=\"\">Precio Mayor</label>\r\n                            <input #psWholesale type=\"number\" min=\"0\" class=\"form-control\" id=\"mayor\" placeholder=\"mayor\">\r\n                        </div>\r\n\r\n                        <div class=\"col-md-6\">\r\n                            <label for=\"cantidad\" class=\"\">Cantidad</label>\r\n                            <input #psQty type=\"number\" min=\"0\" class=\"form-control\" id=\"cantidad\" placeholder=\"cantidad\">\r\n                        </div>\r\n\r\n                        <div class=\"col-auto\">\r\n                            <button type=\"button\" (click)=\"agregarProducto(psQty.value)\" class=\"btn btn-primary\">Agregar</button>\r\n                        </div>\r\n\r\n                        <h3 class=\"text-center mb-1\">ITEMS</h3>\r\n                        <div class=\"table-responsive\" style=\"clear: both;\">\r\n                            <table class=\"table table-hover\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th></th>\r\n                                        <th>Producto</th>\r\n                                        <th class=\"text-right\">Cantidad</th>\r\n                                        <th class=\"text-right\">Costo</th>\r\n                                        <th class=\"text-right\">Precio</th>\r\n                                        <th class=\"text-right\">Mayor</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n\r\n                                    <tr *ngIf=\"items.length === 0\">\r\n                                        <td colspan=\"7\" class=\"text-center\">Aun no has seleccionado ningun producto...</td>\r\n                                    </tr>\r\n\r\n                                    <tr *ngFor=\"let item of items; let i = index\">\r\n                                        <td>\r\n                                            <button type=\"button\" (click)=\"deleteProduct(i)\" class=\"btn btn-link p-1 text-danger\">\r\n                                            <i class=\"text-danger bi-trash\"></i>\r\n                                        </button> #{{i+1}}\r\n                                        </td>\r\n                                        <td> {{ item.product.name }} <br> <small>{{ item.product!.code }}</small> </td>\r\n                                        <td class=\"text-right\"> {{ item.qty }} </td>\r\n                                        <td class=\"text-right\"> {{ item.cost | currency : 'COP' : 'symbol' : '1.0-0' }} </td>\r\n                                        <td class=\"text-right\"> {{ item.price | currency : 'COP' : 'symbol' : '1.0-0' }} </td>\r\n                                        <td class=\"text-right\"> {{ item.wholesale || 0 | currency : 'COP' : 'symbol' : '1.0-0' }} </td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport { Bodega } from 'src/app/models/bodegas.model';\r\nimport { BodegasService } from 'src/app/services/bodegas.service';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-bodegas',\r\n  templateUrl: './bodegas.component.html',\r\n  styleUrls: ['./bodegas.component.css']\r\n})\r\nexport class BodegasComponent implements OnInit {\r\n\r\n  constructor(  private bodegasService: BodegasService,\r\n                private fb: FormBuilder) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // LOAD BODEGAS\r\n    this.loadBodegas();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR BODEGAS\r\n  ==================================================================== */\r\n  public cargando: boolean = true;\r\n  public totalBodegas: number = 0;\r\n  public bodegas: Bodega[] = [];\r\n  public query: any = {\r\n    desde: 0,\r\n    hasta: 50\r\n  }\r\n\r\n  loadBodegas(){\r\n\r\n    this.bodegasService.loadBodegas(this.query)\r\n        .subscribe( ({bodegas, total}) => {\r\n\r\n          this.bodegas = bodegas;\r\n          this.totalBodegas = total;\r\n          this.cargando = false;\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   NUEVA BODEGA\r\n  ==================================================================== */\r\n  public newBodegaSubmitted: boolean = false;\r\n  public newBodegaForm = this.fb.group({\r\n    name: ['', [Validators.required]],\r\n    endpoint: ['', [Validators.required]]\r\n  })\r\n  \r\n  create(){\r\n\r\n    this.newBodegaSubmitted = true;\r\n\r\n    if (this.newBodegaForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    this.bodegasService.createBodega(this.newBodegaForm.value)\r\n        .subscribe( ({bodega}) => {\r\n\r\n          bodega.bid = bodega._id;\r\n\r\n          this.bodegas.push(bodega);\r\n          this.newBodegaForm.reset();\r\n          this.newBodegaSubmitted = false;\r\n          this.totalBodegas ++;\r\n          Swal.fire('Estupendo', 'Se ha creado la bodega exitosamente', 'success');\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n    *   VALIDAR CAMPO\r\n  ==================================================================== */\r\n  campoValido(campo: string): boolean{\r\n    if (this.newBodegaSubmitted && this.newBodegaForm.get(campo).invalid) {\r\n      return true;\r\n    }else{\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n    *   SET BODEGA {}\r\n  ==================================================================== */\r\n  public bodegaSeleted: Bodega;\r\n  setForm(bodega: Bodega){\r\n\r\n    this.bodegaSeleted = bodega;\r\n    this.updateForm.setValue({\r\n      name: bodega.name,\r\n      endpoint: bodega.endpoint\r\n    })  \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n    *   UPDATE BODEGA\r\n  ==================================================================== */\r\n  public updateFormSubmmited: boolean = false;\r\n  public updateForm = this.fb.group({\r\n    name: ['', [Validators.required]],\r\n    endpoint: ['', [Validators.required]]\r\n  })\r\n\r\n  update(){\r\n\r\n    this.updateFormSubmmited = false;\r\n\r\n    if (this.updateForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    this.bodegasService.updateBodega(this.updateForm.value, this.bodegaSeleted.bid)    \r\n      .subscribe( ({bodega}) =>  {\r\n\r\n        this.bodegas.map( bod => {\r\n          if (bod.bid === this.bodegaSeleted.bid) {\r\n            bod.name = bodega.name;\r\n            bod.endpoint = bodega.endpoint;\r\n          }\r\n        })\r\n\r\n        Swal.fire('Estupendo', 'Se ha actualizado la bodega exitosamente!', 'success');\r\n\r\n      }, (err) => {\r\n        console.log(err);\r\n        \r\n      })\r\n  }\r\n\r\n}\r\n\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Configuraciones / Bodegas</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"ticket1-tab\"><i class=\"bi-gear\" style=\"font-size: 1rem\"></i> Bodegas</a>\r\n        </li>\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a routerLink=\"/dashboard/configuracion/traslados\" class=\"nav-link text-dark\" id=\"ticket1-tab2\"><i class=\"bi-gear\" style=\"font-size: 1rem\"></i> Trasalados</a>\r\n        </li>\r\n\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<div class=\"container-fluid my-4\">\r\n\r\n    <!-- TABLE BODEGAS -->\r\n    <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n        <!-- CARGANDO -->\r\n        <div *ngIf=\"cargando\">\r\n            <div class=\"text-center p-4\">\r\n                <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                    <span class=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n            </div>\r\n            <small class=\"text-muted\">cargando...</small>\r\n        </div>\r\n        <!-- CARGANDO -->\r\n\r\n        <div *ngIf=\"!cargando\">\r\n\r\n            <!-- BTN CREAR IMPUESTO -->\r\n            <div class=\"d-flex justify-content-end\">\r\n                <button type=\"button\" class=\"btn btn-sm btn-primary btnW waves-effect waves-ligth\" data-bs-toggle=\"modal\" data-bs-target=\"#nuevaBodega\">Crear</button>\r\n            </div>\r\n            <!-- BTN CREAR IMPUESTO -->\r\n\r\n            <div class=\"table-responsive \">\r\n                <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                    <thead class=\"border-bottom \">\r\n                        <tr>\r\n                            <th class=\"text-muted \" scope=\"col \">Nombre</th>\r\n                            <th class=\"text-muted \" scope=\"col \">URL</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Estado</th>\r\n                            <th class=\"text-muted w100 \" scope=\"col \">Acciones</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr *ngIf=\"bodegas.length === 0\" class=\"text-center \">\r\n                            <th colspan=\"4\" class=\"py-4\">\r\n                                <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                            </th>\r\n                        </tr>\r\n\r\n                        <tr class=\"trHover\" *ngFor=\"let bodega of bodegas; let i = index\">\r\n                            <td>{{ bodega.name }}</td>\r\n                            <td>{{ bodega.endpoint }}</td>\r\n                            <td>\r\n                                <button *ngIf=\"bodega.status\" type=\"button\" class=\"btn btnW waves-effect waves-ligth btn-success btn-sm\">Activo</button>\r\n                                <button *ngIf=\"!bodega.status\" type=\"button\" class=\"btn btnW waves-effect waves-ligth btn-danger btn-sm\">Desactivo</button>\r\n                            </td>\r\n                            <td class=\"text-center\">\r\n                                <button (click)=\"setForm(bodega)\" type=\"button\" class=\"btn btn-link p-1 text-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#editarBodega\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n\r\n                </table>\r\n\r\n            </div>\r\n\r\n            <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n            <div class=\"row\">\r\n                <div class=\"col col-md-4\">\r\n                    <small class=\"text-muted\">Total de bodegas: ({{totalBodegas}})</small>\r\n                    <small *ngIf=\"bodegas.length !== 0\" class=\"text-muted\"> - (Resultados: {{ bodegas.length }})</small>\r\n                </div>\r\n            </div>\r\n            <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n        </div>\r\n    </div>\r\n    <!-- TABLE BODEGAS -->\r\n\r\n\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    NUEVA BODEGA \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"nuevaBodega\" tabindex=\"-1\" aria-labelledby=\"nuevaBodegaModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"nuevaBodegaModal\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Crear bodga Nueva</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form autocomplete=\"off\" [formGroup]=\"newBodegaForm\" (ngSubmit)=\"create()\">\r\n\r\n                    <!-- =======================================================================\r\n                        Informacion del BANCO\r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Informaciòn</h5>\r\n\r\n\r\n                    <div class=\"row mb-2\">\r\n\r\n                        <div class=\"col-md-12\">\r\n                            <label for=\"\">Nombre</label>\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"name\" type=\"text\" class=\"form-control\" placeholder=\"Nombre de la bodega\">\r\n                                <label for=\"floatingInput\">Nombre de la bodega</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-md-12\">\r\n                            <label for=\"\">URL</label>\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"endpoint\" type=\"text\" class=\"form-control\" placeholder=\"URL de la bodega\">\r\n                                <label for=\"floatingInput\">URL</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"text-danger mb-2\">\r\n                            <p *ngIf=\"campoValido('name')\" class=\"mb-1 animated fadeIn\">- El nombre del impuesto es obligatorio</p>\r\n                            <p *ngIf=\"campoValido('endpoint')\" class=\"mb-1 animated fadeIn\">- El URL es obligatorio</p>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary w-100\">crear</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    EDITAR BODEGA \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"editarBodega\" tabindex=\"-1\" aria-labelledby=\"editarBodegaModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"editarBodegaModal\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Editar bodga Nueva</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form autocomplete=\"off\" [formGroup]=\"updateForm\" (ngSubmit)=\"update()\">\r\n\r\n                    <!-- =======================================================================\r\n                        Informacion del BANCO\r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Informaciòn</h5>\r\n\r\n\r\n                    <div class=\"row mb-2\">\r\n\r\n                        <div class=\"col-md-12\">\r\n                            <label for=\"\">Nombre</label>\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"name\" type=\"text\" class=\"form-control\" placeholder=\"Nombre de la bodega\">\r\n                                <label for=\"floatingInput\">Nombre de la bodega</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-md-12\">\r\n                            <label for=\"\">URL</label>\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"endpoint\" type=\"text\" class=\"form-control\" placeholder=\"URL de la bodega\">\r\n                                <label for=\"floatingInput\">URL</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"text-danger mb-2\">\r\n                            <p *ngIf=\"campoValido('name')\" class=\"mb-1 animated fadeIn\">- El nombre del impuesto es obligatorio</p>\r\n                            <p *ngIf=\"campoValido('endpoint')\" class=\"mb-1 animated fadeIn\">- El URL es obligatorio</p>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary w-100\">Actualizar</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport Swal from 'sweetalert2';\r\n\r\n// SERVICES\r\nimport { CajaService } from '../../../services/caja.service';\r\nimport { SearchService } from '../../../services/search.service';\r\n\r\n// INTERFACES\r\nimport { LoadCaja, _cajero, _caja } from '../../../interfaces/load-caja.interface';\r\n\r\n// MODELS\r\nimport { Caja } from '../../../models/caja.model';\r\n\r\n@Component({\r\n  selector: 'app-caja',\r\n  templateUrl: './caja.component.html',\r\n  styleUrls: ['./caja.component.css']\r\n})\r\nexport class CajaComponent implements OnInit {\r\n\r\n  public listaCaja: _caja[] = [];\r\n  public listaCajaTemp: _caja[] = [];\r\n  public totalCajas: number = 0;\r\n\r\n  public resultado: number = 0;\r\n  public desde: number = 0;\r\n  public cargando: boolean = true;\r\n  public sinResultados: boolean = true;\r\n\r\n  constructor(  private cajaService: CajaService,\r\n                private fb: FormBuilder,\r\n                private searchService: SearchService) { }\r\n\r\n  ngOnInit(): void {\r\n    \r\n    this.cargarCajas();\r\n\r\n  }\r\n  \r\n  /** ================================================================\r\n   *   BUSCAR CAJA\r\n  ==================================================================== */\r\n  buscar(termino){\r\n    \r\n    this.sinResultados = true;\r\n    if (termino.length === 0) {\r\n      this.listaCaja = this.listaCajaTemp;\r\n      this.resultado = 0;\r\n      return;\r\n    }else{\r\n\r\n      this.sinResultados = true;\r\n      this.searchService.search('caja', termino)\r\n          .subscribe(({total, resultados}) => {\r\n\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            if (resultados.length === 0) {\r\n              this.sinResultados = false;\r\n              this.listaCaja = [];\r\n              this.resultado = 0;\r\n              return;                \r\n            }\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n\r\n            this.totalCajas = total;\r\n            this.listaCaja = resultados; \r\n            this.resultado = resultados.length; \r\n\r\n          });\r\n          \r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREAR CAJA\r\n  ==================================================================== */\r\n  public formSubmitted:boolean = false;\r\n  public newCajaForm = this.fb.group({\r\n    name: ['', [Validators.required, Validators.minLength(3)]],\r\n    description: ['', [Validators.minLength(5)]]\r\n  });\r\n\r\n  crearCaja(){\r\n    \r\n    this.formSubmitted = true;\r\n    \r\n    if (this.newCajaForm.invalid) {\r\n      return;\r\n    }\r\n    \r\n    this.cajaService.createCaja(this.newCajaForm.value)\r\n        .subscribe( (resp:{ok: boolean, caja: Caja}) => {\r\n          \r\n          this.formSubmitted = false;\r\n          this.cargarCajas();\r\n          this.newCajaForm.reset();\r\n          Swal.fire('Estupendo', 'Se ha creado la caja exitosamente', 'success');\r\n          \r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n  }\r\n  \r\n  /** ================================================================\r\n   *   VALIDAR CAMPOS\r\n  ==================================================================== */\r\n  campoValido(campo: string): boolean{\r\n\r\n    if ( this.newCajaForm.get(campo).invalid &&  this.formSubmitted) {      \r\n      return true;      \r\n    } else{\r\n      \r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR CAJAS\r\n  ==================================================================== */\r\n  cargarCajas(){\r\n    \r\n    this.cajaService.loadCajas()\r\n        .subscribe( ({ total, cajas }) => {\r\n\r\n          this.totalCajas = total;\r\n          this.listaCaja = cajas;\r\n          this.listaCajaTemp = cajas;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n          \r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n  }  \r\n  \r\n  /** ================================================================\r\n   *   OBTENER INFORMACIÓN DE LA CAJA PARA ACTUALIZAR\r\n  ==================================================================== */\r\n  public formSubmittedUp:boolean = false;\r\n  public upCajaForm = this.fb.group({\r\n    name: ['', [Validators.required, Validators.minLength(3)]],\r\n    description: ['', [Validators.required, Validators.minLength(3)]],\r\n    id: ['', [Validators.required, Validators.minLength(3)]]\r\n  });\r\n\r\n\r\n  informacionCaja(caja: _caja){\r\n\r\n    this.upCajaForm.setValue({\r\n      name: caja.name,\r\n      description: caja.description,\r\n      id: caja.caid\r\n    });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  ACTUALIZAR CAJA\r\n  ==================================================================== */\r\n  actualizarCaja(){\r\n    \r\n    this.formSubmittedUp = true;\r\n    \r\n    if (this.upCajaForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    this.cajaService.updateCaja(this.upCajaForm.value, this.upCajaForm.value.id)\r\n        .subscribe((resp:{ok: boolean, caja: Caja}) => {\r\n\r\n          this.formSubmittedUp = false;\r\n          this.cargarCajas();\r\n          this.upCajaForm.reset();\r\n          Swal.fire('Estupendo', 'Se ha actualizado la caja exitosamente', 'success');\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   VALIDAR CAMPOS\r\n  ==================================================================== */\r\n  campoValidoUpdate(campo: string): boolean{\r\n\r\n    if ( this.upCajaForm.get(campo).invalid &&  this.formSubmittedUp) {      \r\n      return true;      \r\n    } else{\r\n      \r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ACTUALIZAR STATUS DE LA CAJA\r\n  ==================================================================== */\r\n  statusUpdate(id:string){\r\n    \r\n    this.cajaService.statusUpdateCaja(id)\r\n        .subscribe( (caja) => {\r\n          \r\n          let information: string;\r\n          if (caja.status) {\r\n            information = 'Activada';            \r\n          }else{\r\n            information = 'Desactivada';\r\n          }\r\n\r\n          this.cargarCajas();\r\n          Swal.fire('Estupendo', `La caja ${caja.name}, ha sido ${information}`, 'success');\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n        \r\n  }\r\n\r\n  // FIN DE LA CLASE \r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Configuraciones / Caja</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"ticket1-tab\"><i class=\"bi-gear\" style=\"font-size: 1rem\"></i> Tablero Principal</a>\r\n        </li>\r\n\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<div class=\"container-fluid my-4\">\r\n\r\n    <!-- TABLE CLIENTS -->\r\n    <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n        <!-- CARGANDO -->\r\n        <div *ngIf=\"cargando\">\r\n            <div class=\"text-center p-4\">\r\n                <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                    <span class=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n            </div>\r\n            <small class=\"text-muted\">cargando...</small>\r\n        </div>\r\n        <!-- CARGANDO -->\r\n\r\n        <div *ngIf=\"!cargando\">\r\n            <div>\r\n                <div class=\"form-floating mb-2\">\r\n                    <span class=\"position-absolute top-50 start-90 translate-middle\"><i class=\" bi-search \" style=\"font-size: 1rem \"></i></span>\r\n                    <input type=\"text\" class=\"form-control\" id=\"floatingInput2\" placeholder=\"Buscar Caja\" (keyup)=\"buscar(search.value)\" #search>\r\n                    <label for=\"floatingInput2 \">Buscar Caja</label>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- BTN CREAR CAJA -->\r\n            <div class=\"d-flex justify-content-end\">\r\n                <button type=\"button\" class=\"btn btn-sm btn-primary btnW waves-effect waves-ligth\" data-bs-toggle=\"modal\" data-bs-target=\"#nuevaCaja\">Crear Caja</button>\r\n            </div>\r\n            <!-- BTN CREAR CAJA -->\r\n\r\n            <div class=\"table-responsive \">\r\n                <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                    <thead class=\"border-bottom \">\r\n                        <tr>\r\n                            <th class=\"text-muted \" scope=\"col \">#</th>\r\n                            <th class=\"text-muted \" scope=\"col \" colspan=\"2\">Nombre</th>\r\n                            <th class=\"text-muted \" scope=\"col \" colspan=\"2\">Descripción</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Estado</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Activa</th>\r\n                            <th class=\"text-muted w100 \" scope=\"col \">Acciones</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr *ngIf=\"!sinResultados\" class=\"text-center \">\r\n                            <th colspan=\"10\" class=\"py-4\">\r\n                                <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                            </th>\r\n                        </tr>\r\n                        <tr class=\"trHover\" *ngFor=\"let caja of listaCaja; let i = index\">\r\n                            <th *ngIf=\"desde === 0 \" scope=\"row \">{{ i + 1}}</th>\r\n                            <th *ngIf=\"desde> 0\" scope=\"row\">{{ (i + 1) + desde }}</th>\r\n                            <td colspan=\"2\">{{ caja.name }}</td>\r\n                            <td colspan=\"2\">{{ caja.description }}</td>\r\n                            <td>\r\n                                <span *ngIf=\"!caja.cerrada\" class=\"badge rounded-pill bg-danger text-white-75\">Abierta</span>\r\n                                <span *ngIf=\"caja.cerrada\" class=\"badge rounded-pill bg-success text-white-75\">Cerrada</span>\r\n                            </td>\r\n                            <td>\r\n                                <button *ngIf=\"caja.status\" (click)=\"statusUpdate(caja.caid)\" type=\"button\" class=\"btn btnW waves-effect waves-ligth btn-success btn-sm\">Activa</button>\r\n                                <button *ngIf=\"!caja.status\" (click)=\"statusUpdate(caja.caid)\" type=\"button\" class=\"btn btnW waves-effect waves-ligth btn-danger btn-sm\">Desactivada</button>\r\n                            </td>\r\n                            <td class=\"text-center\">\r\n                                <button type=\"button\" (click)=\"informacionCaja(caja)\" class=\"btn btn-link p-1 text-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#actualizarCaja\">\r\n                                    <i class=\"bi bi-box-arrow-up-right\"></i>\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n\r\n                </table>\r\n\r\n            </div>\r\n\r\n            <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n            <div class=\"row\">\r\n                <div class=\"col col-md-4\">\r\n                    <small class=\"text-muted\">Total de cajas: ({{totalCajas}})</small>\r\n                    <small *ngIf=\"resultado !== 0\" class=\"text-muted\"> - (Resultados: {{ resultado }})</small>\r\n                    <small *ngIf=\"desde !== 0\" class=\"text-muted\"> - (Desde el: {{ desde + 1}} Hasta el: {{ desde + listaCaja.length }})</small>\r\n                </div>\r\n\r\n                <!-- <div *ngIf=\"search.value.length === 0\" class=\"col d-flex justify-content-end\">\r\n                    <button type=\"button\" (click)=\"cambiarPagina(-10)\" class=\"{{btnAtras}} btn btn-sm btn-dark btnW waves-effect waves-light px-3\">Anterior</button>\r\n                    <button type=\"button\" (click)=\"cambiarPagina(10)\" class=\"{{btnAdelante}} btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2\">Siguiente</button>\r\n                </div> -->\r\n            </div>\r\n            <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n        </div>\r\n    </div>\r\n    <!-- TABLE CLIENTS -->\r\n\r\n\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    NUEVA CAJA \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"nuevaCaja\" tabindex=\"-1\" aria-labelledby=\"nuevaCajaModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"nuevaCajaModal\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Crear Caja Nueva</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form id=\"newDepartmentForm\" autocomplete=\"off\" [formGroup]=\"newCajaForm\" (ngSubmit)=\"crearCaja()\">\r\n\r\n                    <!-- =======================================================================\r\n                        Informacion del Caja\r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Informacion de la caja</h5>\r\n\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombre de la caja\">\r\n                                <label for=\"floatingInput\">Nombre de la caja</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"description\" type=\"text\" class=\"form-control\" placeholder=\"Descripción\">\r\n                                <label for=\"floatingInput\">Descripción</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"text-danger mb-2\">\r\n                            <p *ngIf=\"campoValido('name')\" class=\"mb-1 animated fadeIn\">- El nombre es obligatorio</p>\r\n                            <p *ngIf=\"campoValido('description')\" class=\"mb-1 animated fadeIn\">- Debe de tener como minimo 5 letras</p>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    NUEVA CAJA \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    ACTUALIZAR CAJA \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"actualizarCaja\" tabindex=\"-1\" aria-labelledby=\"actualizarCajaModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"actualizarCajaModal\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Actualizar Caja</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form id=\"upCajaForm\" autocomplete=\"off\" [formGroup]=\"upCajaForm\" (ngSubmit)=\"actualizarCaja()\">\r\n\r\n                    <!-- =======================================================================\r\n                        Informacion del Departamento\r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Informacion de la caja</h5>\r\n\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombre de la caja\">\r\n                                <label for=\"floatingInput\">Nombre de la caja</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"description\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Descripción de la caja\">\r\n                                <label for=\"floatingInput\">Descripción de la caja</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"text-danger mb-2\">\r\n                            <p *ngIf=\"campoValidoUpdate('name')\" class=\"mb-1 animated fadeIn\">- El nombre es obligatorio</p>\r\n                            <p *ngIf=\"campoValidoUpdate('description')\" class=\"mb-1 animated fadeIn\">- La descripción es obligatoria</p>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    ACTUALIZAR CAJA \r\n========================================================================= -->","import { Component, OnInit, TemplateRef, ViewChild } from '@angular/core';\r\n\r\n// SERVICES\r\nimport { TurnoService } from '../../../services/turno.service';\r\nimport { SearchService } from '../../../services/search.service';\r\nimport { InvoiceService } from '../../../services/invoice.service';\r\n\r\n// PRINTER\r\nimport { NgxPrinterService } from 'projects/ngx-printer/src/lib/ngx-printer.service';\r\nimport { PrintItem } from 'projects/ngx-printer/src/lib/print-item';\r\nimport { ngxPrintMarkerPosition } from 'projects/ngx-printer/src/public_api';\r\n\r\n// INTERFACES\r\nimport { LoadTurno, _movements } from '../../../interfaces/load-turno.interface';\r\nimport { DepartmentService } from 'src/app/services/department.service';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { BancosService } from 'src/app/services/bancos.service';\r\nimport { Banco } from 'src/app/models/bancos.model';\r\nimport { ImpuestosService } from 'src/app/services/impuestos.service';\r\nimport { Impuesto } from 'src/app/models/impuesto.model';\r\nimport { AlquileresService } from 'src/app/services/alquileres.service';\r\nimport { Alquiler } from 'src/app/models/alquileres.model';\r\nimport { EmpresaService } from 'src/app/services/empresa.service';\r\nimport { Datos } from 'src/app/models/empresa.model';\r\nimport { ParqueoService } from 'src/app/services/parqueo.service';\r\nimport Swal from 'sweetalert2';\r\ninterface _departament {\r\n  _id?: string,\r\n  did?: string,\r\n  name?: string,\r\n  qty?: number,\r\n  monto?: number\r\n}\r\n\r\n@Component({\r\n  selector: 'app-cierres',\r\n  templateUrl: './cierres.component.html',\r\n  styleUrls: ['./cierres.component.css']\r\n})\r\nexport class CierresComponent implements OnInit {\r\n\r\n  @ViewChild('PrintTemplate')\r\n  private PrintTemplateTpl: TemplateRef<any>;\r\n\r\n  title = 'ngx-printer-demo';\r\n\r\n  printWindowSubscription: Subscription;\r\n  $printItems: Observable<PrintItem[]>;\r\n\r\n  public listaTurnos: LoadTurno[] = [];\r\n  public listaTurnosTemp: LoadTurno[] = [];\r\n  public totalTurnos: number = 0;\r\n\r\n  public resultado: number = 0;\r\n  public desde: number = 0;\r\n  public cargando: boolean = true;\r\n  public sinResultados: boolean = true;\r\n\r\n  public btnAtras: string = '';\r\n  public btnAdelante: string = '';\r\n\r\n  constructor(  private turnoService: TurnoService,\r\n                private searchService: SearchService,\r\n                private bancosService: BancosService,\r\n                private invoiceService: InvoiceService,\r\n                private printerService: NgxPrinterService,\r\n                private departmentService: DepartmentService,\r\n                private impuestosService: ImpuestosService,\r\n                private alquileresService: AlquileresService,\r\n                private empresaService: EmpresaService,\r\n                private parqueoService: ParqueoService) { \r\n\r\n                  this.printWindowSubscription = this.printerService.$printWindowOpen.subscribe(\r\n                    val => {                \r\n\r\n                      if (val) {\r\n                        window.location.reload();                        \r\n                      }\r\n                      console.log('Print window is open:', val);\r\n                    }\r\n                  );\r\n              \r\n                  this.$printItems = this.printerService.$printItems;\r\n\r\n                }\r\n\r\n  public empresa!: Datos;\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.empresaService.getDatos().subscribe( datos => this.empresa = datos );\r\n    \r\n    // CARGAR IMPUESTOS\r\n    this.cargarImpuestos();\r\n\r\n    // CARGAR DEPARTAMENTOS\r\n    this.cargarDepartamento();\r\n\r\n    // BANCOS\r\n    this.cargarBancos();\r\n\r\n    // CARGAR TURNOS\r\n    this.cargarTurno();\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR BANCOS\r\n  ==================================================================== */\r\n  public bancos: Banco[] = [];\r\n  public bancosAbonos: Banco[] = [];\r\n  public bancosAlquileres: Banco[] = [];\r\n  cargarBancos(){\r\n\r\n    this.bancos = [];\r\n    this.bancosAbonos = [];\r\n\r\n    this.bancosService.loadBancos()\r\n        .subscribe( ({ bancos }) => {          \r\n\r\n          bancos.map( (banco) => {\r\n            banco.monto = 0;\r\n          });   \r\n\r\n          this.bancos = bancos;\r\n\r\n    });\r\n\r\n    this.bancosService.loadBancos()\r\n        .subscribe( ({ bancos }) => {          \r\n\r\n          bancos.map( (banco) => {\r\n            banco.monto = 0;\r\n          });   \r\n          \r\n          this.bancosAbonos = bancos;\r\n\r\n    });\r\n\r\n    this.bancosService.loadBancos()\r\n        .subscribe( ({ bancos }) => {          \r\n\r\n          bancos.map( (banco) => {\r\n            banco.monto = 0;\r\n          });   \r\n          \r\n          this.bancosAlquileres = bancos;\r\n\r\n    });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   IMPRIMIR\r\n  ==================================================================== */\r\n  printDiv() {\r\n    this.printerService.printDiv('printDiv');\r\n  }\r\n\r\n  /** ===============================================================\r\n  * DEPARTAMENTO - DEPARTAMENTO - DEPARTAMENTO - DEPARTAMENTO  \r\n  ==================================================================== */\r\n  cargarDepartamento(){\r\n\r\n    this.departmentService.loadDepartment()\r\n        .subscribe( ({departments}) => {\r\n\r\n          this.departamento = departments;\r\n          this.departamento.map((departamento) => {\r\n            departamento.monto = 0;\r\n            departamento.qty = 0;\r\n          } );\r\n    });\r\n\r\n  }\r\n\r\n  /** ===============================================================\r\n  * DEPARTAMENTO - DEPARTAMENTO - DEPARTAMENTO - DEPARTAMENTO  \r\n  ==================================================================== */\r\n  public impuestos: Impuesto[] = [];\r\n  cargarImpuestos(){\r\n    this.impuestosService.loadImpuestos()\r\n        .subscribe( ({taxes}) => {\r\n          this.impuestos = taxes; \r\n        });\r\n  }\r\n\r\n  /** ===============================================================\r\n  * CARGAR TURNO  \r\n  ==================================================================== */\r\n  public turno: LoadTurno;\r\n  cargarTurno(){  \r\n    this.turnoService.loadTurno(this.desde)\r\n    .subscribe( ({turnos, total}) => {       \r\n      \r\n      // COMPROBAR SI EXISTEN RESULTADOS\r\n      if (turnos.length === 0) {\r\n        this.sinResultados = false;\r\n        this.cargando = false;\r\n        this.listaTurnos = [];\r\n        this.resultado = 0;\r\n        this.btnAtras = 'disabled';\r\n        this.btnAdelante = 'disabled';\r\n        return;                \r\n      }\r\n      // COMPROBAR SI EXISTEN RESULTADOS\r\n\r\n      this.totalTurnos = total;\r\n      this.listaTurnos = turnos;\r\n      this.listaTurnosTemp = turnos;\r\n      this.resultado = 0;\r\n      this.cargando = false;\r\n\r\n      // BOTONES DE ADELANTE Y ATRAS          \r\n      if (this.desde === 0 && this.totalTurnos > 10) {\r\n        this.btnAtras = 'disabled';\r\n        this.btnAdelante = '';\r\n      }else if(this.desde === 0 && this.totalTurnos < 11){\r\n        this.btnAtras = 'disabled';\r\n        this.btnAdelante = 'disabled';\r\n      }else if(this.desde > this.listaTurnos.length){\r\n        this.btnAtras = '';\r\n        this.btnAdelante = 'disabled';\r\n      }else if((this.desde + 10) >= this.totalTurnos){\r\n        this.btnAtras = '';\r\n        this.btnAdelante = 'disabled';\r\n      }else{\r\n        this.btnAtras = '';\r\n        this.btnAdelante = '';\r\n      }   \r\n      // BOTONES DE ADELANTE Y ATRAS  \r\n      \r\n    });\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CAMBIAR PAGINA\r\n  ==================================================================== */\r\n  cambiarPagina (valor: number){\r\n    this.desde += valor;\r\n\r\n    if (this.desde < 0) {\r\n      this.desde = 0;\r\n    }else if( this.desde > this.totalTurnos ){\r\n      this.desde -= valor;\r\n    }\r\n\r\n    this.cargarTurno();\r\n\r\n  }\r\n\r\n  /** ===============================================================\r\n  * BUSCAR TURNO  \r\n  ==================================================================== */\r\n  buscar(inicial:Date, final: Date, cajeros:string){\r\n    \r\n    this.sinResultados = true;\r\n    \r\n    if (inicial === null && final === null) {\r\n      this.listaTurnos = this.listaTurnosTemp;\r\n      this.resultado = 0;\r\n      return;\r\n    }else{\r\n\r\n      if (!inicial) {\r\n        this.listaTurnos = this.listaTurnosTemp;\r\n        this.resultado = 0;\r\n        return;\r\n      }\r\n\r\n      // SET HOURS      \r\n      inicial = new Date(inicial);      \r\n      const initial = new Date(inicial.getTime() + 1000 * 60 * 60 * 5);\r\n\r\n      final = new Date(final);\r\n      const end = new Date(final.getTime() + 1000 * 60 * 60 * 5);      \r\n      // SET HOURS          \r\n\r\n      this.sinResultados = true;\r\n      this.turnoService.loadTurnoDate(initial, end, cajeros)\r\n          .subscribe(({total, turnos}) => {\r\n\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            if (turnos.length === 0) {\r\n              this.sinResultados = false;\r\n              this.listaTurnos = [];\r\n              this.resultado = 0;\r\n              return;                \r\n            }\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n\r\n            this.totalTurnos = total;\r\n            this.listaTurnos = turnos; \r\n            this.resultado = turnos.length; \r\n\r\n          });\r\n          \r\n    }\r\n\r\n  }\r\n\r\n  /** ===============================================================\r\n  * TURNO - TURNO - TURNO - TURNO  \r\n  ==================================================================== */\r\n  public turnoId: LoadTurno;\r\n  public abEfectivo: number = 0;\r\n  public abTarjeta: number = 0;\r\n  public abTransferencia: number = 0;\r\n  public totalBancos: number = 0;\r\n  public totalBancosAbono: number = 0;\r\n  \r\n  async cargarTurnoId(id:string){\r\n\r\n    this.movimientos = [];\r\n    this.inicial = 0;\r\n\r\n    this.totalBancosAbono = 0;\r\n\r\n    this.bancos.map( (banco) => {\r\n      banco.monto = 0;\r\n    });\r\n\r\n    this.bancosAbonos.map( (banco) => {\r\n      banco.monto = 0;\r\n    });\r\n\r\n    // await this.cargarBancos();\r\n\r\n    this.turnoService.getTurnoId(id)\r\n    .subscribe( (turno) => { \r\n      this.turnoId = turno;\r\n      this.movimientos = turno.movements;     \r\n\r\n      this.inicial = turno.initial;\r\n\r\n      this.abEfectivo = 0;\r\n      this.abTarjeta = 0;\r\n      this.abTransferencia = 0;\r\n\r\n        \r\n        for (const factura of turno.abonos) {        \r\n  \r\n          for (const pago of factura.factura.paymentsCredit ) {\r\n  \r\n            if (pago.turno === turno.tid  && factura.pay === pago._id && factura.factura.status) {\r\n              \r\n              if (pago.type === \"efectivo\") {\r\n                this.abEfectivo += pago.amount;\r\n              }else if (pago.type === \"tarjeta\") {\r\n                this.abTarjeta += pago.amount;              \r\n              }else if (pago.type === \"transferencia\") {\r\n                this.abTransferencia += pago.amount;              \r\n              }\r\n            }\r\n  \r\n            \r\n  \r\n          }\r\n          \r\n          \r\n        }  \r\n      \r\n      \r\n      this.procesarInformacion(id);\r\n\r\n      // SI TIENES PAGOS DE ALQUILERES\r\n      if (turno.alquileres.length > 0) {\r\n        this.cargarAlquileres();      \r\n      }else{\r\n        this.alquileresList = [];\r\n        this.alqEfectivo = 0;\r\n        this.totalAlquiler = 0;\r\n\r\n        this.bancosAlquileres.map( (banco) => {\r\n          banco.monto = 0;\r\n        });\r\n      }\r\n      \r\n    });\r\n  }\r\n  \r\n  /** ===============================================================\r\n  * PROCESAR LA INFORMACION \r\n  ==================================================================== */\r\n  public propinas: number = 0;\r\n  public montos: number = 0;\r\n  public costo: number = 0;\r\n  public efectivo: number = 0;\r\n  public tarjeta: number = 0;\r\n  public credito: number = 0;\r\n  public totalCreditos: number = 0;\r\n  public vales: number = 0;\r\n  public transferencia: number = 0;\r\n  public devolucion: number = 0;\r\n  public inicial: number = 0;\r\n  public entradas: number = 0;\r\n  public salidas: number = 0;\r\n  public montoDiferencia: number = 0;\r\n  public movimientos: _movements[] = [];\r\n  public totalDevolucion: number = 0; \r\n  public parqueos: number = 0;\r\n\r\n  public facturas: any[] = [];\r\n  public departamento: _departament[] = [];\r\n  \r\n  procesarInformacion(id){\r\n\r\n    this.montos = 0;\r\n    this.costo = 0;\r\n    this.propinas = 0;\r\n    this.efectivo = 0;\r\n    this.tarjeta = 0;\r\n    this.transferencia = 0;\r\n    this.credito = 0;\r\n    this.totalCreditos = 0;\r\n    this.vales = 0;\r\n    this.entradas = 0;\r\n    this.salidas = 0;\r\n    this.montoDiferencia = 0;\r\n    this.devolucion = 0;\r\n    this.totalBancos = 0;\r\n\r\n    this.departamento.forEach(depart => {\r\n      depart.qty = 0;\r\n      depart.monto = 0;      \r\n    });\r\n    \r\n    this.parqueos = 0;\r\n\r\n    const endPoint = `?turno=${id}`;\r\n\r\n\r\n    this.parqueoService.loadParqueos({turno: id, estado: 'Finalizado'})\r\n        .subscribe( ({parqueos}) => {\r\n\r\n          for (const parq of parqueos) {\r\n            this.parqueos += parq.total;\r\n          }\r\n\r\n          this.parqueos = 0;\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n    this.invoiceService.loadInvoiceCierre(endPoint)\r\n        .subscribe(({invoices, total, montos, devolucion, costos, efectivo, tarjeta, transferencia, credit, creditos, vales, propinas}) => {\r\n\r\n          this.montos = montos;\r\n          this.propinas = propinas;\r\n          this.costo = costos;\r\n          this.efectivo = efectivo;          \r\n          this.tarjeta = tarjeta;\r\n          this.transferencia = transferencia;\r\n          this.credito = credit;\r\n          this.totalCreditos = creditos;\r\n          this.vales = vales;\r\n          this.devolucion = devolucion;\r\n\r\n          this.facturas = invoices;\r\n\r\n          \r\n          for (const factura of this.facturas) {\r\n            \r\n            for (const product of factura.products) {\r\n\r\n              let precio = product.price;\r\n              if (factura.descuento) {\r\n                precio = precio - ((precio * factura.porcentaje) /100);\r\n              }\r\n\r\n              this.departamento.map( (depart) => {\r\n                \r\n\r\n                // if (product.product.department === depart._id) {\r\n                //   depart.qty += product.qty,\r\n                //   depart.monto += product.qty * product.price;\r\n                // }\r\n\r\n                if (product.product?.department === depart.did) {                  \r\n\r\n                  // COMPROBAR SI EL PRODUCTO TIENE IMPUESTO\r\n                  if (!product.product.tax) {\r\n                    depart.qty = depart.qty + product.qty,\r\n                    depart.monto = depart.monto + (product.qty * precio);\r\n                    \r\n                  }else{              \r\n\r\n                    depart.qty = depart.qty + product.qty,\r\n                    this.impuestos.map( (impuesto) => {\r\n                      if (product.product.taxid === impuesto.taxid) {\r\n                        depart.monto = depart.monto + (product.qty * (((precio * impuesto.valor)/100) + precio));                        \r\n                      }\r\n                    })\r\n\r\n                  }\r\n                \r\n                }\r\n\r\n              });\r\n              \r\n            }\r\n          \r\n            for (const pago of factura.payments) {\r\n\r\n              this.bancos.map( (banco) => {\r\n    \r\n                if (banco.name === pago.type) {\r\n                  banco.monto += pago.amount;\r\n    \r\n                  this.totalBancos += pago.amount;\r\n    \r\n                };\r\n    \r\n              });\r\n              \r\n            }\r\n            \r\n          }\r\n\r\n\r\n          // CARGAR LOS ABONOS A CREDITO          \r\n          if (this.turnoId.abonos.length > 0) {\r\n\r\n            for (const factura of this.turnoId.abonos) {\r\n\r\n              for (const pago of factura.factura.paymentsCredit) {\r\n\r\n                if (pago.turno === this.turnoId.tid && factura.pay === pago._id && factura.factura.status) {  \r\n\r\n                  \r\n                  this.bancosAbonos.map( (banco) => {\r\n                    \r\n                    if (banco.name === pago.type) {\r\n                      banco.monto += pago.amount;      \r\n                      this.totalBancosAbono += pago.amount;\r\n                      \r\n                    };\r\n                    \r\n                  });\r\n                }\r\n              }\r\n              \r\n            }\r\n\r\n          }else{\r\n\r\n            this.bancosAbonos.map( (banco) => {    \r\n              banco.monto = 0;  \r\n            });\r\n\r\n          }\r\n\r\n          // this.efectivo = this.montos - this.totalBancos;\r\n\r\n        });\r\n\r\n    // TOTALIZAR MOVIMIENTOS\r\n    const movements = this.movimientos;\r\n    for (let i = 0; i < movements.length; i++) {\r\n      \r\n      switch (movements[i].type) {\r\n        case 'entrada':\r\n\r\n          this.entradas += movements[i].monto;\r\n          \r\n          break;\r\n\r\n        case 'salida':\r\n\r\n          this.salidas += movements[i].monto;\r\n          \r\n          break;\r\n      \r\n        default:\r\n          break;\r\n      }\r\n      \r\n    }\r\n    // TOTALIZAR MOVIMIENTOS\r\n\r\n    // VERIFICAR SI TIENE DIFERENCIA\r\n    if (this.turnoId.diferencia) {\r\n      this.montoDiferencia = this.turnoId.montoD;      \r\n    }    \r\n    // VERIFICAR SI TIENE DIFERENCIA\r\n\r\n  }\r\n\r\n  /** ===============================================================\r\n  * CARGAR ALQUILERES\r\n  ==================================================================== */\r\n  public alquileresList: Alquiler[] = [];\r\n  public alqEfectivo: number = 0;\r\n  public totalAlquiler: number = 0;\r\n  \r\n  async cargarAlquileres(){\r\n\r\n    this.alquileresList = [];\r\n    this.alqEfectivo = 0;\r\n    this.totalAlquiler = 0;\r\n\r\n    for (const alq of this.turnoId.alquileres) {\r\n      await this.alquileresService.loadAlquilerId(alq.alquiler)\r\n                .subscribe( ({alquiler}) => {\r\n\r\n                  // SUMAR LOS PAGOS DE CADA BANCO\r\n                  for (const pago of alquiler.payments) {\r\n                    \r\n                    this.bancosAlquileres.map( (banco) => {                \r\n                      \r\n                      if (banco.name === pago.type && this.turnoId.tid === pago.turno) {                  \r\n\r\n                        banco.monto += pago.amount;\r\n                        this.totalAlquiler += pago.amount;\r\n\r\n                      }\r\n\r\n                    });\r\n\r\n                    if (pago.type === 'efectivo' && this.turnoId.tid === pago.turno) {\r\n                      this.alqEfectivo += pago.amount;\r\n                      this.totalAlquiler += pago.amount;\r\n                    }\r\n                    \r\n                  }                  \r\n\r\n                }, (err) => {\r\n                  console.log(err);                  \r\n                })\r\n    }\r\n\r\n  }\r\n\r\n\r\n  /** ===============================================================\r\n  * CARGAR ALLS\r\n  ==================================================================== */\r\n  async cargarTurnosAll(){\r\n\r\n    this.movimientos = [];\r\n    this.inicial = 0;\r\n\r\n    this.totalBancosAbono = 0;\r\n\r\n    this.bancos.map( (banco) => {\r\n      banco.monto = 0;\r\n    });\r\n\r\n    this.bancosAbonos.map( (banco) => {\r\n      banco.monto = 0;\r\n    });\r\n\r\n    this.abEfectivo = 0;\r\n    this.abTarjeta = 0;\r\n    this.abTransferencia = 0;\r\n    this.inicial = 0;\r\n\r\n    this.montos = 0;\r\n    this.costo = 0;\r\n    this.propinas = 0;\r\n    this.efectivo = 0;\r\n    this.tarjeta = 0;\r\n    this.transferencia = 0;\r\n    this.credito = 0;\r\n    this.totalCreditos = 0;\r\n    this.vales = 0;\r\n    this.entradas = 0;\r\n    this.salidas = 0;\r\n    this.montoDiferencia = 0;\r\n    this.devolucion = 0;\r\n    this.totalBancos = 0;\r\n\r\n    this.departamento.forEach(depart => {\r\n      depart.qty = 0;\r\n      depart.monto = 0;      \r\n    });\r\n    \r\n    this.parqueos = 0;\r\n\r\n    for (const turn of this.listaTurnos) {\r\n      \r\n      this.turnoService.getTurnoId(turn.tid)\r\n        .subscribe( (turno) => { \r\n          this.turnoId = turno;\r\n          this.movimientos = turno.movements;     \r\n\r\n          this.inicial += turno.initial;\r\n            \r\n            for (const factura of turno.abonos) {        \r\n      \r\n              for (const pago of factura.factura.paymentsCredit ) {\r\n      \r\n                if (pago.turno === turno.tid  && factura.pay === pago._id && factura.factura.status) {\r\n                  \r\n                  if (pago.type === \"efectivo\") {\r\n                    this.abEfectivo += pago.amount;\r\n                  }else if (pago.type === \"tarjeta\") {\r\n                    this.abTarjeta += pago.amount;              \r\n                  }else if (pago.type === \"transferencia\") {\r\n                    this.abTransferencia += pago.amount;              \r\n                  }\r\n                }\r\n      \r\n                \r\n      \r\n              }\r\n              \r\n              \r\n            }  \r\n          \r\n          \r\n          // PROCESAR INFORMACION \r\n          const endPoint = `?turno=${turno.tid}`;\r\n\r\n            this.invoiceService.loadInvoiceCierre(endPoint)\r\n              .subscribe(({invoices, total, montos, devolucion, costos, efectivo, tarjeta, transferencia, credit, creditos, vales, propinas}) => {\r\n\r\n                this.montos += montos;\r\n                this.propinas += propinas;\r\n                this.costo += costos;\r\n                this.efectivo += efectivo;          \r\n                this.tarjeta += tarjeta;\r\n                this.transferencia += transferencia;\r\n                this.credito += credit;\r\n                this.totalCreditos += creditos;\r\n                this.vales += vales;\r\n                this.devolucion += devolucion;\r\n\r\n                let facturas: any = invoices;\r\n\r\n                \r\n                for (const factura of facturas) {\r\n                  \r\n                  for (const product of factura.products) {\r\n\r\n                    let precio = product.price;\r\n                    if (factura.descuento) {\r\n                      precio = precio - ((precio * factura.porcentaje) /100);\r\n                    }\r\n\r\n                    this.departamento.map( (depart) => {\r\n\r\n                      if (product.product?.department === depart.did) {                  \r\n\r\n                        // COMPROBAR SI EL PRODUCTO TIENE IMPUESTO\r\n                        if (!product.product.tax) {\r\n                          depart.qty = depart.qty + product.qty,\r\n                          depart.monto = depart.monto + (product.qty * precio);\r\n                          \r\n                        }else{              \r\n\r\n                          depart.qty = depart.qty + product.qty,\r\n                          this.impuestos.map( (impuesto) => {\r\n                            if (product.product.taxid === impuesto.taxid) {\r\n                              depart.monto = depart.monto + (product.qty * (((precio * impuesto.valor)/100) + precio));                        \r\n                            }\r\n                          })\r\n\r\n                        }\r\n                      \r\n                      }\r\n\r\n                    });\r\n                    \r\n                  }\r\n                \r\n                  for (const pago of factura.payments) {\r\n\r\n                    this.bancos.map( (banco) => {\r\n          \r\n                      if (banco.name === pago.type) {\r\n                        banco.monto += pago.amount;\r\n          \r\n                        this.totalBancos += pago.amount;\r\n          \r\n                      };\r\n          \r\n                    });\r\n                    \r\n                  }\r\n                  \r\n                }\r\n\r\n\r\n                // CARGAR LOS ABONOS A CREDITO          \r\n                if (this.turnoId.abonos.length > 0) {\r\n\r\n                  for (const factura of this.turnoId.abonos) {\r\n\r\n                    for (const pago of factura.factura.paymentsCredit) {\r\n\r\n                      if (pago.turno === this.turnoId.tid && factura.pay === pago._id && factura.factura.status) {  \r\n\r\n                        \r\n                        this.bancosAbonos.map( (banco) => {\r\n                          \r\n                          if (banco.name === pago.type) {\r\n                            banco.monto += pago.amount;      \r\n                            this.totalBancosAbono += pago.amount;\r\n                            \r\n                          };\r\n                          \r\n                        });\r\n                      }\r\n                    }\r\n                    \r\n                  }\r\n\r\n                }else{\r\n\r\n                  this.bancosAbonos.map( (banco) => {    \r\n                    banco.monto = 0;  \r\n                  });\r\n\r\n                }\r\n\r\n                // this.efectivo = this.montos - this.totalBancos;\r\n\r\n              });\r\n\r\n          // TOTALIZAR MOVIMIENTOS\r\n          const movements = this.movimientos;\r\n          for (let i = 0; i < movements.length; i++) {\r\n            \r\n            switch (movements[i].type) {\r\n              case 'entrada':\r\n\r\n                this.entradas += movements[i].monto;\r\n                \r\n                break;\r\n\r\n              case 'salida':\r\n\r\n                this.salidas += movements[i].monto;\r\n                \r\n                break;\r\n            \r\n              default:\r\n                break;\r\n            }\r\n            \r\n          }\r\n\r\n\r\n          // SI TIENES PAGOS DE ALQUILERES\r\n          if (turno.alquileres.length > 0) {\r\n            this.cargarAlquileres();      \r\n          }else{\r\n            this.alquileresList = [];\r\n            this.alqEfectivo = 0;\r\n            this.totalAlquiler = 0;\r\n\r\n            this.bancosAlquileres.map( (banco) => {\r\n              banco.monto = 0;\r\n            });\r\n          }\r\n          \r\n        });\r\n\r\n    }\r\n\r\n  }\r\n\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Configuraciones / Cierres</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"ticket1-tab\"><i class=\"bi-gear\" style=\"font-size: 1rem\"></i> Tablero Principal</a>\r\n        </li>\r\n\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<div class=\"container-fluid my-4\">\r\n\r\n    <!-- TABLE CLIENTS -->\r\n    <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n        <!-- CARGANDO -->\r\n        <div *ngIf=\"cargando\">\r\n            <div class=\"text-center p-4\">\r\n                <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                    <span class=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n            </div>\r\n            <small class=\"text-muted\">cargando...</small>\r\n        </div>\r\n        <!-- CARGANDO -->\r\n\r\n        <div *ngIf=\"!cargando\">\r\n\r\n            <div class=\"d-flex justify-content-between flex-wrap\">\r\n\r\n                <div>\r\n                    <button type=\"button\" class=\"btn btn-outline-primary btn-sm\" (click)=\"cargarTurno()\"> <i class=\"bi-arrow-clockwise\"></i> Recargar </button>\r\n                </div>\r\n\r\n                <div class=\"d-flex justify-content-end flex-wrap align-items-center\">\r\n\r\n                    <div class=\"col-auto\">\r\n                        <label class=\"\" for=\"\">Desde</label>\r\n                    </div>\r\n\r\n                    <div class=\"col-12 col-md-3\">\r\n                        <input type=\"datetime-local\" class=\"form-control\" (change)=\"initial.value\" #initial>\r\n                    </div>\r\n\r\n                    <div class=\"col-auto\">\r\n                        <label class=\"\" for=\"\">Hasta</label>\r\n                    </div>\r\n                    <div class=\"col-12 col-md-3\">\r\n                        <input type=\"datetime-local\" class=\"form-control\" (change)=\"end.value\" #end>\r\n                    </div>\r\n\r\n                    <div class=\"col-auto\">\r\n                        <button type=\"button\" class=\"btn btn-outline-primary btn-sm py-auto h-100\" (click)=\"buscar(initial.value, end.value, 'none')\"> \r\n                            <i class=\"bi-search\"></i> Buscar \r\n                        </button>\r\n                        <button type=\"button\" class=\"btn btn-outline-success btn-sm py-auto h-100\" (click)=\"cargarTurnosAll()\" data-bs-toggle=\"modal\" data-bs-target=\"#turnoDetalles\"> \r\n                             Totalizar \r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            <div class=\"table-responsive \">\r\n                <table class=\"table table-borderless table-striped table-hover table-sm\">\r\n                    <thead class=\"border-bottom \">\r\n                        <tr>\r\n                            <th></th>\r\n                            <th class=\"text-muted \" scope=\"col \" colspan=\"2\">Usuario</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Disponibilidad</th>\r\n                            <th class=\"text-muted text-center\" scope=\"col \">Fecha</th>\r\n                            <th class=\"text-muted w100 text-rigth\" scope=\"col \">Acciones</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr *ngIf=\"!sinResultados\" class=\"text-center \">\r\n                            <th colspan=\"10\" class=\"py-4\">\r\n                                <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                            </th>\r\n                        </tr>\r\n\r\n                        <tr class=\"trHover\" *ngFor=\"let turno of listaTurnos; let i = index\">\r\n\r\n                            <td>\r\n                                <i *ngIf=\"turno.diferencia\" class=\"text-warning bi-exclamation-triangle\"></i>\r\n                                <i *ngIf=\"!turno.diferencia\" class=\"text-success bi-check2-all\"></i>\r\n                            </td>\r\n\r\n                            <td colspan=\"2\">{{ turno.cajero.name }}</td>\r\n                            <td>\r\n                                <span *ngIf=\"!turno.cerrado\" class=\"badge rounded-pill bg-dark text-white-75\">Abierto</span>\r\n                                <span *ngIf=\"turno.cerrado\" class=\"badge rounded-pill bg-danger text-white-75\">Cerrado</span>\r\n                            </td>\r\n                            <td class=\"text-center\">\r\n                                <small class=\" badge rounded-pill bg-primary text-wrap\"> {{ turno.fecha | date:'medium' }} </small>\r\n                                <small class=\" badge rounded-pill bg-dark text-wrap\">{{ turno.cierre | date:'medium' }}</small>\r\n                            </td>\r\n                            <td class=\"text-center\">\r\n                                <button type=\"button\" (click)=\"cargarTurnoId(turno.tid)\" class=\"btn btn-link p-1 text-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#turnoDetalles\">\r\n                                    <i class=\"bi bi-box-arrow-up-right\"></i>\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n\r\n                </table>\r\n\r\n            </div>\r\n\r\n            <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n            <div class=\"row\">\r\n                <div class=\"col col-md-4\">\r\n                    <small class=\"text-muted\">Total: ({{totalTurnos}})</small>\r\n                    <small *ngIf=\"resultado !== 0\" class=\"text-muted\"> - (Resultados: {{ resultado }})</small>\r\n                    <small *ngIf=\"desde !== 0\" class=\"text-muted\"> - (Desde el: {{ desde + 1}} Hasta el: {{ desde + listaTurnos.length }})</small>\r\n                </div>\r\n\r\n                <div *ngIf=\"!initial.value.length\" class=\"col d-flex justify-content-end\">\r\n                    <button type=\"button\" (click)=\"cambiarPagina(-10)\" [disabled]=\"desde == 0\" class=\"btn btn-sm btn-dark btnW waves-effect waves-light px-3\">Anterior</button>\r\n                    <button type=\"button\" (click)=\"cambiarPagina(10)\" [disabled]=\"(desde + 10) > totalTurnos\" class=\"btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2\">Siguiente</button>\r\n                </div>\r\n            </div>\r\n            <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n        </div>\r\n    </div>\r\n    <!-- TABLE CLIENTS -->\r\n\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    DETALLES DEL CIERRE\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"turnoDetalles\" tabindex=\"-1\" aria-labelledby=\"turnoDetallesModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"turnoDetallesModal\">Detalles del Cierre</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n                <button type=\"button\" class=\"btn btn-outline-primary\" (click)=\"printDiv()\">Imprimir</button>\r\n\r\n                <div class=\"d-flex justify-content-center\">\r\n\r\n                    <!-- SECCION DE IMPRESIOM -->\r\n                    <div id=\"printDiv\">\r\n\r\n                        <div class=\"col-auto p-2\">\r\n\r\n                            <div class=\"card shadow px-2 border-1\" style=\"width: 18rem;\">\r\n                                <div class=\"card-body\">\r\n                                    <h4 class=\"card-title mb-0 text-center\" style=\"color: #000;\">Ventas Totales</h4>\r\n                                    <h5 class=\"text-center\"> {{ montos | divisa }} </h5>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-auto p-2\">\r\n                            <div class=\"card shadow px-2 border-1\" style=\"width: 18rem;\">\r\n                                <div class=\"card-body\">\r\n                                    <h4 class=\"card-title mb-0 text-center\">Propinas</h4>\r\n                                    <h5 class=\"text-center\"> {{ propinas | divisa }} </h5>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-auto p-2\">\r\n                            <div class=\"card shadow px-2 border-1\" style=\"width: 18rem;\">\r\n                                <div class=\"card-body\">\r\n                                    <h4 class=\"card-title mb-0 text-center\">Ventas totales + Propinas</h4>\r\n                                    <h5 class=\"text-center\"> {{ montos + propinas | divisa }} </h5>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-auto p-2\">\r\n                            <div class=\"card shadow px-2 border-1\" style=\"width: 18rem;\">\r\n                                <div class=\"card-body\">\r\n                                    <h4 class=\"card-title mb-0 text-center\">Ganancia Total</h4>\r\n                                    <h5 class=\"text-center\"> {{ (efectivo + tarjeta + transferencia + vales + totalBancos) - costo | divisa }} </h5>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-auto p-2\">\r\n                            <div class=\"card shadow px-2 border-1\" style=\"width: 18rem;\">\r\n                                <div class=\"card-body\">\r\n                                    <h4 class=\"card-title mb-0 text-center\">Ventas a creditos</h4>\r\n                                    <h5 class=\"text-center\"> {{ totalCreditos | divisa }} </h5>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n\r\n                        <div class=\"col-auto p-2\" *ngIf=\"montoDiferencia !== 0\">\r\n\r\n                            <div class=\"card shadow px-2 border-0\" style=\"width: 18rem;\">\r\n\r\n                                <div class=\"card-body\">\r\n                                    <h5 class=\"card-title mb-0 text-center\">Diferencia</h5>\r\n                                    <p class=\"text-center mb-0\"> {{ montoDiferencia | divisa }} </p>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-auto p-2\">\r\n                            <div class=\"card shadow px-2\" style=\"width: 18rem;\">\r\n\r\n                                <div class=\"card-body\">\r\n                                    <h5 class=\"card-title mb-0\">Dinero en caja</h5>\r\n                                </div>\r\n\r\n                                <div class=\"table-responsive \">\r\n                                    <table class=\"table table-borderless table-hover table-sm\">\r\n\r\n                                        <tbody>\r\n\r\n                                            <tr>\r\n                                                <td colspan=\"2\"> <small> Fondo Caja </small> </td>\r\n                                                <td> {{ inicial | divisa }}</td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td colspan=\"2\"> <small> Ventas en efectivo </small> </td>\r\n                                                <td> {{ efectivo | divisa }} </td>\r\n                                            </tr>\r\n                                            <tr *ngIf=\"empresa.parqueadero\">\r\n                                                <td colspan=\"2\"> <small> Parqueadero </small> </td>\r\n                                                <td> {{ parqueos | divisa }} </td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td colspan=\"2\"> <small> Abonos en efectivo </small> </td>\r\n                                                <td> {{ abEfectivo | divisa }} </td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td colspan=\"2\"> <small> Entradas </small> </td>\r\n                                                <td> {{ entradas | divisa }} </td>\r\n                                            </tr>\r\n\r\n                                            <tr *ngIf=\"empresa?.alquileres!\">\r\n                                                <td colspan=\"2\"> <small> Abonos Alquileres Efectivo </small> </td>\r\n                                                <td> {{ alqEfectivo | divisa }} </td>\r\n                                            </tr>\r\n\r\n                                            <tr>\r\n                                                <td colspan=\"2\"> <small> Salidas </small> </td>\r\n                                                <td> {{ salidas | divisa }} </td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td colspan=\"2\"> <small> devolucion </small> </td>\r\n                                                <td> {{ devolucion | divisa }} </td>\r\n                                            </tr>\r\n                                            <tr class=\"border-top\">\r\n                                                <td colspan=\"2\"> <small class=\"fw-bold\"> Total </small> </td>\r\n                                                <td class=\"fw-bold\"> {{ (parqueos + inicial + efectivo + abEfectivo + entradas + totalAlquiler + salidas) + devolucion | divisa }} </td>\r\n                                            </tr>\r\n\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-auto p-2\">\r\n\r\n                            <div class=\"card shadow px-2\" style=\"width: 18rem;\">\r\n\r\n                                <div class=\"card-body\">\r\n                                    <h5 class=\"card-title mb-0\">Ventas del dia</h5>\r\n                                </div>\r\n\r\n                                <div class=\"table-responsive \">\r\n                                    <table class=\"table table-borderless table-hover table-sm\">\r\n\r\n                                        <tbody>\r\n\r\n                                            <tr>\r\n                                                <td colspan=\"2\"> <small> En Efectivo </small> </td>\r\n                                                <td> {{ efectivo | divisa }} </td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td colspan=\"2\"> <small> Con tarjeta </small> </td>\r\n                                                <td> {{ tarjeta | divisa }} </td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td colspan=\"2\"> <small> Con Transferencia </small> </td>\r\n                                                <td> {{ transferencia | divisa }} </td>\r\n                                            </tr>\r\n\r\n                                            <ng-container *ngIf=\"bancos.length > 0\">\r\n                                                <tr *ngFor=\"let banco of bancos\">\r\n                                                    <td colspan=\"2\"> <small> {{ banco.name }} </small> </td>\r\n                                                    <td> {{ banco.monto | divisa }} </td>\r\n                                                </tr>\r\n                                            </ng-container>\r\n\r\n                                            <tr>\r\n                                                <td colspan=\"2\"> <small> devolucion </small> </td>\r\n                                                <td> {{ devolucion | divisa }} </td>\r\n                                            </tr>\r\n\r\n                                            <tr class=\"border-top\">\r\n                                                <td colspan=\"2\"> <small class=\"fw-bold\"> Total </small> </td>\r\n                                                <td class=\"fw-bold\"> {{ (efectivo + tarjeta + transferencia + totalBancos + credito + vales) + devolucion | divisa }} </td>\r\n                                            </tr>\r\n\r\n\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-auto p-2\">\r\n                            <div class=\"card shadow px-2\" style=\"width: 18rem;\">\r\n\r\n                                <div class=\"card-body\">\r\n                                    <h5 class=\"card-title mb-0\">Salidas</h5>\r\n                                </div>\r\n\r\n                                <div class=\"table-responsive \">\r\n                                    <table class=\"table table-borderless table-hover table-sm\">\r\n\r\n                                        <tbody>\r\n\r\n                                            <ng-container *ngFor=\"let movimiento of movimientos\">\r\n\r\n                                                <tr *ngIf=\"movimiento.type === 'salida'\">\r\n\r\n                                                    <td colspan=\"2\"> <small> {{ movimiento.descripcion }} </small> </td>\r\n                                                    <td>\r\n                                                        {{ movimiento.monto | divisa }}\r\n                                                    </td>\r\n                                                </tr>\r\n\r\n                                            </ng-container>\r\n\r\n                                            <tr class=\"border-top\">\r\n                                                <td colspan=\"2\"> <small class=\"fw-bold\"> Total </small> </td>\r\n                                                <td class=\"fw-bold\"> {{ salidas | divisa }} </td>\r\n                                            </tr>\r\n\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-auto p-2\">\r\n                            <div class=\"card shadow px-2\" style=\"width: 18rem;\">\r\n\r\n                                <div class=\"card-body\">\r\n                                    <h5 class=\"card-title mb-0\">Entradas</h5>\r\n                                </div>\r\n\r\n                                <div class=\"table-responsive \">\r\n                                    <table class=\"table table-borderless table-hover table-sm\">\r\n\r\n                                        <tbody>\r\n\r\n                                            <ng-container *ngFor=\"let movimiento of movimientos\">\r\n\r\n                                                <tr *ngIf=\"movimiento.type === 'entrada'\">\r\n\r\n                                                    <td colspan=\"2\"> <small> {{ movimiento.descripcion }} </small> </td>\r\n                                                    <td>\r\n                                                        {{ movimiento.monto | divisa }}\r\n                                                    </td>\r\n                                                </tr>\r\n\r\n                                            </ng-container>\r\n\r\n                                            <tr class=\"border-top\">\r\n                                                <td colspan=\"2\"> <small class=\"fw-bold\"> Total </small> </td>\r\n                                                <td class=\"fw-bold\"> {{ entradas | divisa }} </td>\r\n                                            </tr>\r\n\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-auto p-2\">\r\n                            <div class=\"card shadow px-2\" style=\"width: 18rem;\">\r\n\r\n                                <div class=\"card-body\">\r\n                                    <h5 class=\"card-title mb-0\">Departamentos</h5>\r\n                                </div>\r\n\r\n                                <div class=\"table-responsive \">\r\n                                    <table class=\"table table-borderless table-hover table-sm\">\r\n\r\n                                        <thead>\r\n                                            <th>Departamento</th>\r\n                                            <th>cant.</th>\r\n                                            <th>Monto</th>\r\n                                        </thead>\r\n\r\n                                        <tbody>\r\n\r\n                                            <ng-container *ngFor=\"let deparment of departamento\">\r\n\r\n                                                <tr *ngIf=\"deparment.qty > 0\">\r\n\r\n                                                    <td class=\"text-break\"> {{ deparment.name }} </td>\r\n                                                    <td>\r\n                                                        {{ deparment.qty | number }}\r\n                                                    </td>\r\n                                                    <td>\r\n                                                        {{ deparment.monto | divisa }}\r\n                                                    </td>\r\n                                                </tr>\r\n\r\n\r\n                                            </ng-container>\r\n\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-auto p-2\">\r\n                            <div class=\"card shadow px-2\" style=\"width: 18rem;\">\r\n\r\n                                <div class=\"card-body\">\r\n                                    <h5 class=\"card-title mb-0\">Abonos Credito</h5>\r\n                                </div>\r\n\r\n                                <div class=\"table-responsive \">\r\n                                    <table class=\"table table-borderless table-hover table-sm\">\r\n\r\n                                        <tbody>\r\n\r\n                                            <tr>\r\n                                                <td colspan=\"2\"> <small>Con Efectivo </small> </td>\r\n                                                <td> {{ abEfectivo | divisa }}</td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td colspan=\"2\"> <small> Con Tarjeta </small> </td>\r\n                                                <td> {{ abTarjeta | divisa }} </td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td colspan=\"2\"> <small> Con Transferencia </small> </td>\r\n                                                <td> {{ abTransferencia | divisa }} </td>\r\n                                            </tr>\r\n\r\n                                            <ng-container *ngIf=\"bancosAbonos.length > 0\">\r\n                                                <tr *ngFor=\"let bank of bancosAbonos\">\r\n                                                    <td colspan=\"2\"> <small> {{ bank.name }} </small> </td>\r\n                                                    <td>\r\n                                                        {{ bank.monto | divisa }}\r\n                                                    </td>\r\n                                                </tr>\r\n                                            </ng-container>\r\n\r\n                                            <tr class=\"border-top\">\r\n                                                <td colspan=\"2\"> <small class=\"fw-bold\"> Total </small> </td>\r\n                                                <td class=\"fw-bold\"> {{ (abEfectivo) + (abTarjeta) + (abTransferencia) + (totalBancosAbono) | divisa }} </td>\r\n                                            </tr>\r\n\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div *ngIf=\"empresa?.alquileres!\" class=\"col-auto p-2\">\r\n                            <div class=\"card shadow px-2\" style=\"width: 18rem;\">\r\n\r\n                                <div class=\"card-body\">\r\n                                    <h5 class=\"card-title mb-0\">Abonos Alquileres</h5>\r\n                                </div>\r\n\r\n                                <div class=\"table-responsive \">\r\n                                    <table class=\"table table-borderless table-hover table-sm\">\r\n\r\n                                        <tbody>\r\n\r\n                                            <tr>\r\n                                                <td colspan=\"2\"> <small>Con Efectivo </small> </td>\r\n                                                <td> {{ alqEfectivo | divisa }}</td>\r\n                                            </tr>\r\n\r\n                                            <ng-container *ngIf=\"bancosAlquileres.length > 0\">\r\n                                                <tr *ngFor=\"let bank of bancosAlquileres\">\r\n                                                    <td colspan=\"2\"> <small> {{ bank.name }} </small> </td>\r\n                                                    <td>\r\n                                                        {{ bank.monto | divisa }}\r\n                                                    </td>\r\n                                                </tr>\r\n                                            </ng-container>\r\n\r\n                                            <tr class=\"border-top\">\r\n                                                <td colspan=\"2\"> <small class=\"fw-bold\"> Total </small> </td>\r\n                                                <td class=\"fw-bold\"> {{ totalAlquiler | divisa }} </td>\r\n                                            </tr>\r\n\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    DETALLES DEL CIERRE\r\n========================================================================= -->","import { Component, OnInit } from '@angular/core';\r\nimport { ProductService } from 'src/app/services/product.service';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-configuracion',\r\n  templateUrl: './configuracion.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class ConfiguracionComponent implements OnInit {\r\n\r\n  constructor(  private productService: ProductService) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n\r\n  /** ================================================================\r\n   *  RESETEAR INVENTARIO\r\n  ==================================================================== */\r\n  resetInvetary(){\r\n\r\n    Swal.fire({\r\n      title: 'Atencion',\r\n      text: \"Estas seguro de resetear todo el inventario?\",\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: 'Si, resetear',\r\n      cancelButtonText: 'Cancelar'\r\n    }).then((result) => {  \r\n      \r\n      if (result.isConfirmed) {\r\n\r\n        this.productService.resetInventario()\r\n        .subscribe((resp:{ok: boolean, number: number}) =>{\r\n\r\n          console.log(resp);\r\n          Swal.fire('Estupendo', `Se han reseteado ${resp.number} productos`, 'success');\r\n          \r\n          \r\n        }, (err) =>{\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n        });\r\n\r\n      }\r\n\r\n    });\r\n\r\n  }\r\n\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Configuraciones</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"ticket1-tab\"><i class=\"bi-gear\" style=\"font-size: 1rem\"></i> Tablero Principal</a>\r\n        </li>\r\n\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n<div class=\"container-fluid my-2\">\r\n\r\n    <!-- CONFIGURACIONES GENERALES -->\r\n    <div class=\"p-2 border-bottom border-top mt-2\">\r\n        <h4 class=\"mb-2 text-muted\">General</h4>\r\n        <div class=\"d-flex flex-wrap\">\r\n\r\n            <div class=\"p-2\">\r\n                <button routerLink=\"./usuarios\" type=\"button\" class=\"btn bg-white btnW waves-effect waves-blue text-muted\"> \r\n                    <i class=\"bi-people\" style=\"font-size: 1.5rem;\"></i> \r\n                    <h5>Usuarios</h5>\r\n                </button>\r\n            </div>\r\n\r\n            <div class=\"p-2\">\r\n                <button routerLink=\"./mesas\" type=\"button\" class=\"btn bg-white btnW waves-effect waves-blue text-muted\"> \r\n                    <i class=\"bi-grid\" style=\"font-size: 1.5rem;\"></i> \r\n                    <h5>Tickets</h5>\r\n                </button>\r\n            </div>\r\n\r\n            <div class=\"p-2\">\r\n                <button routerLink=\"./empresa\" type=\"button\" class=\"btn bg-white btnW waves-effect waves-blue text-muted\"> \r\n                    <i class=\"bi-building\" style=\"font-size: 1.5rem;\"></i> \r\n                    <h5>Mi Empresa</h5>\r\n                </button>\r\n            </div>\r\n            <div class=\"p-2\">\r\n                <button routerLink=\"./impuestos\" type=\"button\" class=\"btn bg-white btnW waves-effect waves-blue text-muted\"> \r\n                    <i class=\"bi-percent\" style=\"font-size: 1.5rem;\"></i> \r\n                    <h5>Impuestos</h5>\r\n                </button>\r\n            </div>\r\n\r\n            <div class=\"p-2\">\r\n                <button routerLink=\"./bancos\" type=\"button\" class=\"btn bg-white btnW waves-effect waves-blue text-muted\"> \r\n                    <i class=\"bi-bank\" style=\"font-size: 1.5rem;\"></i> \r\n                    <h5>Bancos</h5>\r\n                </button>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    <!-- CONFIGURACIONES GENERALES -->\r\n\r\n    <!-- REPORTES -->\r\n    <div class=\"p-2 border-bottom border-bottom\">\r\n        <h4 class=\"mb-2 text-muted\">Reportes</h4>\r\n        <div class=\"d-flex flex-wrap\">\r\n\r\n            <div class=\"p-2\">\r\n                <button routerLink=\"./cierres\" type=\"button\" class=\"btn bg-white btnW waves-effect waves-blue text-muted\"> \r\n                    <i class=\"bi-calendar-check\" style=\"font-size: 1.5rem;\"></i> \r\n                    <h5>Cierres</h5>\r\n                </button>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    <!-- REPORTES -->\r\n\r\n    <!-- REPORTES -->\r\n    <div class=\"p-2 border-bottom border-bottom\">\r\n        <h4 class=\"mb-2 text-muted\">Sistema</h4>\r\n        <div class=\"d-flex flex-wrap\">\r\n\r\n            <div class=\"p-2\">\r\n                <button routerLinkActive=\"activeBtn\" [routerLink]=\"['/dashboard/clientes']\" type=\"button\" class=\"btn bg-white btnW waves-effect waves-blue text-muted\"> \r\n                    <i class=\"bi-people\" style=\"font-size: 1.5rem;\"></i> \r\n                    <h5>Clientes</h5>\r\n                </button>\r\n            </div>\r\n\r\n            <div class=\"p-2\">\r\n                <button routerLinkActive=\"activeBtn\" [routerLink]=\"['/dashboard/facturas']\" type=\"button\" class=\"btn bg-white btnW waves-effect waves-blue text-muted\"> \r\n                    <i class=\"bi-file-text\" style=\"font-size: 1.5rem;\"></i> \r\n                    <h5>Facturas</h5>\r\n                </button>\r\n            </div>\r\n\r\n            <div class=\"p-2\">\r\n                <button routerLinkActive=\"activeBtn\" [routerLink]=\"['/dashboard/pedidos']\" type=\"button\" class=\"btn bg-white btnW waves-effect waves-blue text-muted\"> \r\n                    <i class=\"bi-truck\" style=\"font-size: 1.5rem;\"></i> \r\n                    <h5>Pedidos</h5>\r\n                </button>\r\n            </div>\r\n            <div class=\"p-2\">\r\n                <button routerLinkActive=\"activeBtn\" [routerLink]=\"['/dashboard/proveedores']\" type=\"button\" class=\"btn bg-white btnW waves-effect waves-blue text-muted\"> \r\n                    <i class=\"bi-building\" style=\"font-size: 1.5rem;\"></i> \r\n                    <h5>Proveedores</h5>\r\n                </button>\r\n            </div>\r\n\r\n            <div class=\"p-2\">\r\n                <button routerLinkActive=\"activeBtn\" [routerLink]=\"['/dashboard/entradas-salidas']\" type=\"button\" class=\"btn bg-white btnW waves-effect waves-blue text-muted\"> \r\n                    <i class=\"bi-arrow-left-right\" style=\"font-size: 1.5rem;\"></i> \r\n                    <h5>Entradas y Salidas</h5>\r\n                </button>\r\n            </div>\r\n\r\n            <div class=\"p-2\">\r\n                <button routerLinkActive=\"activeBtn\" [routerLink]=\"['/dashboard/configuracion/prestamos']\" type=\"button\" class=\"btn bg-white btnW waves-effect waves-blue text-muted\"> \r\n                    <i class=\"bi-journal-text\" style=\"font-size: 1.5rem;\"></i> \r\n                    <h5>Prestamos</h5>\r\n                </button>\r\n            </div>\r\n\r\n            <div class=\"p-2\">\r\n                <button (click)=\"resetInvetary()\" type=\"button\" class=\"btn bg-white btnW waves-effect waves-blue text-muted\"> \r\n                    <i class=\"bi-stars\" style=\"font-size: 1.5rem;\"></i> \r\n                    <h5>Reset Inventario</h5>\r\n                </button>\r\n            </div>\r\n\r\n            <div class=\"p-2\">\r\n                <button [routerLink]=\"['/dashboard/configuracion/parqueadero']\" type=\"button\" class=\"btn bg-white btnW waves-effect waves-blue text-muted\"> \r\n                    <i class=\"bi-car-front\" style=\"font-size: 1.5rem;\"></i> \r\n                    <h5>Parqueadero</h5>\r\n                </button>\r\n            </div>\r\n\r\n            <div class=\"p-2\">\r\n                <button [routerLink]=\"['/dashboard/configuracion/bodegas']\" type=\"button\" class=\"btn bg-white btnW waves-effect waves-blue text-muted\"> \r\n                    <i class=\"bi-diagram-3\" style=\"font-size: 1.5rem;\"></i> \r\n                    <h5>Bodegas</h5>\r\n                </button>\r\n            </div>\r\n\r\n            <div class=\"p-2\">\r\n                <button [routerLink]=\"['/dashboard/configuracion/compras']\" type=\"button\" class=\"btn bg-white btnW waves-effect waves-blue text-muted\"> \r\n                    <i class=\"bi-cart\" style=\"font-size: 1.5rem;\"></i> \r\n                    <h5>Compras</h5>\r\n                </button>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    <!-- REPORTES -->\r\n\r\n\r\n\r\n\r\n</div>\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\n\r\n// SERVICES\r\nimport { EmpresaService } from '../../../services/empresa.service';\r\nimport { FileUploadService } from '../../../services/file-upload.service';\r\n\r\n// MODELS\r\nimport { Datos, comisiones } from '../../../models/empresa.model';\r\nimport Swal from 'sweetalert2';\r\nimport { DataicoService } from 'src/app/services/dataico.service';\r\nimport { DataicoInterface } from 'src/app/interfaces/dataico.interface';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\ninterface _Department {\r\n  codigo: string,\r\n  departamento: string,\r\n}\r\n\r\n@Component({\r\n  selector: 'app-empresa',\r\n  templateUrl: './empresa.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class EmpresaComponent implements OnInit {\r\n\r\n  public empresa: Datos;\r\n  public basculaT: string = '1';\r\n  public puertoBascula: string = 'COM1';\r\n\r\n  constructor(  private empresaService: EmpresaService,\r\n                private fb: FormBuilder,\r\n                private fileUploadService: FileUploadService,\r\n                private dataicoService: DataicoService,\r\n                private http: HttpClient) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.cargarDatos();\r\n\r\n    // CARGA DATA DATAICO\r\n    this.loadDataDataico();\r\n\r\n    this.loadDepartmentAndCitys();\r\n\r\n    if (localStorage.getItem('bascula')) {\r\n      this.basculaT = localStorage.getItem('bascula');\r\n    }\r\n    \r\n    if (localStorage.getItem('puertoBascula')) {\r\n      this.puertoBascula = localStorage.getItem('puertoBascula');\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n  *   CARGAR DATOS DE LA EMPRESA\r\n  ==================================================================== */\r\n  public comisiones: comisiones[] = [];\r\n  public ticketHeader: any;\r\n  public ticketfooter: any;\r\n  cargarDatos(){\r\n\r\n    this.empresaService.getDatos()\r\n        .subscribe( datos => {\r\n\r\n          this.empresa = datos;\r\n\r\n          this.ticketHeader =  this.empresa.header.split('\\n');\r\n          this.ticketfooter =  this.empresa.footer.split('\\n');         \r\n          \r\n          this.comisiones = datos.comisiones || [];\r\n          \r\n          const { tax, name, address, phone, nit, eid, impuesto, printpos, responsable, noresponsable, impuestoconsumo, resolucion, prefijopos, commission, comision, tip, propina, bascula, comandas, commissions, comisiones, fruver, moneda, decimal, usd,  currencyusd, cop, currencycop, basculaimp, basculatype, basculacode, electronica, min, alquileres, impresora, parqueadero, bs, currencybs, datafon, marca, comidatafon, cotizacion, placa, taller, paiddirect, kiosco, pais, basculakg } = datos;\r\n\r\n          let tipoImpuesto = '';\r\n\r\n          if(responsable === true && impuestoconsumo === false && noresponsable === false && impuesto === true){\r\n            tipoImpuesto = 'responsable';\r\n          }else if(responsable === false && impuestoconsumo === true && noresponsable === false && impuesto === true) {\r\n            tipoImpuesto = 'consumo';\r\n          }else if(responsable === false && impuestoconsumo === false && noresponsable === true && impuesto === true) {\r\n            tipoImpuesto = 'noresponsable';\r\n          }\r\n\r\n          this.formUpdate.reset(\r\n            { \r\n              tax, \r\n              name, \r\n              address, \r\n              phone, \r\n              nit, \r\n              eid, \r\n              impuesto, \r\n              printpos, \r\n              responsable, \r\n              impuestoconsumo, \r\n              resolucion, \r\n              prefijopos, \r\n              commission, \r\n              comision, \r\n              tip, \r\n              propina, \r\n              bascula, \r\n              comandas, \r\n              commissions, \r\n              comisiones, \r\n              fruver, \r\n              tipoImpuesto, \r\n              moneda: moneda || 'COP', \r\n              decimal: decimal || false, \r\n              usd: usd || false,  \r\n              currencyusd: currencyusd || 0, \r\n              cop: cop || false, \r\n              bs: bs || false, \r\n              currencybs: currencybs || 0,\r\n              currencycop: currencycop || 0,\r\n              basculaimp: basculaimp || false,\r\n              basculatype: basculatype ||'precio',\r\n              basculacode: basculacode ||'2000',\r\n              electronica: electronica || false,\r\n              basculakg: basculakg || true,\r\n              min,\r\n              alquileres,\r\n              parqueadero,\r\n              impresora,\r\n              datafon,\r\n              comidatafon,\r\n              cotizacion,\r\n              marca: marca || false,\r\n              placa: placa || false,\r\n              taller: taller || false,\r\n              paiddirect: paiddirect || false,\r\n              kiosco: kiosco || false,\r\n              pais: pais || 'Colombia'\r\n            });\r\n\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n  *   ACTUALIZAR O CREAR DATOS DE LA EMPRESA\r\n  ==================================================================== */\r\n  public formSubmitted = false;\r\n  public formUpdate = this.fb.group({\r\n    name: ['', [Validators.required, Validators.minLength(3)]],\r\n    address: ['', [Validators.required, Validators.minLength(3)]],\r\n    phone: ['', [Validators.required, Validators.minLength(5)]],\r\n    nit: ['', [Validators.required, Validators.minLength(3)]],\r\n    tax: [''],\r\n    eid:['', [Validators.required]],\r\n    impuesto: [''],\r\n    printpos: [true],\r\n    responsable: [false],\r\n    noresponsable: [false],\r\n    impuestoconsumo: [false],\r\n    resolucion: [false],\r\n    prefijopos: [''],\r\n    tip: [false],\r\n    propina: [0],\r\n    commission: [false],\r\n    comision: [0],\r\n    bascula: false,\r\n    fruver: false,\r\n    comandas: false,\r\n    commissions: false,\r\n    comisiones: [],\r\n    tipoImpuesto: [''],\r\n    moneda: ['COP', [Validators.required]],\r\n    decimal: false,\r\n    usd: false,\r\n    currencyusd: 0,\r\n    cop: false,\r\n    bs: false,\r\n    currencycop: 0,\r\n    currencybs: 0,\r\n    basculaimp: false,\r\n    basculakg: true,\r\n    basculatype: 'precio',\r\n    basculacode: '2000',\r\n    electronica: false,\r\n    min: 212000,\r\n    alquileres: false,\r\n    parqueadero: false,\r\n    impresora: 58,\r\n    datafon: false,\r\n    comidatafon: 0,\r\n    cotizacion: true,\r\n    marca: false,\r\n    placa: false,\r\n    taller: false,\r\n    paiddirect: false,\r\n    kiosco: false,\r\n    pais: 'Colombia',\r\n  })\r\n\r\n  actualizarDatos(){\r\n\r\n    this.formSubmitted = true;\r\n\r\n    if (this.formUpdate.invalid) {\r\n      return;\r\n    }\r\n\r\n    if(this.formUpdate.value.tipoImpuesto === 'responsable'){\r\n      this.formUpdate.value.responsable = true;\r\n      this.formUpdate.value.impuestoconsumo = false;\r\n      this.formUpdate.value.noresponsable = false;\r\n    }else if(this.formUpdate.value.tipoImpuesto === 'consumo'){\r\n      this.formUpdate.value.responsable = false;\r\n      this.formUpdate.value.impuestoconsumo = true;\r\n      this.formUpdate.value.noresponsable = false;\r\n    }else if(this.formUpdate.value.tipoImpuesto === 'noresponsable'){\r\n      this.formUpdate.value.responsable = false;\r\n      this.formUpdate.value.impuestoconsumo = false;\r\n      this.formUpdate.value.noresponsable = true;\r\n    }else {\r\n      this.formUpdate.value.responsable = false;\r\n      this.formUpdate.value.noresponsable = false;\r\n      this.formUpdate.value.impuestoconsumo = false;\r\n    }\r\n\r\n    if (!this.formUpdate.value.impuesto) {\r\n      this.formUpdate.value.responsable = false;\r\n      this.formUpdate.value.impuestoconsumo = false;\r\n    }\r\n\r\n    if (this.formUpdate.value.moneda === 'COP') {\r\n      this.formUpdate.value.cop = false; \r\n      this.formUpdate.value.currencycop = 0; \r\n    }\r\n\r\n    if (this.formUpdate.value.moneda === 'USD') {\r\n      this.formUpdate.value.usd = false; \r\n      this.formUpdate.value.currencyusd = 0; \r\n    }\r\n\r\n    this.empresaService.updateDatos(this.formUpdate.value, this.empresa.eid)\r\n          .subscribe( (resp: {ok: boolean, datos: Datos}) =>{\r\n            \r\n            this.formSubmitted = false;\r\n            this.formUpdate.reset();\r\n            this.cargarDatos();\r\n            \r\n            Swal.fire('Estupendo', 'La empresa a sido actualizada', 'success');\r\n            \r\n\r\n          }, (err) =>{ Swal.fire('Error', err.error.msg, 'error') });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  VALIDAR CAMPOS\r\n  ==================================================================== */\r\n  campoValido(campo: string): boolean{\r\n\r\n    if ( this.formUpdate.get(campo).invalid &&  this.formSubmitted) {  \r\n      return true;      \r\n    } else{            \r\n      return false;\r\n    }\r\n  \r\n  }\r\n\r\n  /** ================================================================\r\n   *   ACTUALIZAR IMAGEN\r\n  ==================================================================== */\r\n  public imgTemp: any = null;\r\n  public subirImagen: File;\r\n  cambiarImage(file: File){\r\n    this.subirImagen = file;\r\n    \r\n    if (!file) { return this.imgTemp = null }\r\n\r\n    const reader = new FileReader();\r\n    const url64 = reader.readAsDataURL( file );\r\n\r\n    reader.onloadend = () => {\r\n      this.imgTemp = reader.result;\r\n    }\r\n\r\n  }\r\n      \r\n  /** ================================================================\r\n   *  SUBIR IMAGEN fileImg\r\n  ==================================================================== */\r\n  @ViewChild('fileImg') fileImg: ElementRef;\r\n  public imgProducto: string = 'no-image';\r\n  subirImg(){\r\n    \r\n    this.fileUploadService.updateImage( this.subirImagen, 'logo', this.empresa.eid)\r\n    .then( img => this.empresa.logo = img);\r\n    \r\n    this.fileImg.nativeElement.value = '';\r\n    this.imgProducto = 'no-image';\r\n    this.imgTemp = null;\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *  AGREGAR COMISION\r\n  ==================================================================== */\r\n  agregarComision(monto: number, comision: number){\r\n\r\n    const validarComision = this.comisiones.findIndex( (resp) =>{      \r\n      if (resp.comision === comision ) {\r\n\r\n        Swal.fire('Error', 'Ya agregaste este porcentaje de comisión', 'error');\r\n        return true;\r\n      }else {\r\n\r\n        if (resp.monto === monto) {          \r\n          Swal.fire('Error', 'Ya agregaste este monto de comisión', 'error');\r\n          return true;\r\n        }\r\n\r\n        return false;\r\n      }\r\n    });\r\n\r\n    if (validarComision === -1) {\r\n      \r\n      this.comisiones.push({\r\n        activo: true,\r\n        monto,\r\n        comision\r\n      });\r\n      \r\n      this.formUpdate.value.comisiones = this.comisiones;\r\n\r\n    }\r\n\r\n\r\n  }\r\n  \r\n  /** ================================================================\r\n   *  BORRAR COMISION\r\n  ==================================================================== */\r\n  borrarComision(i: any){\r\n\r\n    this.comisiones.splice(i,1);\r\n    this.formUpdate.value.comisiones = this.comisiones;\r\n  }\r\n\r\n  /** ================================================================\r\n   *  OBTENER DATOS DE LA FACTURA ELECTRONICA\r\n  ==================================================================== */\r\n  public dataDataico: boolean = false;\r\n  public dataico: DataicoInterface;\r\n  loadDataDataico(){\r\n\r\n    this.dataicoService.loadDataDataico()\r\n        .subscribe(async ({dataico}) => {\r\n\r\n          if (dataico) {\r\n            this.dataDataico = true;\r\n            this.dataico = dataico;\r\n            await this.searchCities(this.dataico.department || '11');\r\n            this.updateFormDataico();\r\n          }          \r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          \r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREAR LOS DATOS DE DATAICO\r\n  ==================================================================== */\r\n  public dataicoFormSubmitted: boolean = false;\r\n  public dataicoForm = this.fb.group({\r\n    authtoken: ['', [Validators.required]],\r\n    dataico_account_id: ['', [Validators.required]],    \r\n    invoice_type_code: ['FACTURA_VENTA', [Validators.required]],    \r\n    resolution_number: ['', [Validators.required]],\r\n    prefix: ['', [Validators.required]],\r\n    flexible: [false, [Validators.required]],\r\n    operation: ['ESTANDAR', [Validators.required]],\r\n    env: ['PRUEBAS', [Validators.required]],\r\n    send_dian: [false, [Validators.required]],\r\n    send_email: [false, [Validators.required]],\r\n    desde: [0, [Validators.required]],\r\n    hasta: [0, [Validators.required]],\r\n    department: ['', [Validators.required]],\r\n    city: ['', [Validators.required]],\r\n    email: ['', [Validators.required]],\r\n    phone: ['', [Validators.required]],\r\n  });\r\n\r\n  createDataico(){\r\n    this.dataicoFormSubmitted = true;\r\n\r\n    if (this.dataicoForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    let actions = {\r\n      send_dian: this.dataicoForm.value.send_dian,\r\n      send_email: this.dataicoForm.value.send_email\r\n    }\r\n\r\n    let numbering = {\r\n      resolution_number: this.dataicoForm.value.resolution_number,\r\n      prefix: this.dataicoForm.value.prefix,\r\n      flexible: this.dataicoForm.value.flexible\r\n    }\r\n\r\n    let dataico = {\r\n      invoice_type_code: this.dataicoForm.value.invoice_type_code,\r\n      actions,\r\n      authtoken: this.dataicoForm.value.authtoken,\r\n      dataico_account_id: this.dataicoForm.value.dataico_account_id,\r\n      numbering,\r\n      env: this.dataicoForm.value.env,\r\n      operation: this.dataicoForm.value.operation,\r\n      desde: this.dataicoForm.value.desde,\r\n      hasta: this.dataicoForm.value.hasta,\r\n      department: this.dataicoForm.value.department,\r\n      city: this.dataicoForm.value.city,\r\n      email: this.dataicoForm.value.email,\r\n      phone: this.dataicoForm.value.phone\r\n      \r\n    }\r\n\r\n    Swal.fire('Estupendo', 'Se ha guardado exitosamente la información para facturacion electronica', 'success');\r\n\r\n    this.dataicoService.postDataico(dataico)\r\n        .subscribe( ({dataico}) => {\r\n          \r\n          if (dataico) {\r\n            this.dataDataico = true;\r\n            this.dataico = dataico;\r\n            this.dataicoFormSubmitted = false;\r\n            \r\n            this.updateFormDataico();\r\n\r\n          }          \r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          \r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  VALIDAR DATOS DE DATAICO\r\n  ==================================================================== */\r\n  validate(campo: string): boolean{\r\n    if (this.dataicoForm.get(campo).invalid && this.dataicoFormSubmitted) {\r\n      return true;\r\n    }else{\r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  ACTUALIZAR FORMULARIO DE ACTUALIZAR\r\n  ==================================================================== */\r\n  updateFormDataico(){\r\n\r\n    this.dataicoUpdateForm.setValue({\r\n      authtoken: this.dataico.authtoken,\r\n      dataico_account_id: this.dataico.dataico_account_id,\r\n      invoice_type_code: this.dataico.invoice_type_code,\r\n      resolution_number: this.dataico.numbering.resolution_number,\r\n      prefix: this.dataico.numbering.prefix,\r\n      flexible: this.dataico.numbering.flexible,\r\n      operation: this.dataico.operation,\r\n      env: this.dataico.env,\r\n      send_dian: this.dataico.actions.send_dian,\r\n      send_email: this.dataico.actions.send_email,\r\n      desde: this.dataico.desde || 0,\r\n      hasta: this.dataico.hasta || 0,\r\n      department: this.dataico.department || '11',\r\n      city: this.dataico.city || '001',\r\n      email: this.dataico.email || '',\r\n      phone: this.dataico.phone || '',\r\n    });    \r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *  ACTUALIZAR DATOS DE DATAICO\r\n  ==================================================================== */\r\n  public dataicoUpdateFormSubmitted: boolean = false;\r\n  public dataicoUpdateForm = this.fb.group({\r\n    authtoken: ['', [Validators.required]],\r\n    dataico_account_id: ['', [Validators.required]],    \r\n    invoice_type_code: ['FACTURA_VENTA', [Validators.required]],    \r\n    resolution_number: ['', [Validators.required]],\r\n    prefix: ['', [Validators.required]],\r\n    flexible: [false, [Validators.required]],\r\n    operation: ['ESTANDAR', [Validators.required]],\r\n    env: ['PRODUCCION', [Validators.required]],\r\n    send_dian: [false, [Validators.required]],\r\n    send_email: [false, [Validators.required]],\r\n    desde: [0, [Validators.required]],\r\n    hasta: [0, [Validators.required]],\r\n    department: ['', [Validators.required]],\r\n    city: ['', [Validators.required]],\r\n    email: ['', [Validators.required]],\r\n    phone: ['', [Validators.required]],\r\n  });\r\n\r\n  updateDataico(){\r\n\r\n    this.dataicoUpdateFormSubmitted = true;\r\n\r\n    if (this.dataicoUpdateForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    let actions = {\r\n      send_dian: this.dataicoUpdateForm.value.send_dian,\r\n      send_email: this.dataicoUpdateForm.value.send_email\r\n    }\r\n\r\n    let numbering = {\r\n      resolution_number: this.dataicoUpdateForm.value.resolution_number,\r\n      prefix: this.dataicoUpdateForm.value.prefix,\r\n      flexible: this.dataicoUpdateForm.value.flexible\r\n    }\r\n\r\n    let dataico = {\r\n      invoice_type_code: this.dataicoUpdateForm.value.invoice_type_code,\r\n      actions,\r\n      authtoken: this.dataicoUpdateForm.value.authtoken,\r\n      dataico_account_id: this.dataicoUpdateForm.value.dataico_account_id,\r\n      numbering,\r\n      env: this.dataicoUpdateForm.value.env,\r\n      operation: this.dataicoUpdateForm.value.operation,\r\n      desde: this.dataicoUpdateForm.value.desde,\r\n      hasta: this.dataicoUpdateForm.value.hasta,\r\n      department: this.dataicoUpdateForm.value.department,\r\n      city: this.dataicoUpdateForm.value.city,\r\n      email: this.dataicoUpdateForm.value.email,\r\n      phone: this.dataicoUpdateForm.value.phone\r\n    }\r\n\r\n    this.dataicoService.updateDataico(dataico, this.dataico.datid)\r\n        .subscribe( ({dataico}) => {\r\n\r\n            this.dataDataico = true;\r\n            this.dataico = dataico;\r\n            this.dataicoUpdateFormSubmitted = false;\r\n            this.updateFormDataico();\r\n\r\n            Swal.fire('Estupendo', 'Se a actualizado conrrectamente!', 'success');\r\n            \r\n          }, (err) => {\r\n            console.log(err);\r\n            Swal.fire('Error', err.error.msg, 'error');          \r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  VALIDAR DATOS DE DATAICO\r\n  ==================================================================== */\r\n  validateUpdate(campo: string): boolean{\r\n    if (this.dataicoUpdateForm.get(campo).invalid && this.dataicoUpdateFormSubmitted) {\r\n      return true;\r\n    }else{\r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n  *   UPDATE HEAR\r\n  ==================================================================== */\r\n  upHeader(header: string){\r\n    this.ticketHeader = header.split('\\n');\r\n    this.empresa.header = header;\r\n  }\r\n\r\n  /** ================================================================\r\n  *   UPDATE FOOTER\r\n  ==================================================================== */\r\n  upFooter(footer: string){\r\n    this.ticketfooter = footer.split('\\n');\r\n    this.empresa.footer = footer;\r\n  }\r\n\r\n  /** ================================================================\r\n  *   UPDATE TICKET\r\n  ==================================================================== */\r\n  updateTicket(){\r\n\r\n    let data = {\r\n      header: this.empresa.header,\r\n      type: this.empresa.type,\r\n      footer: this.empresa.footer\r\n    }\r\n    \r\n\r\n    this.empresaService.updateDatos(data, this.empresa.eid)\r\n        .subscribe( (resp) => {\r\n\r\n          console.log(resp);\r\n          Swal.fire('Estupendo', 'Se ha actualizado el ticket exitosamente!', 'success');\r\n          \r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  OBTENER DEPARTAMENTOS Y CIUDADES\r\n  ==================================================================== */\r\n  public departments: _Department[] = [];\r\n  public cities: any[] = [];\r\n  loadDepartmentAndCitys(){\r\n\r\n    this.http.get('assets/json/departamentos.json')\r\n        .subscribe( (data: any) => {          \r\n          this.departments = data;            \r\n        });\r\n\r\n    this.http.get('assets/json/ciudades.json')\r\n    .subscribe( (data: any) => {          \r\n      this.cities = data;          \r\n    })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  OBTENER CIUDADES DEPENDIENDO DEL DEPARTAMENTO\r\n  ==================================================================== */\r\n  public ListCities: any[] = [];\r\n  searchCities(department: string){\r\n\r\n    this.ListCities = [];\r\n\r\n    if (department.length === 0 ) {\r\n      return;\r\n    }\r\n\r\n    this.ListCities = this.cities.filter( city =>  department === city['codigo departamento'] );\r\n    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CAMBIAR EL TIPO DE BASCULA\r\n  ==================================================================== */\r\n  changeBascula(type: string){\r\n    localStorage.setItem('bascula', type);\r\n    this.basculaT = type;\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CAMBIAR EL PUERTO DE BASCULA\r\n  ==================================================================== */\r\n  changePort(port: string){\r\n    localStorage.setItem('puertoBascula', port);\r\n    this.puertoBascula = port;\r\n  }\r\n\r\n\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Mi Empresa</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"ticket1-tab\"><i class=\"bi-gear\" style=\"font-size: 1rem\"></i> Información de mi empresa</a>\r\n        </li>\r\n\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n<div class=\"container-fluid my-2\">\r\n    <!-- TITLE - SUBTITLE -->\r\n    <div>\r\n        <h5 class=\"text-dark\">ADMINISTRACIÓN DE MI EMPRESA</h5>\r\n        <p>Configura toda la información de tu empresa desde este modulo.</p>\r\n    </div>\r\n    <!-- TITLE - SUBTITLE -->\r\n    <div class=\"row\">\r\n\r\n        <!-- IMAGE -->\r\n        <div class=\"col-lg-4 text-center\">\r\n            <div class=\"card\">\r\n                <div class=\"card-body text-center\">\r\n\r\n                    <!-- Image Product-->\r\n                    <ng-container *ngIf=\"empresa\">\r\n                        <img *ngIf=\"!imgTemp\" [src]=\"empresa.logo | imagen:'logo'\" class=\"avatar-redondo-lg mx-auto\" alt=\"\">\r\n                    </ng-container>\r\n\r\n                    <!-- IMG TEMPO  imgTemp -->\r\n                    <img *ngIf=\"imgTemp\" [src]=\"imgTemp\" class=\"avatar-redondo-lg mx-auto\" alt=\"\">\r\n\r\n                    <!-- Description-->\r\n                    <div class=\"small font-italic text-muted mb-4\">JPG - PNG - WEBP - no mayor a 5 mb</div>\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"formFileSm\" class=\"form-label\">Seleccionar Imagen</label>\r\n                        <input #fileImg class=\"form-control form-control-sm\" id=\"formFileSm\" type=\"file\" (change)=\"cambiarImage($event.target.files[0])\">\r\n                    </div>\r\n                    <!-- BTN upload Image -->\r\n                    <button *ngIf=\"imgTemp\" class=\"btn btnW btn-primary waves-effect waves-light px-3\" [disabled]=\"!subirImagen\" (click)=\"subirImg()\" type=\"button\">Actualizar Imagen</button>\r\n\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"card\">\r\n                <div class=\"card-body\">\r\n                    <div class=\"d-grid gap-2\">\r\n                        <!-- ticketUpdate -->\r\n                        <button type=\"button\" name=\"\" id=\"\" class=\"btn btn-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#ticketUpdate\">\r\n                            Actualizar Ticket\r\n                        </button>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- IMAGE -->\r\n\r\n        <!-- INFO PRODUCT -->\r\n        <div class=\"col-lg-8\">\r\n            <div class=\"card\">\r\n                <div class=\"card-header\">\r\n                    Informaciòn\r\n                </div>\r\n                <div class=\"card-body\">\r\n\r\n                    <!-- FORM -->\r\n\r\n                    <form id=\"upProductForm\" autocomplete=\"off\" [formGroup]=\"formUpdate\" (ngSubmit)=\"actualizarDatos()\">\r\n\r\n                        <!-- =======================================================================\r\n                            DATOS PERSONALES \r\n                        =========================================================================== -->\r\n                        <h5 class=\"text-muted\">Datos de mi empresa</h5>\r\n\r\n                        <div class=\"mb-3\">\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"name\" type=\"text\" class=\"form-control\" placeholder=\"Nombre de mi empresa\">\r\n                                <label for=\"floatingInput\">Nombre de mi empresa</label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"mb-3\">\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"address\" type=\"text\" class=\"form-control\" placeholder=\"Direcciòn de mi empresa\">\r\n                                <label for=\"floatingInput\">Direcciòn de mi empresa</label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"row mb-3\">\r\n\r\n                            <div class=\"col-md-4\">\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"phone\" type=\"text\" class=\"form-control\" placeholder=\"Telefono\">\r\n                                    <label for=\"floatingInput\">Telefono</label>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"px-md-1 col-md-4\">\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"nit\" type=\"text\" class=\"form-control\" placeholder=\"Nit\">\r\n                                    <label for=\"floatingInput\">Nit</label>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-4\">\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"tax\" type=\"number\" min=\"0\" class=\"form-control\" placeholder=\"Impuesto\">\r\n                                    <label for=\"floatingInput\">Impuesto</label>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"row mb-3\">\r\n\r\n                            <div class=\"col-md-4\">\r\n\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"electronica\" class=\"form-check-input\" type=\"checkbox\" id=\"electronica\" #electronicaIn>\r\n                                    <label class=\"form-check-label\" for=\"electronica\">\r\n                                    Facturación Electronica\r\n                                  </label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-4\" *ngIf=\"electronicaIn.checked\">\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"min\" type=\"number\" min=\"0\" class=\"form-control\" placeholder=\"Minimo para electronica\">\r\n                                    <label for=\"floatingInput\">Minimo</label>\r\n                                </div>\r\n                            </div>\r\n\r\n\r\n                            <div class=\"col-md-4\" *ngIf=\"electronicaIn.checked\">\r\n                                <button *ngIf=\"dataDataico\" type=\"button\" class=\"btn btn-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#electronicaUpdate\"> Actualizar</button>\r\n                                <button *ngIf=\"!dataDataico\" type=\"button\" class=\"btn btn-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#electronicaPost\"> Configurar</button>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 mt-3\">\r\n                                <div class=\"form-group row\">\r\n                                    <label for=\"pais\" class=\"col-sm-auto col-form-label\">Pais</label>\r\n                                    <div class=\"col-sm-6\">\r\n                                        <select formControlName=\"pais\" id=\"pais\" class=\"custom-select custom-select-sm\">\r\n                                            <option value=\"Colombia\" >Colombia</option>\r\n                                            <option value=\"USA\" >USA</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <hr>\r\n\r\n                        <h5 class=\"text-muted\">Configuración</h5>\r\n\r\n\r\n                        <div class=\"row mb-3\">\r\n                            <div class=\"col-md-4\">\r\n\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"printpos\" class=\"form-check-input\" type=\"checkbox\" id=\"printpos\" checked #printpos>\r\n                                    <label class=\"form-check-label\" for=\"printpos\">\r\n                                    Impresora POS\r\n                                  </label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-4\">\r\n\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"marca\" class=\"form-check-input\" type=\"checkbox\" id=\"marca\" checked #marca>\r\n                                    <label class=\"form-check-label\" for=\"marca\">\r\n                                    Marca de agua en factura\r\n                                  </label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-4\">\r\n\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"cotizacion\" class=\"form-check-input\" type=\"checkbox\" id=\"cotizacion\" checked #cotizacion>\r\n                                    <label class=\"form-check-label\" for=\"cotizacion\">\r\n                                    Cotizacion\r\n                                  </label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-4\">\r\n\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"paiddirect\" class=\"form-check-input\" type=\"checkbox\" id=\"paiddirect\" checked #paiddirectC>\r\n                                    <label class=\"form-check-label\" for=\"paiddirect\">\r\n                                    Pago Directo\r\n                                  </label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-4\">\r\n\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"kiosco\" class=\"form-check-input\" type=\"checkbox\" id=\"kiosco\" checked #kioscoC>\r\n                                    <label class=\"form-check-label\" for=\"kiosco\">\r\n                                    Kiosco\r\n                                  </label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 mt-3\" *ngIf=\"printpos.checked\">\r\n                                <div class=\"form-group row\">\r\n                                    <label for=\"impresora\" class=\"col-sm-auto col-form-label\">Tipo de impresora</label>\r\n                                    <div class=\"col-sm-6\">\r\n                                        <select formControlName=\"impresora\" id=\"impresora\" class=\"custom-select custom-select-sm\">\r\n                                            <option disabled selected>Seleccionar Impresora</option>\r\n                                            <option value=\"58\" >58</option>\r\n                                            <option value=\"80\" >80</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"row mb-3\">\r\n\r\n\r\n\r\n                            <div class=\"col-md-4\">\r\n\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"decimal\" class=\"form-check-input\" type=\"checkbox\" id=\"decimal\">\r\n                                    <label class=\"form-check-label\" for=\"decimal\">\r\n                                        Decimales\r\n                                  </label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 mt-3\">\r\n                                <div class=\"form-group row\">\r\n                                    <label for=\"moneda\" class=\"col-sm-auto col-form-label\">Moneda</label>\r\n                                    <div class=\"col-sm-6\">\r\n                                        <select #inMoneda formControlName=\"moneda\" id=\"moneda\" class=\"custom-select custom-select-sm\">\r\n                                            <option disabled selected>Seleccionar moneda</option>\r\n                                            <option value=\"COP\" >COP</option>\r\n                                            <option value=\"USD\" >USD</option>\r\n                                            <option value=\"BS\" >BS</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <hr>\r\n\r\n                        <h5 class=\"text-muted\">Divisas o Multimonedas</h5>\r\n\r\n                        <div class=\"row mb-3\" *ngIf=\"inMoneda.value !== 'USD'\">\r\n\r\n                            <div class=\"col-md-auto\">\r\n\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"usd\" class=\"form-check-input\" type=\"checkbox\" id=\"divisas\" #inUsd>\r\n                                    <label class=\"form-check-label\" for=\"divisas\">\r\n                                    USD\r\n                                  </label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-auto\" *ngIf=\"inUsd.checked\">\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"currencyusd\" type=\"number\" min=\"0\" class=\"form-control\" placeholder=\"Divisa USD\">\r\n                                    <label for=\"floatingInput\">Divisa USD</label>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"row mb-3\" *ngIf=\"inMoneda.value !== 'bs'\">\r\n\r\n                            <div class=\"col-md-auto\">\r\n\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"bs\" class=\"form-check-input\" type=\"checkbox\" id=\"divisas\" #inBs>\r\n                                    <label class=\"form-check-label\" for=\"divisas\">\r\n                                    BS\r\n                                  </label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-auto\" *ngIf=\"inBs.checked\">\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"currencybs\" type=\"number\" min=\"0\" class=\"form-control\" placeholder=\"Divisa BS\">\r\n                                    <label for=\"floatingInput\">Divisa BS</label>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"row mb-3\" *ngIf=\"inMoneda.value !== 'COP'\">\r\n\r\n                            <div class=\"col-md-auto\">\r\n\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"cop\" class=\"form-check-input\" type=\"checkbox\" id=\"divisascop\" #inCop>\r\n                                    <label class=\"form-check-label\" for=\"divisascop\">\r\n                                    COP\r\n                                  </label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-auto\" *ngIf=\"inCop.checked\">\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"currencycop\" formControlName=\"currencycop\" type=\"number\" min=\"0\" class=\"form-control\" placeholder=\"Divisa COP\">\r\n                                    <label for=\"currencycop\">Divisa COP</label>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <hr>\r\n\r\n                        <h5 class=\"text-muted\">Impuestos</h5>\r\n\r\n                        <div class=\"row mb-3\">\r\n\r\n                            <div class=\"col-md-4\">\r\n\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"impuesto\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"impuesto\" #cImpuesto>\r\n                                    <label class=\"form-check-label\" for=\"impuesto\">\r\n                                    Impuestos\r\n                                  </label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12\" *ngIf=\"cImpuesto.checked\">\r\n                                <div class=\"form-group\">\r\n                                    <label for=\"exampleFormControlSelect1\">Seleccionar el tipo de impuesto</label>\r\n                                    <select formControlName=\"tipoImpuesto\" class=\"form-control mb-0\" id=\"exampleFormControlSelect1\">\r\n                                      <option value=\"\" selected>Seleccionar</option>\r\n                                      <option value=\"responsable\" >Responsable de IVA</option>\r\n                                      <option value=\"consumo\" >Impuesto al Consumo</option>\r\n                                      <option value=\"noresponsable\" >No responsable</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- <div class=\"col-md-4\" *ngIf=\"cImpuesto.checked\">\r\n\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"responsable\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"responsable\" #responsable>\r\n                                    <label class=\"form-check-label\" for=\"responsable\">\r\n                                    Responsable de iva\r\n                                  </label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-4\" *ngIf=\"cImpuesto.checked\">\r\n\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"impuestoconsumo\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"impuestoconsumo\" #iCon>\r\n                                    <label class=\"form-check-label\" for=\"impuestoconsumo\">\r\n                                    Impuesto al consumo\r\n                                  </label>\r\n                                </div>\r\n\r\n                            </div> -->\r\n\r\n                        </div>\r\n\r\n                        <div class=\"row mb-3\" *ngIf=\"cImpuesto.checked\">\r\n\r\n                            <div class=\"col-md-6\">\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"resolucion\" type=\"text\" class=\"form-control\" placeholder=\"Telefono\">\r\n                                    <label for=\"floatingInput\">Numero de Resolución</label>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-6\">\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"prefijopos\" type=\"text\" class=\"form-control\" placeholder=\"Telefono\">\r\n                                    <label for=\"floatingInput\">Prefijo POS</label>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <hr>\r\n\r\n                        <h5 class=\"text-muted\">Propinas, Comisiones, Datafon</h5>\r\n\r\n                        <div class=\"row mb-3\">\r\n\r\n                            <div class=\"col-md-4\">\r\n\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"tip\" class=\"form-check-input\" type=\"checkbox\" id=\"tip\">\r\n                                    <label class=\"form-check-label\" for=\"tip\">\r\n                                    Propina\r\n                                  </label>\r\n                                </div>\r\n\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"propina\" type=\"number\" class=\"form-control\" placeholder=\"Porcentaje\">\r\n                                    <label for=\"floatingInput\">% Porcentaje</label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-4 mb-2\">\r\n\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"commission\" class=\"form-check-input\" type=\"checkbox\" id=\"tip\">\r\n                                    <label class=\"form-check-label\" for=\"tip\">\r\n                                    Comisión Unica\r\n                                  </label>\r\n                                </div>\r\n\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"comision\" type=\"number\" class=\"form-control\" placeholder=\"Porcentaje\">\r\n                                    <label for=\"floatingInput\">% Comisión</label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"container-fluid\">\r\n                                <h6 class=\"text-muted mb-1\">Regla de Comisiones</h6>\r\n                                <p class=\"mb-2 text-muted text-break\"> <small>-  Agrega nuevas reglas para las comisiones de tus vendedores, cuando ellos superan un monto de venta le asignas una comisión específica.</small></p>\r\n\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"commissions\" class=\"form-check-input\" type=\"checkbox\" id=\"comisiones\">\r\n                                    <label class=\"form-check-label\" for=\"comisiones\">\r\n                                    Comisiones\r\n                                  </label>\r\n                                </div>\r\n\r\n                                <div class=\"row\">\r\n\r\n                                    <div class=\"col-md-4\">\r\n                                        <div class=\"form-floating\">\r\n                                            <input type=\"number\" class=\"form-control\" placeholder=\"Monto\" #montoC>\r\n                                            <label for=\"floatingInput\">Monto</label>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div class=\"col-md-4\">\r\n                                        <div class=\"form-floating\">\r\n                                            <input type=\"number\" class=\"form-control\" placeholder=\"Comisión\" #comisionC>\r\n                                            <label for=\"floatingInput\">Comisión</label>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div class=\"col-md-4\">\r\n                                        <button (click)=\"agregarComision(montoC.value, comisionC.value)\" type=\"button\" class=\"btn btn-outline-primary h-100\">Agregar</button>\r\n                                    </div>\r\n\r\n                                    <div class=\"col-12 my-2\" *ngIf=\"comisiones.length > 0\">\r\n                                        <h6 class=\"text-muted mb-1\">Tabla de Comisiones</h6>\r\n\r\n                                        <div class=\"table-responsive\">\r\n\r\n                                            <table class=\"table table-striped table-sm table-borderless align-middle\">\r\n                                                <thead class=\"table-dark\">\r\n                                                    <tr>\r\n                                                        <th scope=\"col\">#</th>\r\n                                                        <th scope=\"col\">Monto</th>\r\n                                                        <th scope=\"col\">Comision</th>\r\n                                                        <th scope=\"col\"></th>\r\n                                                    </tr>\r\n                                                </thead>\r\n                                                <tbody>\r\n                                                    <tr class=\"align-middle\" *ngFor=\"let item of comisiones; let i = index\">\r\n                                                        <th class=\"align-middle\" scope=\"row\"> {{ i + 1 }} </th>\r\n                                                        <td class=\"align-middle\"> {{ item.monto | number }} </td>\r\n                                                        <td class=\"align-middle\"> {{ (item.comision/100) | percent }} </td>\r\n                                                        <td class=\"align-middle\"> <button type=\"button\" (click)=\"borrarComision(i)\" class=\"btn btn-link p-1 text-danger\"><i class=\"bi-trash\" style=\"font-size: 0.9rem\"></i></button> </td>\r\n                                                    </tr>\r\n                                                </tbody>\r\n                                            </table>\r\n\r\n                                        </div>\r\n\r\n                                    </div>\r\n\r\n                                    <div class=\"col-md-4\">\r\n\r\n                                        <div class=\"form-check\">\r\n                                            <input formControlName=\"datafon\" class=\"form-check-input\" type=\"checkbox\" id=\"datafon\">\r\n                                            <label class=\"form-check-label\" for=\"datafon\">\r\n                                            Datafon\r\n                                          </label>\r\n                                        </div>\r\n\r\n                                        <div class=\"form-floating\">\r\n                                            <input formControlName=\"comidatafon\" type=\"number\" class=\"form-control\" placeholder=\"Porcentaje\">\r\n                                            <label for=\"floatingInput\">% Porcentaje de datafon</label>\r\n                                        </div>\r\n\r\n                                    </div>\r\n\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <hr>\r\n\r\n                        <h5 class=\"text-muted\">Modulos</h5>\r\n\r\n                        <div class=\"row mb-3\">\r\n\r\n                            <div class=\"col-md-3\">\r\n\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"comandas\" class=\"form-check-input\" type=\"checkbox\" id=\"comandas\">\r\n                                    <label class=\"form-check-label\" for=\"comandas\">\r\n                                    Comandas\r\n                                  </label>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-3\">\r\n\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"alquileres\" class=\"form-check-input\" type=\"checkbox\" id=\"alquiler\">\r\n                                    <label class=\"form-check-label\" for=\"alquiler\">\r\n                                    Alquileres\r\n                                  </label>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-3\">\r\n\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"parqueadero\" class=\"form-check-input\" type=\"checkbox\" id=\"parqueadero\">\r\n                                    <label class=\"form-check-label\" for=\"parqueadero\">\r\n                                    Parqueadero\r\n                                  </label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-3\">\r\n\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"taller\" class=\"form-check-input\" type=\"checkbox\" id=\"taller\">\r\n                                    <label class=\"form-check-label\" for=\"taller\">\r\n                                    Taller\r\n                                  </label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-3\">\r\n\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"fruver\" class=\"form-check-input\" type=\"checkbox\" id=\"fruver\">\r\n                                    <label class=\"form-check-label\" for=\"fruver\">\r\n                                    Fruver\r\n                                  </label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <hr>\r\n\r\n                        <h5 class=\"text-muted\">Bascula con impresora de codigos</h5>\r\n\r\n\r\n\r\n                        <div class=\"row mb-3\">\r\n\r\n\r\n\r\n                            <div class=\"col-md-3\">\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"bascula\" class=\"form-check-input\" type=\"checkbox\" id=\"bascula\">\r\n                                    <label class=\"form-check-label\" for=\"bascula\">\r\n                                    Bascula\r\n                                  </label>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-3\">\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"basculakg\" class=\"form-check-input\" type=\"checkbox\" id=\"basculakg\">\r\n                                    <label class=\"form-check-label\" for=\"basculakg\">\r\n                                    Bascula KG\r\n                                  </label>\r\n                                </div>\r\n                            </div>\r\n\r\n                            \r\n                            <div  class=\"col-md-3\">\r\n                                <div class=\"form-group row\">\r\n                                    <select id=\"basculat\" class=\"custom-select custom-select-sm\" (change)=\"changeBascula(modelBascula.value)\" #modelBascula [value]=\"basculaT\">\r\n                                        <option value=\"1\">Modelo 1</option>\r\n                                        <option value=\"2\">Modelo 2</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div  class=\"col-md-3\">\r\n                                <div class=\"form-group row\">\r\n                                    <select id=\"basculat\" class=\"custom-select custom-select-sm\" (change)=\"changePort(puertoBasculaS.value)\" #puertoBasculaS [value]=\"puertoBascula\">\r\n                                        <option value=\"COM1\">COM1</option>\r\n                                        <option value=\"COM2\">COM2</option>\r\n                                        <option value=\"COM3\">COM3</option>\r\n                                        <option value=\"COM4\">COM4</option>\r\n                                        <option value=\"COM5\">COM5</option>\r\n                                        <option value=\"COM6\">COM6</option>\r\n                                        <option value=\"COM7\">COM7</option>\r\n                                        <option value=\"COM8\">COM8</option>\r\n                                        <option value=\"COM9\">COM9</option>\r\n                                        <option value=\"COM10\">COM10</option>\r\n                                        <option value=\"COM11\">COM11</option>\r\n                                        <option value=\"COM12\">COM12</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12\">\r\n                                <div class=\"form-check\">\r\n                                    <input #bascIn formControlName=\"basculaimp\" class=\"form-check-input\" type=\"checkbox\" id=\"basculaimp\">\r\n                                    <label class=\"form-check-label\" for=\"basculaimp\">\r\n                                        Bascula Impresora\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div *ngIf=\"bascIn.checked\" class=\"col-md-6\">\r\n\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"basculacode\" type=\"text\" class=\"form-control\" placeholder=\"2000\">\r\n                                    <label for=\"floatingInput\">El codigo de la bascula inicia en</label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div *ngIf=\"bascIn.checked\" class=\"col-md-6\">\r\n                                <div class=\"form-group row\">\r\n                                    <select formControlName=\"basculatype\" id=\"basculatype\" class=\"custom-select custom-select-sm\" value=\"precio\">\r\n                                        <option value=\"peso\" >Imprime Peso</option>\r\n                                        <option value=\"precio\" selected>Imprime Precio</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n\r\n\r\n                        </div>\r\n\r\n                        <div class=\"row\">\r\n                            <div class=\"text-danger mb-2\">\r\n                                <p *ngIf=\"campoValido('name')\" class=\"mb-1 animated fadeIn\">- El nombre es obligatorio</p>\r\n                                <p *ngIf=\"campoValido('address')\" class=\"mb-1 animated fadeIn\">- La dirección es obligatoria</p>\r\n                                <p *ngIf=\"campoValido('phone')\" class=\"mb-1 animated fadeIn\">- Debes de agregar un numero telefonico</p>\r\n                                <p *ngIf=\"campoValido('nit')\" class=\"mb-1 animated fadeIn\">- El nit es obligatorio</p>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                        <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- INFO PRODUCT -->\r\n\r\n\r\n    </div>\r\n\r\n</div>\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    CONFIGURAR FACTURACION ELECTRONICA\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"electronicaPost\" tabindex=\"-1\" aria-labelledby=\"electronicaPostModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"electronicaPostModal\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Información para factura electronica</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n                <div class=\"container\">\r\n\r\n                    <form autocomplete=\"off\" [formGroup]=\"dataicoForm\" (ngSubmit)=\"createDataico()\">\r\n\r\n                        <!-- =======================================================================\r\n                        Configuracion\r\n                    =========================================================================== -->\r\n                        <hr>\r\n                        <h5 class=\"text-muted text-center\">Informaciòn Dataico</h5>\r\n                        <hr>\r\n\r\n                        <div class=\"row mb-2\">\r\n\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"\">Token</label>\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"authtoken\" type=\"text\" class=\"form-control\" placeholder=\"Token de dataico\">\r\n                                    <label for=\"floatingInput\">Token</label>\r\n                                </div>\r\n                                <p *ngIf=\"validate('authtoken')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"\">ID Dataico </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"dataico_account_id\" type=\"text\" class=\"form-control \" placeholder=\"ID de dataico\">\r\n                                    <label for=\"floatingInput\">ID Dataico </label>\r\n                                </div>\r\n                                <p *ngIf=\"validate('dataico_account_id')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <hr>\r\n                        <h5 class=\"text-muted text-center\">Mas Información</h5>\r\n                        <hr>\r\n\r\n                        <div class=\"row mb-2\">\r\n\r\n                            <!-- TIPO DE FACTURACION -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"invoiceTypeCode\" class=\"col-sm-auto col-form-label\">Tipo de factura</label>\r\n                                <select formcontrolname=\"invoice_type_code\" class=\"form-select\" id=\"invoiceTypeCode\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"FACTURA_VENTA\" selected>FACTURA DE VENTA</option>\r\n                                    <option value=\"FACTURA_EXPORTACION\" >FACTURA DE EXPORTACION</option>\r\n                                    <option value=\"FACTURA_CONTINGENCIA\" >FACTURA DE CONTINGENCIA </option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- RESOLUCION -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"resolutionNumber\">Resolución </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"resolutionNumber\" formControlName=\"resolution_number\" type=\"text\" class=\"form-control\" placeholder=\"Resolución\">\r\n                                    <label for=\"floatingInput\">Resolución </label>\r\n                                </div>\r\n                                <p *ngIf=\"validate('resolution_number')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <!-- PREFIJO -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"prefixNumber\">Prefijo </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"prefixNumber\" formControlName=\"prefix\" type=\"text\" class=\"form-control\" placeholder=\"Prefijo\">\r\n                                    <label for=\"floatingInput\">Prefijo </label>\r\n                                </div>\r\n                                <p *ngIf=\"validate('prefix')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <!-- DESDE -->\r\n                            <div class=\"col-md-6 mb-3 px-md-1\">\r\n                                <label for=\"desdeNumber\">Desde </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"desdeNumber\" formControlName=\"desde\" type=\"number\" min=\"0\" class=\"form-control\" placeholder=\"Desde\">\r\n                                    <label for=\"floatingInput\">Desde </label>\r\n                                </div>\r\n                                <p *ngIf=\"validate('desde')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <!-- HASTA -->\r\n                            <div class=\"col-md-6 mb-3 px-md-1\">\r\n                                <label for=\"hastaNumber\">Hasta </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"hastaNumber\" formControlName=\"hasta\" type=\"number\" min=\"0\" class=\"form-control\" placeholder=\"Hasta\">\r\n                                    <label for=\"floatingInput\">Hasta </label>\r\n                                </div>\r\n                                <p *ngIf=\"validate('hasta')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <!-- FACTURACION FLEXIBLE -->\r\n                            <div class=\"col-md-12\">\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"flexible\" class=\"form-check-input\" type=\"checkbox\" id=\"flexibleInvoice\">\r\n                                    <label class=\"form-check-label\" for=\"flexibleInvoice\">\r\n                                    Facturación Flexible\r\n                                  </label>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- TIPO DE OPERACION -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"operationType\" class=\"col-sm-auto col-form-label\">Tipo de operación</label>\r\n                                <select formControlName=\"operation\" class=\"form-select\" id=\"operationType\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"ESTANDAR\" selected> ESTANDAR </option>\r\n                                    <option value=\"AIU\"> AIU </option>\r\n                                    <option value=\"MANDATO\"> MANDATO </option>\r\n                                    <option value=\"EXPORTACION\"> EXPORTACION </option>\r\n                                    <option value=\"SS_RECAUDO\"> SS RECAUDO </option>\r\n                                    <option value=\"SS_CUFE\"> SS CUFE </option>\r\n                                    <option value=\"SS_CUDE\"> SS CUDE </option>\r\n                                    <option value=\"SS_POS\"> SS POS </option>\r\n                                    <option value=\"SS_NUM\"> SS NUM </option>\r\n                                    <option value=\"SS_REPORTE\"> SS REPORTE </option>\r\n                                    <option value=\"SS_SIN_APORTE \"> SS SIN APORTE  </option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- PRUEBAS O DESARROLLO -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"env\" class=\"col-sm-auto col-form-label\">Pruebas o Producción</label>\r\n                                <select formControlName=\"env\" class=\"form-select\" id=\"env\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"PRUEBAS\" selected>PRUEBAS</option>\r\n                                    <option value=\"PRODUCCION\" >PRODUCCION </option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- DEPARTAMENTO ** -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"departamentoS\" class=\"col-sm-auto col-form-label\">Departamento</label>\r\n                                <select formControlName=\"department\" class=\"form-select\" id=\"departamentoS\" #departmentSSUp (change)=\"searchCities(departmentSSUp.value)\">\r\n                                    <option value=\"\" >Seleccionar Departamento</option>\r\n                                    <option *ngFor=\"let department of departments\" [value]=\"department.codigo\" >{{department.departamento}}</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- CIUDAD ** -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"ciudadS\" class=\"col-sm-auto col-form-label\">Ciudad</label>\r\n                                <select formControlName=\"city\" class=\"form-select\" id=\"ciudadS\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"\" selected>Seleccionar Ciudad</option>\r\n                                    <option *ngFor=\"let city of ListCities\" [value]=\"city.codigo\" >{{city.ciudad}}</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- EMAIL -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"resolutionNumber\">Correo </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"resolutionNumber\" formControlName=\"email\" type=\"text\" class=\"form-control\" placeholder=\"Correo\">\r\n                                    <label for=\"floatingInput\">Correo </label>\r\n                                </div>\r\n                                <p *ngIf=\"validate('email')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <!-- RESOLUCION -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"resolutionNumber\">Telefono </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"resolutionNumber\" formControlName=\"phone\" type=\"text\" class=\"form-control\" placeholder=\"Telefono\">\r\n                                    <label for=\"floatingInput\">Telefono </label>\r\n                                </div>\r\n                                <p *ngIf=\"validate('phone')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <!-- ENVIAR A LA DIAN -->\r\n                            <div class=\"col-md-6\">\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"send_dian\" class=\"form-check-input\" type=\"checkbox\" id=\"sendDian\">\r\n                                    <label class=\"form-check-label\" for=\"sendDian\">\r\n                                    Enviar a la DIAN\r\n                                  </label>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- ENVIAR FACTURA AL CORREO -->\r\n                            <div class=\"col-md-6\">\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"send_email\" class=\"form-check-input\" type=\"checkbox\" id=\"sendEmail\">\r\n                                    <label class=\"form-check-label\" for=\"sendEmail\">\r\n                                    Enviar factura al correo\r\n                                  </label>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n\r\n                        <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary w-100\">Guardar</button>\r\n                    </form>\r\n\r\n                </div>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    CONFIGURAR FACTURACION ELECTRONICA\r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    ACTUALIZAR CONFIGURACION DE FACTURACION ELECTRONICA\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"electronicaUpdate\" tabindex=\"-1\" aria-labelledby=\"electronicaUpdateModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"electronicaUpdateModal\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i>Actualizar Información para factura electronica</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n                <div class=\"container\">\r\n\r\n                    <form autocomplete=\"off\" [formGroup]=\"dataicoUpdateForm\" (ngSubmit)=\"updateDataico()\">\r\n\r\n                        <!-- =======================================================================\r\n                        Configuracion\r\n                        =========================================================================== -->\r\n                        <hr>\r\n                        <h5 class=\"text-muted text-center\">Informaciòn Dataico</h5>\r\n                        <hr>\r\n\r\n                        <div class=\"row mb-2\">\r\n\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"\">Token</label>\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"authtoken\" type=\"text\" class=\"form-control \" placeholder=\"Token de dataico\">\r\n                                    <label for=\"floatingInput\">Token</label>\r\n                                </div>\r\n                                <p *ngIf=\"validate('authtoken')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"\">ID Dataico </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"dataico_account_id\" type=\"text\" class=\"form-control \" placeholder=\"ID de dataico\">\r\n                                    <label for=\"floatingInput\">ID Dataico </label>\r\n                                </div>\r\n                                <p *ngIf=\"validate('dataico_account_id')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <hr>\r\n                        <h5 class=\"text-muted text-center\">Mas Información</h5>\r\n                        <hr>\r\n\r\n                        <div class=\"row mb-2\">\r\n\r\n                            <!-- TIPO DE FACTURACION -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"invoiceTypeCode\" class=\"col-sm-auto col-form-label\">Tipo de factura</label>\r\n                                <select formcontrolname=\"invoice_type_code\" [value]=\"dataico?.invoice_type_code\" class=\"form-select\" id=\"invoiceTypeCode\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"FACTURA_VENTA\">FACTURA DE VENTA</option>\r\n                                    <option value=\"FACTURA_EXPORTACION\" >FACTURA DE EXPORTACION</option>\r\n                                    <option value=\"FACTURA_CONTINGENCIA\" >FACTURA DE CONTINGENCIA </option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- RESOLUCION -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"resolutionNumber\">Resolución </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"resolutionNumber\" formControlName=\"resolution_number\" type=\"text\" class=\"form-control\" placeholder=\"Resolución\">\r\n                                    <label for=\"floatingInput\">Resolución </label>\r\n                                </div>\r\n                                <p *ngIf=\"validate('resolution_number')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <!-- PREFIJO -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"prefixNumber\">Prefijo </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"prefixNumber\" formControlName=\"prefix\" type=\"text\" class=\"form-control\" placeholder=\"Prefijo\">\r\n                                    <label for=\"floatingInput\">Prefijo </label>\r\n                                </div>\r\n                                <p *ngIf=\"validate('prefix')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <!-- DESDE -->\r\n                            <div class=\"col-md-6 mb-3 px-md-1\">\r\n                                <label for=\"desdeNumber\">Desde </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"desdeNumber\" formControlName=\"desde\" type=\"number\" min=\"0\" class=\"form-control\" placeholder=\"Desde\">\r\n                                    <label for=\"floatingInput\">Desde </label>\r\n                                </div>\r\n                                <p *ngIf=\"validate('desde')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <!-- HASTA -->\r\n                            <div class=\"col-md-6 mb-3 px-md-1\">\r\n                                <label for=\"hastaNumber\">Hasta </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"hastaNumber\" formControlName=\"hasta\" type=\"number\" min=\"0\" class=\"form-control\" placeholder=\"Hasta\">\r\n                                    <label for=\"floatingInput\">Hasta </label>\r\n                                </div>\r\n                                <p *ngIf=\"validate('hasta')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <!-- FACTURACION FLEXIBLE -->\r\n                            <div class=\"col-md-12\">\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"flexible\" class=\"form-check-input\" type=\"checkbox\" id=\"flexibleInvoice\">\r\n                                    <label class=\"form-check-label\" for=\"flexibleInvoice\">\r\n                                    Facturación Flexible\r\n                                  </label>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- TIPO DE OPERACION -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"operationType\" class=\"col-sm-auto col-form-label\">Tipo de operación</label>\r\n                                <select formControlName=\"operation\" class=\"form-select\" id=\"operationType\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"ESTANDAR\"> ESTANDAR </option>\r\n                                    <option value=\"AIU\"> AIU </option>\r\n                                    <option value=\"MANDATO\"> MANDATO </option>\r\n                                    <option value=\"EXPORTACION\"> EXPORTACION </option>\r\n                                    <option value=\"SS_RECAUDO\"> SS RECAUDO </option>\r\n                                    <option value=\"SS_CUFE\"> SS CUFE </option>\r\n                                    <option value=\"SS_CUDE\"> SS CUDE </option>\r\n                                    <option value=\"SS_POS\"> SS POS </option>\r\n                                    <option value=\"SS_NUM\"> SS NUM </option>\r\n                                    <option value=\"SS_REPORTE\"> SS REPORTE </option>\r\n                                    <option value=\"SS_SIN_APORTE \"> SS SIN APORTE  </option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- PRUEBAS O DESARROLLO -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"env\" class=\"col-sm-auto col-form-label\">Pruebas o Producción</label>\r\n                                <select formControlName=\"env\" class=\"form-select\" id=\"env\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"PRUEBAS\">PRUEBAS</option>\r\n                                    <option value=\"PRODUCCION\" >PRODUCCION </option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- DEPARTAMENTO ** -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"departamentoS\" class=\"col-sm-auto col-form-label\">Departamento</label>\r\n                                <select formControlName=\"department\" class=\"form-select\" id=\"departamentoS\" #departmentSSUpp (change)=\"searchCities(departmentSSUpp.value)\">\r\n                                    <option value=\"\" >Seleccionar Departamento</option>\r\n                                    <option *ngFor=\"let department of departments\" [value]=\"department.codigo\" >{{department.departamento}}</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- CIUDAD ** -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"ciudadS\" class=\"col-sm-auto col-form-label\">Ciudad</label>\r\n                                <select formControlName=\"city\" class=\"form-select\" id=\"ciudadS\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"\" selected>Seleccionar Ciudad</option>\r\n                                    <option *ngFor=\"let city of ListCities\" [value]=\"city.codigo\" >{{city.ciudad}}</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- EMAIL -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"resolutionNumber\">Correo </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"resolutionNumber\" formControlName=\"email\" type=\"text\" class=\"form-control\" placeholder=\"Correo\">\r\n                                    <label for=\"floatingInput\">Correo </label>\r\n                                </div>\r\n                                <p *ngIf=\"validate('email')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <!-- RESOLUCION -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"resolutionNumber\">Telefono </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"resolutionNumber\" formControlName=\"phone\" type=\"text\" class=\"form-control\" placeholder=\"Telefono\">\r\n                                    <label for=\"floatingInput\">Telefono </label>\r\n                                </div>\r\n                                <p *ngIf=\"validate('phone')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <!-- ENVIAR A LA DIAN -->\r\n                            <div class=\"col-md-6\">\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"send_dian\" class=\"form-check-input\" type=\"checkbox\" id=\"sendDian\">\r\n                                    <label class=\"form-check-label\" for=\"sendDian\">\r\n                                    Enviar a la DIAN\r\n                                  </label>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- ENVIAR FACTURA AL CORREO -->\r\n                            <div class=\"col-md-6\">\r\n                                <div class=\"form-check\">\r\n                                    <input formControlName=\"send_email\" class=\"form-check-input\" type=\"checkbox\" id=\"sendEmail\">\r\n                                    <label class=\"form-check-label\" for=\"sendEmail\">\r\n                                    Enviar factura al correo\r\n                                  </label>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n\r\n                        <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary w-100\">Guardar</button>\r\n                    </form>\r\n\r\n                </div>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    ACTUALIZAR CONFIGURACION DE FACTURACION ELECTRONICA\r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    ACTUALIZAR TICKET\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"ticketUpdate\" tabindex=\"-1\" aria-labelledby=\"ticketUpdateModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-lg\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"ticketUpdateModal\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i>Configurar Ticket</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n                <div class=\"d-flex align-items-center justify-content-around flex-wrap gap-2\">\r\n\r\n                    <!-- TICKET -->\r\n                    <div>\r\n\r\n                        <div class=\"d-flex justify-content-center\">\r\n\r\n                            <div class=\"card border-0 pb-4\" [ngStyle]=\"{'width': empresa?.impresora === 58 ? '14rem' : '24rem'}\" style=\"width: 14rem; color:black; background: white;\" id=\"printDiv\">\r\n\r\n                                <!-- EMPRESA -->\r\n                                <div class=\"card-body px-1 mb-2\" style=\"border-bottom: 2px solid black;\">\r\n\r\n                                    <div class=\"d-flex justify-content-center\">\r\n                                        <img *ngIf=\"empresa?.logo\" [src]=\"empresa?.logo | imagen:'logo'\" class=\"mx-auto\" width=\"200px\" alt=\"\">\r\n                                    </div>\r\n\r\n                                    <h4 class=\"card-title mb-0 text-wrap text-center\"> {{ empresa?.name }} </h4>\r\n                                    <p class=\"text-center mb-0\" *ngFor=\"let text of ticketHeader\" style=\"line-height: 1rem;\"> {{ text }} </p>\r\n\r\n                                </div>\r\n                                <!-- EMPRESA -->\r\n\r\n                                <!-- CLIENTE -->\r\n                                <div class=\"pb-2\" style=\"border-bottom: 2px solid black;\">\r\n                                    <h6 class=\"mb-0 text-wrap text-left\">\r\n                                        CLIENTE / RAZON SOCIAL <br>\r\n                                        <small class=\"text-wrap fw-normal\"> Ocasional </small>\r\n                                    </h6>\r\n\r\n                                    <h6 class=\"mb-0 text-wrap text-left\">\r\n                                        CC / NIT <br>\r\n                                        <small class=\"text-wrap fw-normal\"> 00000000 </small>\r\n                                    </h6>\r\n                                    <h6 class=\"mb-0 text-wrap text-left\">\r\n                                        TELEFONO <br>\r\n                                        <small class=\"text-wrap fw-normal\"> {{ '--- ------' }} </small>\r\n                                    </h6>\r\n                                </div>\r\n                                <!-- CLIENTE -->\r\n\r\n                                <!-- FACTURA -->\r\n                                <div class=\"py-2\" style=\"border-bottom: 2px solid black;\">\r\n                                    <h6 *ngIf=\"empresa\" class=\"mb-0 text-wrap text-left\">{{ empresa.type }}: 513</h6>\r\n                                    <h6 class=\"mb-0 text-wrap text-left\">Control: 513</h6>\r\n                                    <small class=\"mb-0 text-wrap text-left\">Fecha: 05/06/2024</small>\r\n                                </div>\r\n                                <!-- FACTURA -->\r\n\r\n                                <table class=\"table table-borderless table-hover table-sm\">\r\n                                    <tbody style=\"color: black;\">\r\n                                        <tr class=\"trHover\">\r\n                                            <td class=\"py-0\" style=\"line-height: 0.8rem\">\r\n                                                <small class=\"text-wrap\"> 1 x {{5000 | number}} </small> <br>\r\n                                                <small class=\"text-wrap\"> Item 1<strong class=\"fw-bolde text-black\">M</strong></small>\r\n                                            </td>\r\n                                            <td class=\"text-end\">\r\n                                                <small> 0% </small>\r\n                                            </td>\r\n                                            <td class=\"py-0\">\r\n                                                <small *ngIf=\"!empresa?.impuesto\" class=\"text-wrap\"> {{ 5000 | number }} </small>\r\n                                            </td>\r\n                                        </tr>\r\n\r\n                                        <tr class=\"\" style=\"border-top: 2px solid black;\">\r\n                                            <td>\r\n                                                <h6 class=\"mb-0 text-wrap text-left\">Sub-total</h6>\r\n                                            </td>\r\n                                            <td colspan=\"2\" class=\"fw-bold\">\r\n                                                <h6 class=\"mb-0 text-wrap text-rigth\"> {{ 5000 | number }} </h6>\r\n                                            </td>\r\n                                        </tr>\r\n\r\n                                        <!-- TOTAL -->\r\n                                        <tr class=\"\" style=\"border-top: 2px solid black;\">\r\n                                            <td>\r\n                                                <h6 class=\"mb-0 text-wrap text-left\">Total</h6>\r\n                                            </td>\r\n                                            <td colspan=\"2\" class=\"fw-bold\">\r\n                                                <h6 class=\"mb-0 text-wrap text-rigth\"> {{ 5000 | number}} </h6>\r\n                                            </td>\r\n                                        </tr>\r\n                                        <!-- TOTAL -->\r\n\r\n                                    </tbody>\r\n                                    <tfoot>\r\n                                        <tr>\r\n                                            <th colspan=\"\">ITEMS</th>\r\n                                            <th> 3 </th>\r\n                                        </tr>\r\n                                    </tfoot>\r\n                                </table>\r\n\r\n                                <hr class=\"my-1\">\r\n\r\n                                <h6 class=\"mb-0\">Nota:</h6>\r\n                                <p class=\"\">- Excelente </p>\r\n\r\n                                <hr class=\"my-1\">\r\n\r\n                                <p class=\"text-center mb-0\" *ngFor=\"let text of ticketfooter\" style=\"line-height: 1rem;\"> {{ text }} </p>\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <!-- CONFIGURACION -->\r\n                    <div class=\"d-flex justify-content-center\">\r\n\r\n                        <div>\r\n\r\n                            <div class=\"card\">\r\n\r\n                                <div class=\"card-body\">\r\n\r\n                                    <div class=\"mb-3\">\r\n                                        <label for=\"ttheader\" class=\"form-label fw-bold\">Header del Ticket</label>\r\n                                        <textarea class=\"form-control\" (keyup)=\"upHeader(tHeader?.value)\" #tHeader id=\"ttheader\" rows=\"5\" [value]=\"empresa?.header\"></textarea>\r\n                                    </div>\r\n\r\n                                    <div class=\"mb-3\">\r\n                                        <label for=\"ttype\" class=\"form-label fw-bold\">Tipo de documento</label>\r\n                                        <input type=\"text\" (keyup)=\"empresa.type = tType.value\" #tType class=\"form-control\" id=\"ttype\" [value]=\"empresa?.type\">\r\n                                    </div>\r\n\r\n                                    <div class=\"mb-3\">\r\n                                        <label for=\"ttfooter\" class=\"form-label fw-bold\">Footer del Ticket</label>\r\n                                        <textarea class=\"form-control\" (keyup)=\"upFooter(tFooter?.value)\" #tFooter id=\"ttfooter\" rows=\"5\" [value]=\"empresa?.footer\"></textarea>\r\n                                    </div>\r\n\r\n\r\n                                    <div class=\"d-grid gap-2 mt-2\">\r\n                                        <button type=\"button\" (click)=\"updateTicket()\" class=\"btn btn-primary\">\r\n                                            Actualizar Ticket\r\n                                        </button>\r\n                                    </div>\r\n\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    ACTUALIZAR TICKET\r\n========================================================================= -->","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\n\r\n// MODEL\r\nimport { Entradas } from 'src/app/models/entradas.model';\r\n\r\n// SERVICES\r\nimport { EntradasService } from 'src/app/services/entradas.service';\r\n\r\n@Component({\r\n  selector: 'app-entradas-salidas',\r\n  templateUrl: './entradas-salidas.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class EntradasSalidasComponent implements OnInit {\r\n\r\n  constructor(  private entradasService: EntradasService) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // CARGAR MOVIMIENTOS\r\n    this.cargarMovimientos();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR LOG PRODUCTOS\r\n  ==================================================================== */\r\n  public desde: number = 0;\r\n  public hasta: number = 50;\r\n  public total: number = 0;\r\n  public query: any = {\r\n    desde: 0,\r\n    hasta: 50,\r\n    sort: {fecha: -1}\r\n  }\r\n\r\n  cargarMovimientos(){\r\n\r\n    this.cargando = true;\r\n    this.totalEntrada = 0;\r\n    this.totalSalida = 0;\r\n    \r\n\r\n    this.entradasService.loadMovimientosQuery(this.query)\r\n        .subscribe( ({movimientos, total}) => {\r\n\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (movimientos.length === 0) {\r\n            this.sinResultados = false;\r\n            this.cargando = false;\r\n            this.movimientos = [];\r\n            this.resultado = 0;\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          \r\n          this.total = total;\r\n          this.movimientos = movimientos;\r\n          this.movimientosTemp = movimientos;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n          this.sinResultados = true;          \r\n\r\n          for (const log of movimientos) {\r\n\r\n            if (log.type === 'entrada') {\r\n              \r\n              this.totalEntrada += log.monto || 0;\r\n            }else{\r\n              \r\n              this.totalSalida += log.monto || 0;\r\n            }\r\n\r\n          }\r\n\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR POR FECHA\r\n  ==================================================================== */\r\n  public cargando: boolean = true;\r\n  public totalEntrada: number = 0;\r\n  public totalSalida: number = 0;\r\n  public resultado: number = 0;\r\n  public sinResultados: boolean = false;\r\n  public movimientos: Entradas[] = [];\r\n  public movimientosTemp: Entradas[] = [];\r\n\r\n  buscarPor(inicial:Date, final: Date){\r\n\r\n    if (inicial === null && final === null || !inicial || !final) {\r\n      return;\r\n    }\r\n\r\n    // SET HOURS      \r\n    inicial = new Date(inicial);      \r\n    let initial = new Date(inicial.getTime() + 1000 * 60 * 60 * 5);\r\n\r\n    final = new Date(final);\r\n    let end = new Date(final.getTime() + 1000 * 60 * 60 * 5);      \r\n    // SET HOURS \r\n\r\n    let url = document.URL.split(':');\r\n    if (url[0] === 'https') {\r\n      initial = new Date(inicial.getTime() + 1000 * 60 * 60 - 7200000); \r\n      end = new Date(final.getTime() + 1000 * 60 * 60 - 3600000);        \r\n    }\r\n\r\n    this.query.$and = [{ fecha: { $gte: new Date(initial), $lt: new Date(end) } }];\r\n\r\n    this.cargarMovimientos();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CAMBIAR PAGINA\r\n  ==================================================================== */\r\n  @ViewChild('mostrar') mostrar!: ElementRef;\r\n  cambiarPagina (valor: number){\r\n    \r\n    this.query.desde += valor;\r\n\r\n    if (this.query.desde < 0) {\r\n      this.query.desde = 0;\r\n    }\r\n    \r\n    this.cargarMovimientos();\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   CHANGE LIMITE\r\n  ==================================================================== */\r\n  limiteChange( cantidad: any ){  \r\n\r\n    this.query.hasta = Number(cantidad);    \r\n    this.cargarMovimientos();\r\n\r\n  }\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Movimientos</h5>\r\n    </div>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n<div class=\"container-fluid my-4\">\r\n\r\n    <div class=\"col-12\">\r\n\r\n        <div class=\"d-flex flex-wrap gap-2\">\r\n\r\n            <div class=\"col-xl-3 col-md-3 mb-4\">\r\n                <!-- Dashboard info widget 1-->\r\n                <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-primary h-100 bg-white\">\r\n                    <div class=\"card-body\">\r\n                        <div class=\"d-flex align-items-center flex-wrap\">\r\n                            <div class=\"flex-grow-1\">\r\n                                <div class=\"small font-weight-bold text-primary mb-1\">Entradas</div>\r\n                                <div class=\"h5\"> {{ totalEntrada }} </div>\r\n                                <div class=\"text-xs font-weight-bold text-success d-inline-flex align-items-center\">\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-trending-up mr-1\"><polyline points=\"23 6 13.5 15.5 8.5 10.5 1 18\"></polyline><polyline points=\"17 6 23 6 23 12\"></polyline></svg>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"ms-2\">\r\n                                <i class=\"bi bi-receipt text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"col-xl-3 col-md-3 mb-4\">\r\n                <!-- Dashboard info widget 1-->\r\n                <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-success h-100 bg-white\">\r\n                    <div class=\"card-body\">\r\n                        <div class=\"d-flex align-items-center flex-wrap\">\r\n                            <div class=\"flex-grow-1\">\r\n                                <div class=\"small font-weight-bold text-primary mb-1\">Salidas</div>\r\n                                <div class=\"h5\"> {{ totalSalida }} </div>\r\n                                <div class=\"text-xs font-weight-bold text-success d-inline-flex align-items-center\">\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-trending-up mr-1\"><polyline points=\"23 6 13.5 15.5 8.5 10.5 1 18\"></polyline><polyline points=\"17 6 23 6 23 12\"></polyline></svg>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"ms-2\">\r\n                                <i class=\"bi bi-receipt text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n\r\n\r\n    <div class=\"row mb-5\">\r\n\r\n        <!-- FILTRO -->\r\n        <div class=\"col-12 col-md-3 col-xl-3 mt-2\">\r\n            <div class=\"p-3 rounded bg-white\">\r\n\r\n                <h4 class=\"mb-0 text-muted\">Filtros</h4>\r\n\r\n\r\n                <!-- DESDE -->\r\n                <div class=\"mt-4\">\r\n                    <label class=\"\" for=\"\">Desde</label>\r\n                    <input type=\"datetime-local\" class=\"form-control\" (change)=\"initial.value\" #initial>\r\n                </div>\r\n                <!-- DESDE -->\r\n\r\n                <!-- HASTA -->\r\n                <div class=\"mt-2\">\r\n                    <label class=\"\" for=\"\">Hasta</label>\r\n                    <input type=\"datetime-local\" class=\"form-control\" (change)=\"end.value\" #end>\r\n                </div>\r\n                <!-- HASTA -->\r\n\r\n                <button type=\"button\" class=\"btn btn-outline-primary btn-sm btn-block mt-4\" (click)=\"buscarPor(initial.value, end.value)\"> \r\n                    <i class=\"bi-search\"></i> Buscar \r\n                </button>\r\n\r\n            </div>\r\n        </div>\r\n        <!-- FILTRO -->\r\n\r\n        <!-- TABLE CLIENTS -->\r\n        <div class=\"shadow p-3 rounded bg-white col-12 col-md-9 col-xl-9 mt-2\">\r\n\r\n            <!-- CARGANDO -->\r\n            <div *ngIf=\"cargando\">\r\n                <div class=\"text-center p-4\">\r\n                    <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                        <span class=\"visually-hidden\">Loading...</span>\r\n                    </div>\r\n                </div>\r\n                <small class=\"text-muted\">cargando...</small>\r\n            </div>\r\n            <!-- CARGANDO -->\r\n\r\n\r\n\r\n            <div *ngIf=\"!cargando\">\r\n\r\n                <!-- <div>\r\n                    <div class=\"form-floating mb-2\">\r\n                        <span class=\"position-absolute top-50 start-90 translate-middle\"><i class=\" bi-search \" style=\"font-size: 1rem \"></i></span>\r\n                        <input type=\"text\" class=\"form-control\" id=\"floatingInput2\" placeholder=\"Buscar Entrada o Salida\" (keyup)=\"buscar(search.value)\" #search>\r\n                        <label for=\"floatingInput2 \">Buscar Entrada o Salida</label>\r\n                    </div>\r\n                </div> -->\r\n\r\n                <!-- BTN CREAR CAJA -->\r\n                <!-- <div class=\"d-flex justify-content-end\">\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"col pe-0\">Mostrar:</div>\r\n                        <div class=\"col\">\r\n                            <select class=\"form-select form-select-sm\" (change)=\"cambiarLimite(limit.value)\" [value]=\"limite\" aria-label=\".form-select-sm example\" #limit>\r\n                        <option value=\"10\">10</option>\r\n                        <option value=\"25\">25</option>\r\n                        <option value=\"50\">50</option>\r\n                        <option value=\"100\">100</option>\r\n                    </select>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n\r\n                </div> -->\r\n                <!-- BTN CREAR CAJA -->\r\n\r\n                <div class=\"d-flex justify-content-end flex-wrap\">\r\n\r\n                    <div>\r\n                        <label for=\"mostrar\" class=\"me-2\">Mostrar: </label>\r\n                        <select name=\"\" id=\"\" [value]=\"query.hasta\" #mostrar (change)=\"limiteChange(mostrar.value)\">\r\n                            <option value=\"10\">10</option>\r\n                            <option value=\"25\">25</option>\r\n                            <option value=\"50\">50</option>\r\n                            <option value=\"100\">100</option>\r\n                            <option value=\"250\">250</option>\r\n                            <option value=\"500\">500</option>\r\n                            <option value=\"1000\">1000</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <div class=\"table-responsive \">\r\n                    <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                        <thead class=\"border-bottom \">\r\n                            <tr>\r\n                                <th class=\"text-muted \" scope=\"col \">#</th>\r\n                                <th class=\"text-muted \" scope=\"col \" colspan=\"2\">Descripción</th>\r\n                                <th class=\"text-muted \" scope=\"col \">Monto</th>\r\n                                <th class=\"text-muted \" scope=\"col \">Tipo</th>\r\n                                <th class=\"text-muted \" scope=\"col \">Usuario</th>\r\n                                <th class=\"text-muted \" scope=\"col \">fecha</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr *ngIf=\"!sinResultados\" class=\"text-center \">\r\n                                <th colspan=\"13\" class=\"py-4\">\r\n                                    <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                                </th>\r\n                            </tr>\r\n                            <tr class=\"trHover\" *ngFor=\"let movimiento of movimientos; let i = index\">\r\n                                <th scope=\"row \">{{ i + 1}}</th>\r\n                                <td colspan=\"2\">{{ movimiento.descripcion }}</td>\r\n                                <td>{{ movimiento.monto }}</td>\r\n                                <td>\r\n                                    <span *ngIf=\"movimiento.type === 'salida'\" class=\"badge rounded-pill bg-warning text-white-75\">{{ movimiento.type }}</span>\r\n                                    <span *ngIf=\"movimiento.type === 'entrada'\" class=\"badge rounded-pill bg-success text-white-75\">{{ movimiento.type }}</span>\r\n\r\n                                </td>\r\n\r\n                                <td>{{ movimiento.user.name }}</td>\r\n                                <td>{{ movimiento.fecha | date:'medium' }}</td>\r\n\r\n\r\n                            </tr>\r\n                        </tbody>\r\n\r\n                    </table>\r\n\r\n                </div>\r\n\r\n                <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                <div class=\"row\">\r\n                    <div class=\"col col-md-4\">\r\n                        <small class=\"text-muted\">Total de movimientos: ({{total}})</small>\r\n                        <small *ngIf=\"resultado !== 0\" class=\"text-muted\"> - (Resultados: {{ resultado }})</small>\r\n                        <!-- <small *ngIf=\"desde !== 0\" class=\"text-muted\"> - (Desde el: {{ desde + 1}} Hasta el: {{ desde + productosLog.length }})</small> -->\r\n                    </div>\r\n\r\n                    <div class=\"col d-flex justify-content-end\">\r\n                        <button [disabled]=\"query.desde === 0\" type=\"button\" (click)=\"cambiarPagina((query.hasta * -1))\" class=\"btn btn-sm btn-dark btnW waves-effect waves-light px-3\">Anterior</button>\r\n                        <button [disabled]=\"query.hasta  > movimientos.length || query.hasta > total\" type=\"button\" (click)=\"cambiarPagina(query.hasta)\" class=\"btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2\">Siguiente</button>\r\n                    </div>\r\n                </div>\r\n                <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n            </div>\r\n        </div>\r\n        <!-- TABLE CLIENTS -->\r\n\r\n    </div>\r\n\r\n\r\n\r\n</div>\r\n\r\n<!-- =========================================================================\r\nBODY \r\n========================================================================= -->","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\n\r\n// MODELS\r\nimport { Impuesto } from 'src/app/models/impuesto.model';\r\n\r\n// SERVICES\r\nimport { ImpuestosService } from 'src/app/services/impuestos.service';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-impuestos',\r\n  templateUrl: './impuestos.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class ImpuestosComponent implements OnInit {\r\n\r\n  \r\n\r\n  public resultado: number = 0;\r\n  public desde: number = 0;\r\n  public cargando: boolean = true;\r\n  public sinResultados: boolean = true;\r\n\r\n  public btnAtras: string = '';\r\n  public btnAdelante: string = '';\r\n\r\n  constructor(  private impuestosService: ImpuestosService,\r\n                private fb: FormBuilder) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // CARGAR IMPUESTOS\r\n    this.cargarImpuestos();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR MESAS\r\n  ==================================================================== */\r\n  public listaImpuesto: Impuesto[] = [];\r\n  public listaImpuestoTemp: Impuesto[] = [];\r\n  public totalImpuesto: number = 0;\r\n  cargarImpuestos(){\r\n\r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n\r\n    this.impuestosService.loadImpuestos()\r\n        .subscribe(({ total, taxes }) => {\r\n\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (taxes.length === 0) {\r\n            this.sinResultados = false;\r\n            this.cargando = false;\r\n            this.listaImpuesto = [];\r\n            this.resultado = 0;\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n\r\n          this.totalImpuesto = total;\r\n          this.listaImpuesto = taxes;\r\n          this.listaImpuestoTemp = taxes;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n\r\n        });\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREAR IMPUESTO\r\n  ==================================================================== */\r\n  public formSubmitted:boolean = false;\r\n  public newImpuestoForm = this.fb.group({\r\n    name: ['', [Validators.required]],\r\n    valor: [0, [Validators.required, Validators.min(0)]],\r\n    taxcategory: 'IVA'\r\n  })\r\n\r\n  crearImpuesto(){\r\n\r\n    this.formSubmitted = true;\r\n    \r\n    if (this.newImpuestoForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    this.impuestosService.createImpuesto(this.newImpuestoForm.value)\r\n        .subscribe( ({tax}) => {\r\n\r\n          this.cargarImpuestos();\r\n          Swal.fire('Estupendo', 'Se ha creado el impuesto exitosamente', 'success');\r\n\r\n      }, (err) => {\r\n        console.log(err);\r\n        Swal.fire('Error', err.error.msg, 'error');\r\n        \r\n      });\r\n\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   VALIDAR CAMPOS\r\n  ==================================================================== */\r\n  campoValido(campo: string): boolean{\r\n\r\n    if ( this.newImpuestoForm.get(campo).invalid &&  this.formSubmitted) {      \r\n      return true;      \r\n    } else{      \r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SETEAR FORMULARIO DE ACTUALIZACION\r\n  ==================================================================== */\r\n  setFormUpdate(impuesto: Impuesto){\r\n\r\n    this.updateImpuestoForm.reset({\r\n      id:           impuesto.taxid,\r\n      name:         impuesto.name,\r\n      valor:        impuesto.valor,\r\n      taxcategory:  impuesto.taxcategory || '',\r\n    })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   EDITAR IMPUESTO\r\n  ==================================================================== */\r\n  public formSubmittedUpdate:boolean = false;\r\n  public updateImpuestoForm = this.fb.group({\r\n    id: '',\r\n    name: ['', [Validators.required]],\r\n    valor: [0, [Validators.required, Validators.min(0)]],\r\n    taxcategory: 'IVA'\r\n  });\r\n\r\n  updateTax(){\r\n\r\n    this.formSubmittedUpdate = true;\r\n\r\n    if (this.updateImpuestoForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    if (this.updateImpuestoForm.value.taxcategory === '') {\r\n      Swal.fire('Atención', 'Debes asignar una categoria al impuesto', 'info');\r\n      return;\r\n    }\r\n\r\n    this.impuestosService.updateImpuesto(this.updateImpuestoForm.value, this.updateImpuestoForm.value.id)\r\n        .subscribe( ({tax}) => {\r\n\r\n          this.formSubmittedUpdate = false;\r\n          this.cargarImpuestos();\r\n          \r\n\r\n        },(err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   VALIDAR CAMPOS\r\n  ==================================================================== */\r\n  validarUpdate(campo: string): boolean{\r\n\r\n    if ( this.updateImpuestoForm.get(campo).invalid &&  this.formSubmittedUpdate) {      \r\n      return true;      \r\n    } else{      \r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Configuraciones / Impuestos</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"ticket1-tab\"><i class=\"bi-gear\" style=\"font-size: 1rem\"></i> Tablero Principal</a>\r\n        </li>\r\n\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<div class=\"container-fluid my-4\">\r\n\r\n    <!-- TABLE CLIENTS -->\r\n    <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n        <!-- CARGANDO -->\r\n        <div *ngIf=\"cargando\">\r\n            <div class=\"text-center p-4\">\r\n                <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                    <span class=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n            </div>\r\n            <small class=\"text-muted\">cargando...</small>\r\n        </div>\r\n        <!-- CARGANDO -->\r\n\r\n        <div *ngIf=\"!cargando\">\r\n\r\n            <!-- BTN CREAR IMPUESTO -->\r\n            <div class=\"d-flex justify-content-end\">\r\n                <button type=\"button\" class=\"btn btn-sm btn-primary btnW waves-effect waves-ligth\" data-bs-toggle=\"modal\" data-bs-target=\"#nuevoImpuesto\">Crear</button>\r\n            </div>\r\n            <!-- BTN CREAR IMPUESTO -->\r\n\r\n            <div class=\"table-responsive \">\r\n                <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                    <thead class=\"border-bottom \">\r\n                        <tr>\r\n                            <th class=\"text-muted \" scope=\"col \">Nombre</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Valor</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Categoria</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Estado</th>\r\n                            <th class=\"text-muted w100 \" scope=\"col \">Acciones</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n\r\n                        <tr *ngIf=\"!sinResultados\" class=\"text-center \">\r\n                            <th colspan=\"10\" class=\"py-4\">\r\n                                <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                            </th>\r\n                        </tr>\r\n\r\n                        <tr class=\"trHover\" *ngFor=\"let impuesto of listaImpuesto; let i = index\">\r\n                            <td>{{ impuesto.name }}</td>\r\n                            <td>{{ impuesto.valor }}%</td>\r\n                            <td>{{ impuesto.taxcategory || 'No definida' }}</td>\r\n                            <td>\r\n                                <span *ngIf=\"impuesto.status\" class=\"badge rounded-pill bg-success text-white-75\">Activo</span>\r\n                                <span *ngIf=\"!impuesto.status\" class=\"badge rounded-pill bg-danger text-white-75\">Desactivo</span>\r\n                            </td>\r\n                            <td class=\"text-center\">\r\n                                <button (click)=\"setFormUpdate(impuesto)\" type=\"button\" class=\"btn btn-link p-1 text-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#editarImpuesto\">\r\n                                    <i class=\"bi bi-box-arrow-up-right\"></i>\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n\r\n                </table>\r\n\r\n            </div>\r\n\r\n            <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n            <div class=\"row\">\r\n                <div class=\"col col-md-4\">\r\n                    <small class=\"text-muted\">Total de Impuestos: ({{totalImpuesto}})</small>\r\n                    <small *ngIf=\"resultado !== 0\" class=\"text-muted\"> - (Resultados: {{ resultado }})</small>\r\n                    <small *ngIf=\"desde !== 0\" class=\"text-muted\"> - (Desde el: {{ desde + 1}} Hasta el: {{ desde + listaImpuesto.length }})</small>\r\n                </div>\r\n            </div>\r\n            <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n        </div>\r\n    </div>\r\n    <!-- TABLE CLIENTS -->\r\n\r\n\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    NUEVO IMPUESTO \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"nuevoImpuesto\" tabindex=\"-1\" aria-labelledby=\"nuevoImpuestoModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"nuevoImpuestoModal\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Crear Impuesto Nuevo</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form autocomplete=\"off\" [formGroup]=\"newImpuestoForm\" (ngSubmit)=\"crearImpuesto()\">\r\n\r\n                    <!-- =======================================================================\r\n                        Informacion del Caja\r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Informaciòn</h5>\r\n\r\n\r\n                    <div class=\"row mb-2\">\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n                            <label for=\"\">Nombre</label>\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Numero de mesa\">\r\n                                <label for=\"floatingInput\">Nombre</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row mb-2\">\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n                            <label for=\"\">Valor</label>\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"valor\" min=\"0\" type=\"number\" class=\"form-control text-capitalize\" placeholder=\"Numero de mesa\">\r\n                                <label for=\"floatingInput\">Valor</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row mb-2\">\r\n                        <div class=\"col-md-12 mb-3 px-md-1\">\r\n                            <label for=\"indentityType\" class=\"col-sm-auto col-form-label\">Categoria</label>\r\n                            <select formControlName=\"taxcategory\" class=\"form-select\" id=\"indentityType\" aria-label=\"Floating label select example\">\r\n                                <option value=\"IVA\" selected>IVA</option>\r\n                                <option value=\"IMP_CONSUMO\" selected>Impuesto al Consumo</option>\r\n                                <option value=\"COMBUSTIBLES_SOBRETASA\" > Combustibles Sobretasa</option>\r\n                                <option value=\"IMP_BOLSA_PLASTICA\" >Impuesto Bolsa Plastica</option>\r\n                                <option value=\"IMP_CONSUMO_LICOR\" >Impuesto Consumo Licor</option>\r\n                                <option value=\"CARBONO\" >CARBONO</option>\r\n                                <option value=\"TIMBRE\" >TIMBRE</option>\r\n                                <option value=\"SORDICOM_MINORISTAS\" >SORDICOM MINORISTAS</option>\r\n                                <option value=\"ZZ\" >ZZ</option>\r\n                                <option value=\"IMP_CONSUMO_DEPARTAMENTAL\" >Impuesto Consumo Departamental</option>\r\n                                <option value=\"COMBUSTIBLES_NACIONAL\" >COMBUSTIBLES NACIONAL</option>\r\n                                <option value=\"ICA\" >ICA</option>\r\n                                <option value=\"HORTICULTURA\" >HORTICULTURA</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"text-danger mb-2\">\r\n                            <p *ngIf=\"campoValido('name')\" class=\"mb-1 animated fadeIn\">- El nombre del impuesto es obligatorio</p>\r\n                            <p *ngIf=\"campoValido('valor')\" class=\"mb-1 animated fadeIn\">- El valor es obligatorio</p>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">crear</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    NUEVO IMPUESTO \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    EDITAR IMPUESTO \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"editarImpuesto\" tabindex=\"-1\" aria-labelledby=\"editarImpuestoModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"editarImpuestoModal\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Crear Impuesto Nuevo</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form autocomplete=\"off\" [formGroup]=\"updateImpuestoForm\" (ngSubmit)=\"updateTax()\">\r\n\r\n                    <!-- =======================================================================\r\n                        Informacion del Caja\r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Informaciòn</h5>\r\n\r\n\r\n                    <div class=\"row mb-2\">\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n                            <label for=\"\">Nombre</label>\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Numero de mesa\">\r\n                                <label for=\"floatingInput\">Nombre</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row mb-2\">\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n                            <label for=\"\">Valor</label>\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"valor\" min=\"0\" type=\"number\" class=\"form-control text-capitalize\" placeholder=\"Numero de mesa\">\r\n                                <label for=\"floatingInput\">Valor</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row mb-2\">\r\n                        <div class=\"col-md-12 mb-3 px-md-1\">\r\n                            <label for=\"categoriaTax\" class=\"col-sm-auto col-form-label\">Categoria</label>\r\n                            <select formControlName=\"taxcategory\" class=\"form-select\" id=\"categoriaTax\" aria-label=\"Floating label select example\">\r\n                                <option value=\"\">Seleccionar Categoria</option>\r\n                                <option value=\"IVA\">IVA</option>\r\n                                <option value=\"IMP_CONSUMO\" selected>Impuesto al Consumo</option>\r\n                                <option value=\"COMBUSTIBLES_SOBRETASA\" > Combustibles Sobretasa</option>\r\n                                <option value=\"IMP_BOLSA_PLASTICA\" >Impuesto Bolsa Plastica</option>\r\n                                <option value=\"IMP_CONSUMO_LICOR\" >Impuesto Consumo Licor</option>\r\n                                <option value=\"CARBONO\" >CARBONO</option>\r\n                                <option value=\"TIMBRE\" >TIMBRE</option>\r\n                                <option value=\"SORDICOM_MINORISTAS\" >SORDICOM MINORISTAS</option>\r\n                                <option value=\"ZZ\" >ZZ</option>\r\n                                <option value=\"IMP_CONSUMO_DEPARTAMENTAL\" >Impuesto Consumo Departamental</option>\r\n                                <option value=\"COMBUSTIBLES_NACIONAL\" >COMBUSTIBLES NACIONAL</option>\r\n                                <option value=\"ICA\" >ICA</option>\r\n                                <option value=\"HORTICULTURA\" >HORTICULTURA</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"text-danger mb-2\">\r\n                            <p *ngIf=\"validarUpdate('name')\" class=\"mb-1 animated fadeIn\">- El nombre del impuesto es obligatorio</p>\r\n                            <p *ngIf=\"validarUpdate('valor')\" class=\"mb-1 animated fadeIn\">- El valor es obligatorio</p>\r\n                            <p *ngIf=\"validarUpdate('taxcategory')\" class=\"mb-1 animated fadeIn\">- La categoria es obligatoria</p>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Actualizar</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    EDITAR IMPUESTO \r\n========================================================================= -->","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport Swal from 'sweetalert2';\r\n\r\n// MODELS\r\nimport { Mesa } from 'src/app/models/mesas.model';\r\n\r\n// SERVICES\r\nimport { SearchService } from '../../../services/search.service';\r\nimport { MesasService } from '../../../services/mesas.service';\r\nimport { UserService } from '../../../services/user.service';\r\nimport { User } from '../../../models/user.model';\r\n\r\nimport { environment } from '../../../../environments/environment';\r\nimport { PisosService } from 'src/app/services/pisos.service';\r\nimport { Piso } from 'src/app/models/pisos.model';\r\nconst base_url = environment.base_url;\r\n\r\n@Component({\r\n  selector: 'app-mesas',\r\n  templateUrl: './mesas.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class MesasComponent implements OnInit {\r\n\r\n  public listaMesas: Mesa[] = [];\r\n  public listaMesasTemp: Mesa[] = [];\r\n  public totalMesas: number = 0;\r\n\r\n  public resultado: number = 0;\r\n  public desde: number = 0;\r\n  public cargando: boolean = true;\r\n  public sinResultados: boolean = true;\r\n\r\n  public btnAtras: string = '';\r\n  public btnAdelante: string = '';\r\n\r\n  constructor(  private mesasService: MesasService,\r\n                private searchService: SearchService,\r\n                private fb: FormBuilder,\r\n                private pisosService: PisosService,\r\n                private userService: UserService ) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // LOAD PISOS\r\n    this.loadPisos();\r\n\r\n    //  CARGAR MESEROS\r\n    this.cargarMeseros();\r\n\r\n    //  CARGAR MESAS\r\n    this.cargarMesas();    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR MESA\r\n  ==================================================================== */\r\n  buscar(termino){\r\n    \r\n    this.sinResultados = true;\r\n    if (termino.length === 0) {\r\n      this.listaMesas = this.listaMesasTemp;\r\n      this.resultado = 0;\r\n      return;\r\n    }else{\r\n\r\n      this.sinResultados = true;\r\n      this.searchService.search('mesa', termino)\r\n          .subscribe(({total, resultados}) => {\r\n\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            if (resultados.length === 0) {\r\n              this.sinResultados = false;\r\n              this.listaMesas = [];\r\n              this.resultado = 0;\r\n              return;                \r\n            }\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n\r\n            this.totalMesas = total;\r\n            this.listaMesas = resultados; \r\n            this.resultado = resultados.length; \r\n\r\n          });\r\n          \r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR MESAS\r\n  ==================================================================== */\r\n  cargarMesas(){\r\n\r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n\r\n    this.mesasService.loadMesas(this.desde)\r\n        .subscribe(({ total, mesas }) => {\r\n\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (mesas.length === 0) {\r\n            this.sinResultados = false;\r\n            this.cargando = false;\r\n            this.listaMesas = [];\r\n            this.resultado = 0;\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n\r\n          this.totalMesas = total;\r\n          this.listaMesas = mesas;\r\n          this.listaMesasTemp = mesas;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n\r\n          // BOTONOS DE ADELANTE Y ATRAS          \r\n          if (this.desde === 0 && this.totalMesas > 10) {\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = '';\r\n          }else if(this.desde === 0 && this.totalMesas < 11){\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n          }else if(this.desde > this.listaMesas.length){\r\n            this.btnAtras = '';\r\n            this.btnAdelante = 'disabled';\r\n          }else if((this.desde + 10) >= this.totalMesas){\r\n            this.btnAtras = '';\r\n            this.btnAdelante = 'disabled';\r\n          }else{\r\n            this.btnAtras = '';\r\n            this.btnAdelante = '';\r\n          }   \r\n          // BOTONOS DE ADELANTE Y ATRAS  \r\n\r\n        });\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREAR MESA\r\n  ==================================================================== */\r\n  public formSubmitted:boolean = false;\r\n  public newMesaForm = this.fb.group({\r\n    name: ['', [Validators.required, Validators.minLength(1), Validators.min(1)]],\r\n    mesero: [0, [Validators.required, Validators.minLength(2)]],\r\n    piso: null,\r\n    img: ['ticket.svg']\r\n  });\r\n\r\n  crearMesa(){\r\n    \r\n    this.formSubmitted = true;\r\n    \r\n    if (this.newMesaForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    // COMPROBAR SI SELECCIONO UN MESERO\r\n    if (this.newMesaForm.value.mesero === 0) {\r\n      Swal.fire('Error', 'Debes de asignar un usuario para crear el item', 'error');\r\n      return;\r\n    }\r\n\r\n    if (this.newMesaForm.value.piso === 'null') {\r\n      this.newMesaForm.value.piso = null;\r\n    }\r\n\r\n    this.mesasService.createMesa(this.newMesaForm.value)\r\n        .subscribe( (resp:{ok: boolean, caja: Mesa}) => {\r\n          \r\n          this.formSubmitted = false;\r\n          this.cargarMesas();\r\n          this.newMesaForm.reset();\r\n          Swal.fire('Estupendo', 'Se ha creado la mesa exitosamente', 'success');\r\n          \r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n  }\r\n  \r\n  /** ================================================================\r\n   *   VALIDAR CAMPOS\r\n  ==================================================================== */\r\n  campoValido(campo: string): boolean{\r\n\r\n    if ( this.newMesaForm.get(campo).invalid &&  this.formSubmitted) {      \r\n      return true;      \r\n    } else{\r\n      \r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   INFORMACION MESA\r\n  ==================================================================== */\r\n  public formSubmittedUp:boolean = false;\r\n  public upMesaForm = this.fb.group({\r\n    name: ['', [Validators.required, Validators.minLength(1), Validators.min(1)]],\r\n    mesero: ['', [Validators.required, Validators.minLength(1), Validators.min(1)]],\r\n    id: ['', [Validators.required, Validators.minLength(3)]],\r\n    img: [''],\r\n    ruta: [''],\r\n    piso: [''],\r\n  });\r\n\r\n  informacionMesa( mesa: Mesa ){\r\n\r\n    this.upMesaForm.setValue({\r\n      name: mesa.name,\r\n      mesero: mesa.mesero._id,\r\n      id: mesa.mid,\r\n      ruta: `${base_url}/menu/${mesa.mid}`,\r\n      img: mesa.img || 'ticket.svg',\r\n      piso: mesa.piso?._id || 'null'\r\n    });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ACTUALIZAR MESA\r\n  ==================================================================== */\r\n  actualizarMesa(){\r\n\r\n    this.formSubmittedUp = true;\r\n    \r\n    if (this.upMesaForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    if (this.upMesaForm.value.piso === 'null') {\r\n      this.upMesaForm.value.piso = null;\r\n    }\r\n\r\n    this.mesasService.updateMesa(this.upMesaForm.value, this.upMesaForm.value.id)\r\n        .subscribe((resp:{ok: boolean, mesa: Mesa}) => {          \r\n\r\n          this.formSubmittedUp = false;\r\n          this.cargarMesas();\r\n          Swal.fire('Estupendo', 'Se ha actualizado la mesa exitosamente', 'success');\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   VALIDAR CAMPOS\r\n  ==================================================================== */\r\n  campoValidoUpdate(campo: string): boolean{\r\n\r\n    if ( this.upMesaForm.get(campo).invalid &&  this.formSubmittedUp) {      \r\n      return true;      \r\n    } else{\r\n      \r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n\r\n  /** ================================================================\r\n   *   CARGAR MESEROS\r\n  ==================================================================== */\r\n  public meseros: User[] = [];\r\n  cargarMeseros(){\r\n\r\n    this.userService.loadUsers()\r\n    .subscribe( ({users}) => {\r\n      \r\n      this.meseros = users;          \r\n      \r\n    }, (err) => { Swal.fire('Error', 'No se pueden cargar los meseros', 'error') });\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR PISOS\r\n  ==================================================================== */\r\n  public pisos: Piso[] = [];\r\n  public queryP: any = {\r\n    desde: 0,\r\n    hasta: 50,\r\n    sort: {}\r\n  }\r\n  loadPisos(){\r\n\r\n    this.pisosService.loadPisos(this.queryP)\r\n        .subscribe( ({pisos}) => {\r\n\r\n          this.pisos = pisos;\r\n\r\n        }, (err) => {\r\n          console.log(err.error);\r\n          Swal.fire('Error', err.error.msg);\r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ACTIVAR O DESACTIVAR MESA\r\n  ==================================================================== */\r\n  changeStatus(mesa: Mesa){\r\n\r\n    if (mesa.status) {\r\n      mesa.status = false;\r\n    }else{\r\n      mesa.status = true;\r\n    }\r\n      \r\n    Swal.fire({\r\n      title: \"Estas seguro?\",\r\n      text: `de ${ mesa.status? 'Activar': 'Desactivar'}, este ticket.`,\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#3085d6\",\r\n      cancelButtonColor: \"#d33\",\r\n      confirmButtonText: `Si, ${ mesa.status? 'Activar': 'Desactivar'}`,\r\n      cancelButtonText: 'Cancelar'\r\n    }).then((result) => {\r\n      \r\n      this.mesasService.updateMesa({status: mesa.status}, mesa.mid)\r\n          .subscribe( (resp) => {\r\n\r\n            console.log(resp);\r\n            \r\n\r\n          }, (err) => {\r\n            console.log(err);\r\n            Swal.fire('Error', err.error.msg, 'error');            \r\n          })\r\n\r\n    });\r\n\r\n    \r\n\r\n  }\r\n\r\n\r\n\r\n  // FIN DE LA CLASE \r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Configuraciones / Tickets - Mesas - Barras</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"ticket1-tab\" data-bs-toggle=\"tab\" href=\"#ticket1\" role=\"tab\" aria-controls=\"ticket1\" aria-selected=\"true\"><i class=\"bi-gear\" style=\"font-size: 1rem\"></i> Tablero Principal</a>\r\n        </li>\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark\" id=\"pisos-tab\"  data-bs-toggle=\"tab\" href=\"#pisos\" role=\"tab\" aria-controls=\"pisos\" aria-selected=\"true\"><i class=\"bi-grid\" style=\"font-size: 1rem\"></i> Pisos</a>\r\n        </li>\r\n\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<div class=\"container-fluid my-4\">\r\n\r\n    <div class=\"tab-content mt-4 bg-light2\" id=\"myTabContent\">\r\n\r\n        <!-- TABLE CLIENTS -->\r\n        <div class=\"tab-pane fade show active\" id=\"ticket1\" role=\"tabpanel\" aria-labelledby=\"ticket1-tab\">\r\n            <div class=\"shadow-lg p-3 rounded bg-white\">\r\n\r\n                <!-- CARGANDO -->\r\n                <div *ngIf=\"cargando\">\r\n                    <div class=\"text-center p-4\">\r\n                        <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                            <span class=\"visually-hidden\">Loading...</span>\r\n                        </div>\r\n                    </div>\r\n                    <small class=\"text-muted\">cargando...</small>\r\n                </div>\r\n                <!-- CARGANDO -->\r\n\r\n                <div *ngIf=\"!cargando\">\r\n                    <div>\r\n                        <div class=\"form-floating mb-2\">\r\n                            <span class=\"position-absolute top-50 start-90 translate-middle\"><i class=\" bi-search \" style=\"font-size: 1rem \"></i></span>\r\n                            <input type=\"text\" class=\"form-control\" id=\"floatingInput2\" placeholder=\"Buscar\" (keyup)=\"buscar(search.value)\" #search>\r\n                            <label for=\"floatingInput2 \">Buscar</label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- BTN CREAR MESA -->\r\n                    <div class=\"d-flex justify-content-end\">\r\n                        <button type=\"button\" class=\"btn btn-sm btn-primary btnW waves-effect waves-ligth\" data-bs-toggle=\"modal\" data-bs-target=\"#nuevaMesa\">Crear</button>\r\n                    </div>\r\n                    <!-- BTN CREAR MESA -->\r\n\r\n                    <div class=\"table-responsive \">\r\n                        <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                            <thead class=\"border-bottom \">\r\n                                <tr>\r\n                                    <th class=\"text-muted \" scope=\"col \" colspan=\"2\">Mesa</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Disponibilidad</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Activa</th>\r\n                                    <th class=\"text-muted w100 \" scope=\"col \">Acciones</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr *ngIf=\"!sinResultados\" class=\"text-center \">\r\n                                    <th colspan=\"10\" class=\"py-4\">\r\n                                        <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                                    </th>\r\n                                </tr>\r\n\r\n                                <tr class=\"trHover\" *ngFor=\"let mesa of listaMesas; let i = index\">\r\n                                    <td colspan=\"2\">{{ mesa.name }}</td>\r\n                                    <td>\r\n                                        <span *ngIf=\"mesa.disponible\" class=\"badge rounded-pill bg-success text-white-75\">Disponible</span>\r\n                                        <span *ngIf=\"!mesa.disponible\" class=\"badge rounded-pill bg-danger text-white-75\">Ocupada</span>\r\n                                    </td>\r\n                                    <td>\r\n                                        <button *ngIf=\"mesa.status\" (click)=\"changeStatus(mesa)\" type=\"button\" class=\"btn btnW waves-effect waves-ligth btn-success btn-sm\">Activa</button>\r\n                                        <button *ngIf=\"!mesa.status\" (click)=\"changeStatus(mesa)\" type=\"button\" class=\"btn btnW waves-effect waves-ligth btn-danger btn-sm\">Desactivada</button>\r\n                                    </td>\r\n                                    <td class=\"text-center\">\r\n                                        <button type=\"button\" (click)=\"informacionMesa(mesa)\" class=\"btn btn-link p-1 text-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#actualizarMesa\">\r\n                                            <i class=\"bi bi-box-arrow-up-right\"></i>\r\n                                        </button>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n\r\n                        </table>\r\n\r\n                    </div>\r\n\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                    <div class=\"row\">\r\n                        <div class=\"col col-md-4\">\r\n                            <small class=\"text-muted\">Total de cajas: ({{totalMesas}})</small>\r\n                            <small *ngIf=\"resultado !== 0\" class=\"text-muted\"> - (Resultados: {{ resultado }})</small>\r\n                            <small *ngIf=\"desde !== 0\" class=\"text-muted\"> - (Desde el: {{ desde + 1}} Hasta el: {{ desde + listaMesas.length }})</small>\r\n                        </div>\r\n\r\n                        <!-- <div *ngIf=\"search.value.length === 0\" class=\"col d-flex justify-content-end\">\r\n                            <button type=\"button\" (click)=\"cambiarPagina(-10)\" class=\"{{btnAtras}} btn btn-sm btn-dark btnW waves-effect waves-light px-3\">Anterior</button>\r\n                            <button type=\"button\" (click)=\"cambiarPagina(10)\" class=\"{{btnAdelante}} btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2\">Siguiente</button>\r\n                        </div> -->\r\n                    </div>\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- TABLE CLIENTS -->\r\n\r\n        <!-- TAB PISOS -->\r\n        <div class=\"tab-pane fade\" id=\"pisos\" role=\"tabpanel\" aria-labelledby=\"pisos-tab\">\r\n            <app-pisos></app-pisos>\r\n        </div>\r\n        <!-- TAB PISOS -->\r\n    </div>\r\n\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    NUEVA MESA \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"nuevaMesa\" tabindex=\"-1\" aria-labelledby=\"nuevaMesaModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"nuevaMesaModal\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Crear Ticket - Mesa - Barra</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form id=\"newMesaForm\" autocomplete=\"off\" [formGroup]=\"newMesaForm\" (ngSubmit)=\"crearMesa()\">\r\n\r\n                    <!-- =======================================================================\r\n                        Informacion del Caja\r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Informaciòn</h5>\r\n\r\n                    <div class=\"row mb-2\">\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n                            <label for=\"\">Tipo</label>\r\n                            <select class=\"form-select\" aria-label=\"Default select example\" formControlName=\"img\">\r\n                                <option value=\"ticket.svg\"> Ticket</option>\r\n                                <option value=\"mesa.svg\"> Mesa</option>\r\n                                <option value=\"barra.svg\"> Barra</option>\r\n                            </select>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row mb-2\">\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n                            <label for=\"\">Nombre</label>\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"name\" min=\"0\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Numero de mesa\">\r\n                                <label for=\"floatingInput\">Nombre</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row mb-2\">\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-group\">\r\n                                <label for=\"\">Usuario</label>\r\n                                <select formControlName=\"mesero\" class=\"form-control\" name=\"\" *ngIf=\"meseros\">\r\n                                    <option selected value=\"0\">Seleccionar</option>\r\n                                    <option *ngFor=\"let mesero of meseros\" [value]=\"mesero.uid\">\r\n                                        {{ mesero.name }}\r\n                                    </option>\r\n                              </select>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\" *ngIf=\"pisos.length > 0\">\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-group\">\r\n                                <label for=\"\">Piso</label>\r\n                                <select formControlName=\"piso\" class=\"form-control\" name=\"\">\r\n                                    <option selected value=\"null\">Seleccionar</option>\r\n                                    <option *ngFor=\"let piso of pisos\" [value]=\"piso.piid\">\r\n                                        {{ piso.name }}\r\n                                    </option>\r\n                              </select>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"text-danger mb-2\">\r\n                            <p *ngIf=\"campoValido('name')\" class=\"mb-1 animated fadeIn\">- El numero de mesa es obligatorio</p>\r\n                            <p *ngIf=\"campoValido('mesero')\" class=\"mb-1 animated fadeIn\">- Debes seleccionar un usuario</p>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    NUEVA MESA \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    ACTUALIZAR MESA \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"actualizarMesa\" tabindex=\"-1\" aria-labelledby=\"actualizarMesaModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"actualizarMesaModal\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Editar Ticket</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form id=\"upMesaForm\" autocomplete=\"off\" [formGroup]=\"upMesaForm\" (ngSubmit)=\"actualizarMesa()\">\r\n\r\n                    <!-- =======================================================================\r\n                        Informacion de la Mesa\r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Información del Ticket</h5>\r\n\r\n                    <div class=\"row mb-2\">\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n                            <label for=\"\">Tipo</label>\r\n                            <select class=\"form-select\" aria-label=\"Default select example\" formControlName=\"img\">\r\n                                <option value=\"ticket.svg\"> Ticket</option>\r\n                                <option value=\"mesa.svg\"> Mesa</option>\r\n                                <option value=\"barra.svg\"> Barra</option>\r\n                            </select>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row mb-2\">\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"name\" min=\"0\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Numero de mesa\">\r\n                                <label for=\"floatingInput\">Numero de mesa</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-group\">\r\n                                <label for=\"\">Seleccionar Mesero</label>\r\n                                <select formControlName=\"mesero\" class=\"form-control\" name=\"\" id=\"\">\r\n                                <option *ngFor=\"let mesero of meseros\" [value]=\"mesero.uid\">\r\n                                    {{ mesero.name }}\r\n                                </option>\r\n                              </select>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row mb-2\" *ngIf=\"pisos.length > 0\">\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-group\">\r\n                                <label for=\"\">Piso</label>\r\n                                <select formControlName=\"piso\" class=\"form-control\" name=\"\">\r\n                                    <option selected value=\"null\">Seleccionar</option>\r\n                                    <option *ngFor=\"let piso of pisos\" [value]=\"piso.piid\">\r\n                                        {{ piso.name }}\r\n                                    </option>\r\n                              </select>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-12 px-md-1\">\r\n                            <div class=\"form-group\">\r\n                                <label for=\"ruta\">Ruta</label>\r\n                                <input type=\"text\" name=\"ruta\" class=\"form-control\" id=\"ruta\" readonly formControlName=\"ruta\">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"text-danger mb-2\">\r\n                            <p *ngIf=\"campoValidoUpdate('name')\" class=\"mb-1 animated fadeIn\">- Asigne un nombre a la mesa</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    ACTUALIZAR MESA \r\n========================================================================= -->","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport { Piso } from 'src/app/models/pisos.model';\r\nimport { PisosService } from 'src/app/services/pisos.service';\r\nimport { SearchService } from 'src/app/services/search.service';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-pisos',\r\n  templateUrl: './pisos.component.html',\r\n  styleUrls: ['./pisos.component.css']\r\n})\r\nexport class PisosComponent implements OnInit {\r\n\r\n  constructor(  private pisosService: PisosService,\r\n                private fb: FormBuilder,\r\n                private searchService: SearchService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.loadPisos();\r\n  }\r\n\r\n  /** ======================================================================\r\n   * LOAD PISOS\r\n  ====================================================================== */\r\n  public pisos: Piso[] = [];\r\n  public total: number = 0;\r\n  public query: any = {\r\n    desde: 0,\r\n    hasta: 50,\r\n    sort: {}\r\n  }\r\n\r\n  loadPisos(){\r\n\r\n    this.pisosService.loadPisos(this.query)\r\n        .subscribe( ({pisos, total}) => {\r\n\r\n          this.pisos = pisos;\r\n          this.total = total;\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ======================================================================\r\n   * CREAR PISOS\r\n  ====================================================================== */\r\n  public formSubmited: boolean = false;\r\n  public newForm = this.fb.group({\r\n    name: ['', Validators.required]\r\n  })\r\n\r\n  create(){\r\n\r\n    this.formSubmited = true;\r\n\r\n    if (this.newForm.invalid) {\r\n      return\r\n    }\r\n\r\n    this.pisosService.createPiso(this.newForm.value)\r\n        .subscribe( ({piso}) => {\r\n\r\n          this.pisos.push(piso);\r\n          this.formSubmited = false;\r\n          this.newForm.reset();\r\n          Swal.fire('Estupendo', 'se ha creado correctamente', 'success');\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ======================================================================\r\n   * VALIDAR FORMULARIO\r\n  ====================================================================== */\r\n  validate(campo: string): boolean{\r\n\r\n    if (this.formSubmited && this.newForm.get(campo).invalid) {\r\n      return true;\r\n    }else{\r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n  /** ======================================================================\r\n   * CREAR PISOS\r\n  ====================================================================== */\r\n  public formSubmitedUpdate: boolean = false;\r\n  public updateForm = this.fb.group({\r\n    name: ['', Validators.required]\r\n  })\r\n\r\n  update(){\r\n\r\n    this.formSubmitedUpdate = true;\r\n\r\n    if (this.updateForm.invalid) {\r\n      return\r\n    }\r\n\r\n    this.pisosService.updatePiso(this.updateForm.value, this.pisoSelected.piid)\r\n        .subscribe( ({piso}) => {\r\n\r\n          this.pisos.map( (p) => {\r\n            if (p.piid === piso.piid) {\r\n              p.name = piso.name\r\n            }\r\n          })\r\n          this.formSubmitedUpdate = false;\r\n          Swal.fire('Estupendo', 'se ha actualizado correctamente', 'success');\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ======================================================================\r\n   * VALIDAR FORMULARIO\r\n  ====================================================================== */\r\n  validateUpdate(campo: string): boolean{\r\n\r\n    if (this.formSubmitedUpdate && this.updateForm.get(campo).invalid) {\r\n      return true;\r\n    }else{\r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n  \r\n\r\n  /** ======================================================================\r\n   * PISO SELECTD\r\n  ====================================================================== */\r\n  public pisoSelected: Piso;\r\n  selectPisto(piso: Piso){\r\n\r\n    this.pisoSelected = piso;\r\n    this.updateForm.setValue({\r\n      name: piso.name\r\n    })\r\n\r\n  }\r\n\r\n  quitarPiso(){\r\n    delete this.pisoSelected;\r\n  }\r\n\r\n  /** ======================================================================\r\n   * ELIMINAR PISO\r\n  ====================================================================== */\r\n  // deletePiso(piid: string, i: any){\r\n    \r\n  //   Swal.fire({\r\n  //     title: \"Estas seguro?\",\r\n  //     text: \"De eliminar este piso!\",\r\n  //     icon: \"warning\",\r\n  //     showCancelButton: true,\r\n  //     confirmButtonColor: \"#3085d6\",\r\n  //     cancelButtonColor: \"#d33\",\r\n  //     confirmButtonText: \"Si, eliminar!\",\r\n  //     cancelButtonText: 'Cancelar'\r\n  //   }).then((result) => {\r\n  //     if (result.isConfirmed) {\r\n        \r\n  //       this.pisosService.deletePiso(piid)\r\n  //       .subscribe( ({msg}) => {\r\n          \r\n  //         this.pisos.splice(i, 1);\r\n  //         Swal.fire('Estupendo', msg, 'success');\r\n          \r\n  //       }, (err) => {\r\n  //         console.log(err);\r\n  //         Swal.fire('Error', err.error.msg, 'error');          \r\n  //       })\r\n        \r\n  //     }\r\n  //   });\r\n    \r\n    \r\n    \r\n  // }\r\n\r\n  /** ======================================================================\r\n   * BUSCAR MESA\r\n  ====================================================================== */\r\n  // public listMesa: any[] = []\r\n  // buscarMesa(termino: string){\r\n\r\n  //   if (termino.length === 0) {\r\n  //     this.listMesa = [];\r\n  //     return;\r\n  //   }\r\n\r\n  //   this.searchService.search('mesa', termino)\r\n  //       .subscribe( ({resultados}) => {\r\n\r\n  //         this.listMesa = resultados          \r\n\r\n  //       }, (err) => {\r\n  //         console.log(err);\r\n  //         Swal.fire('Error', err.error.msg);\r\n          \r\n  //       })\r\n\r\n  // }\r\n  \r\n}\r\n","<div class=\"d-flex flex-wrap align-items-top\">\r\n\r\n    <div class=\"col-12\" [ngClass]=\"{'col-md-8': pisoSelected}\">\r\n\r\n        <div class=\"card\">\r\n            <div class=\"card-body\">\r\n\r\n                <!-- BTN CREAR PISO -->\r\n                <div class=\"d-flex justify-content-end\">\r\n                    <button type=\"button\" class=\"btn btn-sm btn-primary btnW waves-effect waves-ligth\" data-bs-toggle=\"modal\" data-bs-target=\"#nuevoPiso\">Crear Piso</button>\r\n                </div>\r\n                <!-- BTN CREAR PISO -->\r\n                \r\n                <div class=\"table-responsive \">\r\n                <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                    <thead class=\"border-bottom \">\r\n                        <tr>\r\n                            <th class=\"text-muted\" scope=\"col \">Nombre</th>\r\n                            <th class=\"text-muted text-end\">Acciones</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr *ngIf=\"pisos.length === 0\" class=\"text-center \">\r\n                            <th colspan=\"10\" class=\"py-4\">\r\n                                <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                            </th>\r\n                        </tr>\r\n                        <tr class=\"trHover\" *ngFor=\"let piso of pisos; let i=index \">\r\n                            <td>{{ piso.name }}</td>\r\n                            <td class=\"text-end\">\r\n                                <button type=\"button\" (click)=\"selectPisto(piso)\" class=\"btn btn-link p-1 text-warning\"><i class=\"bi-pen\" style=\"font-size: 0.9rem\"></i></button>\r\n                                <!-- <button type=\"button\" (click)=\"deletePiso(piso.piid, i)\" class=\"btn btn-link p-1 text-danger\"><i class=\"bi-trash\" style=\"font-size: 0.9rem\"></i></button> -->\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n\r\n                </table>\r\n\r\n            </div>\r\n\r\n        </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"col-12 col-md-4\" *ngIf=\"pisoSelected\">\r\n        <div class=\"card\">\r\n            <div class=\"card-header bg-dark text-white\">\r\n\r\n                <div class=\"d-flex flex-wrap\">\r\n                    <h3 class=\"mb-0\">\r\n                        {{ pisoSelected.name }}\r\n                    </h3>\r\n\r\n                    <button type=\"button\" (click)=\"quitarPiso()\" class=\"btn btn-link p-1 text-danger ms-auto\"><i class=\"bi-x-lg\" style=\"font-size: 0.9rem\"></i></button>\r\n                </div>\r\n            </div>\r\n            <div class=\"card-body\">\r\n\r\n                <form id=\"newProveedorForm\" autocomplete=\"off\" [formGroup]=\"updateForm\" (ngSubmit)=\"update()\">\r\n\r\n                    <div class=\"form-group\">\r\n                        <div class=\"form-floating\">\r\n                            <input id=\"name\" formControlName=\"name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"name\">\r\n                            <label for=\"name\">Nombre</label>\r\n                        </div>\r\n                        <small class=\"text-danger\" *ngIf=\"validateUpdate('name')\">Campo Obligatorio</small>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                </form>\r\n                \r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n\r\n<!-- NUEVO PISO -->\r\n<div class=\"modal fade\" id=\"nuevoPiso\" tabindex=\"-1\" aria-labelledby=\"nuevoPisoModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"nuevoPisoModal\"> Nuevo Piso</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n                <form id=\"newProveedorForm\" autocomplete=\"off\" [formGroup]=\"newForm\" (ngSubmit)=\"create()\">\r\n\r\n                    <div class=\"form-group\">\r\n                        <div class=\"form-floating\">\r\n                            <input id=\"name\" formControlName=\"name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"name\">\r\n                            <label for=\"name\">Nombre</label>\r\n                        </div>\r\n                        <small class=\"text-danger\" *ngIf=\"validate('name')\">Campo Obligatorio</small>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, ElementRef, OnInit, TemplateRef, ViewChild } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport Swal from 'sweetalert2';\r\n\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\n\r\n// PRINTER\r\nimport { NgxPrinterService } from 'projects/ngx-printer/src/lib/ngx-printer.service';\r\nimport { PrintItem } from 'projects/ngx-printer/src/lib/print-item';\r\nimport { ngxPrintMarkerPosition } from 'projects/ngx-printer/src/public_api';\r\n\r\nimport { Car } from 'src/app/models/cars.model';\r\nimport { Parqueo } from 'src/app/models/parqueo.model';\r\nimport { Typeparq } from 'src/app/models/typearq.model';\r\nimport { Datos } from 'src/app/models/empresa.model';\r\nimport { Impuestos } from 'src/app/models/impuestos.model';\r\n\r\nimport { CarsService } from 'src/app/services/cars.service';\r\nimport { ParqueoService } from 'src/app/services/parqueo.service';\r\nimport { TypeparqService } from 'src/app/services/typeparq.service';\r\nimport { EmpresaService } from 'src/app/services/empresa.service';\r\nimport { ImpuestosService } from 'src/app/services/impuestos.service';\r\nimport { SearchService } from 'src/app/services/search.service';\r\nimport { TurnoService } from 'src/app/services/turno.service';\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport { User } from 'src/app/models/user.model';\r\nimport { LoadTurno, _movements } from 'src/app/interfaces/load-turno.interface';\r\nimport { EntradasService } from 'src/app/services/entradas.service';\r\nimport { BancosService } from 'src/app/services/bancos.service';\r\nimport { Banco } from 'src/app/models/bancos.model';\r\nimport { MesasService } from 'src/app/services/mesas.service';\r\nimport { ProductService } from 'src/app/services/product.service';\r\nimport { InvoiceService } from 'src/app/services/invoice.service';\r\nimport { LoadInvoice } from 'src/app/interfaces/invoice.interface';\r\nimport { ElectronicaService } from 'src/app/services/electronica.service';\r\nimport { DataicoService } from 'src/app/services/dataico.service';\r\nimport { DataicoInterface } from 'src/app/interfaces/dataico.interface';\r\nimport { ClientService } from 'src/app/services/client.service';\r\nimport { Client } from 'src/app/models/client.model';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\ninterface _Department {\r\n  codigo: string,\r\n  departamento: string,\r\n}\r\n\r\n@Component({\r\n  selector: 'app-parqueadero',\r\n  templateUrl: './parqueadero.component.html',\r\n  styleUrls: ['./parqueadero.component.css']\r\n})\r\nexport class ParqueaderoComponent implements OnInit {\r\n\r\n  public user: User;\r\n\r\n  constructor(  private fb: FormBuilder,\r\n                private printerService: NgxPrinterService,\r\n                private typeparqService: TypeparqService,\r\n                private carsService: CarsService,\r\n                private empresaService: EmpresaService,\r\n                private impuestosService: ImpuestosService,\r\n                private parqueoService: ParqueoService,\r\n                private searchService: SearchService,\r\n                private turnosService: TurnoService,\r\n                private userService: UserService,\r\n                private modal: NgbModal,\r\n                private bancosService: BancosService,\r\n                private mesasService: MesasService,\r\n                private productService: ProductService,\r\n                private invoiceService: InvoiceService,\r\n                private electronicaService: ElectronicaService,\r\n                private dataicoService: DataicoService,\r\n                private clientService: ClientService,\r\n                private http: HttpClient,\r\n                private entradasService: EntradasService) { \r\n\r\n                  this.user = userService.user;\r\n\r\n                  console.log(this.user);\r\n                  \r\n\r\n                  this.printWindowSubscription = this.printerService.$printWindowOpen.subscribe(\r\n                    val => { console.log('Print window is open:', val) }\r\n                  );\r\n              \r\n                  this.$printItems = this.printerService.$printItems;\r\n\r\n                }\r\n\r\n  ngOnInit(): void {\r\n    // CARGAR IMPUESTOSs\r\n    this.cargarImpuestos();\r\n    this.loadDataDataico();\r\n    this.cargarDatos();\r\n    this.loadCategorias();\r\n    this.loadCars();\r\n    this.loadParqueos();\r\n    this.cargarTurno();\r\n    this.cargarBancos();\r\n    this.loadTicket();\r\n    this.loadProduct();\r\n    this.loadDepartmentAndCitys();\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR MESA\r\n  ==================================================================== */\r\n  public ticket: string = '';\r\n  loadTicket(){\r\n\r\n    this.mesasService.loadMesas(0)\r\n        .subscribe( ({mesas}) => {\r\n          \r\n          this.ticket = mesas[0].mid;\r\n\r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  OBTENER DATOS DE LA FACTURA ELECTRONICA\r\n  ==================================================================== */\r\n  public dataDataico: boolean = false;\r\n  public dataico: DataicoInterface;\r\n  loadDataDataico(){\r\n\r\n    this.dataicoService.loadDataDataico()\r\n        .subscribe( ({dataico}) => {\r\n\r\n          delete dataico.actions._id;\r\n          delete dataico.actions.email;\r\n          delete dataico.actions.attachments;\r\n          delete dataico.datid;\r\n          delete dataico.customer;\r\n          delete dataico.numbering._id;\r\n\r\n          if (dataico) {\r\n            this.dataDataico = true;\r\n            this.dataico = dataico;\r\n          }          \r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          \r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR PRODUCTO\r\n  ==================================================================== */\r\n  public product: string = '';\r\n  loadProduct(){\r\n\r\n    this.productService.cargarProductoCodigo('0000000')\r\n        .subscribe( (product) => {\r\n\r\n          this.product = product.pid;\r\n          \r\n\r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR BANCOS\r\n  ==================================================================== */\r\n  public bancos: Banco[] = [];\r\n  cargarBancos(){\r\n\r\n    this.bancosService.loadBancos()\r\n        .subscribe( ({bancos}) => {\r\n\r\n          this.bancos = bancos.filter( banco => banco.status === true);          \r\n\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR IMPUESTOS\r\n  ==================================================================== */\r\n  public impuestos: Impuestos[] = [];\r\n  cargarImpuestos(){\r\n\r\n    this.impuestosService.loadImpuestos()\r\n        .subscribe( ({ taxes }) =>  {\r\n          this.impuestos = taxes;\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR DATOS DE LA EMPRESA\r\n  ==================================================================== */\r\n  public empresa: Datos;\r\n  public ticketHeader: any;\r\n  public ticketfooter: any;\r\n  cargarDatos(){\r\n\r\n    this.empresaService.getDatos()\r\n        .subscribe( datos => {\r\n          this.empresa = datos;   \r\n          \r\n          this.ticketHeader =  this.empresa.header.split('\\n');\r\n          this.ticketfooter =  this.empresa.footer.split('\\n');\r\n          \r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n  }\r\n\r\n  /** ================================================================\r\n   *   PRINTER\r\n  ==================================================================== */\r\n  @ViewChild('PrintTemplate')\r\n  private PrintTemplateTpl: TemplateRef<any>;\r\n\r\n  title = 'ngx-printer-demo';\r\n\r\n  printWindowSubscription: Subscription;\r\n  $printItems: Observable<PrintItem[]>;\r\n\r\n  printDiv(id: string) {\r\n    this.printerService.printDiv(id);\r\n  }\r\n  \r\n\r\n  /** ================================================================\r\n  /** ================================================================\r\n  /** ================================================================\r\n  /** ================================================================\r\n  /** ================================================================\r\n  /** ================================================================\r\n   * PARQUEO PARQUEO\r\n  /** ================================================================\r\n   *   LOAD PARQUEOS\r\n  ==================================================================== */\r\n  public parqueos: Parqueo[] = [];\r\n  loadParqueos(){\r\n\r\n    this.parqueoService.loadParqueos({estado: 'Parqueado'})\r\n        .subscribe( ({ parqueos }) => {\r\n\r\n          this.parqueos = parqueos;             \r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CHECKIN PARQUEO\r\n  ==================================================================== */\r\n  public vCheckin: Parqueo;\r\n  @ViewChild('inP') inP: ElementRef;\r\n  @ViewChild('btnV') btnV: ElementRef;\r\n  @ViewChild('btnVC') btnVC: ElementRef;\r\n  checkin(placa: string){\r\n\r\n    if (placa.length === 0) {\r\n      return;\r\n    }\r\n\r\n    if (this.user.cerrada) {\r\n      Swal.fire('Atención', 'Debes de abrir caja para poder ingresar los vehiculos al parqueadero', 'warning');\r\n      return;\r\n    }\r\n\r\n    let now = new Date();\r\n    now.setSeconds(0, 0); // Establece los segundos y milisegundos a 0\r\n\r\n    let timestamp = now.getTime(); // Obtiene el tiempo en milisegundos desde el 1 de enero de 1970\r\n\r\n    this.parqueoService.createParqueo({placa, checkin: timestamp, turno: this.user.turno})\r\n        .subscribe( ({parqueo}) => {\r\n\r\n          this.vCheckin = parqueo;\r\n\r\n          this.parqueos.push(parqueo);\r\n\r\n          this.inP.nativeElement.value = '';\r\n          this.inP.nativeElement.focus = true;\r\n\r\n          setTimeout( () => {\r\n            this.printDiv('printDiv1')\r\n          }, 1500 )\r\n          \r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n\r\n          if (err.error.msg === 'No existe vehiculo con esta placa') {\r\n            this.newCarForm.setValue({\r\n              placa: placa,\r\n              cliente: '',\r\n              typeparq: 'none'\r\n            })\r\n\r\n            this.btnV.nativeElement.click();\r\n            this.btnVC.nativeElement.click();\r\n          }\r\n\r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   NUEVO MONTO\r\n  ==================================================================== */\r\n  newMonto(monto: any){\r\n\r\n    monto = Number(monto);\r\n    this.total = monto;\r\n\r\n    this.subtotal = ((this.total *100)/(this.parq.car.typeparq.tax.valor + 100));\r\n    this.iva = (this.total-this.subtotal);\r\n\r\n  }\r\n\r\n\r\n  /** ================================================================\r\n   *   PAGOS\r\n  ==================================================================== */\r\n  @ViewChild ('montoP') montoP!: ElementRef;\r\n  public payments: any[] = [];\r\n  public restante: number = 0;\r\n  addPay(monto: any, type: string){\r\n\r\n    monto = Number(monto);\r\n    if (this.payments.length > 0 && this.restante >= 0 ) {\r\n      return;\r\n    }\r\n\r\n    if(monto > (this.restante * -1 ) && this.restante < 0){\r\n      monto = (this.restante * -1);\r\n    }\r\n\r\n    this.payments.push({\r\n      type,\r\n      amount: monto,\r\n      description: ''\r\n    });\r\n\r\n    this.restante = 0;\r\n    for (const pay of this.payments) {\r\n      this.restante = this.restante + pay.monto;\r\n    }\r\n\r\n    this.restante = this.restante - this.total;    \r\n\r\n  }\r\n\r\n  delPay(pay: any){    \r\n\r\n    this.payments.splice( pay, 1 );\r\n    this.restante = 0;\r\n    for (const pay of this.payments) {\r\n      this.restante = this.restante + pay.monto;\r\n    }\r\n\r\n    this.restante = this.restante - this.total;\r\n\r\n  }\r\n\r\n\r\n  /** ================================================================\r\n   *   CHECKOUT PARQUEO \r\n  ==================================================================== */\r\n  public vCheckout: Parqueo;\r\n  @ViewChild('modalCheckOut', { static: true }) modalCheckOut: TemplateRef<any>;\r\n  @ViewChild('outP') outP: ElementRef;\r\n  public total: number = 0;\r\n  public subtotal: number = 0;\r\n  public iva: number = 0;\r\n  public parq: any;\r\n  public diff: any;\r\n  public plenas: number = 0;\r\n  checkout( placa: string ){\r\n    \r\n    this.payments = [];\r\n    this.total = 0;\r\n    this.subtotal = 0;\r\n    this.iva = 0;\r\n    this.plenas = 0;\r\n\r\n\r\n    let parq = this.parqueos.find( (p) => {\r\n      return p.placa === placa.trim();\r\n    });\r\n\r\n    if (!parq) {\r\n      Swal.fire('Error', 'No existe ningun vehiculo con esta placa en el parqueadero', 'warning');\r\n      return\r\n    }\r\n\r\n    this.parq = parq;\r\n\r\n    // CALCULAR DIFERENCIA\r\n    let cal = 1000*60;\r\n    if(parq.car.typeparq.type === 'Horas'){      \r\n      cal = 1000*60*60;\r\n    }\r\n    \r\n    this.diff =  (new Date().getTime() - parq.checkin)/ cal;\r\n    this.diff = parseFloat(this.diff.toFixed(2));\r\n    \r\n    if (this.diff < 1 && parq.car.typeparq.type !== 'Horas') {\r\n      this.diff = 0;\r\n    }\r\n\r\n    // REDONDEAR AL NUMERO MENOR SI SON MINUTOS\r\n    if(parq.car.typeparq.type === 'Minutos'){      \r\n      if (this.diff > 0) {        \r\n        this.diff = Math.floor(this.diff);\r\n      }      \r\n    }    \r\n\r\n    this.total = this.diff * parq.car.typeparq.price;    \r\n    \r\n    if (this.total < parq.car.typeparq.price) {\r\n      this.total = parq.car.typeparq.price;      \r\n    }\r\n    \r\n    if (this.diff >= parq.car.typeparq.tplena ) {\r\n      // this.total = parq.car.typeparq.plena;\r\n      let w = true;\r\n      \r\n      while(w){\r\n        if (this.diff >= parq.car.typeparq.tplena) {\r\n          this.plenas += 1;          \r\n\r\n          this.diff -= parq.car.typeparq.tplena;\r\n        }else{\r\n          this.total = this.diff * parq.car.typeparq.price;\r\n          w = false;\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n    if (this.plenas > 0) {\r\n      this.total += (this.plenas * parq.car.typeparq.plena)      \r\n    }\r\n    \r\n    this.subtotal = parseFloat(((this.total *100)/(parq.car.typeparq.tax.valor + 100)).toFixed(2));\r\n    this.iva = parseFloat((this.total-this.subtotal).toFixed(2));\r\n\r\n    this.modal.open(this.modalCheckOut);\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREAR FACTURA\r\n  ==================================================================== */\r\n  public factura: LoadInvoice;\r\n  public facturando: boolean = false;\r\n  crearFactura( send_dian: boolean ){\r\n\r\n    this.facturando = true;\r\n\r\n    let formData = {\r\n      checkout: new Date().getTime(),\r\n      total: this.total,\r\n      plenas: this.plenas,\r\n      subtotal: this.subtotal,\r\n      iva: this.iva,\r\n      estado: 'Finalizado',\r\n    }\r\n    \r\n    this.parqueoService.updateParqueo(formData, this.parq.parqid)\r\n        .subscribe( ({ parqueo }) => {\r\n\r\n          this.vCheckout = parqueo;\r\n          \r\n          Swal.fire(` $ ${parqueo.total} `, `Total de tiempo en el parqueadero son ${this.diff}, en ${ this.parq.car.typeparq.type }` , 'success');\r\n          this.loadParqueos();\r\n          this.outP.nativeElement.value = '';\r\n          this.inP.nativeElement.focus = true;\r\n\r\n          let data: any = {\r\n            amount: this.total,\r\n            cost: 0,\r\n            type: 'efectivo',\r\n            payments: this.payments, \r\n            products: [{\r\n              product: this.product,\r\n              qty: 1,\r\n              price: this.subtotal\r\n            }],\r\n            credito: false,\r\n            mesa: this.ticket,\r\n            mesero: this.user.uid,\r\n            fechaCredito: '',\r\n            turno: this.user.turno,\r\n            iva: this.iva,\r\n            base: this.subtotal,\r\n            pago: this.total,\r\n            vueltos: 0,\r\n            nota: '',\r\n            apartado: false,\r\n            descuento: false,\r\n            porcentaje: 0,\r\n            fecha: new Date(),\r\n            tip: 0,\r\n            datafon: 0,\r\n          }\r\n\r\n          if (this.clienteTemp) {\r\n            data.client = this.clienteTemp.cid;\r\n          }\r\n\r\n          this.invoiceService.createInvoice(data, this.user.turno)\r\n              .subscribe( (resp:{ok: boolean, invoice: LoadInvoice } ) => {\r\n\r\n                this.factura = resp.invoice;\r\n\r\n                delete this.clienteTemp;\r\n\r\n                if (this.empresa.electronica && send_dian) {\r\n                  \r\n                  this.electronicaService.postFacturaDataico(this.factura, this.dataico, this.impuestos)\r\n                      .subscribe( (resp: {status, invoice, ok}) => {\r\n                                                \r\n                        if (resp.status === 500) {\r\n                          Swal.fire('Atención', 'No se pudo enviar la factura electronica a la DIAN, ve a la factura y vuelve a enviarla, si el problema persiste, ponte en contacto', 'warning');\r\n                          window.open(`./dashboard/factura/${ this.factura.iid }`, '_blank');\r\n                        }\r\n\r\n                        if (resp.invoice.cufe) {\r\n                          this.factura.cufe = resp.invoice.cufe;\r\n                          this.factura.number = resp.invoice.number;\r\n                        }\r\n\r\n                        this.payments = [];\r\n                        this.total = 0;\r\n                        this.subtotal = 0;\r\n                        this.iva = 0;\r\n                        this.modal.dismissAll('modalCheckOut');\r\n\r\n                        if (this.empresa.printpos) {              \r\n                          // window.open(`./dashboard/ventas/print/${ resp.invoice.iid }`, '_blank');\r\n                          // IMPRIMIR FACTURA\r\n                          setTimeout( () => {\r\n                            this.facturando = false;\r\n                            this.printDiv('printDiv2')\r\n                          }, 1500 )\r\n                          \r\n                        }else{\r\n                          window.open(`./dashboard/factura/${ this.factura.iid }`, '_blank');\r\n                          setTimeout( () => {   \r\n                            this.facturando = false;          \r\n                            window.location.reload();\r\n                          },1000);\r\n                        }\r\n                        \r\n                      }, (err) => {\r\n                        console.log(err);\r\n                        \r\n                      });\r\n                  \r\n                  \r\n                }else{\r\n\r\n                  this.payments = [];\r\n                  this.total = 0;\r\n                  this.subtotal = 0;\r\n                  this.iva = 0;\r\n                  \r\n                  if (this.empresa.printpos) {              \r\n                    // window.open(`./dashboard/ventas/print/${ resp.invoice.iid }`, '_blank');\r\n                    // IMPRIMIR FACTURA\r\n                    setTimeout( () => {\r\n                      this.facturando = false;\r\n                      this.modal.dismissAll('modalCheckOut');\r\n                      this.printDiv('printDiv2')\r\n                    }, 1500 )\r\n                    \r\n                  }else{\r\n                    window.open(`./dashboard/factura/${ this.factura.iid }`, '_blank');\r\n                    setTimeout( () => {             \r\n                      window.location.reload();\r\n                    },1000);\r\n                  }\r\n                }\r\n\r\n                \r\n\r\n              })\r\n\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');              \r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n  /** ================================================================\r\n  /** ================================================================\r\n  /** ================================================================\r\n  /** ================================================================\r\n  /** ================================================================\r\n   * CATEGORIAS CATEGORIAS\r\n  /** ================================================================\r\n   *   LOAD CATEGORIES O TYPEPARQS\r\n  ==================================================================== */\r\n  public categories: Typeparq[] = [];\r\n  public queryCat = {\r\n    desde: 0,\r\n    hasta: 50,\r\n    sort: {}\r\n  }\r\n\r\n  loadCategorias(){    \r\n\r\n    this.typeparqService.loadTypeparqs(this.queryCat)\r\n        .subscribe( ({typeparqs}) => {\r\n\r\n          this.categories = typeparqs;          \r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREATE CATEGORY O TYPEPARQ\r\n  ==================================================================== */\r\n  public newCategorySubmitted: boolean = false;\r\n  public newCategoryForm = this.fb.group({\r\n    name: ['', [Validators.required]],\r\n    price: ['', [Validators.required]],\r\n    plena: '',\r\n    tplena: '',\r\n    type: 'Minutos',\r\n    tax: 'none',\r\n  })\r\n\r\n  createCategory(){\r\n\r\n    this.newCategorySubmitted = true;\r\n\r\n    if (this.newCategoryForm.invalid) {\r\n      return true;\r\n    }\r\n\r\n    this.typeparqService.createTypeparq(this.newCategoryForm.value)\r\n        .subscribe( ({typeparq}) => {\r\n\r\n          this.categories.push(typeparq);\r\n          Swal.fire('Estupendo', 'Se ha creado la categoria exitosamente', 'success');\r\n          this.newCategorySubmitted = false;\r\n          this.newCategoryForm.reset({\r\n            type: 'Minutos',\r\n            tax: 'none',\r\n          });\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  validateNewCategory(campo: string): boolean{\r\n    if (this.newCategorySubmitted && this.newCategoryForm.get(campo)?.invalid) {\r\n      return true;\r\n    }else{\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  SELECT CATEGORY\r\n  ==================================================================== */\r\n  public categoryID: string;\r\n  selectCategory(category: Typeparq){\r\n\r\n    this.categoryID = category.tpid;\r\n\r\n    this.upCategoryForm.setValue({\r\n      name: category.name,\r\n      price: category.price,\r\n      plena: category.plena,\r\n      tplena: category.tplena,\r\n      type: category.type,\r\n      tax: category.tax._id,\r\n    });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   UPDATE CATEGORY O TYPEPARQ\r\n  ==================================================================== */\r\n  public upCategorySubmitted: boolean = false;\r\n  public upCategoryForm = this.fb.group({\r\n    name: ['', [Validators.required]],\r\n    price: ['', [Validators.required]],\r\n    plena: '',\r\n    tplena: '',\r\n    type: 'Minutos',\r\n    tax: 'none',\r\n  })\r\n\r\n  updateCategory(){\r\n\r\n    this.upCategorySubmitted = true;\r\n    \r\n    if (this.upCategoryForm.invalid) {\r\n      return;\r\n    };\r\n    \r\n    this.typeparqService.updateTypeparq( this.upCategoryForm.value, this.categoryID )\r\n    .subscribe( ({typeparq}) => {\r\n      \r\n          this.categories.map( cate => {\r\n            if (cate.tpid === typeparq.tpid) {\r\n              cate.name = typeparq.name;\r\n              cate.price = typeparq.price;\r\n              cate.plena = typeparq.plena;\r\n              cate.tplena = typeparq.tplena;\r\n              cate.type = typeparq.type;\r\n              cate.tax = typeparq.tax;\r\n            }\r\n          });\r\n      \r\n          this.upCategorySubmitted = false;\r\n          Swal.fire('Estupendo', 'Se ha actualizado la categoria exitosamente!', 'success');\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        });\r\n\r\n  }\r\n\r\n  validateUpCategory(campo: string): boolean{\r\n    if (this.upCategorySubmitted && this.upCategoryForm.get(campo)?.invalid) {\r\n      return true;\r\n    }else{\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n  /** ================================================================\r\n  /** ================================================================\r\n  /** ================================================================\r\n  /** ================================================================\r\n  /** ================================================================\r\n   * VEHICULOS VEHICULOS\r\n  /** ================================================================\r\n   *   LOAD VEHICULOS\r\n  ==================================================================== */\r\n  public cars: Car[] = [];\r\n  public carsTemp: Car[] = [];\r\n  public queryCar = {\r\n    desde: 0,\r\n    hasta: 50\r\n  }\r\n\r\n  loadCars(){\r\n\r\n    this.carsService.loadCars(this.queryCar)\r\n        .subscribe( ({cars}) => {\r\n          this.cars = cars;\r\n          this.carsTemp = cars;\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREATE CAR\r\n  ==================================================================== */\r\n  @ViewChild('mVehiculo') mVehiculo: ElementRef;\r\n  public newCarSubmitted: boolean = false;\r\n  public newCarForm = this.fb.group({\r\n    placa: ['', [Validators.required]],\r\n    cliente: '',\r\n    typeparq: ['none', [Validators.required]],\r\n  })\r\n\r\n  createCar(){\r\n    \r\n    this.newCarSubmitted = true;\r\n\r\n    if (this.newCarForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    if (this.newCarForm.value.typeparq === 'none') {\r\n      Swal.fire('Atención', 'No has seleccionado una categoria para este vehiculo', 'warning');\r\n      return;\r\n    }\r\n\r\n    if (this.newCarForm.value.cliente === '') {\r\n      this.newCarForm.value.cliente = 'Ocacional'\r\n    }\r\n\r\n    this.carsService.createCar(this.newCarForm.value)\r\n        .subscribe( ({car}) => {\r\n\r\n          this.cars.push(car);\r\n          Swal.fire('Estupendo', 'Se ha creado el vehiculo exitosamente', 'success');\r\n          this.newCarSubmitted = false;\r\n          this.newCarForm.reset();\r\n\r\n          this.checkin(car.placa);\r\n          this.mVehiculo.nativeElement.click();\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  validateNewCar(campo: string): boolean{\r\n    if (this.newCarSubmitted && this.newCarForm.get(campo)?.invalid) {\r\n      return true;\r\n    }else{\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SELECT CAR\r\n  ==================================================================== */\r\n  public carID: string;\r\n  selectCar( car: Car ){    \r\n\r\n    this.carID = car.carid;\r\n\r\n    this.upCarForm.setValue({\r\n      placa: car.placa,\r\n      cliente: car.cliente,\r\n      typeparq: car.typeparq._id\r\n    })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   UPDATE CAR\r\n  ==================================================================== */\r\n  public upCarSubmitted: boolean = false;\r\n  public upCarForm = this.fb.group({\r\n    placa: ['', [Validators.required]],\r\n    cliente: '',\r\n    typeparq: ['none', [Validators.required]],\r\n  });\r\n\r\n  updateCar(){\r\n\r\n    this.upCarSubmitted = true;\r\n\r\n    if (this.upCarForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    if (this.upCarForm.value.typeparq === 'none') {\r\n      Swal.fire('Atención', 'Debes de seleccionar una categoria', 'warning');\r\n      return;\r\n    }\r\n\r\n    this.carsService.updateCar(this.upCarForm.value, this.carID)\r\n        .subscribe( ({car}) => {\r\n\r\n          this.cars.map( carro => {\r\n            if (carro.carid === car.carid) {\r\n              carro.placa = car.placa;\r\n              carro.cliente = car.cliente;\r\n              carro.typeparq = car.typeparq;\r\n            }\r\n          });\r\n\r\n          this.carsTemp.map( carro => {\r\n            if (carro.carid === car.carid) {\r\n              carro.placa = car.placa;\r\n              carro.cliente = car.cliente;\r\n              carro.typeparq = car.typeparq;\r\n            }\r\n          });\r\n\r\n          this.upCarSubmitted = false;\r\n          Swal.fire('Estupendo', 'El vehiculo se actualizo exitosamente!', 'success');\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        });\r\n\r\n  }\r\n\r\n  validateUpCar(campo: string): boolean{\r\n    if (this.upCarSubmitted && this.upCarForm.get(campo)?.invalid) {\r\n      return true;\r\n    }else{\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SEARCH CAR\r\n  ==================================================================== */\r\n  public sinResultados: boolean = false;\r\n  public resultado: number = 0;\r\n  searchCars(termino: string){\r\n\r\n    this.sinResultados = true;\r\n\r\n    if (termino.length === 0) {\r\n      this.cars = this.carsTemp;\r\n      this.resultado = 0;\r\n      return;\r\n    }else{\r\n      \r\n      this.sinResultados = true;\r\n\r\n      let query = `hasta=20`;\r\n      \r\n      this.searchService.search('car', termino, true, query)\r\n          .subscribe(({total, resultados}) => {\r\n            \r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            if (resultados.length === 0) {\r\n              this.sinResultados = false;\r\n              this.cars = [];\r\n              this.resultado = 0;\r\n\r\n              return;                \r\n            }\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n\r\n            this.cars = resultados;\r\n            this.resultado = resultados.length;\r\n\r\n            \r\n\r\n          }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ABRIR CAJA\r\n  ==================================================================== */\r\n  abrirCaja(){\r\n    \r\n    if (!this.user.cerrada) {\r\n\r\n      Swal.fire('Ya existe una caja abierta', 'Debes de cerrar caja para poder abrir he iniciar un turno nuevo', 'warning');\r\n      return;\r\n\r\n    }\r\n    \r\n    Swal.fire({\r\n      title: 'Monto Inicial de caja',\r\n      input: 'text',\r\n      inputAttributes: {\r\n        autocapitalize: 'off'\r\n      },\r\n      showCancelButton: true,\r\n      confirmButtonText: 'Confirmar',\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (resp) => {\r\n        \r\n        return resp;\r\n      }\r\n      }).then((result) => {\r\n\r\n        if (result.value > 0) {\r\n\r\n          const initial:number = result.value;\r\n\r\n          const open = {\r\n            initial\r\n          };\r\n\r\n          \r\n          this.turnosService.createCaja(open)\r\n            .subscribe( (resp:{ ok:boolean, turno:any}) => {\r\n                this.userService.user.turno = resp.turno.tid;\r\n                this.userService.user.cerrada = false;                \r\n                this.cargarTurno();\r\n            });  \r\n              \r\n          return;\r\n        }else{\r\n          return;\r\n        }                \r\n        \r\n    });\r\n\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   REGISTRAR ENTRADAS Y SALIDAS\r\n  ==================================================================== */\r\n  public turno: LoadTurno;\r\n  cargarTurno(){\r\n\r\n    if (this.user.cerrada === false) {\r\n      \r\n      this.turnosService.getTurnoId(this.user.turno)\r\n          .subscribe( (turno) => {\r\n            this.turno = turno;\r\n            this.movimientos = turno.movements;                    \r\n          });\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   REGISTRAR ENTRADAS Y SALIDAS\r\n  ==================================================================== */\r\n  @ViewChild('montoE') montoE: ElementRef;\r\n  @ViewChild('descriptionE') descriptionE: ElementRef;\r\n  @ViewChild('montoS') montoS: ElementRef;\r\n  @ViewChild('descriptionS') descriptionS: ElementRef;\r\n\r\n  public movimientos: _movements[] = [];\r\n\r\n  entradaSalida(type: string, descripcion: string, monto: number){\r\n\r\n    if (this.user.cerrada) {\r\n      Swal.fire('Atención', 'Debes de abrir caja para registrar entradas y salidas', 'warning');\r\n      return;\r\n    }\r\n\r\n    // COMPROBAR QUE NO VENGA VACIO\r\n    if ( descripcion === '' || monto === 0) {\r\n      Swal.fire('Error', 'Todos los campos son obligatorios', 'error');\r\n      return;      \r\n    }\r\n    // COMPROBAR QUE NO VENGA VACIO\r\n    \r\n    // COMPROBAR EL TIPO SALIDA\r\n    if (type === 'salida') {\r\n      monto = monto * -1;            \r\n    }\r\n    // COMPROBAR EL TIPO SALIDA\r\n    \r\n    // AGREGAR EL MOVIMIENTO AL OBJECTO\r\n    this.movimientos.push({\r\n      type,\r\n      descripcion,\r\n      monto\r\n    });\r\n\r\n    this.turno.movements = this.movimientos;\r\n    // AGREGAR EL MOVIMIENTO AL OBJECTO\r\n    \r\n    // GUARDAR ACTUALIZAR EN LA BASE DE DATOS\r\n    this.turnosService.updateTurno(this.turno, this.turno.tid)\r\n    .subscribe((resp) => {\r\n      \r\n      this.montoE.nativeElement.value = '';\r\n      this.descriptionE.nativeElement.value = '';\r\n      \r\n      this.montoS.nativeElement.value = '';\r\n      this.descriptionS.nativeElement.value = '';\r\n\r\n      let movi = {\r\n        monto,\r\n        descripcion,\r\n        type,\r\n        turno: this.user.turno,\r\n      }\r\n\r\n      this.entradasService.createMovimiento(movi)\r\n          .subscribe( ({movimiento}) => {\r\n\r\n            Swal.fire('Estupendo!', 'Se ha guardado exitosament', 'success')            \r\n\r\n          }, (err) => {\r\n            console.log(err);\r\n            Swal.fire('Error', err.error.msg, 'error');            \r\n          });\r\n\r\n    }, (err) =>{\r\n      Swal.fire('Error', err.error.msg, 'error');\r\n    }); \r\n    // GUARDAR ACTUALIZAR EN LA BASE DE DATOS\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  OBTENER DEPARTAMENTOS Y CIUDADES\r\n  ==================================================================== */\r\n  public departments: _Department[] = [];\r\n  public cities: any[] = [];\r\n  loadDepartmentAndCitys(){\r\n\r\n    this.http.get('assets/json/departamentos.json')\r\n        .subscribe( (data: any) => {          \r\n          this.departments = data;            \r\n        });\r\n\r\n    this.http.get('assets/json/ciudades.json')\r\n    .subscribe( (data: any) => {          \r\n      this.cities = data;          \r\n    })\r\n\r\n  }\r\n\r\n    /** ================================================================\r\n   *  OBTENER CIUDADES DEPENDIENDO DEL DEPARTAMENTO\r\n  ==================================================================== */\r\n  public ListCities: any[] = [];\r\n  searchCities(department: string){\r\n\r\n    this.ListCities = [];\r\n\r\n    if (department.length === 0 ) {\r\n      return;\r\n    }\r\n\r\n    this.ListCities = this.cities.filter( city =>  department === city.departamento );\r\n\r\n  }\r\n\r\n  /** ============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * CLIENTES - CLIENTES - CLIENTES - CLIENTES  \r\n  ==================================================================== */\r\n  public listaClientes: Client[] = [];\r\n  public listaClientesTemp: Client[] = [];\r\n  public totalClientes: number = 0;\r\n  public clienteTemp: Client;\r\n\r\n  /** ================================================================\r\n   *  BUSCAR CLIENTE\r\n  ==================================================================== */\r\n  public sinResultadosClientes: boolean = false;\r\n  public cargandoCliente: boolean = true;\r\n\r\n  buscarCliente(termino: string){\r\n    \r\n    this.cargandoCliente = false;\r\n    this.sinResultadosClientes = false;\r\n\r\n    if (termino.length === 0) {\r\n      this.listaClientes = this.listaClientesTemp;\r\n      this.sinResultadosClientes = true;\r\n      this.cargandoCliente = true;\r\n      return;\r\n    }else{\r\n    \r\n      this.searchService.search('clients', termino)\r\n          .subscribe(({total, resultados}) => {   \r\n            \r\n          this.cargandoCliente = false;\r\n          \r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (resultados.length === 0) {\r\n            this.listaClientes = [];\r\n            this.totalClientes = 0;\r\n            this.sinResultadosClientes = true;\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          \r\n          this.listaClientes = resultados;\r\n          this.totalClientes = total;\r\n\r\n        });\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  SELECCIONAR CLIENTE searchClient\r\n  ==================================================================== */\r\n  @ViewChild('searchClient') searchClient: ElementRef;\r\n  seleccionarCliente(cliente: Client){\r\n    \r\n    this.clienteTemp = cliente;\r\n\r\n    this.listaClientes = [];\r\n    this.totalClientes = 0;\r\n    this.cargandoCliente = true;\r\n    this.sinResultadosClientes = false;    \r\n        \r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREAR CLIENTE\r\n  ==================================================================== */\r\n  @ViewChild('btnCreateClient') btnCreateClient: ElementRef<any>;\r\n  public formSubmitted: boolean = false;\r\n  public newClientForm = this.fb.group({\r\n    party_type: ['PERSONA_NATURAL', [Validators.required]],\r\n    tax_level_code: ['NO_RESPONSABLE_DE_IVA', [Validators.required]],\r\n    party_identification_type: ['CC', [Validators.required]],\r\n    company_name: '',\r\n    first_name: '',\r\n    family_name: '',\r\n    department: '',\r\n    address_line: '',\r\n    regimen: ['SIMPLE',],\r\n    party_identification: '',\r\n    codigodepartamento: '',\r\n    codigociudad: '',\r\n    sendemail: false,\r\n    // OLD\r\n    name: '',\r\n    cedula: ['', [Validators.required, Validators.minLength(6)]],\r\n    email: ['', [Validators.required]],\r\n    phone: ['', [Validators.required]],\r\n    city: '',\r\n    address: ['', [Validators.required]]\r\n  });\r\n  \r\n\r\n  async crearCliente(){    \r\n\r\n    this.formSubmitted = true;\r\n\r\n    if (this.newClientForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    // OBTENER CODIGO DEL DEPARTAMENTO Y CIUDAD\r\n    let codigoD = await this.departments.find( departamento => this.newClientForm.value.department === departamento.departamento );\r\n    let codigoC = await this.cities.find( city => this.newClientForm.value.city === city.ciudad );\r\n    this.newClientForm.value.codigodepartamento  = codigoD.codigo;\r\n    this.newClientForm.value.codigociudad  = codigoC.codigo;\r\n\r\n    if (this.newClientForm.value.party_type === 'PERSONA_NATURAL') {      \r\n      this.newClientForm.value.name = `${this.newClientForm.value.first_name} ${this.newClientForm.value.family_name}`\r\n    }else{\r\n      this.newClientForm.value.name = this.newClientForm.value.company_name;\r\n    }\r\n\r\n    this.newClientForm.value.party_identification = this.newClientForm.value.cedula;\r\n\r\n    this.clientService.createClient(this.newClientForm.value)\r\n        .subscribe((resp: any) => {\r\n\r\n          Swal.fire('Estupendo', 'Se ha creado el cliente exitosamente!', 'success');\r\n\r\n          this.formSubmitted = false;\r\n          this.newClientForm.reset();          \r\n          \r\n        }, (err) =>{\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CAMPO VALIDO\r\n  ==================================================================== */\r\n  campoValido(campo: string): boolean{\r\n\r\n    if (this.formSubmitted && this.newClientForm.get(campo).invalid) {\r\n      return true;\r\n    }else{\r\n      return false;\r\n    }\r\n  \r\n  }\r\n\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Configuraciones / Parqueadero</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"ticket1-tab\" routerLink=\"/configuraciones/parqueadero\"><i class=\"bi-gear\" style=\"font-size: 1rem\"></i> Parqueadero</a>\r\n        </li>\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark\" id=\"ticket1-tab\" routerLink=\"/dashboard/parqueadero/reportes\"><i class=\"bi-gear\" style=\"font-size: 1rem\"></i> Reportes</a>\r\n        </li>\r\n\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<div class=\"container-fluid my-4\">\r\n\r\n    <!-- BOTONES  -->\r\n    <div class=\"d-flex flex-wrap gap-3 mt-2 mb-3\">\r\n        <button type=\"button\" class=\"btn btn-dark\" data-bs-toggle=\"modal\" data-bs-target=\"#exampleModal\">Categorias</button>\r\n        <button type=\"button\" #btnV class=\"btn btn-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#VehiculosModal\">Vehiculos</button>\r\n        <button type=\"button\" (click)=\"abrirCaja()\" class=\"btn btn-success\" *ngIf=\"user.cerrada\">Abrir Caja</button>\r\n        <button type=\"button\" [routerLink]=\"['/dashboard', 'corte']\" class=\"btn btn-dark\" *ngIf=\"!user.cerrada\"> Cerrar Caja </button>\r\n        <button type=\"button\" class=\"btn btn-outline-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#entradaSalidas\"><i class=\"bi-arrow-left-right\"></i> Entradas y Salidas </button>\r\n        <button #btnCreateClient type=\"button\" class=\"btn btn-outline-success btn-sm\" data-bs-toggle=\"modal\" data-bs-target=\"#buscarCliente\"><i class=\"bi-people\"></i> Crear Cliente </button>\r\n    </div>\r\n    <!-- BOTONES -->\r\n\r\n    <!-- CHECKIN O CHECKOT DE VEHICULOS -->\r\n    <div class=\"d-flex flex-wrap mb-3\">\r\n\r\n        <div class=\"w-50 px-md-3\">\r\n            <div class=\"card\">\r\n                <div class=\"card-body\">\r\n\r\n                    <h4 class=\"text-center display-5\">\r\n                        <i class=\"bi bi-box-arrow-in-up-right\"></i>\r\n                        <br> Entrada\r\n                    </h4>\r\n\r\n                    <div class=\"formGroup mb-3\">\r\n                        <input type=\"search\" (keyup.enter)=\"checkin(inP.value)\" #inP class=\"form-control\" placeholder=\"Placa\">\r\n                    </div>\r\n\r\n                    <div class=\"d-flex flex-column justify-content-center\" *ngIf=\"vCheckin\">\r\n\r\n                        <div class=\"mb-3\" id=\"printDiv1\" [ngStyle]=\"{'width': empresa.impresora === 58 ? '14rem' : '24rem'}\">\r\n\r\n                            <div class=\"card border mx-auto\">\r\n                                <div class=\"card-body\">\r\n\r\n                                    <div class=\"d-flex justify-content-center\">\r\n                                        <img *ngIf=\"empresa?.logo\" [src]=\"empresa?.logo | imagen:'logo'\" class=\"mx-auto\" width=\"200px\" alt=\"\">\r\n                                    </div>\r\n\r\n                                    <h4 class=\"card-title mb-0 text-wrap text-center\"> {{ empresa?.name }} </h4>\r\n                                    <p class=\"text-center mb-0\" *ngFor=\"let text of ticketHeader\" style=\"line-height: 1rem;\"> {{ text }} </p>\r\n\r\n\r\n                                    <div class=\"d-flex flex-column justify-content-center\" style=\"color: #000;\">\r\n                                        <p class=\"mb-0 fs-5\">Placa</p>\r\n                                        <h4 class=\"text-center display-5\">\r\n                                            <ngx-barcode [bc-value]=\"vCheckin.placa\" [bc-display-value]=\"true\"></ngx-barcode>\r\n                                        </h4>\r\n                                        <p class=\"mb-0 fs-4\"> Ingreso: {{ vCheckin.fecha | date:'short' }} </p>\r\n\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div>\r\n                            <button (click)=\"printDiv('printDiv1')\" type=\"button\" class=\"btn btn-primary\">Imprimir</button>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"w-50 px-3\">\r\n            <div class=\"card\">\r\n                <div class=\"card-body\">\r\n                    <h4 class=\"text-center display-5\">\r\n                        <i class=\"bi bi-box-arrow-up-right\"></i>\r\n                        <br> Salida\r\n                    </h4>\r\n\r\n                    <div class=\"formGroup mb-3\">\r\n                        <input type=\"search\" (keyup.enter)=\"checkout(outP.value)\" #outP class=\"form-control\" placeholder=\"Placa\" name=\"\" id=\"\">\r\n                    </div>\r\n\r\n                    <div class=\"d-flex flex-column justify-content-center py-4\" *ngIf=\"vCheckout\">\r\n\r\n                        <div class=\"\" id=\"printDiv2\" [ngStyle]=\"{'width': empresa.impresora === 58 ? '14rem' : '24rem'}\">\r\n\r\n                            <div class=\"card border\">\r\n                                <div class=\"card-body\" style=\"color: #000;\">\r\n\r\n                                    <div class=\"d-flex justify-content-center\">\r\n                                        <img *ngIf=\"empresa?.logo\" [src]=\"empresa?.logo | imagen:'logo'\" class=\"mx-auto\" width=\"200px\" alt=\"\">\r\n                                    </div>\r\n\r\n                                    <h4 class=\"card-title mb-0 text-wrap text-center\"> {{ empresa?.name }} </h4>\r\n                                    <p class=\"text-center mb-0\" *ngFor=\"let text of ticketHeader\" style=\"line-height: 1rem;\"> {{ text }} </p>\r\n\r\n                                    <div class=\"d-flex flex-column justify-content-center\" style=\"color: #000; line-height: 150%;\">\r\n                                        <p class=\"mb-0 fs-4\"> Factura: {{ vCheckout.invoice }} </p>\r\n                                        <p class=\"mb-0 fs-3 fw-bold\"> Placa: {{ vCheckout.car.placa }} </p>\r\n                                        <p class=\"mb-0 fs-4\"> Fecha Ingreso: {{ vCheckout.fecha | date:'d/M/yy' }} </p>\r\n                                        <p class=\"mb-0 fs-4\"> Hora Ingreso: {{ vCheckout.fecha | date:'h:mm a' }} </p>\r\n                                        <p class=\"mb-0 fs-4\"> Fecha Salida: {{ vCheckout.checkout | date:'d/M/yy' }} </p>\r\n                                        <p class=\"mb-0 fs-4\"> Hora Salida: {{ vCheckout.checkout | date:'h:mm a' }} </p>\r\n                                        <p class=\"mb-0 fs-4\"> T. Plenas: {{ vCheckout.plenas }} </p>\r\n                                        <p class=\"mb-0 fs-4\"> Sub-total: {{ vCheckout.subtotal | divisa }} </p>\r\n                                        <p class=\"mb-0 fs-4\"> IVA: {{ vCheckout.iva | divisa}} </p>\r\n                                        <p class=\"mb-0 fs-5 fw-bold\"> Total: {{ vCheckout.total | divisa }} </p>\r\n                                    </div>\r\n\r\n                                    <p class=\"text-center mb-0\" *ngFor=\"let text of ticketfooter\" style=\"line-height: 1rem;\"> {{ text }} </p>\r\n\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div>\r\n                            <button (click)=\"printDiv('printDiv2')\" type=\"button\" class=\"btn btn-primary\">Imprimir</button>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n    <!-- CHECKIN O CHECKOT DE VEHICULOS -->\r\n\r\n    <!-- TABLA DE VEHICULOS PARQUEADOS -->\r\n    <div class=\"card\">\r\n        <div class=\"card-body\">\r\n\r\n            <div class=\"table-responsive \">\r\n                <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                    <thead class=\"border-bottom \">\r\n                        <tr>\r\n                            <th class=\"text-muted \" scope=\"col\"># Placa</th>\r\n                            <th class=\"text-muted \" scope=\"col\">Cliente</th>\r\n                            <th class=\"text-muted \" scope=\"col\">Categoria</th>\r\n                            <th class=\"text-muted \" scope=\"col\">Usuario</th>\r\n                            <th class=\"text-muted \" scope=\"col\">fecha</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n\r\n                        <tr *ngIf=\"parqueos.length === 0\" class=\"text-center \">\r\n                            <th colspan=\"13\" class=\"py-4\">\r\n                                <h4 class=\"text-muted\"> No hay vehiculos parqueados </h4>\r\n                            </th>\r\n                        </tr>\r\n\r\n                        <tr class=\"trHover\" *ngFor=\"let parq of parqueos; let i = index\">\r\n                            <th scope=\"row \">{{ parq.placa }}</th>\r\n                            <td>{{ parq.car.cliente }}</td>\r\n                            <td>{{ parq.car.typeparq.name }}</td>\r\n                            <td> {{ parq.user.name }} </td>\r\n                            <td>{{ parq.fecha | date: 'short' }}</td>\r\n                        </tr>\r\n\r\n                    </tbody>\r\n\r\n                </table>\r\n\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    <!-- TABLA DE VEHICULOS PARQUEADOS -->\r\n\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    NUEVA CATEGORIA \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"exampleModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h1 class=\"modal-title fs-5\" id=\"exampleModalLabel\">Categorias</h1>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n                <div class=\"pt-4\">\r\n                    <div class=\"d-flex flex-wrap mb-3\">\r\n                        <button class=\"btn btn-primary\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapseExample\" aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                            Crear Categoria\r\n                        </button>\r\n                    </div>\r\n                    <div class=\"collapse border-0\" id=\"collapseExample\">\r\n                        <div class=\"card card-body\">\r\n                            <h4 class=\"mb-2\">Crea una categoria nueva en parqueadero</h4>\r\n                            <form class=\"row g-3 d-flex align-items-end\" [formGroup]=\"newCategoryForm\" (ngSubmit)=\"createCategory()\">\r\n                                <div class=\"col-auto\">\r\n                                    <label for=\"categoria\" class=\"\">Categoria</label>\r\n                                    <input formControlName=\"name\" type=\"text\" class=\"form-control\" id=\"categoria\" placeholder=\"Carro, Moto, Bicicleta, etc...\">\r\n                                    <small *ngIf=\"validateNewCategory('name')\" class=\"text-danger\"> Le nombre de la categoria es obligatorio </small>\r\n                                </div>\r\n\r\n                                <div class=\"col-auto\">\r\n                                    <label for=\"precio\" class=\"\">Tarifa</label>\r\n                                    <input formControlName=\"price\" type=\"number\" class=\"form-control\" id=\"precio\" placeholder=\"Precio\">\r\n                                    <small *ngIf=\"validateNewCategory('price')\" class=\"text-danger\"> Le nombre de la categoria es obligatorio </small>\r\n                                </div>\r\n\r\n                                <div class=\"col-auto\">\r\n                                    <label for=\"plena\" class=\"\">Tarifa Plena</label>\r\n                                    <input formControlName=\"plena\" type=\"number\" class=\"form-control\" id=\"plena\" placeholder=\"Tarifa Plena\">\r\n                                    <small *ngIf=\"validateNewCategory('price')\" class=\"text-danger\"> Este campo es obligatorio </small>\r\n                                </div>\r\n\r\n                                <div class=\"col-auto\">\r\n                                    <label for=\"tprecio\" class=\"\">Tiempo Plena</label>\r\n                                    <input formControlName=\"tplena\" type=\"number\" class=\"form-control\" id=\"tprecio\" placeholder=\"Tiempo Plena\">\r\n                                    <small *ngIf=\"validateNewCategory('price')\" class=\"text-danger\"> Este campo es obligatorio </small>\r\n                                </div>\r\n\r\n                                <div class=\"col-auto\">\r\n                                    <label for=\"categoriass\" class=\"\">Tipo</label>\r\n                                    <select formControlName=\"type\" class=\"form-select\" aria-label=\"Default select example\">\r\n                                        <option value=\"none\">Seleccionar Tipo</option>\r\n                                        <option value=\"Minutos\"> Minutos</option>\r\n                                        <option value=\"Horas\"> Horas</option>\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <div class=\"col-auto\">\r\n                                    <label for=\"categoriass\" class=\"\">Impuestos</label>\r\n                                    <select formControlName=\"tax\" class=\"form-select\" aria-label=\"Default select example\">\r\n                                        <option value=\"none\">Seleccionar impuesto</option>\r\n                                        <option *ngFor=\"let impuesto of impuestos\" [value]=\"impuesto.taxid\"> {{ impuesto.name }} </option>\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <div class=\"col-auto\">\r\n                                    <button type=\"submit\" class=\"btn btn-primary\">Guardar</button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <hr>\r\n\r\n                <div class=\"d-flex justify-content-center flex-wrap gap-2\">\r\n\r\n                    <div class=\"w-75\">\r\n                        <div class=\"table-responsive\">\r\n                            <table class=\"table table-sm table-striped\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th scope=\"col\">Categoria</th>\r\n                                        <th scope=\"col\">Tarifa</th>\r\n                                        <th scope=\"col\">Tarifa Plena</th>\r\n                                        <th scope=\"col\">IVA</th>\r\n                                        <th scope=\"col\"></th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n\r\n                                    <tr *ngIf=\"categories.length === 0\">\r\n                                        <td class=\"text-center\" colspan=\"3\"> No existen categorias de parqueadero guardadas...</td>\r\n                                    </tr>\r\n\r\n                                    <tr *ngFor=\"let category of categories\">\r\n                                        <th scope=\"row\"> {{ category.name }} </th>\r\n                                        <td> {{ category.price | currency: 'COP': symbol:'1.0-0' }} </td>\r\n                                        <td> {{ category.plena | currency: 'COP': symbol:'1.0-0' }} </td>\r\n                                        <td> {{ category.tax.valor }}% </td>\r\n                                        <td>\r\n                                            <button (click)=\"selectCategory(category)\" type=\"button\" class=\"btn btn-link p-1 text-primary\">\r\n                                                <i class=\"bi bi-pencil\"></i>\r\n                                            </button>\r\n                                        </td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n\r\n                    <div class=\"card\">\r\n                        <div class=\"card-body\">\r\n\r\n                            <div class=\"d-flex justify-content-end\">\r\n                                <button type=\"button\" class=\"btn btn-link text-dark ms-auto\">\r\n                                    <i class=\"bi bi-x-lg\"></i>\r\n                                </button>\r\n                            </div>\r\n\r\n                            <h5>Editar Categoria</h5>\r\n\r\n                            <form [formGroup]=\"upCategoryForm\" (ngSubmit)=\"updateCategory()\">\r\n                                <div class=\"formGroup\">\r\n                                    <label for=\"categoria\" class=\"\">Categoria</label>\r\n                                    <input formControlName=\"name\" type=\"text\" class=\"form-control\" id=\"categoria\" placeholder=\"Carro, Moto, Bicicleta, etc...\">\r\n                                    <small *ngIf=\"validateNewCategory('name')\" class=\"text-danger\"> Le nombre de la categoria es obligatorio </small>\r\n                                </div>\r\n\r\n                                <div class=\"formGroup\">\r\n                                    <label for=\"precio\" class=\"\">Tarifa</label>\r\n                                    <input formControlName=\"price\" type=\"number\" class=\"form-control\" id=\"precio\" placeholder=\"Precio\">\r\n                                    <small *ngIf=\"validateNewCategory('price')\" class=\"text-danger\"> Le nombre de la categoria es obligatorio </small>\r\n                                </div>\r\n\r\n                                <div class=\"formGroup\">\r\n                                    <label for=\"plena\" class=\"\">Tarifa Plena</label>\r\n                                    <input formControlName=\"plena\" type=\"number\" class=\"form-control\" id=\"plena\" placeholder=\"Tarifa Plena\">\r\n                                    <small *ngIf=\"validateNewCategory('price')\" class=\"text-danger\"> Este campo es obligatorio </small>\r\n                                </div>\r\n\r\n                                <div class=\"formGroup\">\r\n                                    <label for=\"tprecio\" class=\"\">Tiempo Plena</label>\r\n                                    <input formControlName=\"tplena\" type=\"number\" class=\"form-control\" id=\"tprecio\" placeholder=\"Tiempo Plena\">\r\n                                    <small *ngIf=\"validateNewCategory('price')\" class=\"text-danger\"> Este campo es obligatorio </small>\r\n                                </div>\r\n\r\n                                <div class=\"formGroup\">\r\n                                    <label for=\"categoriass\" class=\"\">Tipo</label>\r\n                                    <select formControlName=\"type\" class=\"form-select\" aria-label=\"Default select example\">\r\n                                        <option value=\"none\">Seleccionar Tipo</option>\r\n                                        <option value=\"Minutos\"> Minutos</option>\r\n                                        <option value=\"Horas\"> Horas</option>\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <div class=\"formGroup mb-3\">\r\n                                    <label for=\"categoriass\" class=\"\">Impuestos</label>\r\n                                    <select formControlName=\"tax\" class=\"form-select\" aria-label=\"Default select example\">\r\n                                        <option value=\"none\">Seleccionar impuesto</option>\r\n                                        <option *ngFor=\"let impuesto of impuestos\" [value]=\"impuesto.taxid\"> {{ impuesto.name }} </option>\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <button type=\"submit\" class=\"btn btn-primary w-100\">Actualizar</button>\r\n\r\n                            </form>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    NUEVO VEHICULO \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"VehiculosModal\" tabindex=\"-1\" aria-labelledby=\"VehiculosModalLabel\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h1 class=\"modal-title fs-5\" id=\"VehiculosModalLabel\">Vehiculos</h1>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" #mVehiculo></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n                <div class=\"pt-4\">\r\n                    <div class=\"d-flex flex-wrap mb-3\">\r\n                        <button #btnVC class=\"btn btn-primary\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapseExample\" aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                            Crear Vehiculos\r\n                        </button>\r\n                    </div>\r\n                    <div class=\"collapse border-0\" id=\"collapseExample\">\r\n                        <div class=\"card card-body\">\r\n                            <h4 class=\"mb-2\">Crea un nuevo vehiculo</h4>\r\n                            <form class=\"row g-3 d-flex align-items-end\" [formGroup]=\"newCarForm\" (ngSubmit)=\"createCar()\">\r\n                                <div class=\"col-auto\">\r\n                                    <label for=\"categoria\" class=\"\">Placa</label>\r\n                                    <input formControlName=\"placa\" type=\"text\" class=\"form-control\" id=\"categoria\" placeholder=\"Placa\">\r\n                                </div>\r\n                                <div class=\"col-auto\">\r\n                                    <label for=\"cliente\" class=\"\">Cliente</label>\r\n                                    <input formControlName=\"cliente\" type=\"text\" class=\"form-control\" id=\"cliente\" placeholder=\"Cliente\">\r\n                                </div>\r\n\r\n                                <div class=\"col-auto\">\r\n                                    <label for=\"categoriass\" class=\"\">Categorias</label>\r\n                                    <select formControlName=\"typeparq\" class=\"form-select\" aria-label=\"Default select example\">\r\n                                        <option selected value=\"none\">Seleccionar categoria</option>\r\n                                        <option *ngFor=\"let categ of categories\" [value]=\"categ.tpid\"> {{ categ.name }} </option>\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <div class=\"col-auto\">\r\n                                    <button type=\"submit\" class=\"btn btn-primary\">Guardar</button>\r\n                                </div>\r\n                            </form>\r\n\r\n                            <small *ngIf=\"validateNewCar('placa')\" class=\"text-danger\"> La placa del vehiculo es obligatoria</small>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <hr>\r\n\r\n                <div class=\"d-flex justify-content-center flex-wrap gap-2\">\r\n\r\n                    <div class=\"w-75\">\r\n\r\n                        <div class=\"form-floating mb-2\">\r\n                            <span class=\"position-absolute top-50 start-90 translate-middle\"><i class=\" bi-search \" style=\"font-size: 1rem \"></i></span>\r\n                            <input type=\"text\" class=\"form-control\" id=\"floatingInput2\" placeholder=\"Buscar Categoria\" (keyup)=\"searchCars(search.value)\" #search>\r\n                            <label for=\"floatingInput2 \">Buscar Vehiculo</label>\r\n                        </div>\r\n\r\n                        <div class=\"table-responsive\">\r\n                            <table class=\"table table-sm table-striped\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th scope=\"col\">Placa</th>\r\n                                        <th scope=\"col\">Cliente</th>\r\n                                        <th scope=\"col\">Categoria</th>\r\n                                        <th></th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n\r\n                                    <tr *ngIf=\"cars.length === 0\">\r\n                                        <td class=\"text-center\" colspan=\"4\"> No existen vehiculos registrados...</td>\r\n                                    </tr>\r\n\r\n                                    <tr *ngFor=\"let car of cars\">\r\n                                        <th scope=\"row\"> {{ car.placa }} </th>\r\n                                        <td> {{ car.cliente }} </td>\r\n                                        <td> {{ car.typeparq.name }} </td>\r\n                                        <td>\r\n                                            <button (click)=\"selectCar(car)\" type=\"button\" class=\"btn btn-link p-1 text-primary\">\r\n                                                <i class=\"bi bi-pencil\"></i>\r\n                                            </button>\r\n                                        </td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n\r\n                    <div class=\"card\">\r\n                        <div class=\"card-body\">\r\n\r\n                            <div class=\"d-flex justify-content-end\">\r\n                                <button type=\"button\" class=\"btn btn-link text-dark ms-auto\">\r\n                                    <i class=\"bi bi-x-lg\"></i>\r\n                                </button>\r\n                            </div>\r\n\r\n                            <h5>Editar Vehiculo</h5>\r\n\r\n                            <form [formGroup]=\"upCarForm\" (ngSubmit)=\"updateCar()\">\r\n                                <div class=\"formGroup mb-3\">\r\n                                    <label for=\"categoria\" class=\"visually-hidden\">Placa</label>\r\n                                    <input formControlName=\"placa\" type=\"text\" class=\"form-control\" id=\"categoria\" placeholder=\"Placa del vehiculo\">\r\n                                    <small *ngIf=\"validateUpCar('placa')\" class=\"text-danger\"> La placa del vehiculo es obligatoria </small>\r\n                                </div>\r\n                                <div class=\"formGroup mb-3\">\r\n                                    <label for=\"clienteU\" class=\"visually-hidden\">Cliente</label>\r\n                                    <input formControlName=\"cliente\" type=\"text\" class=\"form-control\" id=\"clienteU\" placeholder=\"Cliente\">\r\n                                    <small *ngIf=\"validateUpCar('cliente')\" class=\"text-danger\"> El cliente es obligatorio </small>\r\n                                </div>\r\n\r\n                                <div class=\"formGroup mb-3\">\r\n                                    <select formControlName=\"typeparq\" class=\"form-select\" aria-label=\"Default select example\">\r\n                                        <option selected value=\"none\">Seleccionar categoria</option>\r\n                                        <option *ngFor=\"let categ of categories\" [value]=\"categ.tpid\"> {{ categ.name }} </option>\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <div class=\"formGroup mb-3\">\r\n                                    <button type=\"submit\" class=\"btn btn-primary w-100\">Actualizar</button>\r\n                                </div>\r\n                            </form>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    MODAL REGISTRAR ENTRADAS Y SALIDAS\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"entradaSalidas\" tabindex=\"-1\" aria-labelledby=\"entradaSalidasModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"entradaSalidasModal\"><i class=\"bi-arrow-left-right\" style=\"font-size: 1rem\"></i> Movimientos </h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n\r\n            <div class=\"modal-body\">\r\n\r\n                <!-- NAV - NAV -->\r\n                <nav>\r\n                    <div class=\"nav nav-tabs\" id=\"nav-tab\" role=\"tablist\">\r\n                        <a class=\"nav-link active\" id=\"nav-entradas-tab\" data-bs-toggle=\"tab\" href=\"#nav-entradas\" role=\"tab\" aria-controls=\"nav-entradas\" aria-selected=\"true\"><i class=\"bi-box-arrow-in-right\"></i>  Entradas</a>\r\n                        <a class=\"nav-link\" id=\"nav-salidas-tab\" data-bs-toggle=\"tab\" href=\"#nav-salidas\" role=\"tab\" aria-controls=\"nav-salidas\" aria-selected=\"false\"><i class=\"bi-box-arrow-right\"></i> Salidas</a>\r\n                    </div>\r\n                </nav>\r\n                <!-- NAV - NAV -->\r\n\r\n                <div class=\"tab-content\" id=\"nav-tabContent\">\r\n\r\n                    <!-- ENTRADAS - ENTRADAS - ENTRADAS -->\r\n                    <div class=\"tab-pane fade show active\" id=\"nav-entradas\" role=\"tabpanel\" aria-labelledby=\"nav-entradas-tab\">\r\n\r\n                        <div class=\"py-4\">\r\n\r\n                            <div class=\"form-group\">\r\n                                <label for=\"\">Entrada</label>\r\n                                <input type=\"number\" class=\"form-control\" placeholder=\"Monto de entrada\" #montoE>\r\n                            </div>\r\n\r\n                            <div class=\"form-group\">\r\n                                <label for=\"\">Descripción</label>\r\n                                <input type=\"text\" class=\"form-control\" placeholder=\"Descripción\" #descriptionE>\r\n                            </div>\r\n\r\n                            <div class=\"col py-2\">\r\n                                <button type=\"button\" (click)=\"entradaSalida('entrada', descriptionE.value, montoE.value)\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n\r\n                    </div>\r\n                    <!-- ENTRADAS - ENTRADAS - ENTRADAS -->\r\n                    <!-- SALIDAS - SALIDAS - SALIDAS -->\r\n                    <div class=\"tab-pane fade\" id=\"nav-salidas\" role=\"tabpanel\" aria-labelledby=\"nav-salidas-tab\">\r\n\r\n                        <div class=\"py-4\">\r\n\r\n                            <div class=\"form-group\">\r\n                                <label for=\"\">Salida</label>\r\n                                <input type=\"number\" class=\"form-control\" placeholder=\"Monto de salida\" #montoS>\r\n                            </div>\r\n\r\n                            <div class=\"form-group\">\r\n                                <label for=\"\">Descripción</label>\r\n                                <input type=\"text\" class=\"form-control\" placeholder=\"Descripción\" #descriptionS>\r\n                            </div>\r\n\r\n                            <div class=\"col py-2\">\r\n                                <button type=\"button\" (click)=\"entradaSalida('salida', descriptionS.value, montoS.value)\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n                    <!-- SALIDAS - SALIDAS - SALIDAS -->\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- =========================================================================\r\nPRODUCT SELECT\r\n========================================================================= -->\r\n<ng-template #modalCheckOut let-close=\"close\">\r\n\r\n    <div class=\"modal-header\">\r\n        <h5 class=\"modal-title\">Salida</h5>\r\n        <button type=\"button\" class=\"close\" (click)=\"close()\">\r\n            <span aria-hidden=\"true\">&times;</span>\r\n        </button>\r\n    </div>\r\n\r\n    <div class=\"modal-body\">\r\n\r\n        <!-- SUBTOTALES -->\r\n        <div class=\"\">\r\n            <p *ngIf=\"plenas > 0\" class=\"mb-1 text-center text-break\"> Plenas: {{ plenas }} </p>\r\n            <p class=\"mb-1 text-center text-break\"> Subtotal: {{ subtotal | divisa }} </p>\r\n            <p class=\"mb-1 text-center text-break\">IVA: {{ iva | divisa }} </p>\r\n        </div>\r\n\r\n\r\n\r\n        <!-- TOTALES -->\r\n        <div class=\"pb-2\">\r\n            <p class=\"mb-0 text-center fw-bold\">TOTAL</p>\r\n            <h4 class=\"mb-3 display-5 text-center text-break fw-bold\"> {{ total | divisa }} </h4>\r\n            <p class=\"mb-2 text-center\" *ngIf=\"payments.length > 0\" [ngClass]=\"{'text-success': restante === 0, 'text-danger': restante < total || restante > total}\"> Restante {{ restante | divisa }} </p>\r\n            <div class=\"d-flex justify-content-center\">\r\n                <a class=\"text-decoration-none mx-auto\" data-bs-toggle=\"collapse\" href=\"#collapseExample\" role=\"button\" aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                    Editar Monto\r\n                </a>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- BUSCAR CLIENTE -->\r\n        <hr>\r\n        <div>\r\n            <label for=\"\">Buscar Cliente</label>\r\n            <input type=\"text\" class=\"form-control\" placeholder=\"buscar cliente\" (keyup)=\"buscarCliente(searchClient.value)\" #searchClient>\r\n        </div>\r\n        <div *ngIf=\"listaClientes.length > 0\" class=\"bg-white py-3 px-2 shadow\" style=\"position: absolute; z-index: 1020;\">\r\n\r\n            <div *ngIf=\"cargandoCliente\" class=\"text-center py-3\">\r\n                <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                    <span class=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n                <div>\r\n                    <small class=\"text-muted\">Cargando...</small>\r\n                </div>\r\n            </div>\r\n\r\n            <ul *ngIf=\"!cargandoCliente\" class=\"list-group list-group-flush overflow-auto\" style=\"max-height: 200px; min-width: 250px;\">\r\n\r\n                <li class=\"list-group-item\">\r\n                    <h6>Resultados: ({{ listaClientes.length }})</h6>\r\n                </li>\r\n\r\n                <li class=\"list-group-item\" *ngFor=\"let item of listaClientes\">\r\n\r\n                    <button (click)=\"seleccionarCliente(item)\" type=\"button\" style=\"background: none; border: 0;\">\r\n                        <div class=\"d-flex \">\r\n                            <div class=\"align-self-center\">\r\n                                <span class=\"text-capitalize fw-bold\"> {{ item.name }} </span><br>\r\n                                <small> C.C: {{ item.cedula }} </small>\r\n                            </div>\r\n\r\n                            <div class=\"ms-auto\">\r\n                                <i class=\"text-success bi-arrow-90deg-right\"></i>\r\n                            </div>\r\n                        </div>\r\n                    </button>\r\n\r\n                </li>\r\n            </ul>\r\n\r\n        </div>\r\n\r\n        <!-- INFORMACION DEL CLIENTE -->\r\n        <div *ngIf=\"clienteTemp\" class=\"d-flex flex-column mt-2\">\r\n\r\n            <div>\r\n                <h6 class=\"fw-bold mb-0\">CLIENTE: <small> {{ clienteTemp.name }}</small> </h6>\r\n            </div>\r\n            <div>\r\n                <h6 class=\"fw-bold mb-0\">CC/Nit: <small *ngIf=\"clienteTemp.cedula\"> {{ clienteTemp.cedula }} </small> </h6>\r\n            </div>\r\n        </div>\r\n\r\n        <hr>\r\n        <!-- BUSCAR CLIENTE -->\r\n\r\n        <div class=\"collapse\" id=\"collapseExample\">\r\n            <div class=\"card card-body\">\r\n\r\n                <div class=\"row g-3 d-flex justify-content-center align-items-end\">\r\n                    <div class=\"col-auto\">\r\n                        <label for=\"categoria\" class=\"\">Nuevo Monto</label>\r\n                        <input type=\"text\" class=\"form-control\" id=\"categoria\" placeholder=\"Monto\" #nMonto>\r\n                    </div>\r\n\r\n                    <div class=\"col-auto\">\r\n                        <button type=\"button\" (click)=\"newMonto(nMonto.value)\" class=\"btn btn-primary\">Actualizar</button>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n\r\n        <!-- PAGOS -->\r\n        <div>\r\n            <h4 class=\"mb-3 text-center\"> Agregar Pagos </h4>\r\n\r\n            <!-- TIPO DE PAGO -->\r\n            <div class=\"form-group\">\r\n                <label class=\"control-label\">Metodo de pago</label>\r\n                <select class=\"form-select\" aria-label=\"Default select example\" #typeAdd>\r\n                    <option value=\"efectivo\">Efectivo</option>   \r\n                    <option *ngFor=\"let banco of bancos\" [value]=\"banco.name\"> {{banco.name}}</option>   \r\n                </select>\r\n            </div>\r\n\r\n            <!-- MONTO -->\r\n            <div class=\"form-group\">\r\n                <label class=\"control-label\">Monto</label>\r\n                <input id=\"montoP\" type=\"number\" min=\"0\" class=\"form-control\" placeholder=\"Agrega un monto\" (keyup)=\"montoP.value\" #montoP>\r\n            </div>\r\n\r\n            <button (click)=\"addPay(montoP.value, typeAdd.value)\" type=\"button\" class=\"btn btn-primary w-100\">Agregar</button>\r\n\r\n        </div>\r\n\r\n        <!-- LISTA DE PAGOS -->\r\n        <div *ngIf=\"payments.length > 0 \" class=\"table-responsive\" style=\"clear: both;\">\r\n            <table class=\"table table-hover\">\r\n                <thead>\r\n                    <tr>\r\n                        <th></th>\r\n                        <th>Metodo</th>\r\n                        <th class=\"text-right\">Monto</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor=\"let pay of payments; let i = index\">\r\n                        <td>\r\n                            <button type=\"button\" (click)=\"delPay(i)\" class=\"btn btn-link p-1 text-danger text-right\"><i class=\"bi-trash\"></i></button>\r\n                        </td>\r\n                        <td> {{ pay.type }} </td>\r\n                        <td class=\"text-right\"> {{ pay.amount }} </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n\r\n    </div>\r\n\r\n\r\n    <div class=\"modal-footer\">\r\n        <button type=\"button\" [disabled]=\"facturando == true || user.cerrada || restante < 0\" class=\"btn btn-sm btn-outline-primary\" (click)=\"crearFactura(false)\">\r\n            <span *ngIf=\"facturando\">Facturando...</span>\r\n            <span *ngIf=\"!facturando\">Crear tirilla pos</span>\r\n            \r\n        </button>\r\n\r\n        <button type=\"button\" [disabled]=\"facturando == true || user.cerrada || restante < 0\" (click)=\"crearFactura(true)\" class=\"btn btn-sm btn-outline-success\">\r\n            <span *ngIf=\"facturando\">Facturando...</span>\r\n            <span *ngIf=\"!facturando\">Crear Factura Electronica</span>\r\n            \r\n        </button>\r\n    </div>\r\n\r\n</ng-template>\r\n\r\n<!-- =========================================================================\r\n    MODAL CREAR CLIENTE \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"buscarCliente\" tabindex=\"-1\" aria-labelledby=\"buscarClienteModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"buscarClienteModal\"><i class=\"bi-people\" style=\"font-size: 1rem\"></i>Crear Cliente</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n                <div class=\"mt-2\">\r\n\r\n                    <form autocomplete=\"off\" [formGroup]=\"newClientForm\" (ngSubmit)=\"crearCliente()\">\r\n\r\n                        <!-- =======================================================================\r\n                            DATOS PERSONALES \r\n                        =========================================================================== -->\r\n\r\n                        <div class=\"row mb-2\">\r\n\r\n                            <!-- Tipo de empresa ** -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"partyType\" class=\"col-sm-auto col-form-label\">Tipo de empresa</label>\r\n                                <select formControlName=\"party_type\" class=\"form-select\" id=\"partyType\" #partyType (change)=\"partyType.value\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"PERSONA_NATURAL\">Persona Natural</option>\r\n                                    <option value=\"PERSONA_JURIDICA\" >Persona Juridica</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- Nombre de la empresa -->\r\n                            <div *ngIf=\"partyType.value === 'PERSONA_JURIDICA'\" class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"companyName\">Nombre de la empresa </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"companyName\" formControlName=\"company_name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombre de la empresa\">\r\n                                    <label for=\"floatingInput\">Nombre de la empresa </label>\r\n                                </div>\r\n                                <p *ngIf=\"campoValido('company_name')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <!-- Nombres de la persona natural -->\r\n                            <div *ngIf=\"partyType.value === 'PERSONA_NATURAL'\" class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"firstName\">Nombres de la persona natural </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"firstName\" formControlName=\"first_name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombres de la persona natural\">\r\n                                    <label for=\"floatingInput\">Nombres de la persona natural </label>\r\n                                </div>\r\n                                <p *ngIf=\"campoValido('first_name')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <!-- Apellidos de la persona natural -->\r\n                            <div *ngIf=\"partyType.value === 'PERSONA_NATURAL'\" class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"familyName\">Apellidos de la persona natural </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"familyName\" formControlName=\"family_name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Apellidos de la persona natural\">\r\n                                    <label for=\"floatingInput\">Apellidos de la persona natural </label>\r\n                                </div>\r\n                                <p *ngIf=\"campoValido('family_name')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <!-- TIPO DE DOCUMENTO -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"indentityType\" class=\"col-sm-auto col-form-label\">Tipo de documento</label>\r\n                                <select formControlName=\"party_identification_type\" class=\"form-select\" id=\"indentityType\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"NIT\">NIT</option>\r\n                                    <option value=\"CC\" selected>CC</option>\r\n                                    <option value=\"PASAPORTE\" >PASAPORTE</option>\r\n                                    <option value=\"CE\" >CE</option>\r\n                                    <option value=\"TE\" >TE</option>\r\n                                    <option value=\"PEP\" >PEP</option>\r\n                                    <option value=\"TI\" >TI</option>\r\n                                    <option value=\"RC\" >RC</option>\r\n                                    <option value=\"IE\" >IE</option>\r\n                                    <option value=\"NIT_OTRO_PAIS\" >Nit de otro pais</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- CEDULA O NIT -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"cedula\">CC / NIT </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"cedula\" formControlName=\"cedula\" type=\"text\" class=\"form-control\" placeholder=\"cedula\">\r\n                                    <label for=\"floatingInput\">CC / NIT </label>\r\n                                    <p *ngIf=\"campoValido('cedula')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- EMAIL ** -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"email\">Correo electronico </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"email\" formControlName=\"email\" type=\"text\" class=\"form-control\" placeholder=\"Correo electronico\">\r\n                                    <label for=\"floatingInput\">Correo electronico </label>\r\n                                    <p *ngIf=\"campoValido('email')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- DEPARTAMENTO ** -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"departamentoS\" class=\"col-sm-auto col-form-label\">Departamento</label>\r\n                                <select formControlName=\"department\" class=\"form-select\" id=\"departamentoS\" #departmentSS (change)=\"searchCities(departmentSS.value)\">\r\n                                    <option >Seleccionar Departamento</option>\r\n                                    <option *ngFor=\"let department of departments\" [value]=\"department.departamento\" >{{department.departamento}}</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- CIUDAD ** -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"ciudadS\" class=\"col-sm-auto col-form-label\">Departamento</label>\r\n                                <select formControlName=\"city\" class=\"form-select\" id=\"ciudadS\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"\" selected>Seleccionar Ciudad</option>\r\n                                    <option *ngFor=\"let city of ListCities\" [value]=\"city.ciudad\" >{{city.ciudad}}</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- DIRECCION ** -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"direccion\">Dirección </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"direccion\" formControlName=\"address\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Dirección\">\r\n                                    <label for=\"floatingInput\">Dirección </label>\r\n                                    <p *ngIf=\"campoValido('address')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <!-- TELEFONO -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"telefono\">Telefono </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"telefono\" formControlName=\"phone\" type=\"text\" class=\"form-control\" placeholder=\"Telefono\">\r\n                                    <label for=\"floatingInput\">Telefono </label>\r\n                                    <p *ngIf=\"campoValido('phone')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- REGIMEN -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"regimen\" class=\"col-sm-auto col-form-label\">Regimen</label>\r\n                                <select formControlName=\"regimen\" class=\"form-select\" id=\"regimen\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"SIMPLE\">SIMPLE</option>\r\n                                    <option value=\"AUTORRETENEDOR\" >AUTORRETENEDOR</option>\r\n                                    <option value=\"AGENTE_RETENCION_IVA\" >AGENTE RETENCION IVA</option>\r\n                                    <option value=\"ORDINARIO\" >ORDINARIO</option>\r\n                                    <option value=\"GRAN_CONTRIBUYENTE\" >GRAN CONTRIBUYENTE</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- TIPO DE IMPUESTO ** -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"taxLevel\" class=\"col-sm-auto col-form-label\">Tipo de impuesto</label>\r\n                                <select formControlName=\"tax_level_code\" class=\"form-select\" id=\"taxLevel\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"SIMPLIFICADO\">SIMPLIFICADO</option>\r\n                                    <option value=\"RESPONSABLE_DE_IVA\" >RESPONSABLE DE IVA</option>\r\n                                    <option value=\"NO_RESPONSABLE_DE_IVA\" selected>NO RESPONSABLE DE IVA</option>\r\n                                    <option value=\"COMUN\" >COMUN</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 mb-3 px-md-1 ml-2 ms-2\">\r\n                                <div class=\"form-check mt-2\">\r\n                                    <input formControlName=\"sendemail\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"sendemail\">\r\n                                    <label class=\"form-check-label\" for=\"sendemail\">\r\n                                        Enviar Factura al Correo\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n\r\n                    </form>\r\n\r\n                </div>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport Swal from 'sweetalert2';\r\n\r\n// EXCEL\r\nimport * as XLSX from 'xlsx';\r\n\r\nimport { Parqueo } from 'src/app/models/parqueo.model';\r\nimport { ParqueoService } from 'src/app/services/parqueo.service';\r\n\r\ninterface _query{\r\n  desde: number,\r\n  hasta: number,\r\n  sort?: any,\r\n  $and?: any\r\n}\r\n\r\n@Component({\r\n  selector: 'app-reportes',\r\n  templateUrl: './reportes.component.html',\r\n  styleUrls: ['./reportes.component.css']\r\n})\r\nexport class ReportesComponent implements OnInit {\r\n\r\n  constructor(  private parqueoService: ParqueoService) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.loadParqueos();\r\n  }\r\n\r\n  /** ================================================================\r\n   *   LOAD PARQUEOS\r\n  ==================================================================== */\r\n  public cargando: boolean = true;\r\n  public total: number = 0;\r\n  public parqueos: Parqueo[] = [];\r\n  public parqueosTemp: Parqueo[] = [];\r\n  public query: _query = {\r\n    desde: 0,\r\n    hasta: 50,\r\n    sort: {}\r\n  }\r\n\r\n  loadParqueos(){    \r\n    \r\n    this.parqueoService.loadParqueos(this.query)\r\n    .subscribe( ({ parqueos, total }) => {\r\n\r\n        this.total = total;      \r\n        this.parqueos = parqueos;\r\n        this.parqueosTemp = parqueos;\r\n        this.cargando = false;   \r\n        \r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR PARQUEOS POR FECHAS\r\n  ==================================================================== */\r\n  buscar(desde: any, hasta: any){\r\n\r\n    this.query.$and = [{ checkin: { $gte: new Date(desde).getTime(), $lt: new Date(hasta).getTime() } }]\r\n\r\n    this.parqueoService.loadParqueos(this.query)\r\n    .subscribe( ({ parqueos }) => {\r\n      \r\n        this.parqueos = parqueos;\r\n        this.cargando = false;\r\n\r\n    }, (err) => {\r\n      console.log(err);\r\n      Swal.fire('Error', err.error.msg, 'error');          \r\n    })\r\n    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CAMBIAR PAGINA\r\n  ==================================================================== */\r\n  @ViewChild('mostrar') mostrar: ElementRef;\r\n  cambiarPagina (valor: number){\r\n    \r\n    this.query.hasta = Number(this.mostrar.nativeElement.value);\r\n    \r\n    if (this.query.hasta > 10) {\r\n      valor = valor * (this.query.hasta/10);      \r\n    }\r\n    \r\n    this.query.desde += valor;\r\n    \r\n    if (this.query.desde < 0) {\r\n      this.query.desde = 0;\r\n    }else if( this.query.desde > this.total ){\r\n      this.query.desde -= valor;\r\n    }\r\n    \r\n    this.loadParqueos();\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   CHANGE LIMITE\r\n  ==================================================================== */\r\n  limiteChange( cantidad: any ){    \r\n    \r\n    this.query.hasta = Number(cantidad);\r\n    this.loadParqueos();\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   EXPORTAR EXCEL\r\n  ==================================================================== */\r\n  exportar(){\r\n\r\n    let parqueoList = [];\r\n    let totalBase = 0;\r\n    let totalIva = 0;\r\n    let totalParq = 0;\r\n\r\n    for (const parq of this.parqueos) {\r\n\r\n      let usuario = `${parq.user.name}`;\r\n      \r\n      let { invoice, checkin, checkout, car, placa, subtotal, iva, total, estado } = parq;\r\n\r\n      if (!subtotal) {\r\n        subtotal = 0;\r\n      }\r\n      if (!total) {\r\n        total = 0;\r\n      }\r\n      if (!iva) {\r\n        iva = 0;\r\n      }\r\n\r\n      if (!checkout) {\r\n        checkout = new Date().getTime();\r\n      }\r\n\r\n      parqueoList.push({\r\n        invoice,\r\n        cliente: car.cliente,\r\n        checkin: `${new Date(checkin).getDate()}/${new Date(checkin).getMonth() + 1}/${new Date(checkin).getFullYear()} ${new Date(checkin).getHours()}:${new Date(checkin).getMinutes()}`, \r\n        checkout: `${new Date(checkout).getDate()}/${new Date(checkout).getMonth() + 1}/${new Date(checkout).getFullYear()} ${new Date(checkout).getHours()}:${new Date(checkout).getMinutes()}`, \r\n        categoria: car.typeparq.name, \r\n        placa, \r\n        subtotal, \r\n        iva, \r\n        total, \r\n        estado,\r\n        por: usuario\r\n      });\r\n\r\n      totalBase += subtotal;\r\n      totalIva  += iva;\r\n      totalParq += total;\r\n\r\n    }\r\n\r\n    let datos = [\r\n      {\r\n        subtotal :totalBase,\r\n        iva: totalIva,\r\n        total: totalParq\r\n      }\r\n    ]\r\n\r\n    parqueoList = parqueoList.concat(datos)\r\n\r\n    /* generate a worksheet */\r\n    var ws = XLSX.utils.json_to_sheet(parqueoList);\r\n\r\n    /* add to workbook */\r\n    var wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, ws, \"Reporte\");\r\n\r\n    /* title */\r\n    let title = `Reporte_${new Date().getDate()}_${new Date().getMonth() + 1}_${new Date().getFullYear()}.xls`;\r\n\r\n    /* write workbook and force a download */\r\n    XLSX.writeFile(wb, title);\r\n\r\n  }\r\n\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header class=\"mb-3\">\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Configuraciones / Parqueadero</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark\" id=\"ticket1-tab\" routerLink=\"/dashboard/configuracion/parqueadero\"><i class=\"bi-car-front\" style=\"font-size: 1rem\"></i> Parqueadero</a>\r\n        </li>\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-darka active\" id=\"ticket1-tab\" routerLink=\"/dashboard/parqueadero/reportes\"><i class=\"bi-receipt\" style=\"font-size: 1rem\"></i> Reportes</a>\r\n        </li>\r\n\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<div class=\"container-fluid\">\r\n\r\n    <!-- TITLE - SUBTITLE -->\r\n    <div>\r\n        <h5 class=\"text-dark\">Reportes de parqueadero</h5>\r\n    </div>\r\n    <!-- TITLE - SUBTITLE -->\r\n\r\n    <div class=\"d-flex flex-wrap gap-2\">\r\n\r\n        <!-- <div class=\"col-xl-3 col-md-3 mb-4\">\r\n                        <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-primary h-100 bg-white\">\r\n                            <div class=\"card-body\">\r\n                                <div class=\"d-flex align-items-center flex-wrap\">\r\n                                    <div class=\"flex-grow-1\">\r\n                                        <div class=\"small font-weight-bold text-primary mb-1\">Monto Total Facturas</div>\r\n                                        <div class=\"h5\">({{totalAmount | divisa}})</div>\r\n                                        <div class=\"text-xs font-weight-bold text-success d-inline-flex align-items-center\">\r\n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-trending-up mr-1\"><polyline points=\"23 6 13.5 15.5 8.5 10.5 1 18\"></polyline><polyline points=\"17 6 23 6 23 12\"></polyline></svg>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"ms-2\">\r\n                                        <i class=\"bi bi-receipt text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div> -->\r\n\r\n    </div>\r\n\r\n</div>\r\n\r\n<!-- TABLE FACTURAS -->\r\n<div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n    <div class=\" d-flex justify-content-between mb-3 \">\r\n\r\n        <div>\r\n            <button type=\"button\" class=\"ml-2 btn btn-outline-success btn-sm\" (click)=\"exportar()\"> <i class=\"bi-file-earmark-spreadsheet\"></i> Excel </button>\r\n        </div>\r\n\r\n        <div>\r\n            <label for=\"mostrar\" class=\"me-2\">Mostrar: </label>\r\n            <select name=\"\" id=\"\" [value]=\"query.hasta\" #mostrar (change)=\"limiteChange(mostrar.value)\">\r\n                <option value=\"10\">10</option>\r\n                <option value=\"25\">25</option>\r\n                <option value=\"50\">50</option>\r\n                <option value=\"100\">100</option>\r\n                <option value=\"250\">250</option>\r\n                <option value=\"500\">500</option>\r\n            </select>\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <!-- CARGANDO -->\r\n    <div *ngIf=\"cargando\">\r\n        <div class=\"text-center p-4\">\r\n            <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                <span class=\"visually-hidden\">Loading...</span>\r\n            </div>\r\n        </div>\r\n        <small class=\"text-muted\">cargando...</small>\r\n    </div>\r\n    <!-- CARGANDO -->\r\n\r\n    <div *ngIf=\"!cargando\">\r\n\r\n        <!-- BUSCADOR -->\r\n\r\n        <div class=\"d-flex flex-wrap justify-content-end row g-2 align-items-center\">\r\n\r\n            <div class=\"col-auto\">\r\n                <label class=\"\" for=\"\">Desde</label>\r\n            </div>\r\n\r\n            <div class=\"col-auto\">\r\n                <input type=\"datetime-local\" class=\"form-control\" (change)=\"initial.value\" #initial>\r\n            </div>\r\n\r\n            <div class=\"col-auto\">\r\n                <label class=\"\" for=\"\">Hasta</label>\r\n            </div>\r\n\r\n            <div class=\"col-auto\">\r\n                <input type=\"datetime-local\" class=\"form-control\" (change)=\"end.value\" #end>\r\n            </div>\r\n\r\n            <div class=\"col-auto\">\r\n                <button type=\"button\" class=\"btn btn-outline-primary btn-sm py-auto h-100\" (click)=\"buscar(initial.value, end.value)\"> \r\n                    <i class=\"bi-search\"></i> Buscar \r\n                </button>\r\n            </div>\r\n        </div>\r\n        <!-- BUSCADOR -->\r\n\r\n        <div class=\"table-responsive \">\r\n            <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                <thead class=\"border-bottom \">\r\n                    <tr>\r\n                        <th class=\"text-muted \" scope=\"col\"># Placa</th>\r\n                        <th class=\"text-muted \" scope=\"col\">Cliente</th>\r\n                        <th class=\"text-muted \" scope=\"col\">Categoria</th>\r\n                        <th class=\"text-muted \" scope=\"col\">Usuario</th>\r\n                        <th class=\"text-muted \" scope=\"col\">fecha</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n\r\n                    <tr *ngIf=\"parqueos.length === 0\" class=\"text-center \">\r\n                        <th colspan=\"13\" class=\"py-4\">\r\n                            <h4 class=\"text-muted\"> No hay vehiculos parqueados </h4>\r\n                        </th>\r\n                    </tr>\r\n\r\n                    <tr class=\"trHover\" *ngFor=\"let parq of parqueos; let i = index\">\r\n                        <th scope=\"row \">{{ parq.placa }}</th>\r\n                        <td>{{ parq.car.cliente }}</td>\r\n                        <td>{{ parq.car.typeparq.name }}</td>\r\n                        <td> {{ parq.user.name }} </td>\r\n                        <td>{{ parq.fecha | date: 'short' }}</td>\r\n                    </tr>\r\n\r\n                </tbody>\r\n\r\n            </table>\r\n\r\n        </div>\r\n\r\n        <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n        <div class=\"row\">\r\n            <div class=\"col col-md-4\">\r\n\r\n                <small class=\"text-muted\"> (Resultados: {{ parqueos.length }})</small>\r\n                <small *ngIf=\"query.desde !== 0\" class=\"text-muted\"> - (Desde el: {{ query.desde + 1}} Hasta el: {{ query.desde + parqueos.length }})</small>\r\n\r\n            </div>\r\n\r\n            <div class=\"col d-flex justify-content-end\">\r\n                <button type=\"button\" (click)=\"cambiarPagina((query.hasta * -1))\" [disabled]=\"query.desde === 0\" class=\"btn btn-sm btn-dark btnW waves-effect waves-light px-3\">Anterior</button>\r\n                <button type=\"button\" (click)=\"cambiarPagina(query.hasta)\" [disabled]=\"(query.desde + 10) > parqueos.length\" class=\"btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2\">Siguiente</button></div>\r\n        </div>\r\n        <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n    </div>\r\n\r\n</div>\r\n<!-- TABLE FACTURAS -->","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport Swal from 'sweetalert2';\r\n\r\n\r\nimport { PrestamosService } from 'src/app/services/prestamos.service';\r\nimport { BancosService } from 'src/app/services/bancos.service';\r\n\r\nimport { Prestamo } from 'src/app/models/prestamos.model';\r\nimport { Banco } from 'src/app/models/bancos.model';\r\n\r\n@Component({\r\n  selector: 'app-prestamo',\r\n  templateUrl: './prestamo.component.html',\r\n  styleUrls: ['./prestamo.component.css']\r\n})\r\nexport class PrestamoComponent implements OnInit {\r\n\r\n  constructor(  private activatedRoute: ActivatedRoute,\r\n                private fb: FormBuilder,\r\n                private prestamosService: PrestamosService,\r\n                private bancosService: BancosService) { \r\n\r\n    activatedRoute.params.subscribe( ({id}) => {\r\n\r\n      this.loadPrestamo(id);\r\n\r\n    })\r\n\r\n  }\r\n\r\n  public hoy: number = new Date().getTime();\r\n\r\n  ngOnInit(): void {\r\n\r\n    // CARGAR BANCOS\r\n    this.cargarBancos();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR BANCOS\r\n  ==================================================================== */\r\n  public bancos: Banco[] = [];\r\n  cargarBancos(){\r\n\r\n    this.bancosService.loadBancos()\r\n        .subscribe( ({bancos}) => {\r\n\r\n          this.bancos = bancos.filter( banco => banco.status === true);          \r\n\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR PRESTAMO\r\n  ==================================================================== */\r\n  public prestamo: Prestamo;\r\n  public totalAbonado: number = 0;\r\n  public totalInteres: number = 0;\r\n  loadPrestamo(id: string){\r\n\r\n    this.prestamosService.loadPrestamoID(id)\r\n        .subscribe( ({prestamo}) => {\r\n\r\n          this.prestamo = prestamo;\r\n          this.prestamo.payments.map( pago => {\r\n\r\n            if (pago.type === 'interes') {\r\n              this.totalInteres += pago.amount;\r\n            }\r\n\r\n            if (pago.type === 'abono') {\r\n              this.totalAbonado += pago.amount;\r\n            }\r\n\r\n          })\r\n\r\n        }, (err) => {\r\n\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n          \r\n\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   AGREGAR PAGO\r\n  ==================================================================== */\r\n  public formSubmittedPago: boolean = false;\r\n  public addPagoForm = this.fb.group({\r\n    type: ['abono', [Validators.required]],\r\n    metodo: ['efectivo', Validators.required],\r\n    amount: [0, [Validators.required, Validators.min(1)]],\r\n    description: '',\r\n    fecha: '',\r\n    vence: 0\r\n  });\r\n\r\n  addPago(){\r\n\r\n    this.formSubmittedPago = true;\r\n\r\n    if (this.addPagoForm.invalid) {\r\n      this.formSubmittedPago = false;\r\n      return;\r\n    }\r\n\r\n    // SETEAR HORA\r\n    let vence = ((this.prestamo.frecuencia * 86400000 ) + this.prestamo.vence) - ( (new Date(((this.prestamo.frecuencia * 86400000 ) + this.prestamo.vence)).getHours() * 3600000) );\r\n    this.prestamo.vence = vence;\r\n    this.addPagoForm.value.fecha = new Date();\r\n\r\n    this.prestamo.payments.push(this.addPagoForm.value);\r\n\r\n    this.totalAbonado = 0;\r\n    this.prestamo.payments.map( pago => {      \r\n      if (pago.type === 'abono') {\r\n        this.totalAbonado += pago.amount;\r\n      }\r\n    });\r\n\r\n    if (this.totalAbonado === this.prestamo.monto) {\r\n      this.prestamo.completo = true;\r\n    }\r\n\r\n\r\n\r\n    this.prestamosService.updatePrestamo({vence: this.prestamo.vence, payments: this.prestamo.payments, completo: this.prestamo.completo}, this.prestamo.presid)\r\n        .subscribe( ({prestamo}) => {\r\n          \r\n          this.totalAbonado = 0;\r\n          this.totalInteres = 0;\r\n\r\n          this.formSubmittedPago = false;\r\n          this.addPagoForm.reset();\r\n\r\n          this.prestamo.completo = this.prestamo.completo;\r\n          this.prestamo.payments = prestamo.payments;\r\n          this.prestamo.payments.map( pago => {\r\n            if (pago.type === 'interes') {\r\n              this.totalInteres += pago.amount;\r\n            }\r\n            if (pago.type === 'abono') {\r\n              this.totalAbonado += pago.amount;\r\n            }\r\n          });\r\n\r\n          Swal.fire('Estupendo', 'Se ha agregado el pago exitosamente!', 'success');\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          this.formSubmittedPago = false;\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n          \r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   VALIDAR PAGO\r\n  ==================================================================== */\r\n  validatePay(campo: string): boolean{\r\n\r\n    if (this.addPagoForm.get(campo).invalid && this.formSubmittedPago ) {      \r\n      return true;\r\n    }else{\r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ELIMINAR PAGO\r\n  ==================================================================== */\r\n  deletePay(i: number){\r\n\r\n    Swal.fire({\r\n      title: 'Atencion',\r\n      text: \"Estas seguro de eliminar este pago?\",\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: 'Si, eliminar',\r\n      cancelButtonText: 'Cancelar'\r\n    }).then((result) => {  \r\n      \r\n      if (result.isConfirmed) {\r\n        \r\n        this.prestamo.payments.splice(i,1);\r\n\r\n        this.totalAbonado = 0;\r\n        this.prestamo.payments.map( pago => {      \r\n          if (pago.type === 'abono') {\r\n            this.totalAbonado += pago.amount;\r\n          }\r\n        });\r\n\r\n        if (this.totalAbonado === this.prestamo.monto) {\r\n          this.prestamo.completo = true;\r\n        }else{\r\n          this.prestamo.completo = false;\r\n        }\r\n    \r\n        this.prestamosService.updatePrestamo({ payments: this.prestamo.payments, completo: this.prestamo.completo }, this.prestamo.presid)\r\n            .subscribe( ({prestamo}) => {\r\n\r\n              this.totalAbonado = 0;\r\n              this.totalInteres = 0;\r\n              this.prestamo.completo = prestamo.completo;\r\n\r\n              this.prestamo.payments = prestamo.payments;\r\n              this.prestamo.payments.map( pago => {\r\n                if (pago.type === 'interes') {\r\n                  this.totalInteres += pago.amount;\r\n                }\r\n                if (pago.type === 'abono') {\r\n                  this.totalAbonado += pago.amount;\r\n                }\r\n              });\r\n\r\n          Swal.fire('Estupendo', 'Se ha eliminado el pago exitosamente!', 'success');\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          this.formSubmittedPago = false;\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n          \r\n        });\r\n\r\n      }\r\n    });\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   ELIMINAR PRESTAMO\r\n  ==================================================================== */\r\n  deletePrestamo(prestamo: Prestamo){\r\n\r\n    Swal.fire({\r\n      title: 'Atencion',\r\n      text: \"Estas seguro de cambiar el estado de este prestamo?\",\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: 'Si, eliminar',\r\n      cancelButtonText: 'Cancelar'\r\n    }).then((result) => {  \r\n      \r\n      if (result.isConfirmed) {\r\n        \r\n        if (prestamo.status) {\r\n          this.prestamo.status = false;\r\n        }else{\r\n          this.prestamo.status = true;\r\n        }\r\n    \r\n        this.prestamosService.updatePrestamo({ status: this.prestamo.status }, this.prestamo.presid)\r\n            .subscribe( ({prestamo}) => {\r\n\r\n              this.prestamo.status = prestamo.status;              \r\n\r\n          Swal.fire('Estupendo', 'Se ha eliminado el prestamo exitosamente!', 'success');\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          this.formSubmittedPago = false;\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n          \r\n        });\r\n\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Facturas</h5>\r\n    </div>\r\n\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"facturas-tab\"><i class=\"bi-journal-check\" style=\"font-size: 1rem\"></i> Información del prestamo</a>\r\n        </li>\r\n\r\n    </ul>\r\n\r\n</header>\r\n\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<div class=\"container-fluid\">\r\n\r\n    <!-- BOTONES -->\r\n    <div>\r\n\r\n        <button type=\"button\" class=\"btn btn-outline-dark btn-sm mx-1 my-2\" routerLink=\"/dashboard/configuracion/prestamos\"> \r\n            <i class=\"bi-arrow-counterclockwise\"></i> Regresar a prestamos\r\n        </button>\r\n        <button *ngIf=\"prestamo\" type=\"button\" [disabled]=\"prestamo.completo || prestamo.status === false\" class=\"btn btn-primary btn-sm mx-1 my-2\" data-bs-toggle=\"modal\" data-bs-target=\"#addPago\"> \r\n            Cobrar\r\n        </button>\r\n\r\n        <button *ngIf=\"prestamo\" type=\"button\" (click)=\"deletePrestamo(prestamo)\" class=\"btn btn-sm mx-1 my-2\" [ngClass]=\"{'btn-danger': prestamo.status, 'btn-success': !prestamo.status}\"> \r\n            <span *ngIf=\"prestamo.status\" >Eliminar</span>\r\n            <span *ngIf=\"!prestamo.status\" >Activar</span>\r\n            \r\n        </button>\r\n\r\n    </div>\r\n    <!-- BOTONES -->\r\n\r\n    <!-- DETALLES DEL PRESTAMO -->\r\n\r\n    <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-dark h-100 bg-white\" *ngIf=\"prestamo\">\r\n        <div class=\"card-body\">\r\n            <div class=\"d-flex align-items-center flex-wrap\">\r\n                <div class=\"flex-grow-1\">\r\n\r\n\r\n                    <div *ngIf=\"!prestamo.status\" class=\"h5 text-danger\"> ELIMINADO\r\n                        <hr>\r\n                    </div>\r\n\r\n                    <div *ngIf=\"prestamo.completo && prestamo.status\" class=\"h5 text-success\"> PAGADO\r\n                        <hr>\r\n                    </div>\r\n\r\n                    <div class=\"small font-weight-bold text-muted mb-1\"> Creado: {{ prestamo.fecha | date:'medium' }} </div>\r\n                    <div class=\"h5\" [ngClass]=\"{'text-success': hoy < prestamo.vence, 'text-danger': hoy > prestamo.vence }\">Vence: {{ prestamo.vence | date:'medium' }} </div>\r\n                    <div class=\"small font-weight-bold text-muted mb-1\">\r\n                        Frecuencia: {{ prestamo.frecuencia }} dia<span *ngIf=\"prestamo.frecuencia > 1\">s</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- DETALLES DEL PRESTAMO -->\r\n\r\n    <!-- TARJETAS -->\r\n    <div class=\"d-flex flex-wrap gap-3 mt-2\" *ngIf=\"prestamo\">\r\n\r\n        <div class=\"mb-4\">\r\n            <!-- Dashboard info widget 1-->\r\n            <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-success h-100 bg-white\">\r\n                <div class=\"card-body\">\r\n                    <div class=\"d-flex align-items-center flex-wrap\">\r\n                        <div class=\"flex-grow-1\">\r\n                            <div class=\"small font-weight-bold text-success mb-1\">Prestamo</div>\r\n                            <div class=\"h5\"> {{ prestamo.monto | currency }} </div>\r\n                        </div>\r\n                        <div class=\"ms-2\">\r\n                            <i class=\"bi bi-cash text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"mb-4\">\r\n            <!-- Dashboard info widget 1-->\r\n            <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-primary h-100 bg-white\">\r\n                <div class=\"card-body\">\r\n                    <div class=\"d-flex align-items-center flex-wrap\">\r\n                        <div class=\"flex-grow-1\">\r\n                            <div class=\"small font-weight-bold text-primary mb-1\">Porcentaje</div>\r\n                            <div class=\"h5\"> {{ prestamo.porcentaje }}% </div>\r\n                        </div>\r\n                        <div class=\"ms-2\">\r\n                            <i class=\"bi bi-percent text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"mb-4\">\r\n            <!-- Dashboard info widget 1-->\r\n            <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-warning h-100 bg-white\">\r\n                <div class=\"card-body\">\r\n                    <div class=\"d-flex align-items-center flex-wrap\">\r\n                        <div class=\"flex-grow-1\">\r\n                            <div class=\"small font-weight-bold text-warning mb-1\">Intereses</div>\r\n                            <div class=\"h5\"> {{ (prestamo.monto * prestamo.porcentaje )/ 100 | currency }} </div>\r\n                        </div>\r\n                        <div class=\"ms-2\">\r\n                            <i class=\"bi bi-cash text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"mb-4\">\r\n            <!-- Dashboard info widget 1-->\r\n            <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-dark h-100 bg-white\">\r\n                <div class=\"card-body\">\r\n                    <div class=\"d-flex align-items-center flex-wrap\">\r\n                        <div class=\"flex-grow-1\">\r\n                            <div class=\"small font-weight-bold text-dark mb-1\">Total Abonado</div>\r\n                            <div class=\"h5\"> {{ totalAbonado | currency }} </div>\r\n                        </div>\r\n                        <div class=\"ms-2\">\r\n                            <i class=\"bi bi-cash text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"mb-4\">\r\n            <!-- Dashboard info widget 1-->\r\n            <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-info h-100 bg-white\">\r\n                <div class=\"card-body\">\r\n                    <div class=\"d-flex align-items-center flex-wrap\">\r\n                        <div class=\"flex-grow-1\">\r\n                            <div class=\"small font-weight-bold text-info mb-1\">Total Intereses</div>\r\n                            <div class=\"h5\"> {{ totalInteres | currency }} </div>\r\n                        </div>\r\n                        <div class=\"ms-2\">\r\n                            <i class=\"bi bi-cash text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n    <!-- TARJETAS -->\r\n\r\n\r\n\r\n\r\n    <!-- INFORMACION -->\r\n    <div class=\"row\" *ngIf=\"prestamo\">\r\n\r\n        <!-- INFORMACION DEL PAGOS -->\r\n        <div class=\"col-md-8 shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n            <h3 class=\"mb-0\">Historial de pagos</h3>\r\n\r\n            <div class=\"table-responsive\">\r\n                <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                    <thead class=\"border-bottom \">\r\n                        <tr>\r\n                            <th class=\"text-muted\" scope=\"col \">Fecha</th>\r\n                            <th class=\"text-muted\" scope=\"col \">Metodo</th>\r\n                            <th class=\"text-muted\" scope=\"col \">Descripción</th>\r\n                            <th class=\"text-muted\" scope=\"col \">Tipo</th>\r\n                            <th class=\"text-muted\" scope=\"col \">Monto</th>\r\n                            <th class=\"text-muted\" scope=\"col \"></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n\r\n                        <tr *ngIf=\"prestamo.payments.length == 0 \" class=\"text-center \">\r\n                            <th colspan=\"6\" class=\"py-4\">\r\n                                <h4 class=\"text-muted\">No se ha registrado ningun abono</h4>\r\n                            </th>\r\n                        </tr>\r\n\r\n                        <tr class=\"trHover\" *ngFor=\"let pago of prestamo.payments; let i = index\">\r\n                            <td>{{ pago.fecha | date: 'short' }}</td>\r\n                            <td>{{ pago.metodo }}</td>\r\n                            <td>{{ pago.description }}</td>\r\n                            <td>{{ pago.type }}</td>\r\n                            <td>{{ pago.amount | currency}}</td>\r\n                            <td class=\"text-center\">\r\n                                <button (click)=\"deletePay(i)\" type=\"button\" class=\"btn btn-link p-1 text-danger\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n\r\n                </table>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <!-- INFORMACION DEL CLIENTE -->\r\n        <div class=\"col-md-4\">\r\n\r\n            <!-- TABLE PAGOS-->\r\n            <div class=\"shadow-lg p-3 mb-5 rounded bg-white\" style=\"max-height: 400px; height: auto;\" *ngIf=\"prestamo.client\">\r\n                <h5 class=\"\">\r\n                    Información Del Cliente:\r\n                </h5>\r\n\r\n                <h3 class=\"mb-0\"> <i class=\"bi bi-person\"></i> {{ prestamo.client.name }} </h3>\r\n                <p class=\"mb-0\"> <i class=\"bi bi-phone\"></i> {{ prestamo.client.phone }} </p>\r\n                <p class=\"mb-0\"> <i class=\"bi bi-house\"></i> {{ prestamo.client.address }} </p>\r\n                <p class=\"mb-0\"> <i class=\"bi bi-geo-alt\"></i> {{ prestamo.client.city }} </p>\r\n\r\n            </div>\r\n            <!-- TABLE PAGOS-->\r\n\r\n        </div>\r\n        <!-- INFORMACION DEL CLIENTE -->\r\n\r\n    </div>\r\n    <!-- INFORMACION -->\r\n\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    MODAL EDITAR CONTROL\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"addPago\" tabindex=\"-1\" aria-labelledby=\"addPagoModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\">Agregar Pago</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body p-0\">\r\n\r\n                <div class=\"container-fluid my-4\">\r\n                    <form [formGroup]=\"addPagoForm\" (ngSubmit)=\"addPago()\">\r\n\r\n                        <div class=\"mb-3\">\r\n                            <label for=\"type\" class=\"form-label\">Tipo de pago</label>\r\n                            <select formControlName=\"type\" class=\"form-select\" id=\"type\" aria-label=\"Default select example\">\r\n                                <option value=\"abono\">Abono</option>\r\n                                <option value=\"interes\">Interes</option>\r\n                            </select>\r\n                            <small *ngIf=\"validatePay('type')\">**Solo numeros</small>\r\n                        </div>\r\n\r\n                        <div class=\"mb-3\">\r\n                            <label for=\"metodo\" class=\"form-label\">Metodo de pago</label>\r\n                            <select formControlName=\"metodo\" class=\"form-select\" id=\"metodo\" aria-label=\"Default select example\">\r\n                                <option value=\"efectivo\">Efectivo</option>\r\n                                <option value=\"tarjeta\">Tarjeta</option>\r\n                                <ng-container *ngIf=\"bancos.length > 0\">\r\n                                    <option *ngFor=\"let banco of bancos\" [value]=\"banco.name\"> {{ banco.name }} </option>\r\n                                </ng-container>                            \r\n                            </select>\r\n                            <small *ngIf=\"validatePay('metodo')\">**Solo numeros</small>\r\n                        </div>\r\n\r\n                        <div class=\"mb-3\">\r\n                            <label for=\"monto\" class=\"form-label\">Monto</label>\r\n                            <input formControlName=\"amount\" type=\"number\" class=\"form-control\" id=\"monto\" #newControl>\r\n                            <small *ngIf=\"validatePay('amount')\">**Solo numeros</small>\r\n                        </div>\r\n\r\n                        <div class=\"mb-3\">\r\n                            <label for=\"descripcion\" class=\"form-label\">Descripción</label>\r\n                            <textarea formControlName=\"description\" class=\"form-control\" id=\"descripcion\" rows=\"3\"></textarea>\r\n                        </div>\r\n\r\n                        <button type=\"submited\" class=\"btn btn-primary\">Guardar</button>\r\n                    </form>\r\n                </div>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n\r\n                <button type=\"button\" [disabled]=\"formSubmittedPago\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    MODAL EDITAR CONTROL \r\n========================================================================= -->","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport { Client } from 'src/app/models/client.model';\r\nimport { Prestamo } from 'src/app/models/prestamos.model';\r\nimport { PrestamosService } from 'src/app/services/prestamos.service';\r\nimport { SearchService } from 'src/app/services/search.service';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-prestamos',\r\n  templateUrl: './prestamos.component.html',\r\n  styleUrls: ['./prestamos.component.css']\r\n})\r\nexport class PrestamosComponent implements OnInit {\r\n\r\n  public resultado: number = 0;\r\n  public desde: number = 0;\r\n  public hasta: number = 50;\r\n  public cargando: boolean = true;\r\n  public sinResultados: boolean = true;\r\n\r\n  public btnAtras: string = '';\r\n  public btnAdelante: string = '';\r\n\r\n  constructor(  private fb: FormBuilder,\r\n                private prestamosService: PrestamosService,\r\n                private searhcService: SearchService) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // CARGAR PRESTAMOS\r\n    this.loadPrestamos();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR PRESTAMOS\r\n  ==================================================================== */\r\n  public listaPrestamos: Prestamo[] = [];\r\n  public listaPrestamosTemp: Prestamo[] = [];\r\n  public totalPrestamos: number = 0;\r\n  public total: number = 0;\r\n  public totalAbonado: number = 0;\r\n  public totalIntereses: number = 0;\r\n\r\n  loadPrestamos(){\r\n\r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n\r\n    this.prestamosService.loadPrestamos(this.desde, this.hasta)\r\n        .subscribe( ({prestamos, total}) => {\r\n\r\n          this.total = 0;\r\n          this.totalAbonado = 0;\r\n          this.totalIntereses = 0;\r\n\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (prestamos.length === 0) {\r\n            this.sinResultados = false;\r\n            this.cargando = false;\r\n            this.listaPrestamos = [];\r\n            this.resultado = 0;\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n\r\n          this.totalPrestamos = total;\r\n          this.listaPrestamos = prestamos;\r\n          this.listaPrestamosTemp = prestamos;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n          this.sinResultados = true;\r\n\r\n          for (const prestamo of prestamos) {\r\n            this.total += prestamo.monto;\r\n\r\n            prestamo.payments.map( pago => {\r\n              if (pago.type === 'interes') {\r\n                this.totalIntereses += pago.amount;\r\n              }\r\n              if (pago.type === 'abono') {\r\n                this.totalAbonado += pago.amount;\r\n              }\r\n            })\r\n\r\n          }\r\n\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREAR PRESTAMO\r\n  ==================================================================== */  \r\n  public formSubmited: boolean = false;\r\n  public createForm = this.fb.group({\r\n    client: '',\r\n    diario: false,\r\n    vence: 0,\r\n    frecuencia: [7, [Validators.required, Validators.min(1)]],\r\n    monto: [5000, [Validators.required, Validators.min(5000)]],\r\n    porcentaje: [0, [Validators.required]],\r\n  });\r\n\r\n  create(){\r\n\r\n    if (!this.clientS) {\r\n      Swal.fire('Atención', 'debes de seleccionar un cliente', 'warning');\r\n      return;\r\n    }\r\n\r\n    this.createForm.value.client = this.clientS.cid;\r\n    this.formSubmited = true;\r\n\r\n    if (this.createForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    if (this.createForm.value.frecuencia === 1) {\r\n      this.createForm.value.diario = true;\r\n    }\r\n\r\n    // SETEAR HORA\r\n    let hoy = new Date().getTime();\r\n    this.createForm.value.vence = ((this.createForm.value.frecuencia * 86400000 ) + hoy) - ( (new Date(hoy).getHours() * 3600000) );\r\n\r\n    this.prestamosService.createPrestamo(this.createForm.value)\r\n        .subscribe( ({prestamo}) => {          \r\n\r\n          this.listaPrestamos.push(prestamo);\r\n          this.listaPrestamosTemp.push(prestamo);     \r\n          this.createForm.reset();\r\n          this.formSubmited = false;\r\n          this.totalPrestamos ++;\r\n          Swal.fire('Estupendo', 'Se ha creado un nuevo prestamo exitosamente', 'success');\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n          \r\n        });\r\n\r\n  }\r\n\r\n\r\n  /** ================================================================\r\n   *   VALIDAR FORMULARIO\r\n  ==================================================================== */\r\n  validate(campo: string): boolean{\r\n\r\n    if (this.createForm.get(campo).invalid && this.formSubmited) {      \r\n      return true;\r\n    }else{\r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SEARCH CLIENT\r\n  ==================================================================== */\r\n  public listClients: any[] = [];\r\n  public clientS: Client;\r\n  buscarClient(termino: string){\r\n\r\n    this.listClients = [];\r\n    \r\n    if (termino.length < 1) {\r\n      this.listClients = [];\r\n      return;      \r\n    }\r\n    \r\n    this.searhcService.search('clients', termino)\r\n    .subscribe( ({resultados}) => {      \r\n\r\n        this.listClients = resultados;          \r\n\r\n      }, (err) => {\r\n        console.log(err);\r\n        \r\n      });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SEARCH CLIENT \"\"\r\n  ==================================================================== */\r\n  public listClients2: any[] = [];\r\n  public clientS2: Client;\r\n  buscarClient2(termino: string){\r\n    \r\n\r\n    this.listClients = [];\r\n    \r\n    if (termino.length < 1) {\r\n      this.listClients = [];\r\n      return;      \r\n    }\r\n    \r\n    this.searhcService.search('clients', termino)\r\n    .subscribe( ({resultados}) => {      \r\n\r\n        this.listClients2 = resultados;          \r\n\r\n      }, (err) => {\r\n        console.log(err);\r\n        \r\n      });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SEARCH PRESTAMOS OF CLIENTS\r\n  ==================================================================== */\r\n  buscarPrestamoClient( client: string ){\r\n\r\n    this.listClients = [];\r\n    this.listaPrestamos = [];\r\n    this.prestamosService.loadPrestamoClient(client)\r\n        .subscribe( ({prestamos, total}) => {\r\n\r\n          this.total = 0;\r\n          this.totalAbonado = 0;\r\n          this.totalIntereses = 0;\r\n\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (prestamos.length === 0) {\r\n            this.sinResultados = false;\r\n            this.cargando = false;\r\n            this.listaPrestamos = [];\r\n            this.resultado = 0;\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n\r\n          this.totalPrestamos = prestamos.length;\r\n          this.listaPrestamos = prestamos;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n          this.sinResultados = true;\r\n\r\n          for (const prestamo of prestamos) {\r\n            this.total += prestamo.monto;\r\n\r\n            prestamo.payments.map( pago => {\r\n              if (pago.type === 'interes') {\r\n                this.totalIntereses += pago.amount;\r\n              }\r\n              if (pago.type === 'abono') {\r\n                this.totalAbonado += pago.amount;\r\n              }\r\n            })\r\n\r\n          }\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR PRESTAMOS POR FECHAS\r\n  ==================================================================== */\r\n  buscarFechas(vence: any){\r\n\r\n    if (vence.length === 0) {\r\n      return;\r\n    }\r\n\r\n    this.prestamosService.loadPrestamosDates(new Date(vence).getTime())\r\n        .subscribe( ({prestamos, total}) => {\r\n\r\n          this.total = 0;\r\n          this.totalAbonado = 0;\r\n          this.totalIntereses = 0;\r\n\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (prestamos.length === 0) {\r\n            this.sinResultados = false;\r\n            this.cargando = false;\r\n            this.listaPrestamos = [];\r\n            this.resultado = 0;\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n\r\n          this.totalPrestamos = prestamos.length;\r\n          this.listaPrestamos = prestamos;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n          this.sinResultados = true;\r\n\r\n          for (const prestamo of prestamos) {\r\n            this.total += prestamo.monto;\r\n\r\n            prestamo.payments.map( pago => {\r\n              if (pago.type === 'interes') {\r\n                this.totalIntereses += pago.amount;\r\n              }\r\n              if (pago.type === 'abono') {\r\n                this.totalAbonado += pago.amount;\r\n              }\r\n            })\r\n\r\n          }\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        });\r\n\r\n  }\r\n\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Configuraciones / Prestamos</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"ticket1-tab\"><i class=\"bi-gear\" style=\"font-size: 1rem\"></i> Tablero Principal</a>\r\n        </li>\r\n\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<div class=\"container-fluid my-4\">\r\n\r\n    <!-- TARJETAS -->\r\n    <div class=\"d-flex flex-wrap gap-3 mt-2\">\r\n\r\n        <div class=\"mb-4\">\r\n            <!-- Dashboard info widget 1-->\r\n            <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-success h-100 bg-white\">\r\n                <div class=\"card-body\">\r\n                    <div class=\"d-flex align-items-center flex-wrap\">\r\n                        <div class=\"flex-grow-1\">\r\n                            <div class=\"small font-weight-bold text-success mb-1\">Prestamos</div>\r\n                            <div class=\"h5\"> {{ total | currency }} </div>\r\n                        </div>\r\n                        <div class=\"ms-2\">\r\n                            <i class=\"bi bi-cash text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"mb-4\">\r\n            <!-- Dashboard info widget 1-->\r\n            <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-dark h-100 bg-white\">\r\n                <div class=\"card-body\">\r\n                    <div class=\"d-flex align-items-center flex-wrap\">\r\n                        <div class=\"flex-grow-1\">\r\n                            <div class=\"small font-weight-bold text-dark mb-1\">Total Abonado</div>\r\n                            <div class=\"h5\"> {{ totalAbonado | currency }} </div>\r\n                        </div>\r\n                        <div class=\"ms-2\">\r\n                            <i class=\"bi bi-cash text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"mb-4\">\r\n            <!-- Dashboard info widget 1-->\r\n            <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-info h-100 bg-white\">\r\n                <div class=\"card-body\">\r\n                    <div class=\"d-flex align-items-center flex-wrap\">\r\n                        <div class=\"flex-grow-1\">\r\n                            <div class=\"small font-weight-bold text-info mb-1\">Total Intereses</div>\r\n                            <div class=\"h5\"> {{ totalIntereses | currency }} </div>\r\n                        </div>\r\n                        <div class=\"ms-2\">\r\n                            <i class=\"bi bi-cash text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n    <!-- TARJETAS -->\r\n\r\n    <div class=\"d-flex flex-wrap gap-3\">\r\n\r\n        <!-- FILTROS -->\r\n        <div class=\"shadow-lg p-3 rounded bg-white col-auto\">\r\n\r\n            <!-- BUSCADOR DE CLIENTES  -->\r\n            <div class=\"mb-3\">\r\n                <h4 class=\"text-muted\">Buscar Cliente</h4>\r\n                <div>\r\n                    <input type=\"text\" class=\"form-control\" placeholder=\"buscar cliente\" (keyup)=\"buscarClient(searchClient.value)\" #searchClient>\r\n                </div>\r\n\r\n                <hr>\r\n\r\n                <div *ngIf=\"listClients.length > 0\" class=\"bg-white py-3 px-2 shadow\" style=\"position: absolute; z-index: 1020;\">\r\n\r\n                    <div *ngIf=\"cargandoCliente\" class=\"text-center py-3\">\r\n                        <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                            <span class=\"visually-hidden\">Loading...</span>\r\n                        </div>\r\n                        <div>\r\n                            <small class=\"text-muted\">Cargando...</small>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <ul *ngIf=\"!cargandoCliente\" class=\"list-group list-group-flush overflow-auto\" style=\"max-height: 200px; min-width: 250px;\">\r\n\r\n                        <li class=\"list-group-item\">\r\n                            <h6>Resultados: ({{ listClients.length }})</h6>\r\n                        </li>\r\n\r\n                        <li class=\"list-group-item\" *ngFor=\"let item of listClients\">\r\n                            <button (click)=\"buscarPrestamoClient(item.cid)\" type=\"button\" style=\"background: none; border: 0;\">\r\n                                <div class=\"d-flex \">\r\n                                    <div class=\"align-self-center\">\r\n                                        <span class=\"text-capitalize fw-bold\"> {{ item.name }} </span><br>\r\n                                        <small> C.C: {{ item.cedula }} </small>\r\n                                    </div>\r\n\r\n                                    <div class=\"ms-auto\">\r\n                                        <i class=\"text-success bi-arrow-90deg-right\"></i>\r\n                                    </div>\r\n                                </div>\r\n                            </button>\r\n                        </li>\r\n                    </ul>\r\n\r\n                </div>\r\n            </div>\r\n            <!-- BUSCADOR DE CLIENTES  -->\r\n\r\n            <h4 class=\"text-muted\">Filtros</h4>\r\n\r\n            <div class=\"col-12\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"\">Por fecha</label>\r\n                    <input type=\"datetime-local\" class=\"form-control\" #vence>\r\n                </div>\r\n\r\n                <button (click)=\"buscarFechas(vence.value)\" type=\"button\" class=\"btn btn-primary btn-sm btn-block\">buscar</button>\r\n\r\n            </div>\r\n\r\n        </div>\r\n        <!-- FILTROS -->\r\n\r\n        <!-- TABLE PRESTAMOS -->\r\n        <div class=\"shadow-lg p-3 rounded bg-white col-auto\">\r\n\r\n            <!-- CARGANDO -->\r\n            <div *ngIf=\"cargando\">\r\n                <div class=\"text-center p-4\">\r\n                    <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                        <span class=\"visually-hidden\">Loading...</span>\r\n                    </div>\r\n                </div>\r\n                <small class=\"text-muted\">cargando...</small>\r\n            </div>\r\n            <!-- CARGANDO -->\r\n\r\n            <div *ngIf=\"!cargando\">\r\n\r\n                <!-- BTN CREAR IMPUESTO -->\r\n                <div class=\"d-flex\">\r\n                    <button (click)=\"loadPrestamos()\" type=\"button\" class=\"btn btn-sm btn-success btnW waves-effect waves-ligth\">Recargar</button>\r\n                    <button type=\"button\" class=\"btn btn-sm btn-primary btnW waves-effect waves-ligth ms-auto\" data-bs-toggle=\"modal\" data-bs-target=\"#nuevoPrestamo\">Crear</button>\r\n                </div>\r\n                <!-- BTN CREAR IMPUESTO -->\r\n\r\n                <div class=\"table-responsive\">\r\n                    <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                        <thead class=\"border-bottom \">\r\n                            <tr>\r\n                                <th class=\"text-muted\" scope=\"col \">Fecha</th>\r\n                                <th class=\"text-muted\" scope=\"col \">Cliente</th>\r\n                                <th class=\"text-muted\" scope=\"col \">Monto</th>\r\n                                <th class=\"text-muted\" scope=\"col \">Porcentaje</th>\r\n                                <th class=\"text-muted text-center\" cope=\"col \">Vence</th>\r\n                                <th class=\"text-muted\" scope=\"col \">Acciones</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n\r\n                            <tr *ngIf=\"!sinResultados\" class=\"text-center \">\r\n                                <th colspan=\"10\" class=\"py-4\">\r\n                                    <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                                </th>\r\n                            </tr>\r\n\r\n                            <tr class=\"trHover\" *ngFor=\"let prestamo of listaPrestamos; let i = index\">\r\n                                <td>{{ prestamo.fecha | date: 'd/M/y' }}</td>\r\n                                <td>{{ prestamo.client.name }}</td>\r\n                                <td>{{ prestamo.monto | divisa}}</td>\r\n                                <td class=\"text-center\">{{ prestamo.porcentaje }}%</td>\r\n                                <td class=\"text-center\">{{ prestamo.vence | date:'d MMMM, y' }}</td>\r\n                                <td class=\"text-center\">\r\n                                    <a class=\"btn btn-link p-1 text-primary\" [routerLink]=\"['/dashboard/configuracion/prestamo', prestamo.presid]\">\r\n                                        <i class=\"bi bi-box-arrow-up-right\"></i>\r\n                                    </a>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n\r\n                    </table>\r\n\r\n                </div>\r\n\r\n                <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                <div class=\"row\">\r\n                    <div class=\"col col-md-4\">\r\n                        <small class=\"text-muted\">Total de prestamos: ({{totalPrestamos}})</small>\r\n                        <small *ngIf=\"resultado !== 0\" class=\"text-muted\"> - (Resultados: {{ resultado }})</small>\r\n                        <small *ngIf=\"desde !== 0\" class=\"text-muted\"> - (Desde el: {{ desde + 1}} Hasta el: {{ desde + listaPrestamos.length }})</small>\r\n                    </div>\r\n                </div>\r\n                <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n            </div>\r\n        </div>\r\n        <!-- TABLE PRESTAMOS -->\r\n    </div>\r\n\r\n\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    NUEVO PRESTAMO \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"nuevoPrestamo\" tabindex=\"-1\" aria-labelledby=\"nuevoPrestamoModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"nuevoPrestamoModal\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Crear Prestamo Nuevo</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n                <h5 class=\"text-muted\">Buscar Cliente</h5>\r\n\r\n                <div class=\"col-md-12 mt-2 px-md-1\">\r\n\r\n                    <input type=\"text\" class=\"form-control\" placeholder=\"buscar cliente\" (keyup)=\"buscarClient2(searchClient2.value)\" #searchClient2>\r\n\r\n                    <div *ngIf=\"listClients2.length > 0 && searchClient2.value.length !== 0\" class=\"bg-white px-2 shadow col-auto\" style=\"position: absolute; z-index: 1020;\">\r\n\r\n                        <ul class=\"list-group list-group-flush overflow-auto\" style=\"max-height: 150px;\">\r\n\r\n                            <li class=\"list-group-item py-1\">\r\n                                <h6>Resultados: ({{ listClients2.length }})</h6>\r\n                            </li>\r\n\r\n                            <li class=\"list-group-item py-1\" *ngFor=\"let cliente of listClients2\">\r\n                                <button [disabled]=\"!cliente.status\" class=\"border-0 bg-white w-100 text-start\" (click)=\"clientS = cliente; listClients2 = [] \" type=\"button\">\r\n                                    <div class=\"d-flex\">\r\n                                        <div class=\"align-self-center\">\r\n                                            <span> {{ cliente.name }} </span>\r\n                                            <span> {{ cliente.cedula }} </span>\r\n                                            <span> {{ cliente.phone }} </span>\r\n                                            <span *ngIf=\"!cliente.status\" class=\"badge rounded-pill bg-danger\">Eliminado</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </button>\r\n                            </li>\r\n\r\n                        </ul>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                <hr>\r\n\r\n\r\n                <form autocomplete=\"off\" [formGroup]=\"createForm\" (ngSubmit)=\"create()\">\r\n\r\n                    <!-- =======================================================================\r\n                        Informacion del Prestamo\r\n                    =========================================================================== -->\r\n                    <div class=\"row mb-2\">\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n                            <label for=\"\">Nombre</label>\r\n                            <div class=\"form-floating\">\r\n                                <input readonly type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Numero del Cliente\" [value]=\"clientS?.name || ''\">\r\n                                <label for=\"floatingInput\">Nombre</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n                            <label for=\"\">Cedula</label>\r\n                            <div class=\"form-floating\">\r\n                                <input readonly type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Cedula del cliente\" [value]=\"clientS?.cedula || ''\">\r\n                                <label for=\"floatingInput\">Cedula</label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n                            <label for=\"\">Frecuencia</label>\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"frecuencia\" type=\"number\" min=\"1\" class=\"form-control text-capitalize\" placeholder=\"Frecuencia\">\r\n                                <label for=\"floatingInput\">Frecuencia</label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n                            <label for=\"\">Monto</label>\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"monto\" type=\"number\" min=\"5000\" class=\"form-control text-capitalize\" placeholder=\"Monto\">\r\n                                <label for=\"floatingInput\">Monto</label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n                            <label for=\"\">Porcentaje</label>\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"porcentaje\" type=\"number\" min=\"0\" class=\"form-control text-capitalize\" placeholder=\"Porcentaje\">\r\n                                <label for=\"floatingInput\">Porcentaje</label>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"text-danger mb-2\">\r\n                            <p *ngIf=\"validate('frecuencia')\" class=\"mb-1 animated fadeIn\">- La frecuencia de cobro es obligatoria</p>\r\n                            <p *ngIf=\"validate('monto')\" class=\"mb-1 animated fadeIn\">- El Monto es obligatorio, minimo $5000</p>\r\n                            <p *ngIf=\"validate('porcentaje')\" class=\"mb-1 animated fadeIn\">- El Porcentaje es obligatorio</p>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">crear</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    NUEVO PRESTAMO\r\n========================================================================= -->","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Datos } from 'src/app/models/empresa.model';\r\nimport { _productTraslados, Traslado } from 'src/app/models/traslados.model';\r\nimport { EmpresaService } from 'src/app/services/empresa.service';\r\nimport { ProductService } from 'src/app/services/product.service';\r\nimport { TrasladosService } from 'src/app/services/traslados.service';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-traslado',\r\n  templateUrl: './traslado.component.html',\r\n  styleUrls: ['./traslado.component.css']\r\n})\r\nexport class TrasladoComponent implements OnInit {\r\n\r\n  constructor(  private activatedRoute: ActivatedRoute,\r\n                private trasladosService: TrasladosService,\r\n                private productService: ProductService,\r\n                private empresaService: EmpresaService\r\n  ) { \r\n\r\n    activatedRoute.params.subscribe(({id}) => {\r\n      this.loadTraslado(id);\r\n    })\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.loadEmpresa();\r\n  }\r\n\r\n  /** ================================================================\r\n    *   LOAD EMPRESA\r\n  ==================================================================== */\r\n  public empresa: Datos;\r\n  loadEmpresa(){\r\n\r\n    this.empresaService.getDatos()\r\n        .subscribe( (datos) => {\r\n          this.empresa = datos;\r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n    *   LOAD TRASLADOS\r\n  ==================================================================== */\r\n  public traslado: Traslado;\r\n  public trasladoppal: Traslado;\r\n  public desde: string;\r\n  loadTraslado(id: string){\r\n\r\n    this.trasladosService.loadTrasladoID(id)\r\n        .subscribe( ({ traslado }) => {\r\n\r\n          \r\n          this.traslado = traslado;\r\n          this.desde = this.traslado.desde.slice(0, -3)\r\n\r\n          if (traslado.type === 'Recibido') {\r\n            this.trasladosService.loadTrasladosBodega({desde: 0, hasta: 1, referencia: traslado.referencia}, traslado.desde)\r\n                .subscribe( ({traslados}) => {\r\n                  this.trasladoppal = traslados[0];\r\n                }, (err) => {\r\n                  console.log(err);                  \r\n                })            \r\n          }\r\n          \r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n    *   CONFIRMAR LLEGADA\r\n  ==================================================================== */\r\n  llegada(){\r\n\r\n    Swal.fire({\r\n      title: \"Estas seguro?\",\r\n      text: \"De confirmar la llega de este traslado\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#3085d6\",\r\n      cancelButtonColor: \"#d33\",\r\n      confirmButtonText: \"Si, confirmar!\",\r\n      cancelButtonText: 'Cancelar'\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n\r\n        let fechaIn = new Date();\r\n\r\n        this.trasladosService.updateTraslado({fechaIn, estado: 'Recibido'}, this.traslado.traid)\r\n            .subscribe( ({traslado}) => {\r\n\r\n              this.traslado.fechaIn = traslado.fechaIn;\r\n              this.traslado.estado = traslado.estado;\r\n\r\n              this.trasladosService.updateTrasladoBodega( {fechaIn, estado: 'Recibido'}, this.trasladoppal.traid, this.traslado.desde)\r\n                  .subscribe( (resp) => {\r\n                    this.trasladoppal = resp.traslado;\r\n                  }, (err) => {console.log(err);})\r\n\r\n            }, (err) => {console.log(err);})\r\n        \r\n\r\n\r\n      }\r\n    });\r\n\r\n    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CONFIRMAR PRODUCTO\r\n  ==================================================================== */\r\n  confirmar(item: _productTraslados, i: any){\r\n    \r\n    this.productService.cargarProductoCodigo(item.code)\r\n        .subscribe( (product) => {\r\n\r\n          if (!product) {\r\n            Swal.fire('Atención', 'Este producto no se encuentra en la base de datos', 'warning');\r\n            return\r\n          }\r\n\r\n          let ajustar = {\r\n            cantidad: item.qty,\r\n            bought: item.qty,\r\n            damaged: 0,\r\n            type: 'Agrego'\r\n          }\r\n          \r\n          // AJUSTAR INVENTARIO\r\n          this.productService.ajustarInventario(product.pid, ajustar)\r\n              .subscribe( () => {\r\n\r\n                this.traslado.products[i].confirmado = true;\r\n\r\n                this.trasladosService.updateTraslado({products: this.traslado.products}, this.traslado.traid)\r\n                    .subscribe( () => {\r\n\r\n\r\n                      this.trasladosService.updateTrasladoBodega({products: this.traslado.products}, this.trasladoppal.traid, this.traslado.desde)\r\n                          .subscribe( () => {\r\n\r\n                            Swal.fire('Estupendo', 'Se ha confirmado y agregado el producto exitosamente!', 'success');\r\n\r\n                          })\r\n\r\n                    })\r\n\r\n              })\r\n\r\n        }, (err) => {\r\n          console.log(err);          \r\n        })\r\n\r\n  }\r\n\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Traslado</h5>\r\n    </div>\r\n\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"facturas-tab\"><i class=\"bi-journal-check\" style=\"font-size: 1rem\"></i> Traslado <span *ngIf=\"traslado\"> #{{traslado.referencia}} </span> </a>\r\n        </li>\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a routerLink=\"/dashboard/configuracion/traslados\" class=\"nav-link text-dark\" id=\"facturas-tab\"><i class=\"bi-journal-check\" style=\"font-size: 1rem\"></i> Traslados</a>\r\n        </li>\r\n\r\n    </ul>\r\n\r\n</header>\r\n\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<div class=\"container-fluid pt-4\">\r\n\r\n\r\n    <ng-container *ngIf=\"traslado && empresa\">\r\n        \r\n        <!-- BTNS -->\r\n        <div class=\"row\">\r\n\r\n            <!-- DETALLES DE LA FACTURA -->\r\n             <div class=\"col-md-8\">\r\n\r\n                <div class=\"card mb-2\">\r\n                    <div class=\"card-body\">                        \r\n\r\n                        <div class=\"d-flex flex-wrap justify-content-between align-items-center \">\r\n\r\n                            <!-- DESDE -->\r\n                            <div>\r\n                                <h5 class=\"h5 mb-0\">\r\n                                    <span *ngIf=\"traslado.type === 'Enviado'\"> {{ empresa.name }} </span>\r\n                                    <span *ngIf=\"traslado.type === 'Recibido'\"> {{ desde }} </span>\r\n                                </h5>\r\n                            </div>\r\n\r\n                            <!-- ICON -->\r\n                             <div>\r\n                                <h5 class=\"text-success display-5 mb-0\">\r\n                                    <i class=\"bi bi-arrow-right\"></i>\r\n                                </h5>\r\n                             </div>\r\n\r\n                            <!-- PARA  -->\r\n                            <div>\r\n                                <h5 class=\"h5 mb-0\">\r\n                                    <span *ngIf=\"traslado.type === 'Enviado'\"> {{ traslado.bodega.name }} </span>\r\n                                    <span *ngIf=\"traslado.type === 'Recibido'\"> {{ empresa.name }} </span>\r\n                                </h5>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        \r\n        \r\n                    </div>\r\n                </div>\r\n\r\n             \r\n                <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n                    <div id=\"printDiv\">\r\n\r\n                        <!-- INFORMACION DE LA FACTURA -->\r\n                        <h4 class=\"text-center text-wrap\"> Productos </h4>\r\n\r\n                        <div class=\" table-responsive \">\r\n\r\n                            <table class=\"table table-borderless table-striped table-sm \">\r\n                                <thead class=\"border-bottom\">\r\n                                    <tr>\r\n                                        <th scope=\"col\">#</th>\r\n                                        <th scope=\"col\">Codigo de barras</th>\r\n                                        <th class=\" text-left\" scope=\"col \" colspan=\"2 \">Nombre del Producto</th>\r\n                                        <th scope=\"col\">tipo</th>\r\n                                        <th scope=\"col\">Precio</th>\r\n                                        <th scope=\"col\">Cantidad</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody class=\"text-dark\">\r\n\r\n                                    <tr *ngFor=\"let producto of traslado.products; let i = index\">\r\n                                        <th> {{ i + 1 }} </th>\r\n                                        <td><small class=\"text-wrap\">{{ producto.code }}</small></td>\r\n                                        <td colspan=\"2\">{{ producto.name }} </td>\r\n                                        <td>{{ producto.type }}</td>\r\n                                        <td>{{ producto.price | currency : '$': symbol: '1.0-0'}}</td>\r\n                                        <td class=\"text-center\">{{ producto.qty }}</td>\r\n                                        <td>\r\n                                            <button [disabled]=\"traslado.type !== 'Recibido' || producto.confirmado\" (click)=\"confirmar(producto, i)\" type=\"button\" class=\"btn btn-sm\" [ngClass]=\"{'btn-success': producto.confirmado, 'btn-warning': !producto.confirmado}\" >\r\n                                                <span *ngIf=\"producto.confirmado\">Confirmado</span>\r\n                                                <span *ngIf=\"!producto.confirmado\">Confirmar</span>\r\n                                            </button>\r\n                                            \r\n\r\n                                        </td>\r\n\r\n\r\n                                    </tr>\r\n\r\n                                </tbody>\r\n                            </table>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <!-- INFORMACION DE LA FACTURA -->\r\n\r\n                </div>\r\n            </div>\r\n            <!-- DETALLES DE LA FACTURA -->\r\n\r\n            <!-- PAGOS -->\r\n            <div class=\"col-md-4\">\r\n\r\n                <!-- METODOS DE PAGO Y CREDITO -->\r\n                <div class=\"card\">\r\n                    <div class=\"card-body\">\r\n                        \r\n                        <div *ngIf=\"traslado.type === 'Recibido'\">\r\n                            <button (click)=\"llegada()\" type=\"button\" class=\"btn btn-primary w-100\">\r\n                                Confirmar LLegada\r\n                            </button>\r\n                            \r\n                        </div>\r\n\r\n                        <hr *ngIf=\"traslado.type === 'Recibido'\">                       \r\n\r\n                        <p class=\"mb-0\"> <span class=\"fw-bold\">Estado:</span> {{ traslado.estado }}</p>\r\n                        <p class=\"mb-0\"> <span class=\"fw-bold\">Referencia:</span> {{ traslado.referencia }}</p>\r\n                        <p class=\"mb-0\"> <span class=\"fw-bold\">Fecha:</span> {{ traslado.fecha | date: 'short' }}</p>\r\n                        <p *ngIf=\"traslado.fechaIn\" class=\"mb-0\"> <span class=\"fw-bold\">Fecha Llegada:</span> {{ traslado.fechaIn | date: 'short' }}</p>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            <!-- PAGOS -->\r\n\r\n        </div>\r\n\r\n    </ng-container>\r\n\r\n\r\n\r\n</div>\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { _productTraslados, Traslado } from 'src/app/models/traslados.model';\r\nimport { SearchService } from 'src/app/services/search.service';\r\nimport { TrasladosService } from 'src/app/services/traslados.service';\r\nimport Swal from 'sweetalert2';\r\n\r\nimport { environment } from 'src/environments/environment';\r\nimport { User } from 'src/app/models/user.model';\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport { Bodega } from 'src/app/models/bodegas.model';\r\nimport { BodegasService } from 'src/app/services/bodegas.service';\r\nimport { Product } from 'src/app/models/product.model';\r\n\r\n\r\n@Component({\r\n  selector: 'app-traslados',\r\n  templateUrl: './traslados.component.html',\r\n  styleUrls: ['./traslados.component.css']\r\n})\r\nexport class TrasladosComponent implements OnInit {\r\n\r\n  public user!: User;\r\n\r\n  constructor(  private trasladosService: TrasladosService,\r\n                private bodegasService: BodegasService,\r\n                private searchService: SearchService,\r\n                private userService: UserService\r\n  ) { \r\n    this.user = userService.user;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.loadQueryTraslados();\r\n  }\r\n\r\n  /** ================================================================\r\n     *   BUSCAR QUERY\r\n    ==================================================================== */\r\n    public traslados: Traslado[] = [];\r\n    public resultado: number = 0;\r\n    public total: number = 0;\r\n    public cargando: boolean = true;\r\n    public query: any = {\r\n      desde: 0,\r\n      hasta: 50,\r\n      type: 'Enviado',\r\n      sort: {fecha: -1}\r\n    }\r\n  \r\n    loadQueryTraslados(){\r\n\r\n      this.cargando = true;\r\n      \r\n      this.trasladosService.loadTraslados(this.query)\r\n        .subscribe( ({traslados}) => {\r\n\r\n              this.cargando = false;\r\n              this.traslados = traslados;\r\n              this.resultado = traslados.length;\r\n\r\n            }, (err) => {\r\n              console.log(err);\r\n              Swal.fire('Error', err.error.msg, 'error');            \r\n            })\r\n  \r\n    }\r\n  \r\n  \r\n    /** ================================================================\r\n     *   CAMBIAR PAGINA\r\n    ==================================================================== */\r\n    @ViewChild('mostrar') mostrar!: ElementRef;\r\n    cambiarPagina (valor: number){\r\n      \r\n      this.query.desde += valor;\r\n  \r\n      if (this.query.desde < 0) {\r\n        this.query.desde = 0;\r\n      }\r\n      \r\n      this.loadQueryTraslados();\r\n      \r\n    }\r\n  \r\n    /** ================================================================\r\n     *   CHANGE LIMITE\r\n    ==================================================================== */\r\n    limiteChange( cantidad: any ){  \r\n  \r\n      this.query.hasta = Number(cantidad);    \r\n      this.loadQueryTraslados();\r\n  \r\n    }\r\n  \r\n    /** ================================================================\r\n     *   RECARGAR\r\n    ==================================================================== */\r\n    recargar(){\r\n      this.query ={\r\n        desde: 0,\r\n        hasta: 50,\r\n        type: 'Enviado',\r\n        sort: {fecha: -1}\r\n      }\r\n  \r\n      this.loadQueryTraslados();\r\n    }\r\n  \r\n    /** ================================================================\r\n     *   SEARCH FOR DATE\r\n    ==================================================================== */\r\n    searchForDates(inicial:Date, final: Date){\r\n  \r\n      if (inicial === null && final === null || !inicial || !final) {\r\n        return;\r\n      }\r\n  \r\n      // SET HOURS      \r\n      inicial = new Date(inicial);      \r\n      let initial = new Date(inicial.getTime() + 1000 * 60 * 60 * 5);\r\n  \r\n      final = new Date(final);\r\n      let end = new Date(final.getTime() + 1000 * 60 * 60 * 5);      \r\n      // SET HOURS \r\n  \r\n      let url = document.URL.split(':');\r\n      if (url[0] === 'https') {\r\n        initial = new Date(inicial.getTime() + 1000 * 60 * 60 - 7200000); \r\n        end = new Date(final.getTime() + 1000 * 60 * 60 - 3600000);        \r\n      }\r\n  \r\n      this.query.$and = [{ fecha: { $gte: new Date(initial), $lt: new Date(end) } }];\r\n  \r\n      this.loadQueryTraslados();   \r\n      \r\n    }\r\n  \r\n    /** ================================================================\r\n     *   LOAD FOR STATUS\r\n    ==================================================================== */\r\n    searchStatus(status: boolean){\r\n  \r\n      if (status) {\r\n        delete this.query.status;\r\n      }else{\r\n        this.query.status = status;\r\n      }\r\n  \r\n      this.loadQueryTraslados();   \r\n  \r\n    }\r\n  \r\n    /** ================================================================\r\n     *   TIPO DE FACTURA\r\n    ==================================================================== */\r\n    searchTrasladosType(type: string){\r\n  \r\n      this.query.type = type;\r\n  \r\n      this.loadQueryTraslados();\r\n  \r\n    }\r\n\r\n    /** ================================================================\r\n     *   SEARCH REFERENCIA\r\n    ==================================================================== */\r\n    searchReferencia(referencia: string){\r\n\r\n      if (referencia.length === 0) {\r\n        this.query.type = 'Enviado';\r\n        delete this.query.referencia;\r\n      }else{\r\n        this.query.referencia = referencia;\r\n        delete this.query.type;\r\n      }\r\n\r\n      this.loadQueryTraslados();   \r\n    }\r\n\r\n    /** ================================================================\r\n     *   SEARCH BODEGA\r\n    ==================================================================== */\r\n    public bodegasLists: Bodega[] = [];\r\n    public queryB: any = {\r\n      desde: 0,\r\n      hasta: 10\r\n    }\r\n\r\n    searchBodega(termino: string){      \r\n\r\n      if (termino.length <= 0) {\r\n        delete this.queryB['$or'];\r\n        this.bodegasLists = [];\r\n        return;\r\n      }\r\n\r\n      const regex = { $regex: termino, $options: 'i' }; // Construir regex      \r\n      this.queryB.$or = [\r\n        { name: regex }\r\n      ];      \r\n\r\n      this.bodegasService.loadBodegas(this.queryB)\r\n          .subscribe( ({bodegas}) => {\r\n\r\n            this.bodegasLists = bodegas;            \r\n\r\n          }, (err) => {\r\n            console.log(err);\r\n            Swal.fire('Error', err.error.msg, 'error');            \r\n          })\r\n\r\n\r\n    }\r\n\r\n    /** ================================================================\r\n     *   SEARHC PRODUCT\r\n    ==================================================================== */\r\n    public productsLists: Product[] = [];\r\n    public productSeletec!: Product;\r\n    searchProduct(termino: string){\r\n\r\n      if (termino.length <= 0) {\r\n        this.productsLists = [];\r\n        return\r\n      }\r\n\r\n      this.searchService.search('products', termino)\r\n          .subscribe( ({resultados}) => {\r\n            this.productsLists = resultados;\r\n          }, (err) => {\r\n            console.log(err);\r\n            Swal.fire('Error', err.error.msg, 'error');            \r\n          })\r\n\r\n    }\r\n\r\n    /** ================================================================\r\n     *   ADD PRODUCT\r\n    ==================================================================== */\r\n    @ViewChild ('qtyI') qtyI: ElementRef;\r\n    @ViewChild ('searchP') searchP: ElementRef;\r\n    addProduct(qty: any){\r\n\r\n      if (!this.productSeletec) {\r\n        return;\r\n      }\r\n\r\n      qty = Number(qty);\r\n\r\n      this.formaData.products.push({\r\n        code: this.productSeletec.code,\r\n        name: this.productSeletec.name,\r\n        type: this.productSeletec.type,\r\n        qty: qty,\r\n        cost: this.productSeletec.cost,\r\n        gain: this.productSeletec.gain,\r\n        price: this.productSeletec.price,\r\n        wholesale: this.productSeletec.wholesale,\r\n        distribuidor: this.productSeletec.distribuidor,\r\n        confirmado: false,\r\n      })\r\n\r\n      delete this.productSeletec;\r\n      this.qtyI.nativeElement.value = 0;\r\n      this.searchP.nativeElement.value = '';\r\n      this.searchP.nativeElement.focus();\r\n\r\n    }\r\n\r\n    /** ================================================================\r\n     *   DEL PRODUCT\r\n    ==================================================================== */\r\n    delProduct(i: any){\r\n      this.formaData.products.splice(i,1);\r\n    }\r\n\r\n    /** ================================================================\r\n     *   CREATE\r\n    ==================================================================== */\r\n    public products: _productTraslados[] = [];\r\n    public bodegaSelected!: Bodega;\r\n    public formaData: any = {\r\n      desde: environment.base_url,\r\n      products: [],\r\n      type: 'Enviado'\r\n    }\r\n\r\n    create(){\r\n\r\n      if (this.formaData.products.length === 0) {\r\n        Swal.fire('Atención', 'No has agregado productos', 'warning');\r\n        return;\r\n      }\r\n\r\n      if (!this.bodegaSelected) {\r\n        Swal.fire('Atención', 'No has seleccionado ninguna sucursal o bodega', 'warning');\r\n        return;\r\n      }\r\n\r\n      this.formaData.bodega = this.bodegaSelected.bid;\r\n      this.formaData.user = this.user.name;\r\n\r\n      this.trasladosService.createTraslado(this.formaData)\r\n          .subscribe( ({traslado}) => {\r\n            this.traslados.push(traslado);\r\n\r\n            this.formaData.type = 'Recibido';\r\n            this.formaData.referencia = traslado.referencia;\r\n            this.formaData.estado = 'En Camino';\r\n            this.formaData.desde = traslado.desde;\r\n            this.formaData.trasid = traslado._id;\r\n\r\n            this.trasladosService.sendTraslado(this.formaData, `${this.bodegaSelected.endpoint}/api`)\r\n                .subscribe( ({traslado}) => {\r\n\r\n                  Swal.fire('Estupendo', 'se ha creado el traslado exitosamente', 'success');\r\n                  delete this.bodegaSelected;\r\n                  this.formaData = {\r\n                    desde: environment.base_url,\r\n                    user: this.user.name,\r\n                    products: [],\r\n                    type: 'Enviado'\r\n                  }\r\n\r\n                }, (err) => {\r\n                  console.log(err);\r\n                  Swal.fire('Error', err.error.msg, 'error');                  \r\n                })\r\n\r\n          }, (err) => {\r\n            console.log(err);\r\n            Swal.fire('Error', err.error.msg, 'error');            \r\n          })\r\n\r\n    }    \r\n\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Configuraciones / Bodegas</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a routerLink=\"/dashboard/configuracion/bodegas\" class=\"nav-link text-dark \" id=\"ticket1-tab\"><i class=\"bi-gear\" style=\"font-size: 1rem\"></i> Bodegas</a>\r\n        </li>\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a  class=\"nav-link text-dark active\" id=\"ticket1-tab2\"><i class=\"bi-gear\" style=\"font-size: 1rem\"></i> Trasalados</a>\r\n        </li>\r\n\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<div class=\"container-fluid py-4\">\r\n\r\n    <!-- TITLE - SUBTITLE -->\r\n    <div>\r\n        <h5 class=\"text-dark\">TRASLADOS</h5>\r\n        <p>Lista de los traslados entre bodegas, enviadas y recibidas</p>\r\n    </div>\r\n\r\n    <div class=\"row\">\r\n\r\n        <div class=\"col-md-3\">\r\n            <div class=\"shadow-lg mb-5 py-3 rounded bg-white text-break container\">\r\n\r\n                <h4 class=\"text-muted\">Filtros</h4>\r\n\r\n                <div class=\"col-12\">\r\n                    <h6 class=\"text-muted\">Activa ó Cancelada</h6>\r\n                    <div class=\"form-check form-switch\">\r\n                        <input (change)=\"searchStatus(estado.checked)\" class=\"form-check-input\" type=\"checkbox\" id=\"flexSwitchCheckChecked\" checked #estado>\r\n                        <label class=\"form-check-label\" for=\"flexSwitchCheckChecked\">\r\n                            <span *ngIf=\"estado.checked\">Todos los traslados</span>\r\n                            <span *ngIf=\"!estado.checked\">Solo los cancelados</span>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n\r\n                <hr>\r\n\r\n                <div class=\"form-group\">\r\n                    <h6 class=\"text-muted\">Tipo de traslados</h6>\r\n                    <select class=\"form-select\" aria-label=\"Default select example\" (change)=\"searchTrasladosType(typeT.value)\" #typeT>\r\n                        <option value=\"Enviado\">Enviados</option>\r\n                        <option value=\"Recibido\">Recibidos</option>\r\n                     </select>\r\n                </div>\r\n\r\n                <hr>\r\n\r\n                <div class=\"form-group\">\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"\" class=\"form-label\">Referencia</label>\r\n                        <input (keydown.enter)=\"searchReferencia(searchR.value)\" #searchR type=\"text\" class=\"form-control\" name=\"\" id=\"\" aria-describedby=\"helpId\" placeholder=\"Referencia\" />\r\n                    </div>\r\n                    \r\n                </div>\r\n\r\n                <hr>\r\n\r\n                <div class=\"form-group mb-3\">\r\n                    <label class=\"\" for=\"\">Desde</label>\r\n                    <input type=\"datetime-local\" class=\"form-control\" (change)=\"initial.value\" #initial>\r\n                </div>\r\n\r\n                <div class=\"form-group mb-3\">\r\n                    <label class=\"\" for=\"\">Hasta</label>\r\n                    <input type=\"datetime-local\" class=\"form-control\" (change)=\"end.value\" #end>\r\n                </div>\r\n                \r\n                <button type=\"button\" class=\"btn btn-outline-primary btn-sm py-auto w-100\" (click)=\"searchForDates(initial.value, end.value)\"> \r\n                    <i class=\"bi-search\"></i> Buscar \r\n                </button>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div class=\"col-md-9\">\r\n\r\n            <!-- TABLE FACTURAS -->\r\n            <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n                <!-- CARGANDO -->\r\n                <div *ngIf=\"cargando\">\r\n                    <div class=\"text-center p-4\">\r\n                        <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                            <span class=\"visually-hidden\">Loading...</span>\r\n                        </div>\r\n                    </div>\r\n                    <small class=\"text-muted\">cargando...</small>\r\n                </div>\r\n                <!-- CARGANDO -->\r\n\r\n                <div *ngIf=\"!cargando\">\r\n\r\n                    <!-- BUSCADOR -->\r\n                    <div class=\"d-flex justify-content-between flex-wrap\">\r\n\r\n                        <div>\r\n                            <button type=\"button\" class=\"btn btn-outline-primary btn-sm\" (click)=\"recargar()\"> <i class=\"bi-arrow-clockwise\"></i> Recargar </button>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label for=\"mostrar\" class=\"me-2\">Mostrar: </label>\r\n                            <select name=\"\" id=\"\" [value]=\"query.hasta\" #mostrar (change)=\"limiteChange(mostrar.value)\">\r\n                                <option value=\"10\">10</option>\r\n                                <option value=\"25\">25</option>\r\n                                <option value=\"50\">50</option>\r\n                                <option value=\"100\">100</option>\r\n                                <option value=\"250\">250</option>\r\n                                <option value=\"500\">500</option>\r\n                                <option value=\"1000\">1000</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <!-- BUSCADOR -->\r\n                     <!-- BTN CREAR VEHICULO -->\r\n                    <div class=\"d-flex justify-content-end\">\r\n                        <button type=\"button\" class=\"btn btn-sm btn-primary btnW waves-effect waves-ligth\" data-bs-toggle=\"modal\" data-bs-target=\"#nuevoTraslado\">Crear traslado</button>\r\n                    </div>\r\n                    <!-- BTN CREAR VEHICULO -->\r\n\r\n                    <div class=\"table-responsive \">\r\n                        <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn overflow-auto\">\r\n                            <thead class=\"border-bottom \">\r\n                                <tr>\r\n                                    <th class=\"text-muted\" scope=\"col \">referencia</th>\r\n                                    <th class=\"text-muted\" scope=\"col \">Bodega</th>\r\n                                    <th class=\"text-muted\" scope=\"col \">Tipo</th>\r\n                                    <th class=\"text-muted\" scope=\"col \">Estado</th>\r\n                                    <th class=\"text-muted\" scope=\"col \">Fecha</th>\r\n                                    <th class=\"text-muted\" scope=\"col \"></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n\r\n                                <tr *ngIf=\"traslados.length === 0\" class=\"text-center \">\r\n                                    <th colspan=\"10\" class=\"py-4\">\r\n                                        <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                                    </th>\r\n                                </tr>\r\n\r\n                                <tr *ngFor=\"let traslado of traslados\">\r\n                                    <td>\r\n                                        <a [routerLink]=\"['/dashboard/configuracion/traslado', traslado.traid]\">\r\n                                            <small class=\"text-break\">\r\n                                                {{ traslado.referencia }}\r\n                                            </small>\r\n                                        </a>\r\n                                    </td>\r\n                                    <td>                                        \r\n                                        <span>\r\n                                            {{ traslado.desde }}\r\n                                        </span>\r\n                                    </td>\r\n                                    <td> {{ traslado.type }} </td>\r\n                                    <td> {{ traslado.estado }} </td>\r\n                                    <td> {{ traslado.fecha | date: 'short' }} </td>\r\n                                    <td>\r\n                                        <a class=\"btn btn-link p-1 text-primary\" [routerLink]=\"['/dashboard/configuracion/traslado', traslado.traid]\">\r\n                                            <i class=\"bi bi-box-arrow-up-right\"></i>\r\n                                        </a>\r\n                                    </td>\r\n                                </tr>\r\n\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                    <div class=\"row\">\r\n                        <div class=\"col col-md-4\">\r\n                            <small *ngIf=\"resultado !== 0\" class=\"text-muted\">(Resultados: {{ resultado || 0 }})</small>\r\n                            <small *ngIf=\"desde !== 0\" class=\"text-muted\"> - (Desde el: {{ query.desde + 1}} Hasta el: {{ query.desde + query.hasta }})</small>\r\n                        </div>\r\n\r\n                        <div class=\"col d-flex justify-content-end\">\r\n                            <button [disabled]=\"query.desde === 0\" type=\"button\" (click)=\"cambiarPagina((query.hasta * -1))\" class=\"btn btn-sm btn-dark btnW waves-effect waves-light px-3\">Anterior</button>\r\n                            <button [disabled]=\"query.hasta  > traslados.length || query.hasta > total\" type=\"button\" (click)=\"cambiarPagina(query.hasta)\" class=\"btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2\">Siguiente</button>\r\n                        </div>\r\n                    </div>\r\n                    <!-- BTN SIGUIENTE Y ANTERIORS -->\r\n\r\n                </div>\r\n\r\n            </div>\r\n            <!-- TABLE FACTURAS -->\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    NUEVO TRASLADO\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"nuevoTraslado\" tabindex=\"-1\" aria-labelledby=\"nuevoTrasladoModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-lg modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"nuevoTrasladoModal\"> Nuevo Traslado</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n                <h5 class=\"text-muted\">Buscar Sucursal o Bodega</h5>\r\n\r\n                <div class=\"col-md-12 mt-2 px-md-1\">\r\n\r\n                    <input type=\"text\" class=\"form-control\" placeholder=\"buscar sucursal\" (keydown.enter)=\"searchBodega(searchB.value)\" (keyup)=\"searchBodega(searchB.value)\" #searchB>\r\n\r\n                    <div *ngIf=\"bodegasLists.length > 0 && searchB.value.length !== 0\" class=\"bg-white px-2 shadow col-auto\" style=\"position: absolute; z-index: 1020;\">\r\n\r\n                        <ul class=\"list-group list-group-flush overflow-auto\" style=\"max-height: 150px;\">\r\n\r\n                            <li class=\"list-group-item py-1\">\r\n                                <h6>Resultados: ({{ bodegasLists.length }})</h6>\r\n                            </li>\r\n\r\n                            <li class=\"list-group-item py-1\" *ngFor=\"let bodega of bodegasLists\">\r\n                                <button [disabled]=\"!bodega.status\" class=\"border-0 bg-white w-100 text-start\" (click)=\"bodegaSelected = bodega; bodegasLists = [] \" type=\"button\">\r\n                                    <div class=\"d-flex\">\r\n                                        <div class=\"align-self-center\">\r\n                                            <span> {{ bodega.name }} </span>\r\n                                            <span *ngIf=\"!bodega.status\" class=\"badge rounded-pill bg-danger\">Eliminado</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </button>\r\n                            </li>\r\n\r\n                        </ul>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                <hr *ngIf=\"bodegaSelected\">\r\n\r\n                <!-- BODEGA SELECCIONADA -->\r\n                <div *ngIf=\"bodegaSelected\">\r\n\r\n                    <h5 class=\"text-muted\">Informacion de la bodega</h5>\r\n\r\n                    <div class=\"form-group\">\r\n\r\n                        <div class=\"form-floating\">\r\n                            <input id=\"Nombre\" readonly class=\"form-control\" [value]=\"bodegaSelected.name\">\r\n                            <label for=\"Nombre\">Nombre</label>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n\r\n                        <div class=\"form-floating\">\r\n                            <input id=\"cedula\" readonly type=\"text\" class=\"form-control\" [value]=\"bodegaSelected.endpoint\">\r\n                            <label for=\"cedula\">Link</label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <hr>\r\n                <h5 class=\"text-muted\">Buscar Producto</h5>\r\n\r\n                <div class=\"col-md-12 mt-2 px-md-1\">\r\n\r\n                    <input type=\"text\" class=\"form-control\" placeholder=\"buscar producto\" (keydown.enter)=\"searchProduct(searchP.value)\" (keyup)=\"searchProduct(searchP.value)\" #searchP>\r\n\r\n                    <div *ngIf=\"productsLists.length > 0 && searchP.value.length !== 0\" class=\"bg-white px-2 shadow col-auto\" style=\"position: absolute; z-index: 1020;\">\r\n\r\n                        <ul class=\"list-group list-group-flush overflow-auto\" style=\"max-height: 150px;\">\r\n\r\n                            <li class=\"list-group-item py-1\">\r\n                                <h6>Resultados: ({{ productsLists.length }})</h6>\r\n                            </li>\r\n\r\n                            <li class=\"list-group-item py-1\" *ngFor=\"let product of productsLists\">\r\n                                <button [disabled]=\"!product.status\" class=\"border-0 bg-white w-100 text-start\" (click)=\"productSeletec = product; productsLists = [] \" type=\"button\">\r\n                                    <div class=\"d-flex\">\r\n                                        <div class=\"align-self-center\">\r\n                                            <span> {{ product.code }} </span>\r\n                                            <span> {{ product.name }} </span>\r\n                                            <span *ngIf=\"!product.status\" class=\"badge rounded-pill bg-danger\">Eliminado</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </button>\r\n                            </li>\r\n\r\n                        </ul>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                <hr>\r\n\r\n                <!-- BODEGA SELECCIONADA -->\r\n                <div *ngIf=\"productSeletec\">\r\n\r\n                    <h5 class=\"text-muted\">Informacion del producto</h5>\r\n\r\n                    <div class=\"form-group\">\r\n                        <div class=\"form-floating\">\r\n                            <input id=\"codigo\" readonly class=\"form-control\" [value]=\"productSeletec.code\">\r\n                            <label for=\"codigo\">Codigo</label>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n\r\n                        <div class=\"form-floating\">\r\n                            <input id=\"Nombre\" readonly class=\"form-control\" [value]=\"productSeletec.name\">\r\n                            <label for=\"Nombre\">Nombre</label>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n\r\n                        <div class=\"form-floating\">\r\n                            <input id=\"qty\" class=\"form-control\" type=\"number\" min=\"0\" #qtyI>\r\n                            <label for=\"qty\">Cantidad</label>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <button type=\"button\" (click)=\"addProduct(qtyI.value)\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Agregar</button>\r\n                    \r\n                </div>\r\n\r\n                <div class=\"table-responsive\">\r\n                    <table class=\"table table-sm table-striped table-hover table-borderless align-middle\">\r\n                        <thead class=\"table-light\">\r\n                            <caption>\r\n                                Productos\r\n                            </caption>\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>Nombre</th>\r\n                                <th>Cantidad</th>\r\n                                <td></td>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody class=\"\">\r\n\r\n                            <tr *ngIf=\"this.formaData.products.length === 0\">\r\n                                <td class=\"text-center\" colspan=\"4\">Aun no has agregado items...</td>\r\n                            </tr>\r\n\r\n                            <tr *ngFor=\"let item of this.formaData.products; let i = index\">\r\n                                <td> {{ i +1 }} </td>\r\n                                <td> {{ item.name }} </td>\r\n                                <td> {{ item.qty }} </td>\r\n                                <td> <button type=\"button\" (click)=\"delProduct(i)\" class=\"btn btn-link p-1 text-danger\"><i class=\"bi-trash\" style=\"font-size: 0.9rem\"></i></button> </td>\r\n                            </tr>\r\n                        </tbody>\r\n                        <tfoot>\r\n                            \r\n                        </tfoot>\r\n                    </table>\r\n                </div>\r\n                                \r\n\r\n                <button type=\"button\" (click)=\"create()\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\n\r\nimport Swal from 'sweetalert2';\r\n\r\n// MODELS\r\nimport { User } from '../../../models/user.model';\r\n\r\n// SERVICES\r\nimport { UserService } from '../../../services/user.service';\r\nimport { SearchService } from '../../../services/search.service';\r\n\r\n// INTERFACES\r\nimport { _privilegios } from '../../../interfaces/load-users.interface';\r\n\r\n@Component({\r\n  selector: 'app-usuarios',\r\n  templateUrl: './usuarios.component.html',\r\n  styleUrls: ['./usuarios.component.css']\r\n})\r\nexport class UsuariosComponent implements OnInit {\r\n\r\n  public usuarios: User[] = [];\r\n  public usuariosTemp: User[] = [];\r\n  public totalUsers: number = 0;\r\n\r\n  public resultado: number = 0;\r\n  public desde: number = 0;\r\n  public cargando: boolean = true;\r\n  public sinResultados: boolean = true;\r\n\r\n  constructor(  private userService: UserService,\r\n                private fb: FormBuilder,\r\n                private searchService: SearchService) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.cargarUsuarios();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR USUARIOS\r\n  ==================================================================== */\r\n  buscar(termino: string){}\r\n\r\n  /** ================================================================\r\n   *   CARGAR USUARIOS\r\n  ==================================================================== */\r\n  cargarUsuarios(){\r\n    \r\n    this.userService.loadUsers()\r\n    .subscribe( ({ total, users }) => {\r\n      \r\n      this.totalUsers = total;\r\n      this.usuarios = users;\r\n      this.usuariosTemp = users;\r\n      this.resultado = 0;\r\n      this.cargando = false;          \r\n          \r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREAR USUARIOS\r\n  ==================================================================== */\r\n  public formSubmitted:boolean = false;\r\n  public privilegio : _privilegios = {\r\n    cierre: true,\r\n    comandas: true\r\n  };\r\n  public newUserForm = this.fb.group({\r\n    usuario: ['', [Validators.required, Validators.minLength(4)]],\r\n    name: ['', [Validators.required, Validators.minLength(3)]],\r\n    password: ['', [Validators.required, Validators.minLength(6)]],\r\n    role: ['STAFF'],\r\n    cierre: [true],\r\n    comandas: [true],\r\n    privilegios: {\r\n      cierre: true,\r\n      comandas: true\r\n    }\r\n  });\r\n\r\n  crearUsuario(){\r\n\r\n    this.formSubmitted = true;\r\n    \r\n    if (this.newUserForm.invalid) {\r\n      return;\r\n    }else{\r\n\r\n      \r\n      // this.privilegio.push({\r\n      //   cierre: this.newUserForm.value.cierre,\r\n      //   comandas: this.newUserForm.value.comandas,\r\n      // });\r\n\r\n      this.newUserForm.value.privilegios.cierre = this.newUserForm.value.cierre;\r\n      this.newUserForm.value.privilegios.comandas = this.newUserForm.value.comandas;\r\n\r\n      this.userService.createUser(this.newUserForm.value)\r\n          .subscribe( (resp:{ok: boolean, user: User}) => {            \r\n\r\n            this.formSubmitted = false;\r\n            this.cargarUsuarios();\r\n            this.newUserForm.reset({\r\n              role: ['STAFF']\r\n            });\r\n            Swal.fire('Estupendo', 'Se ha creado un usuario nuevo', 'success');\r\n\r\n          }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   VALIDAR CAMPOS\r\n  ==================================================================== */\r\n  campoValido(campo: string): boolean{\r\n\r\n    if ( this.newUserForm.get(campo).invalid &&  this.formSubmitted) {      \r\n      return true;      \r\n    } else{      \r\n      return false;\r\n    }\r\n\r\n  }    \r\n\r\n  /** ================================================================\r\n   *   INFORMACION DEL USUARIO\r\n  ==================================================================== */\r\n  public formSubmittedUp:boolean = false;  \r\n  public updateUserForm = this.fb.group({\r\n    usuario: ['', [Validators.required, Validators.minLength(4)]],\r\n    name: ['', [Validators.required, Validators.minLength(3)]],\r\n    id: [''],\r\n    password: [''],\r\n    repassword: [''],\r\n    role: ['STAFF'],\r\n    cierre: true,\r\n    comandas: true,\r\n    privilegios: {}\r\n  });\r\n\r\n  public updateUserForm2 = this.fb.group({\r\n    usuario: ['', [Validators.required, Validators.minLength(4)]],\r\n    name: ['', [Validators.required, Validators.minLength(3)]],\r\n    id: [''],\r\n    role: ['STAFF'],\r\n    cierre: [true],\r\n    privilegios: {}\r\n  });\r\n\r\n  informacionUsuario(user: User){\r\n\r\n    if (!user.privilegios) {\r\n      user.privilegios = {\r\n        cierre: true,\r\n        comandas: true\r\n      }\r\n    }\r\n    \r\n    this.updateUserForm.setValue({\r\n      usuario: user.usuario,\r\n      name: user.name,\r\n      password: [''],\r\n      repassword: [''],\r\n      id: user.uid,\r\n      role: user.role,\r\n      cierre: user.privilegios.cierre,\r\n      comandas: user.privilegios.comandas,\r\n      privilegios: user.privilegios\r\n    });\r\n\r\n  }\r\n  /** ================================================================\r\n   *   ACTUALIZAR USUARIOS\r\n  ==================================================================== */\r\n  public privilegioUp : _privilegios[] = [];\r\n  actualizarUsuario(){\r\n\r\n    this.formSubmittedUp = true;\r\n    \r\n        \r\n    \r\n    if (this.updateUserForm.value.password.length === 1) {\r\n            \r\n      this.updateUserForm2.setValue({\r\n        usuario: this.updateUserForm.value.usuario,\r\n        name: this.updateUserForm.value.name,\r\n        id: this.updateUserForm.value.id,\r\n        role: this.updateUserForm.value.role,\r\n        privilegios: {\r\n          cierre: this.updateUserForm.value.cierre,\r\n          comandas: this.updateUserForm.value.comandas\r\n        },\r\n        cierre: this.updateUserForm.value.cierre\r\n      });\r\n\r\n      this.userService.updateUser(this.updateUserForm2.value, this.updateUserForm2.value.id)\r\n        .subscribe((resp:{ok: boolean, user: User}) => {          \r\n\r\n          this.formSubmittedUp = false;\r\n          this.cargarUsuarios();\r\n          Swal.fire('Estupendo', 'Se ha actualizado el Usuario exitosamente!', 'success');\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); \r\n      });\r\n\r\n      \r\n    }else{\r\n\r\n      if (this.updateUserForm.invalid) {\r\n        return;\r\n      }\r\n\r\n      if(this.updateUserForm.value.password !== this.updateUserForm.value.repassword){\r\n        Swal.fire('Atención', 'Las contraseñas no son iguales', 'warning');\r\n        return;  \r\n      }\r\n\r\n      this.updateUserForm.value.privilegios = {\r\n        cierre: this.updateUserForm.value.cierre,\r\n        comandas: this.updateUserForm.value.comandas\r\n      }\r\n\r\n      this.userService.updateUser(this.updateUserForm.value, this.updateUserForm.value.id)\r\n        .subscribe((resp:{ok: boolean, user: User}) => {          \r\n\r\n          this.formSubmittedUp = false;\r\n          this.cargarUsuarios();\r\n          this.updateUserForm.reset();\r\n          Swal.fire('Estupendo', 'Se ha actualizado el Usuario exitosamente!', 'success');\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); \r\n      });\r\n\r\n    }\r\n\r\n    \r\n\r\n    \r\n\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   VALIDAR CAMPOS\r\n  ==================================================================== */\r\n  campoValidoUpdate(campo: string): boolean{\r\n\r\n    if ( this.updateUserForm.get(campo).invalid &&  this.formSubmittedUp) {      \r\n      return true;      \r\n    } else{      \r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ACTUALIZAR STATUS USUARIOS\r\n  ==================================================================== */\r\n  statusUpdate(id: string){\r\n\r\n    if (id === this.userService.user.uid) {\r\n      Swal.fire('Atención', `No puedes cambiar tu estado`, 'info');\r\n      return;\r\n    }\r\n    \r\n    this.userService.statusUser(id)\r\n        .subscribe( (user) => {\r\n\r\n          let information: string;\r\n          if (user.status) {\r\n            information = 'Activado';            \r\n          }else{\r\n            information = 'Desactivado';\r\n          }          \r\n          \r\n          this.cargarUsuarios();\r\n          Swal.fire('Estupendo', `El departamento ${user.name}, ha sido ${information}`, 'success');\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n  }\r\n      \r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Configuraciones / Usuarios</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"ticket1-tab\"><i class=\"bi-gear\" style=\"font-size: 1rem\"></i> Usuarios</a>\r\n        </li>\r\n\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n<div class=\"container-fluid\">\r\n\r\n    <!-- TABLE CLIENTS -->\r\n    <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n        <!-- CARGANDO -->\r\n        <div *ngIf=\"cargando\">\r\n            <div class=\"text-center p-4\">\r\n                <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                    <span class=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n            </div>\r\n            <small class=\"text-muted\">cargando...</small>\r\n        </div>\r\n        <!-- CARGANDO -->\r\n\r\n        <div *ngIf=\"!cargando\">\r\n            <div>\r\n                <div class=\"form-floating mb-2\">\r\n                    <span class=\"position-absolute top-50 start-90 translate-middle\"><i class=\" bi-search \" style=\"font-size: 1rem \"></i></span>\r\n                    <input type=\"text\" class=\"form-control\" id=\"floatingInput2\" placeholder=\"Buscar Departamento\" (keyup)=\"buscar(search.value)\" #search>\r\n                    <label for=\"floatingInput2 \">Buscar Usuarios</label>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- BTN CREAR DEPARTAMENTO -->\r\n            <div class=\"d-flex justify-content-end\">\r\n                <button type=\"button\" class=\"btn btn-sm btn-primary btnW waves-effect waves-ligth\" data-bs-toggle=\"modal\" data-bs-target=\"#nuevoUsuario\">Crear Usuario</button>\r\n            </div>\r\n            <!-- BTN CREAR DEPARTAMENTO -->\r\n\r\n            <div class=\"table-responsive \">\r\n                <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                    <thead class=\"border-bottom \">\r\n                        <tr>\r\n                            <th class=\"text-muted \" scope=\"col \">#</th>\r\n                            <th class=\"text-muted \" scope=\"col \" colspan=\"2\">Nombre</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Usuario</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Estado</th>\r\n                            <th class=\"text-muted w100 \" scope=\"col \">Acciones</th>\r\n\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr *ngIf=\"!sinResultados\" class=\"text-center \">\r\n                            <th colspan=\"10\" class=\"py-4\">\r\n                                <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                            </th>\r\n                        </tr>\r\n                        <tr class=\"trHover\" *ngFor=\"let usuario of usuarios; let i = index\">\r\n                            <th *ngIf=\"desde === 0 \" scope=\"row \">{{ i + 1}}</th>\r\n                            <th *ngIf=\"desde> 0\" scope=\"row\">{{ (i + 1) + desde }}</th>\r\n                            <td colspan=\"2\">{{ usuario.name }}</td>\r\n                            <td>{{ usuario.usuario }}</td>\r\n                            <td>\r\n                                <button *ngIf=\"usuario.status\" (click)=\"statusUpdate(usuario.uid)\" type=\"button\" class=\"btn btnW waves-effect waves-ligth btn-success btn-sm\">Activo</button>\r\n                                <button *ngIf=\"!usuario.status\" (click)=\"statusUpdate(usuario.uid)\" type=\"button\" class=\"btn btnW waves-effect waves-ligth btn-danger btn-sm\">Desactivo</button>\r\n                            </td>\r\n                            <td class=\"text-center\">\r\n                                <button type=\"button\" (click)=\"informacionUsuario(usuario)\" class=\"btn btn-link p-1 text-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#actualizarUsuario\">\r\n                                    <i class=\"bi bi-box-arrow-up-right\"></i>\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n\r\n                </table>\r\n\r\n            </div>\r\n\r\n            <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n            <div class=\"row\">\r\n                <div class=\"col col-md-4\">\r\n                    <small class=\"text-muted\">Total de usuarios: ({{totalUsers}})</small>\r\n                    <small *ngIf=\"resultado !== 0\" class=\"text-muted\"> - (Resultados: {{ resultado }})</small>\r\n                    <small *ngIf=\"desde !== 0\" class=\"text-muted\"> - (Desde el: {{ desde + 1}} Hasta el: {{ desde + usuarios.length }})</small>\r\n                </div>\r\n\r\n                <!-- <div *ngIf=\"search.value.length === 0\" class=\"col d-flex justify-content-end\">\r\n                    <button type=\"button\" (click)=\"cambiarPagina(-10)\" class=\"{{btnAtras}} btn btn-sm btn-dark btnW waves-effect waves-light px-3\">Anterior</button>\r\n                    <button type=\"button\" (click)=\"cambiarPagina(10)\" class=\"{{btnAdelante}} btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2\">Siguiente</button>\r\n                </div> -->\r\n            </div>\r\n            <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n        </div>\r\n    </div>\r\n    <!-- TABLE CLIENTS -->\r\n\r\n\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    NUEVO USUARIO \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"nuevoUsuario\" tabindex=\"-1\" aria-labelledby=\"nuevoUsuarioModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"nuevoUsuarioModal\"><i class=\"bi-person-plus\" style=\"font-size: 1rem\"></i> Crear Usuario Nuevo</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form id=\"newDepartmentForm\" autocomplete=\"off\" [formGroup]=\"newUserForm\" (ngSubmit)=\"crearUsuario()\">\r\n\r\n                    <!-- =======================================================================\r\n                        Informacion del Caja\r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Información del usuario</h5>\r\n\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombres\">\r\n                                <label for=\"floatingInput\">Nombres</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"usuario\" type=\"text\" class=\"form-control\" placeholder=\"Usuario\">\r\n                                <label for=\"floatingInput\">Usuario</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"password\" type=\"password\" class=\"form-control\" placeholder=\"Contraseña\">\r\n                                <label for=\"floatingInput\">Contraseña</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-group\">\r\n                                <label for=\"\">ROLE</label>\r\n                                <select formControlName=\"role\" class=\"form-control\" name=\"\">\r\n                                    <option value=\"STAFF\" selected>Usuario</option>\r\n                                    <option value=\"ADMIN\" selected>Administrador</option>\r\n                                    <option value=\"CASHIER\" selected>Cajero</option>\r\n                                    <option value=\"WAITER\" selected>Mesero</option>\r\n                                    <option value=\"WAITERALL\" selected>Mesero General</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <label for=\"\">Privilegios</label>\r\n                    <div class=\"row mb-3 border py-4 px-2\">\r\n\r\n                        \r\n                        <div class=\"col-md-4 px-md-1\">\r\n                            <div class=\"form-check mt-2\">\r\n                                <input formControlName=\"cierre\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"cierre\">\r\n                                <label class=\"form-check-label\" for=\"cierre\">\r\n                                    Cierre\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                        \r\n\r\n                        \r\n                        <div class=\"col-md-4 px-md-1\">\r\n                            <div class=\"form-check mt-2\">\r\n                                <input formControlName=\"comandas\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"comandas\">\r\n                                <label class=\"form-check-label\" for=\"comandas\">\r\n                                    Comandas\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                        \r\n\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"text-danger mb-2\">\r\n                            <p *ngIf=\"campoValido('name')\" class=\"mb-1 animated fadeIn\">- El nombre es obligatorio</p>\r\n                            <p *ngIf=\"campoValido('usuario')\" class=\"mb-1 animated fadeIn\">- El usuario es obligatorio, Debe de tener como minimo 4 letras</p>\r\n                            <p *ngIf=\"campoValido('password')\" class=\"mb-1 animated fadeIn\">- La contraseña es obligatoria, minimo 6 caracteres</p>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    NUEVO USUARIO \r\n========================================================================= -->\r\n<!-- =========================================================================\r\n    ACTUALIZAR USUARIO \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"actualizarUsuario\" tabindex=\"-1\" aria-labelledby=\"actualizarUsuarioModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"actualizarUsuarioModal\"><i class=\"bi-person-plus\" style=\"font-size: 1rem\"></i> Actualizar Usuario</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form id=\"actualizarUserForm\" autocomplete=\"off\" [formGroup]=\"updateUserForm\" (ngSubmit)=\"actualizarUsuario()\">\r\n\r\n                    <!-- =======================================================================\r\n                        Informacion del Caja\r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Información del usuario</h5>\r\n\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombres\">\r\n                                <label for=\"floatingInput\">Nombres</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"usuario\" type=\"text\" class=\"form-control\" placeholder=\"Usuario\">\r\n                                <label for=\"floatingInput\">Usuario</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"password\" type=\"password\" class=\"form-control\" placeholder=\"Contraseña\">\r\n                                <label for=\"floatingInput\">Contraseña</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"repassword\" type=\"password\" class=\"form-control\" placeholder=\"Repetir Contraseña\">\r\n                                <label for=\"floatingInput\">Repetir contraseña</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-group\">\r\n                                <label for=\"\">ROLE</label>\r\n                                <select formControlName=\"role\" class=\"form-control\" name=\"\">\r\n                                    <option value=\"STAFF\" selected>Usuario</option>\r\n                                    <option value=\"ADMIN\">Administrador</option>\r\n                                    <option value=\"CASHIER\">Cajero</option>\r\n                                    <option value=\"WAITER\">Mesero</option>\r\n                                    <option value=\"WAITERALL\">Mesero General</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <label for=\"\">Privilegios</label>\r\n                    <div class=\"row mb-3 border py-4 px-2\">\r\n\r\n                        \r\n                        <div class=\"col-md-4 px-md-1\">\r\n                            <div class=\"form-check mt-2\">\r\n                                <input formControlName=\"cierre\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"cierreU\">\r\n                                <label class=\"form-check-label\" for=\"cierreU\">\r\n                                    Cierres\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                        \r\n\r\n                        \r\n                        <div class=\"col-md-4 px-md-1\">\r\n                            <div class=\"form-check mt-2\">\r\n                                <input formControlName=\"comandas\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"comandasU\">\r\n                                <label class=\"form-check-label\" for=\"comandasU\">\r\n                                    Comandas\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                        \r\n\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"text-danger mb-2\">\r\n                            <p *ngIf=\"campoValidoUpdate('name')\" class=\"mb-1 animated fadeIn\">- El nombre es obligatorio</p>\r\n                            <p *ngIf=\"campoValidoUpdate('usuario')\" class=\"mb-1 animated fadeIn\">- El usuario es obligatorio, Debe de tener como minimo 4 letras</p>\r\n                            <p *ngIf=\"campoValidoUpdate('password')\" class=\"mb-1 animated fadeIn\">- La contraseña debe de tener una longitud minima de 6</p>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    ACTUALIZAR USUARIO \r\n========================================================================= -->","import { Component, OnInit, TemplateRef, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Subscription, Observable } from 'rxjs';\r\nimport Swal from 'sweetalert2';\r\n\r\n// PRINTER\r\nimport { NgxPrinterService } from 'projects/ngx-printer/src/lib/ngx-printer.service';\r\nimport { PrintItem } from 'projects/ngx-printer/src/lib/print-item';\r\nimport { ngxPrintMarkerPosition } from 'projects/ngx-printer/src/public_api';\r\n\r\n// SERVICES\r\nimport { TurnoService } from '../../services/turno.service';\r\nimport { CajaService } from '../../services/caja.service';\r\nimport { UserService } from '../../services/user.service';\r\nimport { InvoiceService } from '../../services/invoice.service';\r\n\r\n// INTERFACES\r\nimport { LoadTurno, _movements } from '../../interfaces/load-turno.interface';\r\nimport { _caja } from '../../interfaces/load-caja.interface';\r\ninterface _departament {\r\n  _id?: string,\r\n  did?: string,\r\n  name?: string,\r\n  qty?: number,\r\n  monto?: number\r\n}\r\n\r\n// MODELS\r\nimport { Caja } from '../../models/caja.model';\r\nimport { User } from '../../models/user.model';\r\nimport { DepartmentService } from '../../services/department.service';\r\nimport { Banco } from 'src/app/models/bancos.model';\r\nimport { BancosService } from '../../services/bancos.service';\r\nimport { EmpresaService } from 'src/app/services/empresa.service';\r\nimport { Datos } from 'src/app/models/empresa.model';\r\nimport { ImpuestosService } from 'src/app/services/impuestos.service';\r\nimport { Impuesto } from 'src/app/models/impuesto.model';\r\nimport { AlquileresService } from 'src/app/services/alquileres.service';\r\nimport { Alquiler } from 'src/app/models/alquileres.model';\r\nimport { ParqueoService } from 'src/app/services/parqueo.service';\r\n\r\n@Component({\r\n  selector: 'app-corte',\r\n  templateUrl: './corte.component.html',\r\n  styleUrls: ['./corte.component.css']\r\n})\r\nexport class CorteComponent implements OnInit {\r\n\r\n  @ViewChild('PrintTemplate')\r\n  private PrintTemplateTpl: TemplateRef<any>;\r\n\r\n  title = 'ngx-printer-demo';\r\n\r\n  printWindowSubscription: Subscription;\r\n  $printItems: Observable<PrintItem[]>;\r\n\r\n  public user:User;\r\n\r\n  constructor(  private turnoService: TurnoService,\r\n                private bancosService: BancosService,\r\n                private printerService: NgxPrinterService,\r\n                private userService: UserService,\r\n                private empresaService: EmpresaService,\r\n                private invoiceService: InvoiceService,\r\n                private departmentService: DepartmentService,\r\n                private impuestosService: ImpuestosService,\r\n                private alquileresService: AlquileresService,\r\n                private parqueoService: ParqueoService) {\r\n\r\n                  this.printWindowSubscription = this.printerService.$printWindowOpen.subscribe(\r\n                    val => {\r\n\r\n                      this.user = this.userService.user;\r\n                      \r\n                      if (!this.user.privilegios.cierre) {\r\n\r\n                        this.corte();\r\n                        \r\n                      }\r\n\r\n                      if (val) {\r\n                        window.location.reload();                        \r\n                      }\r\n                      console.log('Print window is open:', val);\r\n                    }\r\n                  );\r\n              \r\n                  this.$printItems = this.printerService.$printItems;\r\n\r\n                }\r\n\r\n  public empresa!: Datos;\r\n\r\n  ngOnInit(): void {    \r\n\r\n    this.empresaService.getDatos().subscribe( datos => {\r\n      this.empresa = datos \r\n\r\n      if (this.empresa.parqueadero! && !this.user.cerrada) {\r\n        this.loadParqueos();\r\n      }\r\n    \r\n    });\r\n\r\n    if (!this.user.cerrada) {\r\n      \r\n      // IMPUESTOS\r\n      this.cargarImpuestos();\r\n\r\n      // DEPARTAMENTO\r\n      this.cargarDepartamento();\r\n\r\n      // BANCOS\r\n      this.cargarBancos();      \r\n\r\n    }else{\r\n      Swal.fire('Atención!', 'No existe un turno asignado, no puedes hacer cortes ni cierres', 'info');\r\n      return;\r\n    }   \r\n    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   LOAD PARQUEADERO\r\n  ==================================================================== */\r\n  public parqueos: number = 0;\r\n  loadParqueos(){\r\n\r\n    this.parqueos = 0;\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR BANCOS\r\n  ==================================================================== */\r\n  public bancos: Banco[] = [];\r\n  public bancosAbonos: Banco[] = [];\r\n  public bancosAlquileres: Banco[] = [];\r\n  cargarBancos(){\r\n\r\n    this.bancosService.loadBancos()\r\n        .subscribe( ({ bancos }) => {          \r\n\r\n          bancos.map( (banco) => {\r\n            banco.monto = 0;\r\n          });   \r\n\r\n          this.bancos = bancos;\r\n\r\n    });\r\n\r\n    this.bancosService.loadBancos()\r\n        .subscribe( ({ bancos }) => {          \r\n\r\n          bancos.map( (banco) => {\r\n            banco.monto = 0;\r\n          });   \r\n          \r\n          this.bancosAbonos = bancos;\r\n\r\n    });\r\n\r\n    this.bancosService.loadBancos()\r\n        .subscribe( ({ bancos }) => {          \r\n\r\n          bancos.map( (banco) => {\r\n            banco.monto = 0;\r\n          });   \r\n          \r\n          this.bancosAlquileres = bancos;\r\n\r\n    });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   IMPRIMIR\r\n  ==================================================================== */\r\n  printDiv() {\r\n    this.printerService.printDiv('printDiv');\r\n  }  \r\n\r\n  /** ===============================================================\r\n  * DEPARTAMENTO - DEPARTAMENTO - DEPARTAMENTO - DEPARTAMENTO  \r\n  ==================================================================== */\r\n  public departamento: _departament[] = [];\r\n  cargarDepartamento(){\r\n\r\n    this.departmentService.loadDepartment()\r\n        .subscribe( ({departments}) => {\r\n\r\n          this.departamento = departments;\r\n          this.departamento.map((departamento) => {\r\n            departamento.monto = 0;\r\n            departamento.qty = 0;\r\n          } );          \r\n          \r\n          // TURNO\r\n          this.cargarTurno();\r\n      \r\n          // FACTURAS\r\n          this.cargarFacturasTurno();\r\n          // CAJA\r\n\r\n    });\r\n\r\n  }\r\n\r\n  /** ===============================================================\r\n  * DEPARTAMENTO - DEPARTAMENTO - DEPARTAMENTO - DEPARTAMENTO  \r\n  ==================================================================== */\r\n  public impuestos: Impuesto[] = [];\r\n  cargarImpuestos(){\r\n    this.impuestosService.loadImpuestos()\r\n        .subscribe( ({taxes}) => {\r\n          this.impuestos = taxes; \r\n        });\r\n  }\r\n\r\n  /** ===============================================================\r\n  * TURNO - TURNO - TURNO - TURNO  \r\n  ==================================================================== */\r\n  public abEfectivo: number = 0;\r\n  public abTarjeta: number = 0;\r\n  public abTransferencia: number = 0;\r\n  public turno: LoadTurno;\r\n  public totalDevolucion: number = 0; \r\n\r\n  public inicial: number = 0;\r\n  public entradas: number = 0;\r\n  public salidas: number = 0;\r\n  public movimientos: _movements[] = [];\r\n\r\n  cargarTurno(){  \r\n    this.turnoService.getTurnoId(this.user.turno)\r\n    .subscribe( (turno) => { \r\n\r\n      if (turno.devolucion.length > 0) {\r\n        turno.devolucion.forEach(devolucion => {\r\n          this.totalDevolucion += devolucion.monto;\r\n        });\r\n      }\r\n\r\n      this.turno = turno;\r\n      this.movimientos = turno.movements;\r\n      this.inicial = turno.initial;\r\n\r\n      this.abEfectivo = 0;\r\n      this.abTarjeta = 0;\r\n      this.abTransferencia = 0;\r\n      this.totalBancosAbono = 0;\r\n      \r\n      for (const factura of turno.abonos) {\r\n\r\n        // ABONOS EN BANCOS bancosAbonos\r\n        for (const pago of factura.factura.paymentsCredit) {\r\n\r\n          if (pago.turno === turno.tid && factura.pay === pago._id && factura.factura.status) {             \r\n            \r\n            this.bancosAbonos.map( (banco) => {\r\n              \r\n              if (banco.name === pago.type) {\r\n                banco.monto += pago.amount;\r\n                \r\n                this.totalBancosAbono += pago.amount;\r\n                \r\n              };\r\n              \r\n            });\r\n\r\n          }\r\n          \r\n        }\r\n           \r\n\r\n        for (const pago of factura.factura.paymentsCredit) {          \r\n\r\n          if (pago.turno === turno.tid && factura.pay === pago._id && factura.factura.status) {\r\n            \r\n            if (pago.type === \"efectivo\") {\r\n              this.abEfectivo += pago.amount;\r\n            }else if (pago.type === \"tarjeta\") {\r\n              this.abTarjeta += pago.amount;              \r\n            }else if (pago.type === \"transferencia\") {\r\n              this.abTransferencia += pago.amount;              \r\n            }\r\n          }\r\n\r\n        }\r\n        \r\n      }\r\n      \r\n    const movements = this.movimientos;\r\n    for (let i = 0; i < movements.length; i++) {\r\n      \r\n      switch (movements[i].type) {\r\n        case 'entrada':\r\n\r\n          this.entradas += movements[i].monto;\r\n          \r\n          break;\r\n\r\n        case 'salida':\r\n\r\n          this.salidas += movements[i].monto;\r\n          \r\n          break;\r\n      \r\n        default:\r\n          break;\r\n      }\r\n      \r\n    }\r\n\r\n    // SI TIENES PAGOS DE ALQUILERES\r\n    if (this.turno.alquileres.length > 0) {\r\n      this.cargarAlquileres();      \r\n    }\r\n      \r\n      \r\n    });\r\n  }\r\n  \r\n  /** ===============================================================\r\n  * PROCESAR LA INFORMACION \r\n  ==================================================================== */\r\n  public propinas: number = 0;\r\n  public montos: number = 0;\r\n  public costo: number = 0;\r\n  public efectivo: number = 0;\r\n  public tarjeta: number = 0;\r\n  public transferencia: number = 0;\r\n  public credito: number = 0;\r\n  public vales: number = 0;\r\n  public devolucion: number = 0;\r\n  public facturas: any[] = [];\r\n  \r\n  public totalCreditos: number = 0;\r\n  public totalBancos: number = 0;\r\n  public totalBancosAbono: number = 0;\r\n\r\n  cargarFacturasTurno(){\r\n\r\n    const endPoint = `?turno=${this.user.turno}`;\r\n\r\n    this.invoiceService.loadInvoiceCierre(endPoint)\r\n        .subscribe( ({invoices, total, devolucion, montos, costos, efectivo, tarjeta, transferencia, credit, creditos, vales, propinas}) => {\r\n\r\n          this.montos = montos;\r\n          this.propinas = propinas;\r\n          this.costo = costos;\r\n          this.efectivo = efectivo;\r\n          this.credito = credit;\r\n          this.devolucion = devolucion;\r\n          this.transferencia = transferencia;\r\n          this.totalBancos = 0;\r\n          this.totalCreditos = creditos;\r\n          \r\n          this.facturas = invoices;\r\n\r\n          for (const factura of this.facturas) {\r\n            \r\n            // SUMAR LAS VENTAS POR DEPARTAMENTOS\r\n            for (const product of factura.products) {\r\n\r\n              let precio = product.price;\r\n              if (factura.descuento) {\r\n                precio = precio - ((precio * factura.porcentaje) /100);\r\n              }\r\n              \r\n              this.departamento.map( (depart) => {\r\n                                \r\n                if (product.product?.department === depart.did) {                  \r\n\r\n                  // COMPROBAR SI EL PRODUCTO TIENE IMPUESTO\r\n                  if (!product.product.tax) {\r\n                    depart.qty = depart.qty + product.qty,\r\n                    depart.monto = depart.monto + (product.qty * precio);\r\n                    \r\n                  }else{\r\n                    depart.qty = depart.qty + product.qty,\r\n                    this.impuestos.map( (impuesto) => {\r\n                      if (product.product.taxid === impuesto.taxid) {\r\n                        depart.monto = depart.monto + (product.qty * (((precio * impuesto.valor)/100) + precio));                        \r\n                      }\r\n                    })\r\n\r\n                  }\r\n                \r\n                }\r\n\r\n              });\r\n              \r\n            }\r\n\r\n            // SUMAR LOS PAGOS DE CADA BANCO\r\n            for (const pago of factura.payments) {\r\n              \r\n              this.bancos.map( (banco) => {                \r\n                \r\n                if (banco.name === pago.type) {                  \r\n\r\n                  banco.monto += pago.amount;\r\n\r\n                  this.totalBancos += pago.amount;\r\n\r\n                }\r\n\r\n              });\r\n              \r\n            }\r\n\r\n          } \r\n\r\n          // this.efectivo = this.montos - this.totalBancos;\r\n          \r\n        });\r\n  }\r\n  \r\n\r\n  /** ===============================================================\r\n  * CARGAR ALQUILERES\r\n  ==================================================================== */\r\n  public alquileresList: Alquiler[] = [];\r\n  public alqEfectivo: number = 0;\r\n  public totalAlquiler: number = 0;\r\n  \r\n  async cargarAlquileres(){\r\n\r\n    this.alquileresList = [];\r\n    this.alqEfectivo = 0;\r\n    this.totalAlquiler = 0;\r\n\r\n    for (const alq of this.turno.alquileres) {\r\n      await this.alquileresService.loadAlquilerId(alq.alquiler)\r\n                .subscribe( ({alquiler}) => {\r\n\r\n                  // SUMAR LOS PAGOS DE CADA BANCO\r\n                  for (const pago of alquiler.payments) {\r\n                    \r\n                    this.bancosAlquileres.map( (banco) => {                \r\n                      \r\n                      if (banco.name === pago.type && this.turno.tid === pago.turno) {                  \r\n\r\n                        banco.monto += pago.amount;\r\n                        this.totalAlquiler += pago.amount;\r\n\r\n                      }\r\n\r\n                    });\r\n\r\n                    if (pago.type === 'efectivo' && this.turno.tid === pago.turno) {\r\n                      this.alqEfectivo += pago.amount;\r\n                      this.totalAlquiler += pago.amount;\r\n                    }\r\n                    \r\n                  }\r\n                  \r\n\r\n                }, (err) => {\r\n                  console.log(err);\r\n                  \r\n                })\r\n    }\r\n\r\n  }\r\n\r\n\r\n  /** ===============================================================\r\n  * CERRAR CAJA Y TURNO \r\n  ==================================================================== */\r\n  public fechaCierre: Date;\r\n  public montoDiferencia: number;\r\n  public diferencia: boolean;\r\n\r\n  cerrarTurno(dineroCaja: number){\r\n\r\n    const totalEfectivo = (this.parqueos + this.efectivo + this.entradas + this.inicial + this.abEfectivo + this.salidas);\r\n\r\n    if ((Number(dineroCaja) - this.totalDevolucion) !== totalEfectivo) {\r\n      this.turno.diferencia = true;\r\n      this.turno.montoD = Number(dineroCaja) - totalEfectivo;\r\n    }\r\n\r\n    this.turno.cerrado = true;\r\n    this.turno.cierre = new Date();\r\n\r\n    // CERRAR TURNO\r\n    this.turnoService.updateTurno(this.turno, this.turno.tid)\r\n        .subscribe( (resp:{ ok:boolean, turno: LoadTurno }) => {        \r\n          \r\n          this.fechaCierre = resp.turno.cierre;\r\n          this.diferencia = resp.turno.diferencia ;\r\n          this.montoDiferencia = resp.turno.montoD ;\r\n\r\n          this.userService.user.cerrada = true;\r\n\r\n          // IMPRIMIR FACTURA\r\n          setTimeout( () => {\r\n\r\n            this.printDiv();\r\n\r\n          },1000);\r\n\r\n        }, (err) => { \r\n          Swal.fire('Error', err.error.msg, 'error') \r\n          return;\r\n        });\r\n    \r\n    // CERRAR CAJA \r\n    // this.caja.cerrada = true;\r\n    // this.cajaService.updateCaja(this.caja, this.caja.caid)\r\n    //     .subscribe( resp => {\r\n\r\n    //       localStorage.removeItem('turno');          \r\n          \r\n    //     }, (err) => { Swal.fire('Error', err.error.msg, 'error') });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ABRIR CAJA\r\n  ==================================================================== */\r\n  corte(){\r\n    \r\n    if (!this.user.cerrada) {\r\n\r\n      Swal.fire({\r\n        title: 'Cuanto efectivo existe en caja',\r\n        input: 'number',\r\n        inputAttributes: {\r\n          autocapitalize: 'off'\r\n        },\r\n        showCancelButton: true,\r\n        confirmButtonText: 'Cerrar Caja',\r\n        cancelButtonText: 'Cancelar',\r\n        showLoaderOnConfirm: true,\r\n        preConfirm: (resp) => {\r\n          \r\n          return resp;\r\n        }\r\n        }).then((result) => {\r\n  \r\n          if (result.value > 0) {\r\n  \r\n            const monto:number = result.value;\r\n\r\n            this.cerrarTurno(monto)\r\n  \r\n           \r\n            return;\r\n          }else{\r\n            return;\r\n          }                \r\n          \r\n      });\r\n    }\r\n    \r\n\r\n\r\n  }\r\n\r\n\r\n  //  FIN DE LA CLASE\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Corte</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"facturas-tab\"><i class=\"bi-bar-chart\" style=\"font-size: 1rem\"></i> Corte</a>\r\n        </li>\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    BODY\r\n========================================================================= -->\r\n<div *ngIf=\"user.privilegios.cierre\" class=\"container-fluid mb-5\">\r\n\r\n    <div class=\"my-4\">\r\n        <h5 class=\"text-dark\">Realizar Cierre de caja</h5>\r\n        <p>Automaticamente se guardara toda la información de caja y el usuario</p>\r\n        <button type=\"button\" class=\"btn btn-sm btn-outline-success\" data-bs-toggle=\"modal\" data-bs-target=\"#cierre\"> <i class=\"bi-calculator\"></i> Cerrar Caja</button>\r\n    </div>\r\n\r\n    <div class=\"row d-flex justify-content-center\">\r\n\r\n        <div class=\"col-auto p-2\">\r\n            <div class=\"card shadow px-2\" style=\"width: 18rem;\">\r\n\r\n                <div class=\"card-body\">\r\n                    <h5 class=\"card-title mb-0\">Dinero en caja</h5>\r\n                </div>\r\n\r\n                <div class=\"table-responsive \">\r\n                    <table class=\"table table-borderless table-hover table-sm \">\r\n\r\n                        <tbody>\r\n\r\n                            <tr style=\"color: black;\">\r\n                                <td colspan=\"2\"> Fondo Caja </td>\r\n                                <td> {{ inicial | divisa }}</td>\r\n                            </tr>\r\n\r\n                            <tr style=\"color: black;\">\r\n                                <td colspan=\"2\"> Abonos Creditos Efectivo </td>\r\n                                <td> {{ abEfectivo | divisa }}</td>\r\n                            </tr>\r\n\r\n                            <tr style=\"color: black;\">\r\n                                <td colspan=\"2\"> Ventas en efectivo </td>\r\n                                <td> {{ efectivo | divisa }} </td>\r\n                            </tr>\r\n\r\n                            <tr *ngIf=\"empresa?.parqueadero\" style=\"color: black;\">\r\n                                <td colspan=\"2\"> Parqueadero </td>\r\n                                <td> {{ parqueos | divisa }} </td>\r\n                            </tr>\r\n\r\n                            <tr style=\"color: black;\">\r\n                                <td colspan=\"2\"> Entradas </td>\r\n                                <td> {{ entradas | divisa }} </td>\r\n                            </tr>\r\n\r\n                            <tr *ngIf=\"empresa?.alquileres!\" style=\"color: black;\">\r\n                                <td colspan=\"2\"> Efectivo Alquileres </td>\r\n                                <td> {{ alqEfectivo | divisa }} </td>\r\n                            </tr>\r\n\r\n                            <tr style=\"color: black;\">\r\n                                <td colspan=\"2\"> Salidas </td>\r\n                                <td> -{{ salidas | divisa }} </td>\r\n                            </tr>\r\n\r\n                            <tr style=\"color: black;\">\r\n                                <td colspan=\"2\"> devolucion </td>\r\n                                <td> -{{ totalDevolucion | divisa }} </td>\r\n                            </tr>\r\n\r\n                            <tr class=\"border-top\">\r\n                                <td colspan=\"2\"> Total </td>\r\n                                <td class=\"fw-bold\"> {{ (parqueos + inicial + efectivo + abEfectivo + entradas + alqEfectivo! + salidas) - (totalDevolucion) | divisa }} </td>\r\n                            </tr>\r\n\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"col-auto p-2\">\r\n\r\n            <div class=\"card shadow px-2\" style=\"width: 18rem;\">\r\n\r\n                <div class=\"card-body\">\r\n                    <h5 class=\"card-title mb-0\">Ventas del dia</h5>\r\n                </div>\r\n\r\n                <div class=\"table-responsive \">\r\n                    <table class=\"table table-borderless table-hover table-sm animated fadeIn \">\r\n\r\n                        <tbody>\r\n\r\n                            <tr style=\"color: black;\">\r\n                                <td colspan=\"2\"> En Efectivo </td>\r\n                                <td> {{ efectivo | divisa }} </td>\r\n                            </tr>\r\n                            <tr style=\"color: black;\">\r\n                                <td colspan=\"2\"> Con tarjeta </td>\r\n                                <td> {{ tarjeta | divisa }} </td>\r\n                            </tr>\r\n                            <tr style=\"color: black;\">\r\n                                <td colspan=\"2\"> Con Transferencia </td>\r\n                                <td> {{ transferencia | divisa }} </td>\r\n                            </tr>\r\n\r\n                            <ng-container *ngIf=\"bancos.length > 0\">\r\n                                <tr *ngFor=\"let banco of bancos\">\r\n                                    <td colspan=\"2\"> {{ banco.name }} </td>\r\n                                    <td> {{ banco.monto | divisa }} </td>\r\n                                </tr>\r\n                            </ng-container>\r\n\r\n                            <tr style=\"color: black;\">\r\n                                <td colspan=\"2\"> devolucion </td>\r\n                                <td> -{{ devolucion | divisa }} </td>\r\n                            </tr>\r\n\r\n                            <tr class=\"border-top\">\r\n                                <td colspan=\"2\"> Total </td>\r\n                                <td class=\"fw-bold\"> {{ (efectivo + tarjeta + transferencia + totalBancos ) - totalDevolucion | divisa }} </td>\r\n                            </tr>\r\n\r\n\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div class=\"col-auto p-2 \">\r\n\r\n            <div class=\"card shadow px-2 bg-success border-0\" style=\"width: 18rem;\">\r\n\r\n                <div class=\"card-body text-white\">\r\n                    <h4 class=\"card-title mb-0 text-center\">Ventas Totales</h4>\r\n                    <h5 class=\"text-center\"> {{ montos | divisa }} </h5>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            <div *ngIf=\"empresa?.tip\" class=\"card shadow px-2 my-3 bg-info border-0\" style=\"width: 18rem;\">\r\n\r\n                <div class=\"card-body text-white\">\r\n                    <h4 class=\"card-title mb-0 text-center\">Propinas</h4>\r\n                    <h5 class=\"text-center\"> {{ propinas | divisa }} </h5>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            <div *ngIf=\"empresa?.tip\" class=\"card shadow px-2 my-3 bg-success border-0\" style=\"width: 18rem;\">\r\n\r\n                <div class=\"card-body text-white\">\r\n                    <h4 class=\"card-title mb-0 text-center\">Ventas totales + Propinas</h4>\r\n                    <h5 class=\"text-center\"> {{ montos + propinas | divisa }} </h5>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            <div *ngIf=\"user.privilegios.cierre !== false && user.role !== 'CASHIER'\" class=\"card shadow px-2 my-3 bg-dark border-0\" style=\"width: 18rem;\">\r\n\r\n                <div class=\"card-body text-white\">\r\n                    <h4 class=\"card-title mb-0 text-center\">Ganancia Total</h4>\r\n                    <h5 class=\"text-center\"> {{ (efectivo + tarjeta + transferencia + vales + totalBancos) - costo | divisa}} </h5>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            <div class=\"card shadow px-2 my-3 bg-warning border-0\" style=\"width: 18rem;\">\r\n\r\n                <div class=\"card-body text-white\">\r\n                    <h4 class=\"card-title mb-0 text-center\">Ventas a Creditos</h4>\r\n                    <h5 class=\"text-center\"> {{ totalCreditos | divisa }} </h5>\r\n                </div>\r\n\r\n            </div>\r\n\r\n\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <div class=\"row d-flex justify-content-center\">\r\n\r\n        <div class=\"col-auto p-2\">\r\n\r\n            <div class=\"card shadow px-2\" style=\"width: 18rem;\">\r\n\r\n                <div class=\"card-body\">\r\n                    <h5 class=\"card-title mb-0\">Salidas</h5>\r\n                </div>\r\n\r\n                <div class=\"table-responsive \">\r\n                    <table class=\"table table-borderless table-hover table-sm animated fadeIn \">\r\n\r\n                        <tbody>\r\n\r\n                            <ng-container *ngFor=\"let movimiento of movimientos\">\r\n\r\n                                <tr *ngIf=\"movimiento.type === 'salida'\">\r\n\r\n                                    <td colspan=\"2\"> {{ movimiento.descripcion }} </td>\r\n                                    <td [ngClass]=\"{ 'text-danger':  movimiento.type == 'salida'}\">\r\n                                        {{ movimiento.monto | divisa }}\r\n                                    </td>\r\n                                </tr>\r\n\r\n                            </ng-container>\r\n\r\n\r\n\r\n                            <tr class=\"border-top\">\r\n                                <td colspan=\"2\"> Total </td>\r\n                                <td class=\"fw-bold\"> {{ salidas | divisa }} </td>\r\n                            </tr>\r\n\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div class=\"col-auto p-2\">\r\n\r\n            <div class=\"card shadow px-2\" style=\"width: 18rem;\">\r\n\r\n                <div class=\"card-body\">\r\n                    <h5 class=\"card-title mb-0\">Entradas</h5>\r\n                </div>\r\n\r\n                <div class=\"table-responsive \">\r\n                    <table class=\"table table-borderless table-hover table-sm animated fadeIn \">\r\n\r\n                        <tbody>\r\n\r\n                            <ng-container *ngFor=\"let movimiento of movimientos\">\r\n\r\n                                <tr *ngIf=\"movimiento.type === 'entrada'\">\r\n\r\n                                    <td colspan=\"2\"> {{ movimiento.descripcion }} </td>\r\n                                    <td [ngClass]=\"{ 'text-danger':  movimiento.type == 'salida'}\">\r\n                                        {{ movimiento.monto | divisa }}\r\n                                    </td>\r\n                                </tr>\r\n\r\n                            </ng-container>\r\n\r\n                            <tr class=\"border-top\">\r\n                                <td colspan=\"2\"> Total </td>\r\n                                <td class=\"fw-bold\"> {{ entradas | divisa }} </td>\r\n                            </tr>\r\n\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n\r\n    </div>\r\n    <!-- DEPARTMENTS -->\r\n\r\n    <div class=\"d-flex justify-content-center\">\r\n\r\n        <div class=\"col-auto p-2\">\r\n\r\n            <div class=\"card shadow px-2\" style=\"width: 18rem;\">\r\n\r\n                <div class=\"card-body\">\r\n                    <h5 class=\"card-title mb-0\">Departamentos</h5>\r\n                </div>\r\n\r\n                <div class=\"table-responsive \">\r\n                    <table class=\"table table-borderless table-hover table-sm animated fadeIn \">\r\n                        <thead>\r\n                            <th colspan=\"2\">Departamento</th>\r\n                            <th class=\"text-center\">Cant</th>\r\n                            <th class=\"text-end\">Monto</th>\r\n                        </thead>\r\n\r\n                        <tbody>\r\n\r\n                            <ng-container *ngFor=\"let deparment of departamento\">\r\n\r\n                                <tr *ngIf=\"deparment.qty > 0\">\r\n\r\n                                    <td colspan=\"2\"> {{ deparment.name }} </td>\r\n                                    <td class=\"text-center\">\r\n                                        {{ deparment.qty | number }}\r\n                                    </td>\r\n                                    <td class=\"text-end\">\r\n                                        <span class=\"fw-bolder\">\r\n                                            {{ deparment.monto | divisa }}\r\n                                        </span>\r\n                                    </td>\r\n                                </tr>\r\n\r\n                            </ng-container>\r\n\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div class=\"col-auto p-2\">\r\n\r\n            <div class=\"card shadow px-2\" style=\"width: 18rem;\">\r\n\r\n                <div class=\"card-body\">\r\n                    <h5 class=\"card-title mb-0\">ABONOS CREDITOS NEW</h5>\r\n                </div>\r\n\r\n                <div class=\"table-responsive \">\r\n                    <table class=\"table table-borderless table-hover table-sm animated fadeIn \">\r\n\r\n                        <tbody>\r\n\r\n                            <tr>\r\n                                <td colspan=\"2\"> Abono con Efectivo </td>\r\n                                <td class=\"text-end\">\r\n                                    <span class=\"fw-bolder\">\r\n                                        {{ abEfectivo | divisa }}\r\n                                    </span>\r\n                                </td>\r\n                            </tr>\r\n\r\n                            <tr>\r\n                                <td colspan=\"2\"> Abono con Tarjetas </td>\r\n                                <td class=\"text-end\">\r\n                                    <span class=\"fw-bolder\">\r\n                                        {{ abTarjeta | divisa }}\r\n                                    </span>\r\n                                </td>\r\n                            </tr>\r\n\r\n                            <tr>\r\n                                <td colspan=\"2\"> Abono con Transferencias </td>\r\n                                <td class=\"text-end\">\r\n                                    <span class=\"fw-bolder\">\r\n                                        {{ abTransferencia | divisa }}\r\n                                    </span>\r\n                                </td>\r\n                            </tr>\r\n\r\n                            <ng-container *ngIf=\"bancosAbonos.length > 0\">\r\n                                <tr *ngFor=\"let banco of bancosAbonos\">\r\n                                    <td colspan=\"2\">\r\n                                        {{ banco.name }} </td>\r\n                                    <td class=\"text-end\">\r\n                                        <span class=\"fw-bolder\">\r\n                                            {{ banco.monto | divisa }} \r\n                                        </span>\r\n                                    </td>\r\n                                </tr>\r\n                            </ng-container>\r\n\r\n                            <tr class=\"border-top\">\r\n                                <td colspan=\"2\"> Total </td>\r\n                                <td class=\"fw-bold\"> {{ abEfectivo + abTarjeta + abTransferencia + totalBancosAbono | divisa }} </td>\r\n                            </tr>\r\n\r\n\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div class=\"col-auto p-2\" *ngIf=\"empresa?.alquileres!\">\r\n\r\n            <div class=\"card shadow px-2\" style=\"width: 18rem;\">\r\n\r\n                <div class=\"card-body\">\r\n                    <h5 class=\"card-title mb-0\">ALQUILERES</h5>\r\n                </div>\r\n\r\n                <div class=\"table-responsive \">\r\n                    <table class=\"table table-borderless table-hover table-sm animated fadeIn \">\r\n\r\n                        <tbody>\r\n\r\n                            <tr>\r\n                                <td colspan=\"2\"> Abono con Efectivo </td>\r\n                                <td class=\"text-end\">\r\n                                    <span class=\"fw-bolder\">\r\n                                        {{ alqEfectivo | divisa }}\r\n                                    </span>\r\n                                </td>\r\n                            </tr>\r\n\r\n                            <ng-container *ngIf=\"bancosAlquileres.length > 0\">\r\n                                <tr *ngFor=\"let banco of bancosAlquileres\">\r\n                                    <td colspan=\"2\">\r\n                                        {{ banco.name }} </td>\r\n                                    <td class=\"text-end\">\r\n                                        <span class=\"fw-bolder\">\r\n                                            {{ banco.monto | divisa }} \r\n                                        </span>\r\n                                    </td>\r\n                                </tr>\r\n                            </ng-container>\r\n\r\n                            <tr class=\"border-top\">\r\n                                <td colspan=\"2\"> Total </td>\r\n                                <td class=\"fw-bold\"> {{ totalAlquiler | divisa }} </td>\r\n                            </tr>\r\n\r\n\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <!-- DEVOLUCIONES -->\r\n\r\n    <div class=\"col-auto p-2\">\r\n\r\n        <div class=\"card shadow px-2\">\r\n\r\n            <div class=\"card-body\">\r\n                <h5 class=\"card-title mb-0\">DEVOLUCIONES</h5>\r\n            </div>\r\n\r\n            <div class=\"table-responsive table-sm\">\r\n                <table class=\"table table-borderless table-hover table-sm animated fadeIn \">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Factura</th>\r\n                            <th>Codigo</th>\r\n                            <th>Cant.</th>\r\n                            <th>Precio</th>\r\n                            <th>Monto</th>\r\n                        </tr>\r\n                    </thead>\r\n\r\n                    <tbody>\r\n\r\n                        <tr *ngIf=\"turno?.devolucion.length === 0 \">\r\n                            <td colspan=\"5\">Sin devoluciones</td>\r\n                        </tr>\r\n\r\n                        <tr *ngFor=\"let devolucion of turno?.devolucion\">\r\n                            <td> <a [routerLink]=\"['/dashboard/factura/', devolucion.factura._id]\"> {{ devolucion.factura.invoice }} </a> </td>\r\n                            <td> {{ devolucion.product.code! }} </td>\r\n                            <td> {{ devolucion.qty }} </td>\r\n                            <td> {{ devolucion.price }} </td>\r\n                            <td> {{ devolucion.monto }} </td>\r\n                        </tr>\r\n\r\n                        <tr class=\"border-top\">\r\n                            <td colspan=\"2\"> Total </td>\r\n                            <td class=\"fw-bold\"> {{ totalDevolucion | divisa }} </td>\r\n                        </tr>\r\n\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n\r\n    <!-- DEPARTMENTS -->\r\n\r\n</div>\r\n\r\n<!-- CIERRE CIEGO -->\r\n<div *ngIf=\"!user.privilegios.cierre\" class=\"container my-5\">\r\n    <div class=\"bg-body-tertiary p-5 rounded\">\r\n        <div class=\"col-sm-8 py-5 mx-auto\">\r\n            <h1 class=\"display-5 fw-normal\">Cerrar Caja</h1>\r\n            <p>Asegurate de asignar el valor correcto del efectivo que tienes en caja</p>\r\n            <p>\r\n                <button [disabled]=\"user.cerrada\" (click)=\"corte()\" type=\"button\" class=\"btn btn-primary\" role=\"button\">Hacer Cierre</button>\r\n            </p>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    BODY\r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    MODAL CIERRE DE CAJA\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"cierre\" tabindex=\"-1\" aria-labelledby=\"cierreModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"cierreModal\"><i class=\"bi-arrow-left-right\" style=\"font-size: 1rem\"></i> Cierre </h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n\r\n            <div class=\"modal-body mb-4\">\r\n\r\n                <!-- AGREGAR TOTAL EFECTIVO DE CAJA -->\r\n                <div>\r\n                    <table class=\"table\">\r\n                        <tbody>\r\n                            <tr style=\"color: black;\">\r\n                                <td scope=\"row\">Efectivo esperado en caja:</td>\r\n                                <td>{{ (parqueos + inicial + efectivo + abEfectivo + entradas + alqEfectivo! + salidas) - (totalDevolucion) | divisa }}</td>\r\n                                <td>{{ (parqueos + inicial + efectivo + abEfectivo + entradas + alqEfectivo! + salidas) - (totalDevolucion) | divisa }}</td>\r\n                            </tr>\r\n\r\n                            <tr style=\"color: black;\">\r\n                                <td scope=\"row\">Cuanto efectivo hay en caja</td>\r\n                                <td>\r\n                                    <div class=\"form-group\">\r\n                                        <input type=\"number\" name=\"\" id=\"\" class=\"form-control\" placeholder=\"efectivo en caja\" aria-describedby=\"helpId\" (keyup)=\"cajaA.value\" #cajaA>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n\r\n                            <tr style=\"color: black;\">\r\n                                <td scope=\"row\"> Diferencia </td>\r\n                                <td [ngClass]=\" {   'text-danger': (inicial + efectivo + abEfectivo + entradas + alqEfectivo + salidas - cajaA.value) - totalDevolucion !== 0, \r\n                                                    'text-success': (inicial + efectivo + abEfectivo + entradas + alqEfectivo + salidas - cajaA.value) - totalDevolucion > 0\r\n                                }\">\r\n                                    {{ cajaA.value - (parqueos + inicial + efectivo + abEfectivo + entradas + alqEfectivo + salidas ) - totalDevolucion | divisa}}\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n\r\n                    <p class=\"mb-2\" *ngIf=\"(inicial + efectivo + abEfectivo + entradas + alqEfectivo + salidas - cajaA.value ) - totalDevolucion !== 0 \"> <i class=\"bi-exclamation-triangle\"></i> Existe una diferencia, todo va a quedar almacenado </p>\r\n                    <p class=\"mb-2\" *ngIf=\"(inicial + efectivo + abEfectivo + entradas + alqEfectivo + salidas - cajaA.value ) - totalDevolucion === 0\"> <i class=\"bi-check2-all\"></i> Todo en orden</p>\r\n\r\n                    <button type=\"button\" class=\"btn btn-primary\" (click)=\"cerrarTurno(cajaA.value)\">Hacer cierre</button>\r\n\r\n                </div>\r\n                <!-- AGREGAR TOTAL EFECTIVO DE CAJA -->\r\n\r\n                <!-- ============================================================================\r\n                    IMPRIMIR \r\n                ================================================================================= -->\r\n                <div>\r\n                    <div id=\"printDiv\" style=\"color: black!important; background: #fff;\">\r\n                        <!-- VENTAS TOTALES Y GANANCIAS -->\r\n\r\n                        <div style=\"color: black;\" class=\"col-auto p-2\" *ngIf=\"fechaCierre\">\r\n                            <h5 class=\"h5 fw-bold mb-0 text-break\">Fecha: {{ fechaCierre | date: \"medium\" }}</h5>\r\n                        </div>\r\n\r\n\r\n                        <div style=\"color: black;\" class=\"col-auto p-2\" *ngIf=\"diferencia\" style=\"width: 18rem;\">\r\n\r\n                            <table class=\"table text-center\">\r\n                                <thead>\r\n                                    <tr style=\"color: black;\">\r\n                                        <th scope=\"col\">Diferencia</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr style=\"color: black;\">\r\n                                        <th scope=\"row\">{{ montoDiferencia | divisa }} </th>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n\r\n                        </div>\r\n\r\n                        <div style=\"color: black;\" class=\"col-auto p-2\" style=\"width: 18rem;\">\r\n\r\n                            <table class=\"table text-center\">\r\n                                <thead>\r\n                                    <tr style=\"color: black;\">\r\n                                        <th scope=\"col\">Ventas Total</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr style=\"color: black;\">\r\n                                        <th scope=\"row\">{{ (parqueos + efectivo + credito + tarjeta + transferencia + vales + totalBancos) | divisa }} </th>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n\r\n                        </div>\r\n\r\n                        <div style=\"color: black;\" *ngIf=\"user.privilegios.cierre\" class=\"col-auto p-2\" style=\"width: 18rem;\">\r\n\r\n                            <table class=\"table text-center\">\r\n                                <thead>\r\n                                    <tr style=\"color: black;\">\r\n                                        <th scope=\"col\">Ganancia Total</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr style=\"color: black;\">\r\n                                        <th scope=\"row\">{{ (efectivo + tarjeta + transferencia + vales + totalBancos) - costo | divisa }} </th>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n\r\n                        </div>\r\n\r\n                        <div style=\"color: black;\" class=\"col-auto p-2\" style=\"width: 18rem;\">\r\n\r\n                            <table class=\"table text-center\">\r\n                                <thead>\r\n                                    <tr style=\"color: black;\">\r\n                                        <th scope=\"col\">Ventas a creditos</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr style=\"color: black;\">\r\n                                        <th scope=\"row\">{{ totalCreditos | divisa }} </th>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n\r\n                        </div>\r\n\r\n                        <div style=\"color: black;\" *ngIf=\"empresa?.tip\" class=\"col-auto p-2\" style=\"width: 18rem;\">\r\n\r\n                            <table class=\"table text-center\">\r\n                                <thead>\r\n                                    <tr style=\"color: black;\">\r\n                                        <th scope=\"col\">Propinas</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr style=\"color: black;\">\r\n                                        <th scope=\"row\">{{ propinas | divisa }} </th>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n\r\n                        </div>\r\n                        <!-- VENTAS TOTALES Y GANANCIAS -->\r\n\r\n                        <!-- DINERO EN CAJA -->\r\n                        <div style=\"color: black;\" class=\"col-auto p-2\" style=\"width: 18rem;\">\r\n\r\n                            <div class=\"card-body\">\r\n                                <h5 class=\"card-title mb-0 text-center\" style=\"color: black;\">Dinero en Caja</h5>\r\n                            </div>\r\n\r\n                            <table class=\"table table-borderless table-hover table-sm \">\r\n\r\n                                <tbody style=\"color: black;\">\r\n\r\n                                    <tr style=\"color: black;\">\r\n                                        <td colspan=\"2\"> Fondo Caja </td>\r\n                                        <td> {{ inicial | divisa }}</td>\r\n                                    </tr>\r\n                                    <tr style=\"color: black;\">\r\n                                        <td colspan=\"2\"> Ventas en efectivo </td>\r\n                                        <td> {{ efectivo | divisa }} </td>\r\n                                    </tr>\r\n\r\n                                    <tr *ngIf=\"empresa?.parqueadero\" style=\"color: black;\">\r\n                                        <td colspan=\"2\"> Parqueadero </td>\r\n                                        <td> {{ parqueos | divisa }} </td>\r\n                                    </tr>\r\n\r\n                                    <tr style=\"color: black;\">\r\n                                        <td colspan=\"2\"> Abonos en efectivo </td>\r\n                                        <td> {{ abEfectivo | divisa }} </td>\r\n                                    </tr>\r\n                                    <tr *ngIf=\"empresa?.alquileres!\" style=\"color: black;\">\r\n                                        <td colspan=\"2\"> Abonos de Alquileres </td>\r\n                                        <td> {{ alqEfectivo | divisa }} </td>\r\n                                    </tr>\r\n                                    <tr style=\"color: black;\">\r\n                                        <td colspan=\"2\"> Entradas </td>\r\n                                        <td> {{ entradas | divisa }} </td>\r\n                                    </tr>\r\n                                    <tr style=\"color: black;\">\r\n                                        <td colspan=\"2\"> Salidas </td>\r\n                                        <td> -{{ salidas | divisa }} </td>\r\n                                    </tr>\r\n                                    <tr style=\"color: black;\">\r\n                                        <td colspan=\"2\"> devolucion </td>\r\n                                        <td> -{{ devolucion | divisa }} </td>\r\n                                    </tr>\r\n                                    <tr class=\"border-top\">\r\n                                        <td colspan=\"2\"> Total </td>\r\n                                        <td class=\"fw-bold\"> {{ (parqueos + inicial + efectivo + abEfectivo + entradas + alqEfectivo! + salidas) - (totalDevolucion) | divisa }}</td>\r\n                                    </tr>\r\n\r\n                                </tbody>\r\n                            </table>\r\n\r\n                        </div>\r\n                        <!-- DINERO EN CAJA -->\r\n\r\n                        <!-- VENTAS DEL DIA -->\r\n                        <div style=\"color: black;\" class=\"col-auto p-2\" style=\"width: 18rem;\">\r\n                            <div class=\"card-body\">\r\n                                <h5 class=\"card-title mb-0 text-center\">Ventas del dia</h5>\r\n                            </div>\r\n\r\n                            <div class=\"table-responsive \">\r\n                                <table class=\"table table-borderless table-hover table-sm \">\r\n\r\n                                    <tbody>\r\n\r\n                                        <tr style=\"color: black;\">\r\n                                            <td colspan=\"2\"> En Efectivo </td>\r\n                                            <td> {{ efectivo | divisa }} </td>\r\n                                        </tr>\r\n                                        <tr style=\"color: black;\">\r\n                                            <td colspan=\"2\"> Con tarjeta </td>\r\n                                            <td> {{ tarjeta | divisa }} </td>\r\n                                        </tr>\r\n                                        <tr style=\"color: black;\">\r\n                                            <td colspan=\"2\"> Con Transferencia </td>\r\n                                            <td> {{ transferencia | divisa }} </td>\r\n                                        </tr>\r\n\r\n                                        <ng-container *ngIf=\"bancos.length > 0\">\r\n                                            <tr style=\"color: black;\" *ngFor=\"let banco of bancos\">\r\n                                                <td colspan=\"2\"> {{ banco.name }} </td>\r\n                                                <td> {{ banco.monto | divisa }} </td>\r\n                                            </tr>\r\n                                        </ng-container>\r\n\r\n                                        <tr style=\"color: black;\">\r\n                                            <td colspan=\"2\"> devolucion </td>\r\n                                            <td> -{{ devolucion | divisa }} </td>\r\n                                        </tr>\r\n\r\n                                        <tr style=\"color: black;\" class=\"border-top\">\r\n                                            <td colspan=\"2\"> Total </td>\r\n                                            <td class=\"fw-bold\"> {{ (efectivo + tarjeta + transferencia + totalBancos + credito + vales) - totalDevolucion | divisa }} </td>\r\n                                        </tr>\r\n\r\n\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        </div>\r\n                        <!-- VENTAS DEL DIA -->\r\n\r\n                        <!-- TOTAL ENTRADAS -->\r\n                        <div style=\"color: black;\" class=\"col-auto p-2\" style=\"width: 18rem;\">\r\n\r\n                            <div class=\"card-body\">\r\n                                <h5 class=\"card-title mb-0 text-center\">Entradas</h5>\r\n                            </div>\r\n\r\n                            <div class=\"table-responsive \">\r\n                                <table class=\"table table-borderless table-hover table-sm \">\r\n\r\n                                    <tbody>\r\n\r\n                                        <ng-container *ngFor=\"let movimiento of movimientos\">\r\n\r\n                                            <tr style=\"color: black;\" *ngIf=\"movimiento.type === 'entrada'\">\r\n\r\n                                                <td colspan=\"2\"> {{ movimiento.descripcion }} </td>\r\n                                                <td>\r\n                                                    <span *ngIf=\" movimiento.type === 'salida'\">-</span> {{ movimiento.monto | divisa }}\r\n                                                </td>\r\n                                            </tr>\r\n\r\n                                        </ng-container>\r\n\r\n                                        <tr class=\"border-top\">\r\n                                            <td colspan=\"2\"> Total </td>\r\n                                            <td class=\"fw-bold\"> {{ entradas | divisa }} </td>\r\n                                        </tr>\r\n\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <!-- TOTAL ENTRADAS -->\r\n\r\n                        <!-- TOTAL SALIDAS -->\r\n                        <div style=\"color: black;\" class=\"col-auto p-2\" style=\"width: 18rem;\">\r\n\r\n                            <div class=\"card-body\">\r\n                                <h5 class=\"card-title mb-0 text-center\">Salidas</h5>\r\n                            </div>\r\n\r\n                            <div class=\"table-responsive \">\r\n                                <table class=\"table table-borderless table-hover table-sm \">\r\n\r\n                                    <tbody>\r\n\r\n                                        <ng-container *ngFor=\"let movimiento of movimientos\">\r\n\r\n                                            <tr *ngIf=\"movimiento.type === 'salida'\">\r\n\r\n                                                <td colspan=\"2\"> {{ movimiento.descripcion }} </td>\r\n                                                <td [ngClass]=\"{ 'text-danger':  movimiento.type == 'salida'}\">\r\n                                                    {{ movimiento.monto | divisa }}\r\n                                                </td>\r\n                                            </tr>\r\n\r\n                                        </ng-container>\r\n\r\n                                        <tr class=\"border-top\">\r\n                                            <td colspan=\"2\"> Total </td>\r\n                                            <td class=\"fw-bold\"> {{ salidas | divisa }} </td>\r\n                                        </tr>\r\n\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <!-- TOTAL SALIDAS -->\r\n\r\n                        <!-- TOTAL DEPARTAMENTOS -->\r\n                        <div style=\"color: black;\" class=\"col-auto p-2\" style=\"width: 18rem;\">\r\n\r\n                            <div class=\"card-body\">\r\n                                <h5 class=\"card-title mb-0\">Departamentos</h5>\r\n                            </div>\r\n\r\n                            <div class=\" \">\r\n                                <table class=\"table table-borderless table-hover table-sm \">\r\n\r\n                                    <thead>\r\n                                        <th class=\"text-start\">Departamento</th>\r\n                                        <th class=\"text-center\">Cant.</th>\r\n                                        <th class=\"text-end\">Monto</th>\r\n                                    </thead>\r\n\r\n                                    <tbody>\r\n\r\n                                        <ng-container *ngFor=\"let deparment of departamento\">\r\n\r\n                                            <tr style=\"color: black;\" *ngIf=\"deparment.qty > 0\">\r\n\r\n                                                <td class=\"text-start text-break\"> {{ deparment.name }} </td>\r\n                                                <td class=\"text-center\">\r\n                                                    {{ deparment.qty | number }}\r\n                                                </td>\r\n                                                <td class=\"text-end\">\r\n                                                    <span class=\"fw-bolder\">\r\n                                                            {{ deparment.monto | divisa }}\r\n                                                        </span>\r\n                                                </td>\r\n                                            </tr>\r\n\r\n\r\n                                        </ng-container>\r\n\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <!-- TOTAL DEPARTAMENTOS -->\r\n\r\n                        <!-- ABONOS CREDITOS -->\r\n                        <div style=\"color: black;\" class=\"col-auto p-2\" style=\"width: 18rem;\">\r\n                            <div class=\"card-body\">\r\n                                <h5 class=\"card-title mb-0 text-center\">Abonos Creditos</h5>\r\n                            </div>\r\n\r\n                            <div class=\"table-responsive \">\r\n                                <table class=\"table table-borderless table-hover table-sm \">\r\n\r\n                                    <tbody>\r\n\r\n                                        <tr style=\"color: black;\">\r\n                                            <td colspan=\"2\"> En Efectivo </td>\r\n                                            <td> {{ abEfectivo | divisa }} </td>\r\n                                        </tr>\r\n                                        <tr style=\"color: black;\">\r\n                                            <td colspan=\"2\"> Con tarjeta </td>\r\n                                            <td> {{ abTarjeta | divisa }} </td>\r\n                                        </tr>\r\n                                        <tr style=\"color: black;\">\r\n                                            <td colspan=\"2\"> Con Transferencia </td>\r\n                                            <td> {{ abTransferencia | divisa }} </td>\r\n                                        </tr>\r\n\r\n                                        <ng-container *ngIf=\"bancos.length > 0\">\r\n                                            <tr style=\"color: black;\" *ngFor=\"let banco of bancosAbonos\">\r\n                                                <td colspan=\"2\"> {{ banco.name }} </td>\r\n                                                <td>\r\n                                                    {{ banco.monto | divisa }}\r\n                                                </td>\r\n                                            </tr>\r\n                                        </ng-container>\r\n\r\n                                        <tr style=\"color: black;\" class=\"border-top\">\r\n                                            <td colspan=\"2\"> Total </td>\r\n                                            <td class=\"fw-bold\"> {{ (abEfectivo) + (abTarjeta) + (abTransferencia) + (totalBancosAbono) | divisa }} </td>\r\n                                        </tr>\r\n\r\n\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <!-- ABONOS CREDITOS -->\r\n\r\n                        <!-- ABONOS ALQUILERES -->\r\n                        <div *ngIf=\"empresa?.alquileres!\" style=\"color: black;\" class=\"col-auto p-2\" style=\"width: 18rem;\">\r\n                            <div class=\"card-body\">\r\n                                <h5 class=\"card-title mb-0 text-center\">Abonos Alquileres</h5>\r\n                            </div>\r\n\r\n                            <div class=\"table-responsive \">\r\n                                <table class=\"table table-borderless table-hover table-sm \">\r\n\r\n                                    <tbody>\r\n\r\n                                        <tr style=\"color: black;\">\r\n                                            <td colspan=\"2\"> En Efectivo </td>\r\n                                            <td> {{ alqEfectivo | divisa }} </td>\r\n                                        </tr>\r\n\r\n                                        <ng-container *ngIf=\"bancos.length > 0\">\r\n                                            <tr style=\"color: black;\" *ngFor=\"let banco of bancosAlquileres\">\r\n                                                <td colspan=\"2\"> {{ banco.name }} </td>\r\n                                                <td>\r\n                                                    {{ banco.monto | divisa }}\r\n                                                </td>\r\n                                            </tr>\r\n                                        </ng-container>\r\n\r\n                                        <tr style=\"color: black;\" class=\"border-top\">\r\n                                            <td colspan=\"2\"> Total </td>\r\n                                            <td class=\"fw-bold\"> {{ totalAlquiler | divisa }} </td>\r\n                                        </tr>\r\n\r\n\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <!-- ABONOS ALQUILERES -->\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- NEW -->\r\n                <!-- <div class=\"d-flex justify-content-center\"> -->\r\n\r\n                <!-- SECCION DE IMPRESIOM -->\r\n                <!-- <div id=\"printDiv\">\r\n\r\n                        <div class=\"col-auto p-2\">\r\n                            <div class=\"card-body\" *ngIf=\"fechaCierre\">\r\n                                <h5 class=\"card-title mb-0 text-center\">Fecha: {{ fechaCierre | date: \"medium\" }}</h5>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-auto p-2\">\r\n                            <div class=\"border-0\" *ngIf=\"diferencia\" style=\"width: 18rem;\">\r\n\r\n                                <table class=\"table text-center\">\r\n                                    <thead>\r\n                                        <tr style=\"color: black;\">\r\n                                            <th scope=\"col\">Diferencia</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        <tr style=\"color: black;\">\r\n                                            <th scope=\"row\">{{ montoDiferencia | divisa }} </th>\r\n                                        </tr>\r\n                                    </tbody>\r\n                                </table>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-auto p-2\">\r\n\r\n                            <table class=\"table text-center\">\r\n                                <thead>\r\n                                    <tr style=\"color: black;\">\r\n                                        <th scope=\"col\">Ventas Total</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr style=\"color: black;\">\r\n                                        <th scope=\"row\">{{ efectivo + credito + tarjeta + transferencia + vales | divisa }} </th>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-auto p-2\">\r\n                            <table class=\"table text-center\">\r\n                                <thead>\r\n                                    <tr style=\"color: black;\">\r\n                                        <th scope=\"col\">Ganancia Total</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr style=\"color: black;\">\r\n                                        <th scope=\"row\">{{ (efectivo + credito + tarjeta + transferencia + vales) - costo | divisa }} </th>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n\r\n                        <div class=\"col-auto p-2\" *ngIf=\"montoDiferencia !== 0\">\r\n\r\n                            <div [ngClass]=\" {   'bg-danger': montoDiferencia < 0, \r\n                                            'bg-success': montoDiferencia > 0\r\n                            }\" class=\"card shadow px-2 border-0\" style=\"width: 18rem;\">\r\n\r\n                                <div class=\"card-body text-white\">\r\n                                    <h5 class=\"card-title mb-0 text-center\">Diferencia</h5>\r\n                                    <p class=\"text-center mb-0\"> {{ montoDiferencia| divisa }} </p>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-auto p-2\">\r\n                            <div class=\"card shadow px-2\" style=\"width: 18rem;\">\r\n\r\n                                <div class=\"card-body\">\r\n                                    <h5 class=\"card-title mb-0\">Dinero en caja</h5>\r\n                                </div>\r\n\r\n                                <div class=\"table-responsive \">\r\n                                    <table class=\"table table-borderless table-hover table-sm \">\r\n\r\n                                        <tbody>\r\n\r\n                                            <tr style=\"color: black;\">\r\n                                                <td colspan=\"2\"> Fondo Caja  </td>\r\n                                                <td> {{ inicial| divisa }}</td>\r\n                                            </tr>\r\n                                            <tr style=\"color: black;\">\r\n                                                <td colspan=\"2\"> Ventas en efectivo  </td>\r\n                                                <td> {{ efectivo| divisa }} </td>\r\n                                            </tr>\r\n                                            <tr style=\"color: black;\">\r\n                                                <td colspan=\"2\"> Abonos en efectivo  </td>\r\n                                                <td> {{ abEfectivo| divisa }} </td>\r\n                                            </tr>\r\n                                            <tr style=\"color: black;\">\r\n                                                <td colspan=\"2\"> Entradas  </td>\r\n                                                <td> {{ entradas| divisa }} </td>\r\n                                            </tr>\r\n                                            <tr style=\"color: black;\">\r\n                                                <td colspan=\"2\"> Salidas  </td>\r\n                                                <td> {{ salidas| divisa }} </td>\r\n                                            </tr>\r\n                                            <tr class=\"border-top\">\r\n                                                <td colspan=\"2\"> Total  </td>\r\n                                                <td class=\"fw-bold\"> {{ inicial + efectivo + abEfectivo + entradas + salidas| divisa }} </td>\r\n                                            </tr>\r\n\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-auto p-2\">\r\n\r\n                            <div class=\"card shadow px-2\" style=\"width: 18rem;\">\r\n\r\n                                <div class=\"card-body\">\r\n                                    <h5 class=\"card-title mb-0\">Ventas del dia</h5>\r\n                                </div>\r\n\r\n                                <div class=\"table-responsive \">\r\n                                    <table class=\"table table-borderless table-hover table-sm \">\r\n\r\n                                        <tbody>\r\n\r\n                                            <tr style=\"color: black;\">\r\n                                                <td colspan=\"2\"> En Efectivo  </td>\r\n                                                <td> {{ efectivo| divisa }} </td>\r\n                                            </tr>\r\n                                            <tr style=\"color: black;\">\r\n                                                <td colspan=\"2\"> Con tarjeta  </td>\r\n                                                <td> {{ tarjeta| divisa }} </td>\r\n                                            </tr>\r\n                                            <tr style=\"color: black;\">\r\n                                                <td colspan=\"2\"> Con Transferencia  </td>\r\n                                                <td> {{ transferencia| divisa }} </td>\r\n                                            </tr>\r\n                                            <tr class=\"border-top\">\r\n                                                <td colspan=\"2\"> Total  </td>\r\n                                                <td class=\"fw-bold\"> {{ montos| divisa }} </td>\r\n                                            </tr>\r\n\r\n\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-auto p-2\">\r\n                            <div class=\"card shadow px-2\" style=\"width: 18rem;\">\r\n\r\n                                <div class=\"card-body\">\r\n                                    <h5 class=\"card-title mb-0\">Salidas</h5>\r\n                                </div>\r\n\r\n                                <div class=\"table-responsive \">\r\n                                    <table class=\"table table-borderless table-hover table-sm \">\r\n\r\n                                        <tbody>\r\n\r\n                                            <ng-container *ngFor=\"let movimiento of movimientos\">\r\n\r\n                                                <tr *ngIf=\"movimiento.type === 'salida'\">\r\n\r\n                                                    <td colspan=\"2\"> {{ movimiento.descripcion }}  </td>\r\n                                                    <td [ngClass]=\"{ 'text-danger':  movimiento.type == 'salida'}\">\r\n                                                        {{ movimiento.monto| divisa }}\r\n                                                    </td>\r\n                                                </tr>\r\n\r\n                                            </ng-container>\r\n\r\n                                            <tr class=\"border-top\">\r\n                                                <td colspan=\"2\"> Total  </td>\r\n                                                <td class=\"fw-bold\"> {{ salidas| divisa }} </td>\r\n                                            </tr>\r\n\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-auto p-2\">\r\n                            <div class=\"card shadow px-2\" style=\"width: 18rem;\">\r\n\r\n                                <div class=\"card-body\">\r\n                                    <h5 class=\"card-title mb-0\">Entradas</h5>\r\n                                </div>\r\n\r\n                                <div class=\"table-responsive \">\r\n                                    <table class=\"table table-borderless table-hover table-sm \">\r\n\r\n                                        <tbody>\r\n\r\n                                            <ng-container *ngFor=\"let movimiento of movimientos\">\r\n\r\n                                                <tr *ngIf=\"movimiento.type === 'entrada'\">\r\n\r\n                                                    <td colspan=\"2\"> {{ movimiento.descripcion }}  </td>\r\n                                                    <td [ngClass]=\"{ 'text-danger':  movimiento.type == 'salida'}\">\r\n                                                        {{ movimiento.monto| divisa }}\r\n                                                    </td>\r\n                                                </tr>\r\n\r\n                                            </ng-container>\r\n\r\n                                            <tr class=\"border-top\">\r\n                                                <td colspan=\"2\"> Total  </td>\r\n                                                <td class=\"fw-bold\"> {{ entradas| divisa }} </td>\r\n                                            </tr>\r\n\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-auto p-2\">\r\n                            <div class=\"card shadow px-2\" style=\"width: 18rem;\">\r\n\r\n                                <div class=\"card-body\">\r\n                                    <h5 class=\"card-title mb-0\">Departamentos</h5>\r\n                                </div>\r\n\r\n                                <div class=\"table-responsive \">\r\n                                    <table class=\"table table-borderless table-hover table-sm \">\r\n\r\n                                        <thead>\r\n                                            <th class=\"text-start\">Departamento</th>\r\n                                            <th class=\"text-center\">Cant.</th>\r\n                                            <th class=\"text-end\">Monto</th>\r\n                                        </thead>\r\n\r\n                                        <tbody>\r\n\r\n                                            <ng-container *ngFor=\"let deparment of departamento\">\r\n\r\n                                                <tr *ngIf=\"deparment.qty > 0\">\r\n\r\n                                                    <td class=\"text-start\" colspan=\"2\"> {{ deparment.name }} </td>\r\n                                                    <td class=\"text-center\">\r\n                                                        {{ deparment.qty | number }}\r\n                                                    </td>\r\n                                                    <td class=\"text-end\">\r\n                                                        <span class=\"fw-bolder\">\r\n                                                            {{ deparment.monto | divisa }}\r\n                                                        </span>\r\n                                                    </td>\r\n                                                </tr>\r\n\r\n\r\n                                            </ng-container>\r\n\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div> -->\r\n\r\n                <!-- </div> -->\r\n                <!-- ============================================================================\r\n                    IMPRIMIR \r\n                ================================================================================= -->\r\n\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    MODAL CIERRE DE CAJA\r\n========================================================================= -->","import { Component, OnInit } from '@angular/core';\r\nimport { Datos } from '../../models/empresa.model';\r\nimport { EmpresaService } from '../../services/empresa.service';\r\n\r\n// MODELS\r\nimport { Product } from '../../models/product.model';\r\n\r\n// SERVICES\r\nimport { ProductService } from '../../services/product.service';\r\n\r\n@Component({\r\n  selector: 'app-dashboard',\r\n  templateUrl: './dashboard.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class DashboardComponent implements OnInit {\r\n  \r\n  public empresa: Datos;  \r\n  public desde: number = 0;\r\n  public limite: number = 10;\r\n  \r\n\r\n  constructor(  private empresaService: EmpresaService,\r\n                private productService: ProductService) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.cargarProductosAgotados();\r\n    this.cargarProductosVencidos();\r\n    this.cargarProductosTop();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR PRODUCTOS AGOTADOS\r\n  ==================================================================== */\r\n  public agotados: Product[] = [];\r\n  public totalAgotados: number = 0;\r\n  public cargandoAgotados: boolean = true;\r\n  public sinResultadosAgotados: boolean = true;\r\n  cargarProductosAgotados(){\r\n\r\n    const endPointAgotados = `?desde=${this.desde}&limite=${1000}&tipo=agotados&valor=true`; \r\n\r\n    this.cargandoAgotados = true;\r\n    this.sinResultadosAgotados = true;\r\n    this.productService.cargarProductos(endPointAgotados)\r\n    .subscribe(({total, products}) => {\r\n            \r\n      // COMPROBAR SI EXISTEN RESULTADOS\r\n      if (products.length === 0) {\r\n        this.sinResultadosAgotados = false;\r\n        this.cargandoAgotados = false;\r\n        this.totalAgotados = products.length;\r\n        this.agotados = [];\r\n        return;                \r\n      }\r\n      // COMPROBAR SI EXISTEN RESULTADOS\r\n    \r\n      this.totalAgotados = products.length;\r\n      this.agotados = products;\r\n      this.cargandoAgotados = false;  \r\n      \r\n        \r\n    });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR PRODUCTOS AGOTADOS\r\n  ==================================================================== */\r\n  public vencidos: Product[] = [];\r\n  public totalVencidos: number = 0;\r\n  public cargandoVencidos: boolean = true;\r\n  public sinResultadosVencidos: boolean = true;\r\n  cargarProductosVencidos(){\r\n\r\n    const endPointAgotados = `?desde=${this.desde}&tipo=vencidos&valor=true`; \r\n\r\n    this.cargandoVencidos = true;\r\n    this.sinResultadosVencidos = true;\r\n    this.productService.cargarProductos(endPointAgotados)\r\n    .subscribe(({total, products}) => {\r\n            \r\n      // COMPROBAR SI EXISTEN RESULTADOS\r\n      if (products.length === 0) {\r\n        this.sinResultadosVencidos = false;\r\n        this.cargandoVencidos = false;\r\n        this.totalVencidos = products.length;\r\n        this.vencidos = [];\r\n        return;                \r\n      }\r\n      // COMPROBAR SI EXISTEN RESULTADOS\r\n    \r\n      this.totalVencidos = products.length;\r\n      this.vencidos = products;\r\n      this.cargandoVencidos = false;  \r\n      \r\n        \r\n    });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR PRODUCTOS TOP\r\n  ==================================================================== */\r\n  public top: Product[] = [];\r\n  public totalTop: number = 0;\r\n  public cargandoTop: boolean = true;\r\n  public sinResultadosTop: boolean = true;\r\n  cargarProductosTop(){\r\n\r\n    const endPointAgotados = `?desde=${this.desde}&tipo=top&valor=true`; \r\n\r\n    this.cargandoTop = true;\r\n    this.sinResultadosTop = true;\r\n    this.productService.cargarProductos(endPointAgotados)\r\n    .subscribe(({total, products}) => {\r\n            \r\n      // COMPROBAR SI EXISTEN RESULTADOS\r\n      if (products.length === 0) {\r\n        this.sinResultadosTop = false;\r\n        this.cargandoTop = false;\r\n        this.totalTop = products.length;\r\n        this.top = [];\r\n        return;                \r\n      }\r\n      // COMPROBAR SI EXISTEN RESULTADOS\r\n    \r\n      this.totalTop = products.length;\r\n      this.top = products;\r\n      this.cargandoTop = false;  \r\n      \r\n        \r\n    });\r\n\r\n  }\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Dashboard</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"ticket1-tab\"><i class=\"bi-grid\" style=\"font-size: 1rem\"></i> Tablero Principal</a>\r\n        </li>\r\n\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n<div class=\"container-fluid my-4\">\r\n\r\n    <div class=\"row\">\r\n\r\n        <div class=\"col-md-6\">\r\n\r\n            <!-- TABLE CLIENTS -->\r\n            <div class=\"shadow-lg p-3 mb-5 rounded bg-white\" style=\"max-height: 400px; height: auto;\">\r\n                <h5 class=\"\">\r\n                    <span class=\"badge rounded-pill bg-danger\">Productos Agotados</span>\r\n                </h5>\r\n                <!-- CARGANDO -->\r\n                <div *ngIf=\"cargandoAgotados\">\r\n                    <div class=\"text-center p-4\">\r\n                        <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                            <span class=\"visually-hidden\">Loading...</span>\r\n                        </div>\r\n                    </div>\r\n                    <small class=\"text-muted\">cargando...</small>\r\n                </div>\r\n                <!-- CARGANDO -->\r\n\r\n                <div *ngIf=\"!cargandoAgotados\" style=\"max-height: 100vh\">\r\n\r\n                    <div class=\"table-responsive \" class=\"overflow-auto\" style=\"max-height: 200px;\">\r\n                        <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                            <thead class=\"border-bottom \">\r\n                                <tr>\r\n                                    <th class=\"text-muted \" scope=\"col \">Codigo</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Nombre</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Estado</th>\r\n                                    <th class=\"text-muted w100 \" scope=\"col \">Acciones</th>\r\n                                </tr>\r\n                            </thead>\r\n\r\n                            <tbody>\r\n\r\n                                <tr *ngIf=\"!sinResultadosAgotados\" class=\"text-center \">\r\n                                    <th colspan=\"10\" class=\"py-4\">\r\n                                        <h4 class=\"text-muted\">No existen productos agotados</h4>\r\n                                    </th>\r\n                                </tr>\r\n\r\n\r\n                                <tr class=\"trHover\" *ngFor=\"let agotado of agotados; let i = index\">\r\n                                    <td>{{ agotado.code }}</td>\r\n                                    <td>{{ agotado.name }}</td>\r\n                                    <td>\r\n                                        <span class=\"badge rounded-pill bg-danger\">Agotado</span>\r\n                                    </td>\r\n                                    <td class=\"text-center\">\r\n                                        <button type=\"button\" [routerLink]=\"['/dashboard/producto', agotado.pid]\" class=\"btn btn-link p-1 text-primary\"><i class=\"bi bi-box-arrow-up-right\"></i></button>\r\n\r\n                                    </td>\r\n                                </tr>\r\n\r\n                            </tbody>\r\n\r\n                        </table>\r\n\r\n                    </div>\r\n\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                    <div class=\"row\">\r\n                        <div class=\"col col-md-4\">\r\n                            <small class=\"text-muted\">Total de productos agotados: ({{totalAgotados}})</small>\r\n                        </div>\r\n                    </div>\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n                </div>\r\n            </div>\r\n            <!-- TABLE CLIENTS -->\r\n\r\n        </div>\r\n\r\n        <div class=\"col-md-6\">\r\n\r\n            <!-- TABLE CLIENTS -->\r\n            <div class=\"shadow-lg p-3 mb-5 rounded bg-white\" style=\"max-height: 400px; height: auto;\">\r\n                <h5 class=\"\">\r\n                    <span class=\"badge rounded-pill bg-warning\">Productos Vencidos</span>\r\n                </h5>\r\n                <!-- CARGANDO -->\r\n                <div *ngIf=\" cargandoVencidos\">\r\n                    <div class=\"text-center p-4\">\r\n                        <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                            <span class=\"visually-hidden\">Loading...</span>\r\n                        </div>\r\n                    </div>\r\n                    <small class=\"text-muted\">cargando...</small>\r\n                </div>\r\n                <!-- CARGANDO -->\r\n\r\n                <div *ngIf=\"!cargandoVencidos\" style=\"max-height: 100vh\">\r\n\r\n                    <div class=\"table-responsive \" class=\"overflow-auto\" style=\"max-height: 200px;\">\r\n                        <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                            <thead class=\"border-bottom \">\r\n                                <tr>\r\n                                    <th class=\"text-muted \" scope=\"col \">Codigo</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Nombre</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Estado</th>\r\n                                    <th class=\"text-muted w100 \" scope=\"col \">Acciones</th>\r\n                                </tr>\r\n                            </thead>\r\n\r\n                            <tbody>\r\n\r\n                                <tr *ngIf=\"!sinResultadosVencidos\" class=\"text-center \">\r\n                                    <th colspan=\"10\" class=\"py-4\">\r\n                                        <h4 class=\"text-muted\">No existen productos vencidos</h4>\r\n                                    </th>\r\n                                </tr>\r\n\r\n\r\n                                <tr class=\"trHover\" *ngFor=\"let vencido of vencidos; let i = index\">\r\n                                    <td>{{ vencido.code }}</td>\r\n                                    <td>{{ vencido.name }}</td>\r\n                                    <td>\r\n                                        <span class=\"badge rounded-pill bg-warning\">Vencido</span>\r\n                                    </td>\r\n                                    <td class=\"text-center\">\r\n                                        <button type=\"button\" [routerLink]=\"['/dashboard/producto', vencido.pid]\" class=\"btn btn-link p-1 text-primary\"><i class=\"bi bi-box-arrow-up-right\"></i></button>\r\n\r\n                                    </td>\r\n                                </tr>\r\n\r\n                            </tbody>\r\n\r\n                        </table>\r\n\r\n                    </div>\r\n\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                    <div class=\"row\">\r\n                        <div class=\"col col-md-4\">\r\n                            <small class=\"text-muted\">Total de productos agotados: ({{ totalVencidos}})</small>\r\n                        </div>\r\n                    </div>\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n                </div>\r\n            </div>\r\n            <!-- TABLE CLIENTS -->\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <div class=\"row\">\r\n        <div class=\"col-md-6\">\r\n\r\n            <!-- TABLE CLIENTS -->\r\n            <div class=\"shadow-lg p-3 mb-5 rounded bg-white\" style=\"max-height: 400px; height: auto;\">\r\n                <h5 class=\"\">\r\n                    <span class=\"badge rounded-pill bg-success\">TOP mas vendidos</span>\r\n                </h5>\r\n                <!-- CARGANDO -->\r\n                <div *ngIf=\" cargandoTop \">\r\n                    <div class=\"text-center p-4\">\r\n                        <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                            <span class=\"visually-hidden\">Loading...</span>\r\n                        </div>\r\n                    </div>\r\n                    <small class=\"text-muted\">cargando...</small>\r\n                </div>\r\n                <!-- CARGANDO -->\r\n\r\n                <div *ngIf=\" !cargandoTop\" style=\"max-height: 100vh\">\r\n\r\n                    <div class=\"table-responsive \" class=\"overflow-auto\" style=\"max-height: 200px;\">\r\n                        <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                            <thead class=\"border-bottom \">\r\n                                <tr>\r\n                                    <th class=\"text-muted \" scope=\"col \">Codigo</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Nombre</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Cantidad</th>\r\n                                    <th class=\"text-muted w100 \" scope=\"col \">Acciones</th>\r\n                                </tr>\r\n                            </thead>\r\n\r\n                            <tbody>\r\n\r\n                                <tr *ngIf=\"!sinResultadosTop\" class=\"text-center \">\r\n                                    <th colspan=\"10\" class=\"py-4\">\r\n                                        <h4 class=\"text-muted\">No se han vendido productos</h4>\r\n                                    </th>\r\n                                </tr>\r\n\r\n\r\n                                <tr class=\"trHover\" *ngFor=\"let item of top; let i = index\">\r\n                                    <td>{{ item.code }}</td>\r\n                                    <td>{{ item.name }}</td>\r\n                                    <td>\r\n                                        <p class=\"text-center\">\r\n                                            {{ item.sold | number }}\r\n                                        </p>\r\n                                    </td>\r\n                                    <td class=\"text-center\">\r\n                                        <button type=\"button\" [routerLink]=\"['/dashboard/producto', item.pid]\" class=\"btn btn-link p-1 text-primary\"><i class=\"bi bi-box-arrow-up-right\"></i></button>\r\n\r\n                                    </td>\r\n                                </tr>\r\n\r\n                            </tbody>\r\n\r\n                        </table>\r\n\r\n                    </div>\r\n\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                    <div class=\"row\">\r\n                        <div class=\"col col-md-4\">\r\n                            <small class=\"text-muted\">Total de productos agotados: ({{ totalTop }})</small>\r\n                        </div>\r\n                    </div>\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n                </div>\r\n            </div>\r\n            <!-- TABLE CLIENTS -->\r\n\r\n        </div>\r\n    </div>\r\n\r\n\r\n</div>\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { Domicilio } from 'src/app/models/domicilios.model';\r\nimport { DomiciliosService } from 'src/app/services/domicilios.service';\r\nimport Swal from 'sweetalert2';\r\n\r\ninterface _query{\r\n  desde: number,\r\n  hasta: number,\r\n  sort: any,\r\n  estado?: string\r\n}\r\n\r\n@Component({\r\n  selector: 'app-domicilios',\r\n  templateUrl: './domicilios.component.html',\r\n  styleUrls: ['./domicilios.component.css']\r\n})\r\nexport class DomiciliosComponent implements OnInit {\r\n\r\n  constructor(  private domiciliosService: DomiciliosService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.loadDomicilios();\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SEARCH ESTADO\r\n  ==================================================================== */\r\n  public total: number = 0;\r\n  public pendientes: number = 0;\r\n  public enviandos: number = 0;\r\n  public entregados: number = 0;\r\n  searchEstado(estado: string){\r\n\r\n    if (estado === 'total') {\r\n      delete this.query.estado;\r\n    }else{\r\n      this.query.estado = estado;\r\n    }\r\n    \r\n    this.loadDomicilios();\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CAMBIAR PAGINA\r\n  ==================================================================== */\r\n  @ViewChild('mostrar') mostrar!: ElementRef;\r\n  cambiarPagina (valor: number){\r\n    \r\n    this.query.desde += valor;\r\n\r\n    if (this.query.desde < 0) {\r\n      this.query.desde = 0;\r\n    }\r\n    \r\n    this.loadDomicilios();\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   CHANGE LIMITE\r\n  ==================================================================== */\r\n  limiteChange( cantidad: any ){  \r\n\r\n    this.query.hasta = Number(cantidad);    \r\n    this.loadDomicilios();\r\n\r\n  }\r\n\r\n\r\n  /** ================================================================\r\n   *   LOAD DOMICILIOS\r\n  ==================================================================== */\r\n  public domicilios: Domicilio[] = [];\r\n  public domiciliosTemp: Domicilio[] = [];\r\n  public query: _query = {\r\n    desde: 0,\r\n    hasta: 50,\r\n    sort: {}\r\n  }\r\n\r\n  loadDomicilios(){\r\n\r\n    this.domiciliosService.loadDomicilios(this.query)\r\n        .subscribe( ({domicilios, total, pendientes, enviandos, entregados}) => {\r\n\r\n          this.domicilios = domicilios;\r\n          this.domiciliosTemp = domicilios;\r\n          this.total = total;\r\n          this.pendientes = pendientes;\r\n          this.enviandos = enviandos;\r\n          this.entregados = entregados;          \r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SELECT DOMICILIOS\r\n  ==================================================================== */\r\n  public domSelect: Domicilio;\r\n  public amountS: number = 0;\r\n  selectDom(domicilio: Domicilio){\r\n\r\n    this.amountS = 0;\r\n    this.domSelect = domicilio;\r\n\r\n    for (const dom of domicilio.carrito) {\r\n      this.amountS += (dom.monto * dom.qty);\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CAMBIAR ESTADO DEL PEDIDO\r\n  ==================================================================== */\r\n  changeEstado(estado: string){\r\n\r\n    this.domiciliosService.updateDomicilios({estado}, this.domSelect.doid!)\r\n        .subscribe( ({domicilio}) => {\r\n\r\n          this.domSelect.estado = domicilio.estado;\r\n          this.domicilios.map( domi => {\r\n            if (domi.doid === domicilio.doid) {\r\n              domi.estado = domicilio.estado;\r\n            }\r\n          })\r\n          Swal.fire('Estupendo', 'Se ha cambiado el estado del domicilio exitosamente!', 'success');\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Domicilios</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"ticket1-tab\"><i class=\"bi-gear\" style=\"font-size: 1rem\"></i> Domicilios</a>\r\n        </li>\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<div class=\"container-fluid my-4\">\r\n\r\n    <!-- TABLA DE DOMICILIOS -->\r\n    <div class=\"card\">\r\n        <div class=\"card-body\">\r\n\r\n            <div class=\"row m-t-40\">\r\n                <!-- TOTAL -->\r\n                <div class=\"col-md-6 col-lg-3 col-xlg-3 cursor\" (click)=\"searchEstado('total')\">\r\n                    <div class=\"card\">\r\n                        <div class=\"box bg-primary text-center\">\r\n                            <h1 class=\"font-light text-white\"> {{ total }} </h1>\r\n                            <h6 class=\"text-white\">Total</h6>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <!-- PENDIENTES -->\r\n                <div class=\"col-md-6 col-lg-3 col-xlg-3 cursor\" (click)=\"searchEstado('Pendiente')\">\r\n                    <div class=\"card\">\r\n                        <div class=\"box bg-warning text-center\">\r\n                            <h1 class=\"font-light text-white\"> {{ pendientes }} </h1>\r\n                            <h6 class=\"text-white\">Pendientes</h6>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <!-- ENVIANDO -->\r\n                <div class=\"col-md-6 col-lg-3 col-xlg-3 cursor\" (click)=\"searchEstado('Enviando')\">\r\n                    <div class=\"card\">\r\n                        <div class=\"box bg-info text-center\">\r\n                            <h1 class=\"font-light text-white\"> {{ enviandos }} </h1>\r\n                            <h6 class=\"text-white\">Enviando</h6>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <!-- ENTREGADOS -->\r\n                <div class=\"col-md-6 col-lg-3 col-xlg-3 cursor\" (click)=\"searchEstado('Entregado')\">\r\n                    <div class=\"card\">\r\n                        <div class=\"box bg-success text-center\">\r\n                            <h1 class=\"font-light text-white\"> {{ entregados }} </h1>\r\n                            <h6 class=\"text-white\">Entregados</h6>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Column -->\r\n            </div>\r\n\r\n            <div class=\"d-flex justify-content-between flex-wrap mt-1\">\r\n\r\n                <div class=\"my-2\">\r\n\r\n                    <label for=\"mostrar\" class=\"me-2\">Mostrar: </label>\r\n                    <select name=\"\" id=\"\" [value]=\"query.hasta\" #mostrar (change)=\"limiteChange(mostrar.value)\">\r\n                        <option value=\"10\">10</option>\r\n                        <option value=\"25\">25</option>\r\n                        <option value=\"50\">50</option>\r\n                        <option value=\"100\">100</option>\r\n                        <option value=\"250\">250</option>\r\n                        <option value=\"500\">500</option>\r\n                    </select>\r\n\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"table-responsive \">\r\n                <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                    <thead class=\"border-bottom \">\r\n                        <tr>\r\n                            <th class=\"text-muted \" scope=\"col\">Cliente</th>\r\n                            <th class=\"text-muted \" scope=\"col\">Telefono</th>\r\n                            <th class=\"text-muted \" scope=\"col\">Estado</th>\r\n                            <th class=\"text-muted \" scope=\"col\">Fecha</th>\r\n                            <th class=\"text-muted \" scope=\"col\">Pago</th>\r\n                            <th class=\"text-muted \" scope=\"col\"></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n\r\n                        <tr *ngIf=\"domicilios.length === 0\" class=\"text-center \">\r\n                            <th colspan=\"13\" class=\"py-4\">\r\n                                <h4 class=\"text-muted\"> No hay registros de domicilios...</h4>\r\n                            </th>\r\n                        </tr>\r\n\r\n                        <tr class=\"trHover\" *ngFor=\"let dom of domicilios; let i = index\">\r\n                            <th scope=\"row \">{{ dom.nombres }}</th>\r\n                            <td>{{ dom.telefono}}</td>\r\n                            <td>{{ dom.estado }}</td>\r\n                            <td>{{ dom.fecha | date: 'short' }}</td>\r\n                            <td>\r\n                                <span class=\"badge bg-success\" *ngIf=\"dom.pago\">Pagado</span>\r\n                                <span class=\"badge bg-dark\" *ngIf=\"!dom.pago\">Sin pago</span>\r\n                            </td>\r\n                            <td>\r\n                                <button type=\"button\" (click)=\"selectDom(dom)\" class=\"btn btn-link p-1 text-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#verDom\">\r\n                                    <i class=\"bi bi-box-arrow-up-right\"></i>\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n\r\n                    </tbody>\r\n                    <tfoot>\r\n                        <tr>\r\n\r\n                            <td colspan=\"8\">\r\n\r\n                                <div class=\"btn-group\" role=\"group\" aria-label=\"First group\">\r\n                                    <button [disabled]=\"query.desde === 0\" (click)=\"cambiarPagina(query.hasta * -1)\" type=\"button\" class=\"btn btn-dark text-white\">Atras</button>\r\n                                    <button [disabled]=\"( query.desde + query.hasta ) >= total\" (click)=\"cambiarPagina(query.hasta)\" type=\"button\" class=\"btn btn-dark text-white\">Siguiente</button>\r\n                                </div>\r\n\r\n                            </td>\r\n                        </tr>\r\n                    </tfoot>\r\n\r\n                </table>\r\n\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    <!-- TABLA DE DOMICILIOS -->\r\n\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    ACTUALIZAR MESA \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"verDom\" tabindex=\"-1\" aria-labelledby=\"verDomModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-lg modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"verDomModal\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Domicilio</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n                <ng-container *ngIf=\"domSelect\">\r\n\r\n                    <ng-container>\r\n                        <agm-map [latitude]=\"domSelect.ubicacion.lat\" [longitude]=\"domSelect.ubicacion.lng\" [zoom]=\"17\">\r\n                            <!-- MARKER OR POINT -->\r\n                            <agm-marker [latitude]=\"domSelect.ubicacion.lat\" [longitude]=\"domSelect.ubicacion.lng\"> </agm-marker>\r\n                        </agm-map>\r\n                    </ng-container>\r\n\r\n                    <div class=\"card\">\r\n                        <div class=\"card-body\">\r\n                            <div class=\"d-flex flex-wrap justify-content-between align-item-center \">\r\n\r\n                                <div>\r\n                                    <p class=\"mb-0 fs-3\"> {{ domSelect.estado }} </p>\r\n                                </div>\r\n                                <div>\r\n                                    <select (change)=\"changeEstado(sEst.value)\" #sEst class=\"form-control custom-select\" data-placeholder=\"Choose a Category\" tabindex=\"1\" [value]=\"domSelect.estado\">\r\n                                        <option value=\"Pendiente\">Pendiente</option>\r\n                                        <option value=\"Procesando\">Procesando</option>\r\n                                        <option value=\"Enviando\">Enviando</option>\r\n                                        <option value=\"Entregado\">Entregado</option>\r\n                                    </select>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"card card-body printableArea\">\r\n                        <!-- <h3><b>PEDIDO</b> <span class=\"pull-right\"># {{pedido.pedido}} </span></h3> -->\r\n                        <div class=\"row\">\r\n                            <div class=\"col-md-12\">\r\n                                <div class=\"pull-right text-right\">\r\n                                    <address>\r\n                                        <h3>Cliente o Razón Social,</h3>\r\n                                        <h4 class=\"font-bold\"> {{ domSelect.nombres }} </h4>\r\n                                        <p class=\"m-t-30\">\r\n                                            <b>Fecha :</b> <i class=\"fa fa-calendar\"></i> {{ domSelect.fecha | date: 'short' }}\r\n                                        </p>\r\n                                    </address>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-md-12\">\r\n                                <div class=\"table-responsive m-t-40\" style=\"clear: both;\">\r\n                                    <table class=\"table table-hover\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th class=\"text-center\">#</th>\r\n                                                <th>Producto</th>\r\n                                                <th class=\"text-right\">Cantidad</th>\r\n                                                <th class=\"text-right\">Precio</th>\r\n                                                <th class=\"text-right\">Monto</th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                            <tr *ngFor=\"let item of domSelect.carrito; let i = index\">\r\n                                                <td class=\"text-center\"> {{ i + 1 }} </td>\r\n                                                <td> {{ item.product.name }} </td>\r\n                                                <td class=\"text-right\"> {{ item.qty }} </td>\r\n                                                <td class=\"text-right\"> {{ item.monto | currency: 'COP' }} </td>\r\n                                                <td class=\"text-right\"> {{ item.monto * item.qty | currency: 'COP' }} </td>\r\n                                            </tr>\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-md-12\">\r\n                                <div class=\"pull-right m-t-30 text-right\">\r\n                                    <p>Sub-Total: {{ amountS | currency:'COP' }} </p>\r\n                                    <hr>\r\n                                    <h3><b>Total :</b> {{ amountS | currency:'COP' }} </h3>\r\n                                </div>\r\n                                <div class=\"clearfix\"></div>\r\n                                <hr>\r\n                                <!-- <div class=\"text-right\">\r\n                                    <button class=\"btn btn-danger\" type=\"button\" data-toggle=\"modal\" data-target=\"#facturar\"> \r\n                                        <span *ngIf=\"!pedido.invoice\">Cobrar</span>\r\n                                        <span *ngIf=\"pedido.invoice\">Factura</span>                             \r\n                                    </button>\r\n                                </div> -->\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </ng-container>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\r\n\r\n// SERVICES\r\nimport { InvoiceService } from '../../../services/invoice.service';\r\nimport { MesasService } from '../../../services/mesas.service';\r\n\r\n// INTERFACES\r\nimport { LoadInvoice } from '../../../interfaces/invoice.interface';\r\n\r\n// MODELS\r\nimport { Mesa } from '../../../models/mesas.model';\r\nimport { Client } from 'src/app/models/client.model';\r\nimport { SearchService } from 'src/app/services/search.service';\r\nimport { log } from 'console';\r\n\r\n// EXCEL\r\nimport * as XLSX from 'xlsx';\r\nimport { ImpuestosService } from 'src/app/services/impuestos.service';\r\nimport { Impuestos } from 'src/app/models/impuestos.model';\r\nimport { EmpresaService } from 'src/app/services/empresa.service';\r\nimport { Datos } from 'src/app/models/empresa.model';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-credito',\r\n  templateUrl: './credito.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class CreditoComponent implements OnInit {\r\n\r\n  // FACTURAS\r\n  public totalFacturas: number = 0;\r\n  public facturas: LoadInvoice[] = [];\r\n  public facturasTemp: LoadInvoice[] = [];\r\n  // FACTURAS\r\n\r\n  // MESAS\r\n  public listaMesas: Mesa[] = [];\r\n  public listaMesasTemp: Mesa[] = [];\r\n  public totalMesas: number = 0;\r\n  // MESAS\r\n  \r\n  public cargando: boolean = true;\r\n  public sinResultados: boolean = true;\r\n  public resultado: number = 0;\r\n  public desde: number = 0;\r\n\r\n  public btnAtras: string = '';\r\n  public btnAdelante: string = '';\r\n\r\n  constructor(  private invoiceService: InvoiceService,\r\n                private mesasService: MesasService,\r\n                private impuestosService: ImpuestosService,\r\n                private empresaService: EmpresaService,\r\n                private searchService: SearchService,) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // CARGAR DATOS\r\n    this.cargarDatos();\r\n\r\n    // CARGAR DATOS\r\n    this.cargarImpuestos();\r\n\r\n    // CARGAR FACTURAS\r\n    this.cargarFacturas();\r\n    \r\n    // CARGAR MESAS\r\n    this.cargarMesas();\r\n\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR DATOS DE LA EMPRESA\r\n  ==================================================================== */\r\n  public empresa: Datos;\r\n  cargarDatos(){\r\n\r\n    this.empresaService.getDatos()\r\n        .subscribe( datos => {\r\n          this.empresa = datos;   \r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR IMPUESTOS\r\n  ==================================================================== */\r\n  public impuestos: Impuestos[] = [];\r\n  cargarImpuestos(){\r\n\r\n    this.impuestosService.loadImpuestos()\r\n        .subscribe( ({taxes}) => {\r\n\r\n          this.impuestos = taxes;\r\n\r\n          this.impuestos.map( impuesto => {\r\n            impuesto.total = 0;\r\n          });\r\n\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CARGAR FACTURAS\r\n  ==================================================================== */\r\n  public totalAmount: number = 0;\r\n  public totalAbonado: number = 0;\r\n  public totalIva: number = 0;\r\n  public totalCost: number = 0;\r\n  cargarFacturas(){\r\n\r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n\r\n    this.totalAbonado = 0;\r\n    this.totalAmount = 0;\r\n\r\n    this.impuestos.map( impuesto => {\r\n      impuesto.total = 0;\r\n    });\r\n\r\n    this.invoiceService.loadInvoicesCredito(this.desde)\r\n        .subscribe(({total, invoices}) => {\r\n\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (invoices.length === 0) {\r\n            this.sinResultados = false;\r\n            this.cargando = false;\r\n            this.facturas = [];\r\n            this.resultado = 0;\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n\r\n          this.totalFacturas = total;\r\n          this.facturas = invoices;\r\n          this.facturasTemp = invoices;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n\r\n          this.totalAbonado = 0;\r\n          this.totalAmount = 0;\r\n          this.totalIva = 0;\r\n          this.totalCost = 0;\r\n          \r\n          for (const factura of this.facturas) {\r\n            \r\n            this.totalAmount += factura.amount;\r\n            this.totalCost += factura.cost;\r\n            this.totalIva += factura.iva;\r\n\r\n            for (const pago of factura.paymentsCredit) {              \r\n              this.totalAbonado += pago.amount;\r\n            }\r\n\r\n            if( this.empresa.impuesto ){\r\n\r\n              for (const product of factura.products) {\r\n\r\n                if (product.mayor) {                  \r\n                  factura.mayor = true;\r\n                }\r\n  \r\n                this.impuestos.map( (impuesto) => {\r\n    \r\n                  if (impuesto.taxid === product.product.taxid) {\r\n                    \r\n                    impuesto.total += Math.round(((product.qty * product.price) * impuesto.valor)/100);\r\n  \r\n                  }\r\n    \r\n                });\r\n  \r\n              }\r\n  \r\n            }\r\n\r\n          }\r\n\r\n          // BOTONOS DE ADELANTE Y ATRAS          \r\n          if (this.desde === 0 && this.totalFacturas > 10) {\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = '';\r\n          }else if(this.desde === 0 && this.totalFacturas < 11){\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n          }else if(this.desde > this.facturas.length){\r\n            this.btnAtras = '';\r\n            this.btnAdelante = 'disabled';\r\n          }else if((this.desde + 10) >= this.totalFacturas){\r\n            this.btnAtras = '';\r\n            this.btnAdelante = 'disabled';\r\n          }else{\r\n            this.btnAtras = '';\r\n            this.btnAdelante = '';\r\n          }   \r\n          // BOTONOS DE ADELANTE Y ATRAS  \r\n          \r\n\r\n        });\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR MESAS\r\n  ==================================================================== */\r\n  cargarMesas(){\r\n\r\n    this.mesasService.loadMesas(this.desde)\r\n        .subscribe(({ total, mesas }) => {\r\n\r\n          this.listaMesas = mesas;\r\n          this.listaMesasTemp = mesas;\r\n          this.totalMesas = total;\r\n\r\n        })\r\n  }\r\n\r\n\r\n  /** ================================================================\r\n   *   CAMBIAR PAGINA\r\n  ==================================================================== */\r\n  cambiarPagina (valor: number){\r\n    this.desde += valor;\r\n\r\n    if (this.desde < 0) {\r\n      this.desde = 0;\r\n    }else if( this.desde > this.totalFacturas ){\r\n      this.desde -= valor;\r\n    }\r\n\r\n    this.cargarFacturas();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   FILTRAR POR RUTA\r\n  ==================================================================== */\r\n  public sumarMonto: number = 0;\r\n  filtroRuta (ruta: string){\r\n    \r\n    this.sumarMonto = 0;\r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n\r\n    this.facturas = this.facturasTemp;\r\n\r\n    const filtro1 = this.facturas.filter(function (el) {\r\n      return el.mesa.name == ruta;\r\n    });\r\n\r\n    this.cargando = false;\r\n    this.sinResultados = true;\r\n\r\n    if (filtro1.length === 0) {\r\n      this.sinResultados = false;\r\n      this.sumarMonto = 0;\r\n      this.facturas = filtro1;\r\n    }else{\r\n\r\n      this.facturas = filtro1;\r\n\r\n      for (let i = 0; i < filtro1.length; i++) {\r\n\r\n        if (filtro1[i].credito) {          \r\n          this.sumarMonto += filtro1[i].amount;  \r\n        }\r\n\r\n      }\r\n\r\n    }\r\n\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR CLIENTE\r\n  ==================================================================== */\r\n  public sinResultadosClientes: boolean = false;\r\n  public cargandoCliente: boolean = true;\r\n  public listaClientes: Client[] = [];\r\n  public listaClientesTemp: Client[] = [];\r\n  public totalClientes: number = 0;\r\n  @ViewChild('searchClient') searchClient: ElementRef;\r\n  buscarCliente(termino: string){\r\n\r\n    this.cargandoCliente = false;\r\n    this.sinResultadosClientes = false;\r\n\r\n    if (termino.length === 0) {\r\n      this.listaClientes = this.listaClientesTemp;\r\n      this.sinResultadosClientes = true;\r\n      this.cargandoCliente = true;\r\n      return;\r\n    }else{\r\n    \r\n      this.searchService.search('clients', termino)\r\n          .subscribe(({total, resultados}) => {   \r\n            \r\n          this.cargandoCliente = false;\r\n          \r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (resultados.length === 0) {\r\n            this.listaClientes = [];\r\n            this.totalClientes = 0;\r\n            this.sinResultadosClientes = true;\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          \r\n          this.listaClientes = resultados;\r\n          this.totalClientes = total;\r\n\r\n        });\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR FACTURA SEGUN EL CLIENTE\r\n  ==================================================================== */\r\n  searchInvoice(client: string){\r\n\r\n    this.listaClientes = [];\r\n    this.listaClientesTemp = [];\r\n    this.searchClient.nativeElement.value = '';\r\n\r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n\r\n    this.totalAbonado = 0;\r\n    this.totalAmount = 0;\r\n\r\n    this.impuestos.map( impuesto => {\r\n      impuesto.total = 0;\r\n    });\r\n\r\n    this.invoiceService.loadInvoiceCreditClient(client, true)\r\n        .subscribe( (invoices) => {\r\n\r\n          console.log(invoices);\r\n\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (invoices.length === 0) {\r\n            this.sinResultados = false;\r\n            this.cargando = false;\r\n            this.facturas = [];\r\n            this.resultado = 0;\r\n            return;                \r\n          }\r\n          \r\n          this.facturas = invoices;\r\n          this.totalFacturas = invoices.length;\r\n          this.cargando = false;\r\n\r\n          this.totalAbonado = 0;\r\n          this.totalAmount = 0;\r\n          \r\n          for (const factura of this.facturas) {\r\n            \r\n            this.totalAmount += factura.amount;\r\n\r\n            for (const pago of factura.paymentsCredit) {              \r\n              this.totalAbonado += pago.amount;\r\n            }\r\n\r\n            if( this.empresa.impuesto ){\r\n\r\n              for (const product of factura.products) {\r\n\r\n                if (product.mayor) {                  \r\n                  factura.mayor = true;\r\n                }\r\n  \r\n                this.impuestos.map( (impuesto) => {\r\n    \r\n                  if (impuesto.taxid === product.product.taxid) {\r\n                    \r\n                    impuesto.total += Math.round(((product.qty * product.price) * impuesto.valor)/100);\r\n  \r\n                  }\r\n    \r\n                });\r\n  \r\n              }\r\n  \r\n            }\r\n\r\n          }\r\n          \r\n    });\r\n    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR FACTURAS VENCIDAS\r\n  ==================================================================== */\r\n  facturasVencidas(){\r\n\r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n\r\n    const hoy = new Date();\r\n\r\n    this.totalAbonado = 0;\r\n    this.totalAmount = 0;\r\n\r\n    this.impuestos.map( impuesto => {\r\n      impuesto.total = 0;\r\n    });\r\n\r\n    this.invoiceService.loadInvoicesVencidas(hoy)\r\n        .subscribe( ({invoices}) => {          \r\n\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (invoices.length === 0) {\r\n            this.sinResultados = false;\r\n            this.cargando = false;\r\n            this.facturas = [];\r\n            this.resultado = 0;\r\n            return;                \r\n          }\r\n          \r\n          this.facturas = invoices;\r\n          this.totalFacturas = invoices.length;\r\n          this.cargando = false;\r\n\r\n          this.totalAbonado = 0;\r\n          this.totalAmount = 0;\r\n          \r\n          for (const factura of this.facturas) {\r\n            \r\n            this.totalAmount += factura.amount;\r\n\r\n            for (const pago of factura.payments) {              \r\n              this.totalAbonado += pago.amount;\r\n            }\r\n\r\n            if( this.empresa.impuesto ){\r\n\r\n              for (const product of factura.products) {\r\n\r\n                if (product.mayor) {                  \r\n                  factura.mayor = true;\r\n                }\r\n  \r\n                this.impuestos.map( (impuesto) => {\r\n    \r\n                  if (impuesto.taxid === product.product.taxid) {\r\n                    \r\n                    impuesto.total += Math.round(((product.qty * product.price) * impuesto.valor)/100);\r\n  \r\n                  }\r\n    \r\n                });\r\n  \r\n              }\r\n  \r\n            }\r\n\r\n          }\r\n          \r\n    });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR FACTURAS A CREDITOS POR VENDEDORES MESAS\r\n  ==================================================================== */\r\n  buscarVendedores(mesa:string){\r\n\r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n\r\n    this.totalAbonado = 0;\r\n    this.totalAmount = 0;\r\n\r\n    this.impuestos.map( impuesto => {\r\n      impuesto.total = 0;\r\n    });\r\n\r\n    this.invoiceService.loadInvoiceCreditCajeroMesa(mesa)\r\n        .subscribe( ({ total, invoices }) => {\r\n\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (invoices.length === 0) {\r\n            this.sinResultados = false;\r\n            this.cargando = false;\r\n            this.facturas = [];\r\n            this.resultado = 0;\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n\r\n          this.totalFacturas = total;\r\n          this.facturas = invoices;\r\n          this.facturasTemp = invoices;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n\r\n          this.totalAbonado = 0;\r\n          this.totalAmount = 0;\r\n          this.totalIva = 0;\r\n          this.totalCost = 0;\r\n          \r\n          for (const factura of this.facturas) {\r\n            \r\n            this.totalAmount += factura.amount;\r\n            this.totalIva += factura.amount;\r\n            this.totalCost += factura.amount;\r\n\r\n            for (const pago of factura.payments) {              \r\n              this.totalAbonado += pago.amount;\r\n            }\r\n\r\n            if( this.empresa.impuesto ){\r\n\r\n              for (const product of factura.products) {\r\n\r\n                if (product.mayor) {                  \r\n                  factura.mayor = true;\r\n                }\r\n  \r\n                this.impuestos.map( (impuesto) => {\r\n    \r\n                  if (impuesto.taxid === product.product.taxid) {\r\n                    \r\n                    impuesto.total += Math.round(((product.qty * product.price) * impuesto.valor)/100);\r\n  \r\n                  }\r\n    \r\n                });\r\n  \r\n              }\r\n  \r\n            }\r\n\r\n          }\r\n\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR FACTURAS A CREDITOS POR VENDEDORES MESAS\r\n  ==================================================================== */\r\n  buscar(inicial:Date, final: Date, cajeros:string, estado:boolean, credito:boolean){\r\n    \r\n    this.sinResultados = true;\r\n    this.totalAbonado = 0;\r\n    this.totalAmount = 0;\r\n    this.totalIva = 0;\r\n    this.totalCost = 0;\r\n\r\n    this.impuestos.map( impuesto => {\r\n      impuesto.total = 0;\r\n    });\r\n    \r\n    if (inicial === null && final === null) {\r\n      this.facturas = this.facturasTemp;\r\n      this.resultado = 0;\r\n      return;\r\n    }else{\r\n\r\n      if (!inicial) {\r\n        this.facturas = this.facturasTemp;\r\n        this.resultado = 0;\r\n        return;\r\n      }\r\n\r\n      // SET HOURS      \r\n      inicial = new Date(inicial);      \r\n      const initial = new Date(inicial.getTime() + 1000 * 60 * 60 * 5);\r\n\r\n      final = new Date(final);\r\n      const end = new Date(final.getTime() + 1000 * 60 * 60 * 5);      \r\n      // SET HOURS \r\n               \r\n      this.sinResultados = true;\r\n      this.invoiceService.loadInvoicesDate(initial, end, cajeros, estado, credito)\r\n          .subscribe(({total, invoices, montos, costos}) => {\r\n\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            if (invoices.length === 0) {\r\n              this.sinResultados = false;\r\n              this.facturas = [];\r\n              this.resultado = 0;\r\n              return;                \r\n            }\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            this.facturas = invoices; \r\n            this.resultado = invoices.length;\r\n\r\n            for (const factura of this.facturas) {\r\n            \r\n              this.totalAmount += factura.amount;\r\n              this.totalIva += factura.amount;\r\n              this.totalCost += factura.amount;\r\n  \r\n              for (const pago of factura.payments) {              \r\n                this.totalAbonado += pago.amount;\r\n              }\r\n\r\n              if( this.empresa.impuesto ){\r\n\r\n                for (const product of factura.products) {\r\n\r\n                  if (product.mayor) {                  \r\n                    factura.mayor = true;\r\n                  }\r\n    \r\n                  this.impuestos.map( (impuesto) => {\r\n      \r\n                    if (impuesto.taxid === product.product.taxid) {\r\n                      \r\n                      impuesto.total += Math.round(((product.qty * product.price) * impuesto.valor)/100);\r\n    \r\n                    }\r\n      \r\n                  });\r\n    \r\n                }\r\n    \r\n              }\r\n  \r\n            }\r\n            \r\n\r\n          });\r\n          \r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   EXPORTAR EXCEL\r\n  ==================================================================== */\r\n  exportar(){\r\n\r\n    let invoices = [];\r\n\r\n    for (const invoi of this.facturas) {\r\n\r\n      let cliente = `${invoi.client?.name || 'Ocasional'} - ${invoi.client?.cedula || '0000000'}`;\r\n      let usuario = `${invoi.user.name}`;\r\n      \r\n      let { invoice, amount, cost, base, type, iva, fecha } = invoi;\r\n\r\n      invoices.push({\r\n        invoice, \r\n        cliente,\r\n        type, \r\n        cost,\r\n        base, \r\n        iva, \r\n        amount, \r\n        fecha,\r\n        usuario\r\n      })\r\n\r\n    }\r\n\r\n    let datos = [\r\n      {\r\n        total: this.totalAmount + this.totalIva,\r\n        ganancias: this.totalAmount - this.totalCost,\r\n        iva: this.totalIva\r\n      }\r\n    ]\r\n\r\n    invoices = invoices.concat(datos)\r\n\r\n    /* generate a worksheet */\r\n    var ws = XLSX.utils.json_to_sheet(invoices);\r\n\r\n    /* add to workbook */\r\n    var wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, ws, \"Facturas\");\r\n\r\n    /* title */\r\n    let title = 'Invoices.xls';\r\n\r\n    /* write workbook and force a download */\r\n    XLSX.writeFile(wb, title);\r\n\r\n\r\n  }\r\n\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","<div class=\"container-fluid\">\r\n\r\n    <!-- TITLE - SUBTITLE -->\r\n    <div>\r\n        <h5 class=\"text-dark\">FACTURAS DE VENTAS A CREDITO</h5>\r\n        <p>Lista de todas las facturas de ventas a credito.</p>\r\n    </div>\r\n    <!-- TITLE - SUBTITLE -->\r\n\r\n    <div class=\"col-12\">\r\n\r\n        <div class=\"d-flex flex-wrap gap-2\">\r\n\r\n            <div class=\"col-xl-3 col-md-3 mb-4\">\r\n                <!-- Dashboard info widget 1-->\r\n                <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-primary h-100 bg-white\">\r\n                    <div class=\"card-body\">\r\n                        <div class=\"d-flex align-items-center flex-wrap\">\r\n                            <div class=\"flex-grow-1\">\r\n                                <div class=\"small font-weight-bold text-primary mb-1\">Monto Total Facturas</div>\r\n                                <div class=\"h5\">({{totalAmount | divisa}})</div>\r\n                                <div class=\"text-xs font-weight-bold text-success d-inline-flex align-items-center\">\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-trending-up mr-1\"><polyline points=\"23 6 13.5 15.5 8.5 10.5 1 18\"></polyline><polyline points=\"17 6 23 6 23 12\"></polyline></svg>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"ms-2\">\r\n                                <i class=\"bi bi-receipt text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"col-xl-3 col-md-3 mb-4\">\r\n                <!-- Dashboard info widget 1-->\r\n                <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-success h-100 bg-white\">\r\n                    <div class=\"card-body\">\r\n                        <div class=\"d-flex align-items-center flex-wrap\">\r\n                            <div class=\"flex-grow-1\">\r\n                                <div class=\"small font-weight-bold text-success mb-1\">Abonado</div>\r\n                                <div class=\"h5\"> {{ totalAbonado | divisa }} </div>\r\n                                <div class=\"text-xs font-weight-bold text-success d-inline-flex align-items-center\">\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-trending-up mr-1\"><polyline points=\"23 6 13.5 15.5 8.5 10.5 1 18\"></polyline><polyline points=\"17 6 23 6 23 12\"></polyline></svg>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"ms-2\">\r\n                                <i class=\"bi bi-cash text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"col-xl-3 col-md-3 mb-4\">\r\n                <!-- Dashboard info widget 1-->\r\n                <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-warning h-100 bg-white\">\r\n                    <div class=\"card-body\">\r\n                        <div class=\"d-flex align-items-center flex-wrap\">\r\n                            <div class=\"flex-grow-1\">\r\n                                <div class=\"small font-weight-bold text-warning mb-1\">Pendiente por cobrar</div>\r\n                                <div class=\"h5\"> {{ totalAmount - totalAbonado | divisa }} </div>\r\n                                <div class=\"text-xs font-weight-bold text-warning d-inline-flex align-items-center\">\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-trending-up mr-1\"><polyline points=\"23 6 13.5 15.5 8.5 10.5 1 18\"></polyline><polyline points=\"17 6 23 6 23 12\"></polyline></svg>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"ms-2\">\r\n                                <i class=\"bi bi-cash text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <ng-container *ngIf=\"empresa\">\r\n                <div class=\"col-xl-3 col-md-3 mb-4\" *ngFor=\"let impuesto of impuestos\">\r\n                    <!-- Dashboard info widget 1-->\r\n                    <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-info h-100 bg-white\">\r\n                        <div class=\"card-body\">\r\n                            <div class=\"d-flex align-items-center flex-wrap\">\r\n                                <div class=\"flex-grow-1\">\r\n                                    <div class=\"small font-weight-bold text-info mb-1\"> {{ impuesto.name }} </div>\r\n                                    <div class=\"h5\"> ({{ impuesto.total | divisa}}) </div>\r\n                                </div>\r\n                                <div class=\"ms-2\">\r\n                                    <i class=\"bi bi-cash text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </ng-container>\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <div class=\"row\">\r\n\r\n        <div class=\"col-md-3\">\r\n            <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n                <!-- BUSCADOR DE CLIENTES  -->\r\n                <div class=\"mb-3\">\r\n                    <h4 class=\"text-muted\">Buscar Cliente</h4>\r\n                    <div>\r\n                        <input type=\"text\" class=\"form-control\" placeholder=\"buscar cliente\" (keyup)=\"buscarCliente(searchClient.value)\" #searchClient>\r\n                    </div>\r\n\r\n                    <div *ngIf=\"listaClientes.length > 0\" class=\"bg-white py-3 px-2 shadow\" style=\"position: absolute; z-index: 1020;\">\r\n\r\n                        <div *ngIf=\"cargandoCliente\" class=\"text-center py-3\">\r\n                            <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                                <span class=\"visually-hidden\">Loading...</span>\r\n                            </div>\r\n                            <div>\r\n                                <small class=\"text-muted\">Cargando...</small>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <ul *ngIf=\"!cargandoCliente\" class=\"list-group list-group-flush overflow-auto\" style=\"max-height: 200px; min-width: 250px;\">\r\n\r\n                            <li class=\"list-group-item\">\r\n                                <h6>Resultados: ({{ listaClientes.length }})</h6>\r\n                            </li>\r\n\r\n                            <li class=\"list-group-item\" *ngFor=\"let item of listaClientes\">\r\n                                <div class=\"d-flex \">\r\n                                    <div class=\"align-self-center\">\r\n                                        <span class=\"text-capitalize fw-bold\"> {{ item.name }} </span><br>\r\n                                        <small> C.C: {{ item.cedula }} </small>\r\n                                    </div>\r\n\r\n                                    <div class=\"ms-auto\">\r\n                                        <button class=\"btn btn-link p-1 text-success float-end\" (click)=\"searchInvoice(item.cid)\"> <i class=\"bi-arrow-90deg-right\"></i></button>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </li>\r\n                        </ul>\r\n\r\n                    </div>\r\n                </div>\r\n                <!-- BUSCADOR DE CLIENTES  -->\r\n\r\n                <!-- BUSCADOR DE VENDEDOR MESAS  -->\r\n\r\n                <div class=\"mb-3\">\r\n                    <h4 class=\"text-muted\">Vendedores</h4>\r\n\r\n                    <div class=\"mb-2\">\r\n                        <select class=\"form-select\" aria-label=\"Default select example\" #cajeros>\r\n                            <option value=\"none\" selected>Todos</option>\r\n                            <option [value]=\"vendedor.mid\" *ngFor=\"let vendedor of listaMesas\">{{vendedor.mesero.name}}</option>\r\n                         </select>\r\n                    </div>\r\n\r\n                    <button (click)=\"buscarVendedores(cajeros.value)\" type=\"button\" name=\"\" id=\"\" class=\"btn btn-primary\"> Buscar facturas</button>\r\n\r\n                </div>\r\n\r\n                <!-- BUSCADOR DE VENDEDOR MESAS  -->\r\n                <!-- BUSCADOR POR FECHAS  -->\r\n\r\n                <div class=\"\">\r\n\r\n                    <div class=\"form-group\">\r\n                        <label class=\"\" for=\"\">Desde</label>\r\n                        <input type=\"datetime-local\" class=\"form-control\" (change)=\"initial.value\" #initial>\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <label class=\"\" for=\"\">Hasta</label>\r\n                        <input type=\"datetime-local\" class=\"form-control\" (change)=\"end.value\" #end>\r\n                    </div>\r\n\r\n                    <div class=\"mt-3\">\r\n                        <button type=\"button\" class=\"btn btn-outline-primary btn-sm py-auto w-100\" (click)=\"buscar(initial.value, end.value, cajeros.value, true, true)\"> \r\n                            <i class=\"bi-search\"></i> Buscar \r\n                        </button>\r\n                    </div>\r\n                </div>\r\n                <!-- BUSCADOR POR FECHAS  -->\r\n\r\n            </div>\r\n\r\n        </div>\r\n        <!-- TABLE FACTURAS -->\r\n        <div class=\"col-md-9\">\r\n\r\n            <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n                <!-- CARGANDO -->\r\n                <div *ngIf=\"cargando\">\r\n                    <div class=\"text-center p-4\">\r\n                        <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                            <span class=\"visually-hidden\">Loading...</span>\r\n                        </div>\r\n                    </div>\r\n                    <small class=\"text-muted\">cargando...</small>\r\n                </div>\r\n                <!-- CARGANDO -->\r\n\r\n                <div *ngIf=\"!cargando\">\r\n\r\n                    <!-- BUSCADOR -->\r\n                    <div class=\"d-flex\">\r\n\r\n                        <div>\r\n                            <button type=\"button\" class=\"btn btn-outline-primary btn-sm\" (click)=\"cargarFacturas()\"> <i class=\"bi-arrow-clockwise\"></i> Recargar </button>\r\n                            <button type=\"button\" class=\"ml-2 btn btn-outline-success btn-sm\" (click)=\"exportar()\"> <i class=\"bi-file-earmark-spreadsheet\"></i> Excel </button>\r\n                        </div>\r\n\r\n                        <div class=\"ms-2\">\r\n                            <button type=\"button\" class=\"btn btn-outline-danger btn-sm\" (click)=\"facturasVencidas()\"> <i class=\"bi-arrow-clockwise\"></i> Vencidas </button>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <!-- BUSCADOR -->\r\n\r\n                    <div class=\"table-responsive \">\r\n                        <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                            <thead class=\"border-bottom \">\r\n                                <tr>\r\n                                    <th class=\"text-muted\" scope=\"col \">#</th>\r\n                                    <th class=\"text-muted\" scope=\"col \">control</th>\r\n                                    <th class=\"text-muted\" scope=\"col \" colspan=\"2\">Cliente</th>\r\n                                    <th class=\"text-muted\" scope=\"col \">Cedula</th>\r\n                                    <th class=\"text-muted\" scope=\"col \" colspan=\"2\">Ruta</th>\r\n                                    <th class=\"text-muted\" scope=\"col \">Monto</th>\r\n                                    <th class=\"text-muted\" scope=\"col \">Metodo</th>\r\n                                    <th class=\"text-muted\" scope=\"col \">fecha</th>\r\n                                    <th class=\"text-muted\" scope=\"col \"></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr *ngIf=\"!sinResultados\" class=\"text-center \">\r\n                                    <th colspan=\"10\" class=\"py-4\">\r\n                                        <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                                    </th>\r\n                                </tr>\r\n\r\n                                <ng-container *ngFor=\"let factura of facturas; let i=index \">\r\n\r\n                                    <tr *ngIf=\"factura.credito\" class=\"trHover\" tabindex=\"0\" data-bs-toggle=\"tooltip\" title=\"Cajero: {{ factura.user.name }}\">\r\n                                        <th>{{ factura.invoice }}</th>\r\n                                        <th>{{ factura.control }}</th>\r\n                                        <td colspan=\"2\">\r\n                                            {{ factura.client?.name || 'Ocasional' }}\r\n                                            <span *ngIf=\"!factura.status\" class=\"badge rounded-pill bg-danger\">Cancelada</span>\r\n                                            <span *ngIf=\"factura.vencida && factura.status\" class=\"badge rounded-pill bg-danger\">Vencida</span>\r\n                                            <span *ngIf=\"factura.mayor\" class=\"badge rounded-pill bg-success\">M </span>\r\n                                        </td>\r\n                                        <td> {{ factura.client?.cedula || '00000000' }} </td>\r\n                                        <td colspan=\"2\"> {{ factura.mesa?.name }} </td>\r\n                                        <td> {{ factura.amount | divisa }} </td>\r\n                                        <td> {{ factura.type }} </td>\r\n                                        <td> {{ factura.fecha | date:'medium' }} </td>\r\n                                        <td class=\"text-center\">\r\n                                            <a [routerLink]=\"['/dashboard/factura', factura.iid]\" class=\"btn btn-link p-1 text-primary\"><i class=\"bi bi-box-arrow-up-right\"></i></a>\r\n                                        </td>\r\n                                    </tr>\r\n\r\n                                </ng-container>\r\n\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                    <div class=\"row\">\r\n                        <div class=\"col col-md-4\">\r\n                            <small class=\"text-muted\">Total de facturas: ({{totalFacturas}})</small>\r\n                            <small *ngIf=\"resultado !== 0\" class=\"text-muted\"> - (Resultados: {{ resultado }})</small>\r\n                            <small *ngIf=\"desde !== 0\" class=\"text-muted\"> - (Desde el: {{ desde + 1}} Hasta el: {{ desde + facturas.length }})</small>\r\n                            <small *ngIf=\"sumarMonto !== 0\" class=\"text-muted\"> - Monto: ({{sumarMonto}})</small>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col d-flex justify-content-end\">\r\n                            <button type=\"button\" (click)=\"cambiarPagina(-10)\" class=\"{{btnAtras}} btn btn-sm btn-dark btnW waves-effect waves-light px-3\">Anterior</button>\r\n                            <button type=\"button\" (click)=\"cambiarPagina(10)\" class=\"{{btnAdelante}} btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2\">Siguiente</button>\r\n                        </div>\r\n                    </div>\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n        <!-- TABLE FACTURAS -->\r\n\r\n    </div>\r\n\r\n</div>","import { Component, OnInit, ViewChild, ElementRef, TemplateRef } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Validators, FormBuilder } from '@angular/forms';\r\nimport { Subscription, Observable } from 'rxjs';\r\n\r\nimport Swal from 'sweetalert2';\r\n\r\nimport jsPDF from 'jspdf';\r\nimport html2canvas from 'html2canvas';\r\n\r\n// PRINTER\r\nimport { NgxPrinterService } from 'projects/ngx-printer/src/lib/ngx-printer.service';\r\nimport { PrintItem } from 'projects/ngx-printer/src/lib/print-item';\r\nimport { ngxPrintMarkerPosition } from 'projects/ngx-printer/src/public_api';\r\n\r\n// SERVICES\r\nimport { InvoiceService } from '../../../services/invoice.service';\r\nimport { TurnoService } from '../../../services/turno.service';\r\nimport { EmpresaService } from '../../../services/empresa.service';\r\nimport { ImpuestosService } from 'src/app/services/impuestos.service';\r\nimport { UserService } from '../../../services/user.service';\r\nimport { BancosService } from 'src/app/services/bancos.service';\r\nimport { DataicoService } from 'src/app/services/dataico.service';\r\nimport { ElectronicaService } from 'src/app/services/electronica.service';\r\n\r\n// MODELS\r\nimport { Invoice } from '../../../models/invoice.model';\r\nimport { Datos } from '../../../models/empresa.model';\r\nimport { Banco } from 'src/app/models/bancos.model';\r\nimport { Impuestos } from '../../../models/impuestos.model';\r\nimport { User } from 'src/app/models/user.model';\r\n\r\n// INTERFACES\r\nimport { LoadInvoice, _products } from '../../../interfaces/invoice.interface';\r\nimport { _payments, Carrito, _paymentsCredito } from '../../../interfaces/carrito.interface';\r\nimport { LoadTurno, _movements } from '../../../interfaces/load-turno.interface';\r\nimport { DataicoInterface } from 'src/app/interfaces/dataico.interface';\r\n\r\nimport { environment } from '../../../../environments/environment';\r\nconst base_url = environment.base_url;\r\n\r\n@Component({\r\n  selector: 'app-factura',\r\n  templateUrl: './factura.component.html',\r\n  styleUrls: ['./factura.component.css']\r\n})\r\nexport class FacturaComponent implements OnInit {\r\n\r\n  @ViewChild('PrintTemplate')\r\n  private PrintTemplateTpl: TemplateRef<any>;\r\n\r\n  public pdfLink: string;\r\n\r\n  title = 'ngx-printer-demo';\r\n\r\n  printWindowSubscription: Subscription;\r\n  $printItems: Observable<PrintItem[]>;\r\n\r\n  public factura: LoadInvoice;\r\n  public user: User;\r\n\r\n  constructor(  private invoiceService: InvoiceService,\r\n                private activatedRoute: ActivatedRoute,\r\n                private fb: FormBuilder,\r\n                private turnoService: TurnoService,\r\n                private empresaService: EmpresaService,\r\n                private printerService: NgxPrinterService,\r\n                private impuestosService: ImpuestosService,\r\n                private userService: UserService,\r\n                private bancosService: BancosService,\r\n                private dataicoService: DataicoService,\r\n                private electronicaService: ElectronicaService) {\r\n\r\n                  this.printWindowSubscription = this.printerService.$printWindowOpen.subscribe(\r\n                    val => {\r\n                      console.log('Print window is open:', val);\r\n                    }\r\n                  );\r\n              \r\n                  this.$printItems = this.printerService.$printItems;\r\n\r\n                  this.user = userService.user;\r\n\r\n                }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.cargarDatos();\r\n\r\n    // CARGAR TURNO\r\n    this.cargarBancos();\r\n\r\n    // CARGAR TURNO\r\n    this.cargarTurno();\r\n\r\n    // CARGAR TURNO\r\n    this.loadDataDataico();\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *  OBTENER DATOS DE LA FACTURA ELECTRONICA\r\n  ==================================================================== */\r\n  public dataDataico: boolean = false;\r\n  public dataico: DataicoInterface;\r\n  loadDataDataico(){\r\n\r\n    this.dataicoService.loadDataDataico()\r\n        .subscribe( ({dataico}) => {\r\n\r\n          delete dataico.actions._id;\r\n          delete dataico.actions.email;\r\n          delete dataico.actions.attachments;\r\n          delete dataico.datid;\r\n          delete dataico.customer;\r\n          delete dataico.numbering._id;\r\n\r\n          if (dataico) {\r\n            this.dataDataico = true;\r\n            this.dataico = dataico;\r\n          }          \r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          \r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR BANCOS\r\n  ==================================================================== */\r\n  public bancos: Banco[] = [];\r\n  cargarBancos(){\r\n\r\n    this.bancosService.loadBancos()\r\n        .subscribe( ({bancos}) => {\r\n\r\n          this.bancos = bancos.filter( banco => banco.status === true);          \r\n\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR IMPUESTOS\r\n  ==================================================================== */\r\n  public impuestos: Impuestos[] = [];\r\n  cargarImpuestos(){\r\n\r\n    this.impuestosService.loadImpuestos()\r\n        .subscribe( ({taxes}) => {\r\n\r\n          this.impuestos = taxes;\r\n\r\n          this.impuestos.map( impuesto => {\r\n            impuesto.total = 0;\r\n          })\r\n\r\n\r\n          this.activatedRoute.params.subscribe( ({id}) => {\r\n\r\n            this.idFactura = id;\r\n            \r\n            this.cargarFactura(id);\r\n            \r\n          });\r\n\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   IMPRIMIR\r\n  ==================================================================== */\r\n  printDiv(div: string) {\r\n    this.printerService.printDiv(div);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR DATOS DE LA EMPRESA\r\n  ==================================================================== */\r\n  public empresa: Datos;\r\n  public ticketHeader: any;\r\n  public ticketfooter: any;\r\n  cargarDatos(){\r\n\r\n    this.empresaService.getDatos()\r\n        .subscribe( datos => {\r\n          this.empresa = datos;\r\n\r\n          this.ticketHeader =  this.empresa.header.split('\\n');\r\n          this.ticketfooter =  this.empresa.footer.split('\\n');\r\n\r\n          this.cargarImpuestos();\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR FACTURA a\r\n  ==================================================================== */\r\n  public idFactura;\r\n  public iva: number = 0;\r\n  public totalDevolucion: number = 0;\r\n  cargarFactura(id: string){\r\n\r\n    \r\n    this.invoiceService.loadInvoiceId(id)\r\n    .subscribe( ({invoice}) => {\r\n                \r\n          this.pdfLink = `${base_url}/invoice/pdf/${invoice.iid}`;\r\n          \r\n          this.factura = invoice;\r\n          this.factura.totalItems = 0;\r\n          this.paymentsCredit = this.factura.paymentsCredit;\r\n          this.payments = this.factura.payments;\r\n          this.iva = invoice.iva;\r\n          this.sumarPagos();          \r\n\r\n          this.vueltos = Number( this.factura.amount - this.totalPagos);\r\n\r\n          this.totalDevolucion = 0;\r\n          if (invoice.devolucion.length > 0) {\r\n            \r\n            invoice.devolucion.forEach( devolucion => {\r\n              this.totalDevolucion += devolucion.monto;\r\n            });\r\n\r\n          }         \r\n          \r\n          for (const product of invoice.products) {\r\n            \r\n            if( this.empresa.impuesto ){\r\n\r\n              if(product.product.taxid){\r\n\r\n                this.impuestos.map( (impuesto) => {\r\n    \r\n                  if (impuesto.taxid === product.product.taxid._id) {                  \r\n                    impuesto.total += Math.round(((product.qty * product.price) * impuesto.valor)/100);\r\n                  }\r\n    \r\n                });              \r\n              }\r\n\r\n            }\r\n\r\n            this.factura.totalItems += product.qty;\r\n\r\n          }        \r\n          \r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ELIMINAR PRODUCTO\r\n  ==================================================================== */\r\n  eliminarProducto(id: string){\r\n\r\n    let devolucion:any = {\r\n      factura: this.factura.iid\r\n    }\r\n\r\n    this.factura.products.filter( product => {\r\n\r\n      if (product._id === id) {\r\n\r\n        let precio = product.price;\r\n\r\n        if (this.factura.descuento) {\r\n          precio = precio - ((precio * this.factura.porcentaje)/100)\r\n        }\r\n\r\n        devolucion.product = product.product._id;\r\n        devolucion.qty = product.qty;\r\n        devolucion.price = precio;\r\n        devolucion.monto = precio * product.qty;\r\n      }\r\n\r\n    });\r\n\r\n    this.factura.devolucion.push(devolucion);\r\n\r\n    // SI YA HAN HECHO PAGOS\r\n    if( ( this.factura.amount - this.totalPagos) <= 0 || ( this.factura.amount - this.totalPagos) < (devolucion.monto)){\r\n      \r\n      this.factura.payments.push({\r\n        type: 'devolucion',\r\n        amount: devolucion.monto * -1,\r\n        description: `Devolucion de item`,\r\n      });\r\n\r\n    }\r\n\r\n    this.invoiceService.deleteProductInvoice(this.idFactura, id)\r\n        .subscribe( (resp: {ok: boolean, invoice: LoadInvoice} ) => {\r\n\r\n\r\n          this.invoiceService.updateInvoice({devolucion: this.factura.devolucion, payments: this.factura.payments}, this.factura.iid)\r\n                    .subscribe( resp => {\r\n\r\n                      // GUARDAR EN EL TURNO LA DEVOLUCION SI EXITEN PAGOS \r\n                      if( ( this.factura.amount - this.totalPagos) <= 0 || ( this.factura.amount - this.totalPagos) < (devolucion.monto)){\r\n\r\n                        this.turno.devolucion.push(devolucion);\r\n                          \r\n                          this.turnoService.updateTurno({devolucion:this.turno.devolucion}, this.user.turno)\r\n                          .subscribe( resp => {\r\n                            \r\n                              window.location.reload();                \r\n                \r\n                            }, (err) => {\r\n                              console.log(err);              \r\n                          })\r\n                      }else{\r\n\r\n                        this.cargarFactura(this.idFactura);\r\n                      }\r\n\r\n\r\n\r\n                    });\r\n\r\n          this.cargarFactura(this.idFactura);\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); })    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   DEVOLVER PRODUCTOS\r\n  ==================================================================== */\r\n  devolverProducto(producto: Carrito){\r\n\r\n    Swal.fire({\r\n      title: 'Cantidad',\r\n      input: 'text',\r\n      inputAttributes: {\r\n        autocapitalize: 'off'\r\n      },\r\n      showCancelButton: true,\r\n      confirmButtonText: 'Confirmar',\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (resp) => {\r\n        \r\n        return resp;\r\n      }\r\n    }).then((result) => {\r\n\r\n      if (result.value > 0) {\r\n        \r\n        const cantidad:number = Number(result.value);\r\n\r\n        // COMPROBAR Q LA CANTIDAD NO SEA MAYOR\r\n        if (cantidad >= producto.qty && cantidad !== 0) {\r\n          Swal.fire('Información', 'No se devolvio ningun producto, si vas a devolver todos los productos dar click en eliminar', 'info');\r\n          return;\r\n        }\r\n\r\n        let precio = producto.price;\r\n\r\n        if (this.factura.descuento) {\r\n          precio = precio - ((precio * this.factura.porcentaje)/100)\r\n        }\r\n\r\n        let devolucion = {\r\n          factura: this.factura.iid,\r\n          product: producto.product._id,\r\n          qty: cantidad,\r\n          price: precio,\r\n          monto: precio * cantidad,\r\n        }\r\n\r\n        // SI YA HAN HECHO PAGOS\r\n        if( ( this.factura.amount - this.totalPagos) <= 0 || ( this.factura.amount - this.totalPagos) < (devolucion.monto)){\r\n          \r\n          this.factura.payments.push({\r\n            type: 'devolucion',\r\n            amount: devolucion.monto * -1,\r\n            description: `Devolucion de item`,\r\n          });\r\n\r\n        }\r\n\r\n        this.invoiceService.updateProdutInvoice(this.idFactura, producto._id, cantidad)\r\n            .subscribe( resp => {\r\n\r\n                this.factura.devolucion.push(devolucion);\r\n\r\n                this.invoiceService.updateInvoice({devolucion: this.factura.devolucion, payments: this.factura.payments}, this.factura.iid)\r\n                    .subscribe( resp => {\r\n\r\n                      // GUARDAR EN EL TURNO LA DEVOLUCION SI EXITEN PAGOS \r\n                      if( ( this.factura.amount - this.totalPagos) === 0 || ( this.factura.amount - this.totalPagos) < (producto.price * cantidad)){\r\n\r\n                        this.turno.devolucion.push(devolucion);\r\n                          \r\n                          this.turnoService.updateTurno({devolucion:this.turno.devolucion}, this.user.turno)\r\n                          .subscribe( resp => {\r\n                            \r\n                              window.location.reload();                \r\n                \r\n                            }, (err) => {\r\n                              console.log(err);              \r\n                          })\r\n                      }\r\n\r\n\r\n                      this.cargarFactura(this.idFactura);\r\n\r\n                    });\r\n\r\n                                \r\n                \r\n            });\r\n          \r\n        \r\n        \r\n        return;\r\n      }else{\r\n        return;\r\n      }                \r\n      \r\n    });\r\n    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   DEVOLVER FACTURA\r\n  ==================================================================== */\r\n  devolucion( id:string ){\r\n\r\n    Swal.fire({\r\n      title: 'Atencion',\r\n      text: \"Estas seguro de devolver esta factura\",\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: 'Si, devolver',\r\n      cancelButtonText: 'Cancelar'\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n\r\n        this.invoiceService.returnInvoice(id)\r\n            .subscribe( resp => {\r\n              \r\n              Swal.fire(\r\n                'Devolución exitosa!',\r\n                'Esta factura, se ha devuelto exitosamente con todos los productos de la misma!',\r\n                'success'\r\n              );\r\n\r\n            }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n  /** ============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * INVOICE - INVOICE - INVOICE - INVOICE  \r\n  ==================================================================== */\r\n  public turno: LoadTurno;\r\n  public movimientos: _movements[] = [];\r\n  cargarTurno(){\r\n\r\n    this.turnoService.getTurnoId(this.user.turno)\r\n        .subscribe( (turno) => {\r\n\r\n          this.turno = turno;\r\n          this.movimientos = turno.movements;\r\n                    \r\n        });\r\n\r\n  }\r\n  \r\n  public payments: _payments[] = [];\r\n  public paymentsCredit: _paymentsCredito[] = [];\r\n  public credit: boolean = false;\r\n\r\n  public invoiceForm = this.fb.group({\r\n    type: ['efectivo', [Validators.required]],\r\n    paymentsCredit: [''],\r\n    credito: [this.credit]\r\n  })\r\n\r\n  /** ================================================================\r\n   *   FACTURAR\r\n  ==================================================================== */\r\n  @ViewChild('descripcionAdd') descripcionAdd: ElementRef;\r\n  @ViewChild('montoAdd') montoAdd: ElementRef;\r\n  public vueltos: number = 0;\r\n\r\n  focusMonto(){        \r\n    this.montoAdd.nativeElement.focus();\r\n  }\r\n\r\n  agregarPagos(type: string, amount:number, description:string = '', credito: boolean){\r\n\r\n    if (amount === 0 || amount < 1) {\r\n      Swal.fire('Atención', 'No has agregado un monto', 'info');\r\n      return;      \r\n    }\r\n\r\n    let totales = Number( this.factura.amount - this.totalPagos );\r\n\r\n    // COMPROBAR SI EL MONTO ES MAYOR AL RESTANTE\r\n    if ( Number(this.montoAdd.nativeElement.value) > totales) {\r\n      amount= ( this.factura.amount - this.totalPagos );\r\n      this.vueltos = (this.montoAdd.nativeElement.value - totales);\r\n    }else{\r\n      amount = this.montoAdd.nativeElement.value;\r\n      this.vueltos = (this.montoAdd.nativeElement.value - totales);\r\n    }\r\n\r\n    this.paymentsCredit.push({\r\n      type,\r\n      amount,\r\n      description,\r\n      turno: this.user.turno\r\n    });\r\n\r\n    this.descripcionAdd.nativeElement.value = '';\r\n    this.montoAdd.nativeElement.value = '';    \r\n\r\n    this.sumarPagos();\r\n\r\n    \r\n\r\n    if (credito) {\r\n\r\n      this.invoiceForm.setValue({\r\n        paymentsCredit: this.paymentsCredit,\r\n        credito: true,\r\n        type: this.invoiceForm.value.type,\r\n      });\r\n\r\n      this.invoiceService.updateInvoice( this.invoiceForm.value, this.factura.iid )\r\n        .subscribe( ( resp:{ok: boolean, invoice: Invoice } ) => {\r\n\r\n          let payTurno = {\r\n            factura: this.factura.iid,\r\n            pay: resp.invoice.paymentsCredit[resp.invoice.paymentsCredit.length - 1]._id,\r\n            monto: amount,\r\n          }\r\n\r\n          this.turno.abonos.push(payTurno);\r\n          \r\n          this.turnoService.updateTurno({abonos:this.turno.abonos}, this.user.turno)\r\n          .subscribe( resp => {\r\n            \r\n              window.location.reload();                \r\n\r\n            }, (err) => {\r\n              console.log(err);              \r\n          })\r\n\r\n        }, (err) => {\r\n\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n        });\r\n    }\r\n  }\r\n  /** ================================================================\r\n   *   ELIMINAR METODO DE PAGO \r\n  ==================================================================== */\r\n  eliminarPagos( item: any ){\r\n    \r\n    const i = this.paymentsCredit.indexOf(item);\r\n\r\n    if ( i !== -1 ) { this.paymentsCredit.splice(i, 1); }\r\n\r\n    this.sumarPagos();\r\n\r\n    this.vueltos = (this.factura.amount - this.totalPagos);\r\n\r\n    this.invoiceForm.setValue({\r\n      paymentsCredit: this.paymentsCredit,\r\n      credito: true,\r\n      type: this.invoiceForm.value.type,\r\n    });\r\n\r\n    this.invoiceService.updateInvoice( this.invoiceForm.value, this.factura.iid )\r\n        .subscribe( ( resp:{ok: boolean, invoice: Invoice } ) => {\r\n\r\n          \r\n\r\n          this.invoiceForm.reset();\r\n\r\n          window.location.reload();\r\n          \r\n\r\n        }, (err) => {\r\n\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   LIMPIAR METODO DE PAGO\r\n  ==================================================================== */\r\n  limpiarPagos(tipo: string = ''){\r\n\r\n    if (tipo !== 'credito') {      \r\n      this.credit = false;     \r\n    }else{\r\n      this.credit = true;\r\n    }\r\n\r\n    this.paymentsCredit = this.factura.paymentsCredit;\r\n    this.sumarPagos();\r\n    this.vueltos = Number( this.factura.amount - this.totalPagos);\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   SUMAR METODO DE PAGO\r\n  ==================================================================== */\r\n  public totalPagos:number = 0;\r\n  sumarPagos(){\r\n    \r\n    this.totalPagos = 0;\r\n    if (this.paymentsCredit.length > 0) {\r\n      \r\n      for (let i = 0; i < this.paymentsCredit.length; i++) {\r\n        \r\n        this.totalPagos += Number( this.paymentsCredit[i].amount );        \r\n      }\r\n\r\n    }\r\n\r\n    if (this.payments.length > 0) {\r\n      \r\n      for (let i = 0; i < this.payments.length; i++) {\r\n        \r\n        this.totalPagos += Number( this.payments[i].amount );        \r\n      }\r\n\r\n    }\r\n\r\n    if (this.vueltos < 0) {\r\n      this.vueltos = this.vueltos * -1;\r\n    }\r\n\r\n    if (this.factura.paymentsAlquiler.length > 0) {\r\n      for (const pay of this.factura.paymentsAlquiler) {\r\n        this.totalPagos += pay.amount;\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GUARDAR PAGO\r\n  ==================================================================== */\r\n  guardarPago(){\r\n\r\n    if (this.totalPagos !== this.factura.amount) {      \r\n      Swal.fire('Atención!', 'Los montos no son iguales', 'info');\r\n      return;\r\n    }\r\n\r\n    this.invoiceForm.setValue({\r\n      paymentsCredit: this.paymentsCredit,\r\n      credito: this.credit,\r\n      type: this.invoiceForm.value.type,\r\n    });        \r\n\r\n    this.invoiceService.updateInvoice( this.invoiceForm.value, this.factura.iid )\r\n        .subscribe( ( resp:{ok: boolean, invoice: Invoice } ) => {\r\n\r\n          let payTurno = {\r\n            factura: this.factura.iid,\r\n            pay: resp.invoice.paymentsCredit[resp.invoice.paymentsCredit.length - 1]._id,\r\n            monto: resp.invoice.paymentsCredit[resp.invoice.paymentsCredit.length - 1].amount,\r\n          }\r\n\r\n          this.turno.abonos.push(payTurno);\r\n          \r\n          this.turnoService.updateTurno({abonos:this.turno.abonos}, this.user.turno)\r\n          .subscribe( resp => {\r\n\r\n              this.invoiceForm.reset();\r\n            \r\n              window.location.reload();                \r\n\r\n            }, (err) => {\r\n              console.log(err);              \r\n            })          \r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          \r\n          Swal.fire('Error', err.error.msg, 'error');\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ACTUALIZAR FECHA DE VENCIMIENTO\r\n  ==================================================================== */\r\n  actualizarVencimiento(fechaCredito: Date){\r\n\r\n    this.invoiceService.updateInvoice({fechaCredito}, this.factura.iid)\r\n        .subscribe( (resp: {invoice}) => {\r\n\r\n          this.factura.fechaCredito = resp.invoice.fechaCredito;\r\n\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   EDITAR CONTROL\r\n  ==================================================================== */\r\n  updateControl(control: any){\r\n\r\n    if( (control.keyCode < 48 || control.keyCode > 57) && \r\n        (control.keyCode < 96 || control.keyCode > 105) && \r\n        control.keyCode !==190  && control.keyCode !==110 && \r\n        control.keyCode !==8 && \r\n        control.keyCode !==9  ){\r\n        Swal.fire('Error', 'debe de usar solo numeros en el control', 'error');\r\n    }\r\n\r\n    this.invoiceService.updateInvoice({control}, this.factura.iid!)\r\n        .subscribe( (resp:{invoice}) => {\r\n\r\n          this.factura.control = control;\r\n          Swal.fire('Estupendo', 'Se ha actualizado el control exitosamente', 'success');\r\n\r\n        }, (err) => {\r\n          console.log(err);          \r\n        })\r\n  }\r\n\r\n  /** ================================================================\r\n   *   PDF\r\n  ==================================================================== */\r\n  public enviando: boolean = false;\r\n  sendInvoice(){\r\n\r\n    this.enviando = true;\r\n\r\n    this.electronicaService.postFacturaDataico(this.factura, this.dataico, this.impuestos)\r\n        .subscribe( (resp: {status, invoice, ok}) => {\r\n          \r\n          \r\n          if (resp.status === 500) {\r\n            console.log(resp);            \r\n            Swal.fire('Atención', resp.invoice.errors[0].error, 'warning');\r\n            this.enviando = false;\r\n            return;\r\n          }\r\n\r\n          Swal.fire('Estupendo', 'Se ha enviado la factura exitosamente', 'success');\r\n          \r\n          setTimeout( () => {\r\n            this.enviando = false;\r\n            window.location.reload();\r\n          }, 2000)\r\n\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          this.enviando = false;       \r\n        });\r\n\r\n  }\r\n\r\n\r\n\r\n  /** ================================================================\r\n   *   PDF\r\n  ==================================================================== */\r\n  downloadPDF() {\r\n    // Extraemos el\r\n    const DATA = document.getElementById('printDiv') as HTMLElement;\r\n    const doc = new jsPDF('p', 'pt', 'a4');\r\n    const options = {\r\n      background: 'white',\r\n      scale: 3\r\n    };\r\n    html2canvas( DATA , options).then((canvas) => {\r\n\r\n      const img = canvas.toDataURL('image/PNG');\r\n\r\n      // Add image Canvas to PDF\r\n      const bufferX = 15;\r\n      const bufferY = 15;\r\n      const imgProps = (doc as any).getImageProperties(img);\r\n      const pdfWidth = doc.internal.pageSize.getWidth() - 2 * bufferX;\r\n      const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;\r\n      doc.addImage(img, 'PNG', bufferX, bufferY, pdfWidth, pdfHeight, undefined, 'FAST');\r\n      return doc;\r\n    }).then((docResult) => {\r\n      docResult.save(`${new Date().toISOString()}.pdf`);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Facturas</h5>\r\n    </div>\r\n\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"facturas-tab\"><i class=\"bi-journal-check\" style=\"font-size: 1rem\"></i> Factura <span *ngIf=\"factura\"> #{{factura.invoice}} </span> </a>\r\n        </li>\r\n\r\n    </ul>\r\n\r\n</header>\r\n\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<div class=\"container-fluid\">\r\n\r\n\r\n    <ng-container *ngIf=\"factura\">\r\n        <!-- TITLE - SUBTITLE -->\r\n        <div class=\"mt-4\">\r\n            <h5 class=\"text-dark\">DETALLES DE LA FACTURA #{{ factura.invoice }}</h5>\r\n            <p class=\"mb-0\">Cajero: {{ factura.user.name }}</p>\r\n\r\n        </div>\r\n        <!-- TITLE - SUBTITLE -->\r\n\r\n        <div>\r\n\r\n            <ng-container *ngIf=\"empresa\">\r\n                <button *ngIf=\"empresa.printpos\" [routerLink]=\"['/dashboard/ventas/print', factura.iid]\" type=\"button\" class=\"btn btn-outline-primary btn-sm mx-1 my-2\"> \r\n                    <i class=\"bi-printer\"></i> Imprimir\r\n                </button>\r\n\r\n                <button *ngIf=\"!empresa.printpos\" (click)=\"printDiv('printDiv')\" type=\"button\" class=\"btn btn-outline-primary btn-sm mx-1 my-2\"> \r\n                    <i class=\"bi-printer\"></i> Imprimir\r\n                </button>\r\n            </ng-container>\r\n\r\n            <button (click)=\"devolucion(factura.iid)\" [disabled]=\"user.role !== 'ADMIN'\" type=\"button\" class=\"btn btn-outline-danger btn-sm mx-1 my-2\"> \r\n                <i class=\"bi-arrow-counterclockwise\"></i> Cancelar Factura\r\n            </button>\r\n\r\n            <button *ngIf=\"factura.credito\" [disabled]=\"user.cerrada\" (click)=\"focusMonto()\" type=\"button\" class=\"btn btn-outline-dark btn-sm mx-1 my-2\" data-bs-toggle=\"modal\" data-bs-target=\"#facturar\"> \r\n                Cobrar\r\n            </button>\r\n\r\n            <button *ngIf=\"factura.pedido\" type=\"button\" class=\"btn btn-outline-info btn-sm mx-1 my-2\" [routerLink]=\"['/dashboard/pedido', factura.pedido]\"> \r\n                Ver pedido\r\n            </button>\r\n\r\n            <a type=\"button\" class=\"btn btn-danger btn-sm mx-1 my-2\" [href]=\"pdfLink\" target=\"_blank\"> \r\n                PDF\r\n            </a>\r\n\r\n            <button type=\"button\" class=\"btn btn-info btn-sm mx-1 my-2\" data-bs-toggle=\"modal\" data-bs-target=\"#editVencimiento\"> \r\n                Editar Fecha\r\n            </button>\r\n\r\n            <button type=\"button\" class=\"btn btn-secondary btn-sm mx-1 my-2\" data-bs-toggle=\"modal\" data-bs-target=\"#editControl\"> \r\n                Editar Control\r\n            </button>\r\n\r\n            <button [disabled]=\"enviando\" (click)=\"sendInvoice()\" *ngIf=\"factura.electronica && !factura.send || user.role === 'ADMIN' && !factura.send \" type=\"button\" class=\"btn btn-warning btn-sm mx-1 my-2\"> \r\n                <span *ngIf=\"!enviando\">Enviar Factura DIAN</span>\r\n                <span *ngIf=\"enviando\">Enviando...</span>                \r\n            </button>\r\n\r\n            <a *ngIf=\"factura.pdf_url\" [href]=\"factura.pdf_url\" target=\"_blank\" class=\"btn btn-outline-danger btn-sm mx-1 my-2\">\r\n                <i class=\"bi bi-file-pdf\"></i> Factura Electronica\r\n            </a>\r\n\r\n            <ng-container *ngIf=\"empresa\">\r\n                <button *ngIf=\"empresa.taller\" type=\"button\" class=\"btn btn-primary btn-sm mx-1 my-2\" data-bs-toggle=\"modal\" data-bs-target=\"#imgUp\"> \r\n                    Imagenes\r\n                </button>\r\n            </ng-container>\r\n        </div>\r\n\r\n        <div class=\"row\">\r\n\r\n            <!-- DETALLES DE LA FACTURA -->\r\n            <div class=\"col-md-8 shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n                <div id=\"printDiv\">\r\n\r\n                    <!-- SI ES A CREDITO -->\r\n                    <span *ngIf=\"factura.credito\" class=\"badge rounded-pill bg-warning text-dark mb-2\">A Credito <span *ngIf=\"factura.apartado\">- Apartado </span> </span>\r\n\r\n                    <!-- INFORMACION DEL CLIENTE -->\r\n                    <div class=\"row\">\r\n\r\n                        <!-- Informacion del Cliente -->\r\n                        <div class=\"col-md-8 text-left text-muted\" style=\"color:black\">\r\n\r\n                            <div class=\"d-flex flex-wrap gap-1\">\r\n\r\n                                <div *ngIf=\"empresa\">\r\n                                    <!-- Image Product-->\r\n                                    <img *ngIf=\"empresa.logo\" [src]=\" empresa.logo | imagen:'logo'\" class=\"mx-auto\" width=\"120px\" alt=\"\">\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <p style=\"font-size: 0.9rem;\" class=\"mb-0 text-dark\"> <strong>RAZON SOCIAL:</strong> <small> {{ factura.client?.name || 'Consumidor Final' }}</small> </p>\r\n\r\n                                    <p style=\"font-size: 0.9rem;\" class=\"mb-0 text-dark\"> <strong>CC/NIT:</strong> <small> {{ factura.client?.cedula || '222222222222' }}</small> </p>\r\n\r\n                                    <p style=\"font-size: 0.9rem;\" *ngIf=\"factura.client?.phone\" class=\"mb-0 text-dark\"> <strong>Telefono:</strong> <small> {{ factura.client?.phone || '--- --------' }}</small> </p>\r\n\r\n                                    <p style=\"font-size: 0.9rem;\" *ngIf=\"factura.client?.email\" class=\"mb-0 text-dark\"> <strong>Correo:</strong> <small> {{ factura.client?.email || ''}}</small> </p>\r\n\r\n                                    <p style=\"font-size: 0.9rem;\" *ngIf=\"factura.client?.address\" class=\"mb-0 text-dark\"> <strong>Dirección:</strong> <small> {{ factura.client?.address || ''}}</small> </p>\r\n\r\n                                    <p style=\"font-size: 0.9rem;\" class=\"mb-0 text-dark\"> <strong>Vendedor:</strong> <small> {{ factura.mesero?.name || ''}}</small> </p>\r\n                                    <p *ngIf=\"factura.placa\" style=\"font-size: 0.9rem;\" class=\"mb-0 text-dark\"> <strong>Placa:</strong> <small> {{ factura.placa || ''}}</small> </p>\r\n\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- CUFE Y QR -->\r\n                            <div class=\"d-flex flex-wrap\" *ngIf=\"factura.cufe\">\r\n                                <div class=\"qrcodeImage\">\r\n                                    <qrcode [qrdata]=\"'https://catalogo-vpfe.dian.gov.co/document/searchqr?documentkey='+factura.cufe\" [allowEmptyString]=\"true\" [alt]=\"'A custom alt attribute'\" [ariaLabel]=\"'QR Code image with the following content...'\" [cssClass]=\"'center'\" [colorDark]=\"'#000'\"\r\n                                        [colorLight]=\"'#ffffffff'\" [elementType]=\"'img'\" [errorCorrectionLevel]=\"'M'\" [margin]=\"3\" [scale]=\"1\" [title]=\"'A custom title attribute'\" [width]=\"80\"></qrcode>\r\n                                </div>\r\n                                <div class=\"text-wrap\">\r\n                                    <p style=\"font-size: 0.8rem;\" class=\"mb-1 text-dark text-break\"> <strong>CUFE:</strong> <small>{{ factura.cufe }}</small> </p>\r\n                                </div>\r\n                            </div>\r\n\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col\">\r\n                            <div class=\"col-12\" *ngIf=\"empresa\">\r\n                                <!-- <div class=\"mb-2 d-flex justify-content-end\">\r\n                                <img *ngIf=\"empresa.logo\" src=\"{{empresa.logo | imagen:'logo'}}\" class=\"\" width=\"200px\" alt=\"\">\r\n                            </div> -->\r\n                                <h6 class=\"mb-0 d-flex justify-content-end text-wrap text-end fw-bold\"> {{ empresa.name }} </h6>\r\n                                <p class=\"mb-0 d-flex justify-content-end text-wrap text-end\" *ngFor=\"let text of ticketHeader\" style=\"line-height: 1rem; font-size: 0.8rem;\"> {{ text }} </p>\r\n\r\n                                <p class=\"mb-0 mt-2 d-flex justify-content-end text-wrap text-end\"> {{empresa.type}}: </p>\r\n                                <h6 class=\"mb-0 d-flex justify-content-end text-primary fw-normal\">\r\n                                    <span *ngIf=\"factura.cufe\"> {{ factura.number }} </span>\r\n                                    <span *ngIf=\"!factura.cufe\">{{ factura.invoice }} </span>\r\n\r\n                                </h6>\r\n                                <small class=\"mb-0 d-flex justify-content-end\">Control: {{ factura.control || 0 }} </small>\r\n                                <small class=\"mb-0 d-flex justify-content-end\"> {{ factura.fecha | date:'medium' }} </small>\r\n                                <small *ngIf=\"factura.credito\" class=\"mb-0 d-flex justify-content-end\">Vence: {{ factura.fechaCredito | date:'shortDate' }} </small>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <!-- INFORMACION DEL CLIENTE -->\r\n\r\n                    <!-- INFORMACION DE LA FACTURA -->\r\n                    <ng-container *ngIf=\"empresa\">\r\n                        <h4 *ngIf=\"!empresa.responsable\" class=\"text-center text-wrap\"> Factura de venta pos </h4>\r\n                        <h4 *ngIf=\"empresa.responsable\" class=\"text-center text-wrap\"> Factura de venta pos </h4>\r\n                        <h4 *ngIf=\"!factura.status\" class=\"text-center text-danger\"> CANCELADA </h4>\r\n                    </ng-container>\r\n\r\n                    <div class=\" table-responsive \">\r\n\r\n                        <table class=\"table table-borderless table-striped table-sm \" [ngClass]=\" {'tabla-con-marca': factura.marca && !factura.credito}\">\r\n                            <thead class=\"border-bottom\">\r\n                                <tr>\r\n                                    <th scope=\"col\">#</th>\r\n                                    <th scope=\"col\">Codigo de barras</th>\r\n                                    <th class=\" text-left\" scope=\"col \" colspan=\"2 \">Nombre del Producto</th>\r\n                                    <th scope=\"col\">tipo</th>\r\n                                    <th scope=\"col\">Precio</th>\r\n                                    <th scope=\"col\">Cantidad</th>\r\n                                    <th scope=\"col\">Monto</th>\r\n                                    <th></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody class=\"text-dark\">\r\n\r\n                                <tr *ngFor=\"let producto of factura.products; let i = index\">\r\n                                    <th> {{ i + 1 }} </th>\r\n                                    <td><small class=\"text-wrap\">{{ producto.product.code }}</small></td>\r\n                                    <td colspan=\"2\">{{ producto.product.name }} <strong *ngIf=\"producto.mayor\">M</strong> </td>\r\n                                    <td>{{ producto.product.type }}</td>\r\n                                    <td>{{ producto.price | divisa}}</td>\r\n                                    <td class=\"text-center\">{{ producto.qty }}</td>\r\n                                    <td>{{ producto.price * producto.qty | divisa}}</td>\r\n                                    <td>\r\n                                        <button type=\"button\" [disabled]=\"user.cerrada || user.role === 'CASHIER'\" class=\"btn btn-link p-1 text-warning\" (click)=\"devolverProducto(producto)\">\r\n                                        <i class=\"bi-arrow-90deg-left\"></i>\r\n                                    </button>\r\n                                        <button type=\"button\" [disabled]=\"user.cerrada || user.role === 'CASHIER'\" (click)=\"eliminarProducto(producto._id)\" class=\"btn btn-link p-1 text-danger\">\r\n                                        <i class=\"bi-x\"></i>\r\n                                    </button>\r\n                                    </td>\r\n                                </tr>\r\n\r\n                            </tbody>\r\n                            <tfoot>\r\n                                <tr>\r\n                                    <th colspan=\"7\">ITEMS</th>\r\n                                    <th> {{ factura.totalItems || 0 | number}} </th>\r\n                                </tr>\r\n                            </tfoot>\r\n                        </table>\r\n\r\n                    </div>\r\n\r\n                    <!-- TOTAL -->\r\n                    <div>\r\n                        <div class=\"d-flex py-2\">\r\n\r\n                            <div class=\"text-wrap px-2\">\r\n                                <h6 *ngIf=\"factura.nota\">Nota:</h6>\r\n                                <p *ngIf=\"factura.nota\"> {{ factura.nota }} </p>\r\n                            </div>\r\n\r\n                            <div class=\"ms-auto d-flex justify-content-end\">\r\n                                <div class=\"border-start col px-4\" *ngIf=\"empresa\">\r\n\r\n                                    <!-- NO RESPONSABLE -->\r\n                                    <h6 class=\"mb-0 text-wrap text-primary text-rigth\" *ngIf=\"!empresa.responsable\"> {{ factura.base | divisa }} </h6>\r\n                                    <h6 class=\"mb-0 text-wrap text-primary text-rigth\" *ngIf=\"empresa.responsable\"> {{ factura.base | divisa }} </h6>\r\n                                    <!-- NO RESPONSABLE -->\r\n\r\n                                    <!-- DESCUENTO -->\r\n                                    <h6 *ngIf=\"factura?.descuento\" class=\"mb-0 text-wrap text-primary text-left\">Descuento {{ (factura.base * factura.porcentaje) /100 | divisa }} </h6>\r\n                                    <!-- DESCUENTO -->\r\n\r\n                                    <h6 *ngIf=\"!empresa.impuesto\" class=\"mb-0 text-wrap text-primary text-left\">No responsable de IVA</h6>\r\n\r\n                                    <!-- IMPUESTO -->\r\n                                    <ng-container *ngIf=\"empresa.impuesto\">\r\n                                        <ng-container *ngFor=\"let impuesto of impuestos\">\r\n                                            <h6 class=\"mb-0 text-wrap text-primary text-left\" *ngIf=\"impuesto.total > 0\">{{impuesto.name}} {{ impuesto.total | divisa }}</h6>\r\n                                        </ng-container>\r\n                                    </ng-container>\r\n                                    <!-- IMPUESTO -->\r\n\r\n                                    <!-- TOTAL -->\r\n                                    <h5 class=\"display-6 fw-bold text-primary\">{{ factura.amount | divisa }}</h5>\r\n                                    <!-- TOTAL -->\r\n\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                    <!-- TOTAL -->\r\n\r\n                </div>\r\n\r\n                <!-- INFORMACION DE LA FACTURA -->\r\n\r\n            </div>\r\n            <!-- DETALLES DE LA FACTURA -->\r\n\r\n            <!-- PAGOS -->\r\n            <div class=\"col-md-4\">\r\n\r\n                <!-- TABLE PAGOS-->\r\n                <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n                    <div class=\"d-flex justify-content-center\">\r\n                        <div id=\"printPagos\" style=\"color: #000;\" [ngStyle]=\"{'max-width': empresa.impresora === 58 ? '16rem' : '24rem'}\">\r\n                            <div class=\"d-flex justify-content-between\">\r\n                                <h5 class=\"\">\r\n                                    Pagos\r\n                                </h5>\r\n                                <h5 class=\"\">\r\n                                    #{{ factura.invoice }}\r\n                                </h5>\r\n                            </div>\r\n                            <!-- CARGANDO -->\r\n                            <div *ngIf=\"cargandoAgotados\">\r\n                                <div class=\"text-center p-4\">\r\n                                    <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                                        <span class=\"visually-hidden\">Loading...</span>\r\n                                    </div>\r\n                                </div>\r\n                                <small class=\"text-muted\">cargando...</small>\r\n                            </div>\r\n                            <!-- CARGANDO -->\r\n\r\n                            <div *ngIf=\"!cargandoAgotados\">\r\n\r\n                                <div class=\"table-responsive \" class=\"overflow-auto\">\r\n                                    <table class=\"table table-borderless table-hover table-sm animated fadeIn \">\r\n                                        <thead class=\"border-bottom \">\r\n                                            <tr style=\"color: #000;\">\r\n                                                <th scope=\"col\">Descripcion</th>\r\n                                                <th scope=\"col\">Tipo</th>\r\n                                                <th scope=\"col\">Monto</th>\r\n                                            </tr>\r\n                                        </thead>\r\n\r\n                                        <tbody>\r\n\r\n                                            <tr style=\"color: #000;\">\r\n                                                <td class=\"fw-bold\">\r\n                                                    Total de la factura\r\n                                                </td>\r\n                                                <td class=\"fw-normal\">\r\n                                                    --\r\n                                                </td>\r\n                                                <td class=\"fw-bold\"> {{ factura.amount + factura.tip || 0 | divisa }} </td>\r\n                                            </tr>\r\n\r\n                                            <tr class=\"trHover\" *ngFor=\"let payA of factura.paymentsAlquiler; let i = index\">\r\n                                                <td class=\"fw-normal\">\r\n                                                    <span *ngIf=\"payA.description !== ''\">{{ payA.description }}</span>\r\n                                                    <span *ngIf=\"payA.description === ''\">Sin descripción</span>\r\n                                                </td>\r\n                                                <td class=\"fw-normal\">{{ payA.type }}</td>\r\n                                                <td class=\"fw-normal\">{{ payA.amount | divisa }} </td>\r\n                                            </tr>\r\n\r\n                                            <tr class=\"trHover\" *ngFor=\"let pay of payments; let i = index\" style=\"color: #000;\">\r\n                                                <td class=\"fw-normal\">\r\n                                                    <span *ngIf=\"pay.description !== ''\">{{ pay.description }} </span>\r\n                                                    <span *ngIf=\"pay.description === ''\">Sin descripción</span>\r\n                                                </td>\r\n                                                <td class=\"fw-normal\">{{ pay.type }}</td>\r\n                                                <td class=\"fw-normal\">{{ pay.amount | divisa }} </td>\r\n                                            </tr>\r\n\r\n                                            <tr class=\"trHover\" *ngFor=\"let pay of paymentsCredit; let i = index\" style=\"color: #000;\">\r\n                                                <td class=\"fw-normal\">\r\n                                                    <span *ngIf=\"pay.description !== ''\">{{ pay.description }} {{ pay.fecha | date: 'short' }} </span>\r\n                                                    <span *ngIf=\"pay.description === ''\">Sin descripción {{ pay.fecha | date: 'short' }}</span>\r\n                                                </td>\r\n                                                <td class=\"fw-normal\">{{ pay.type }}</td>\r\n                                                <td class=\"fw-normal\">{{ pay.amount | divisa }} </td>\r\n                                            </tr>\r\n\r\n                                        </tbody>\r\n                                        <tfoot>\r\n                                            <tr class=\"border-top\" style=\"color: #000;\">\r\n                                                <td colspan=\"2\"> <span class=\"fw-bold\"> Restante </span></td>\r\n                                                <td> <span class=\"fw-bold\">{{ ( (factura.amount + factura.tip || 0) - totalPagos) | divisa }}</span> </td>\r\n                                            </tr>\r\n                                        </tfoot>\r\n\r\n                                    </table>\r\n\r\n                                </div>\r\n\r\n                                <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                                <div class=\"row\">\r\n                                    <div class=\"col\" style=\"color: #000;\">\r\n                                        <small>Total de pagos: ({{payments.length + paymentsCredit.length}})</small>\r\n                                    </div>\r\n                                </div>\r\n                                <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <button (click)=\"printDiv('printPagos')\" type=\"button\" class=\"btn btn-outline-primary btn-sm w-100\"> \r\n                        <i class=\"bi-printer\"></i> Imprimir\r\n                    </button>\r\n                </div>\r\n                <!-- TABLE PAGOS-->\r\n\r\n                <!-- TABLE DEVOLUCION-->\r\n                <div class=\"shadow-lg p-3 mb-5 rounded bg-white\" style=\"max-height: 400px; height: auto;\">\r\n                    <h5 class=\"\">\r\n                        Devoluciones\r\n                    </h5>\r\n                    <!-- CARGANDO -->\r\n                    <div *ngIf=\"cargandoAgotados\">\r\n                        <div class=\"text-center p-4\">\r\n                            <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                                <span class=\"visually-hidden\">Loading...</span>\r\n                            </div>\r\n                        </div>\r\n                        <small class=\"text-muted\">cargando...</small>\r\n                    </div>\r\n                    <!-- CARGANDO -->\r\n\r\n                    <div *ngIf=\"!cargandoAgotados\" style=\"max-height: 100vh\">\r\n\r\n                        <div class=\"table-responsive \" class=\"overflow-auto\" style=\"max-height: 200px;\">\r\n                            <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                                <thead class=\"border-bottom \">\r\n                                    <tr>\r\n                                        <th class=\"text-muted \" scope=\"col \" colspan=\"2\">Codigo</th>\r\n                                        <th class=\"text-muted \" scope=\"col \">Cantidad</th>\r\n                                        <th class=\"text-muted \" scope=\"col \">Precio</th>\r\n                                        <th class=\"text-muted \" scope=\"col \">Monto</th>\r\n                                    </tr>\r\n                                </thead>\r\n\r\n                                <tbody>\r\n\r\n                                    <tr *ngIf=\"factura.devolucion.length === 0\">\r\n                                        <td colspan=\"5\">No existen devoluciones...</td>\r\n                                    </tr>\r\n\r\n                                    <tr class=\"trHover\" *ngFor=\"let devolucion of factura.devolucion; let i = index\">\r\n                                        <td colspan=\"2\">\r\n                                            {{ devolucion.product.code }}\r\n                                        </td>\r\n                                        <td class=\"text-center\">{{ devolucion.qty }}</td>\r\n                                        <td>{{ devolucion.price | divisa }} </td>\r\n                                        <td>{{ devolucion.monto | divisa }} </td>\r\n                                    </tr>\r\n\r\n                                </tbody>\r\n                                <tfoot>\r\n                                    <tr class=\"border-top\">\r\n                                        <td colspan=\"2\"> <span class=\"fw-bold\"> Total  </span></td>\r\n                                        <td> <span class=\"fw-bold\">{{ totalDevolucion | divisa }}</span> </td>\r\n                                    </tr>\r\n                                </tfoot>\r\n\r\n                            </table>\r\n\r\n                        </div>\r\n\r\n                        <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                        <div class=\"row\">\r\n                            <div class=\"col\">\r\n                                <small class=\"text-muted\">Total de pagos: ({{payments.length + paymentsCredit.length}})</small>\r\n                            </div>\r\n                        </div>\r\n                        <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n                    </div>\r\n                </div>\r\n                <!-- TABLE DEVOLUCION-->\r\n\r\n            </div>\r\n            <!-- PAGOS -->\r\n\r\n        </div>\r\n\r\n    </ng-container>\r\n\r\n\r\n\r\n</div>\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    MODAL FACTURAR \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"facturar\" tabindex=\"-1\" aria-labelledby=\"facturarModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-xl modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-body p-0\">\r\n\r\n                <div class=\"container-fluid\">\r\n                    <div class=\"py-2\">\r\n\r\n                        <!-- COLUMNA IZQ -->\r\n                        <div class=\"col px-0 bg-white\">\r\n\r\n                            <!-- TITULO -->\r\n                            <div class=\"bg-header-blue py-1 px-2\">\r\n                                <h4 class=\"text-white fw-normal mb-0\">Cobrar</h4>\r\n                            </div>\r\n\r\n                            <div class=\"container-fluid py-4\">\r\n\r\n                                <!-- TOTAL -->\r\n                                <div class=\"text-center my-3\">\r\n                                    <ng-container *ngIf=\"factura\">\r\n                                        <h4 class=\"display-4 text-primary\">{{ factura.amount | divisa }}</h4>\r\n                                    </ng-container>\r\n\r\n\r\n                                    <small *ngIf=\"totalPagos > 0 && totalPagos < factura.amount\" class=\"text-danger animated fadeIn\">Resta</small>\r\n                                    <small *ngIf=\"totalPagos > 0 && totalPagos >= factura.amount\" class=\"text-success animated fadeIn\">Vueltos</small>\r\n                                    <h4 class=\"mb-0 fw-normal animated fadeIn\" [ngClass]=\" {   'text-danger': totalPagos < factura.amount, \r\n                                                        'text-success': totalPagos >= factura.amount\r\n                                                    }\" *ngIf=\"totalPagos > 0\">\r\n                                        {{ vueltos | divisa }}\r\n                                    </h4>\r\n\r\n                                </div>\r\n                                <!-- TOTAL -->\r\n\r\n\r\n                                <div class=\"d-flex justify-content-center\">\r\n\r\n                                    <div>\r\n\r\n                                        <!-- FORM INVOICE - FORM INVOICE -->\r\n                                        <form autocomplete=\"off\" [formGroup]=\"invoiceForm\">\r\n\r\n                                            <div class=\"row text-center\">\r\n                                                <div class=\"col p-2\">\r\n\r\n                                                    <input type=\"radio\" (click)=\"limpiarPagos()\" class=\"btn-check\" name=\"type\" formControlName=\"type\" id=\"efectivo-outlined\" value=\"efectivo\" autocomplete=\"off\" checked>\r\n                                                    <label class=\"btn btn-outline-success\" for=\"efectivo-outlined\">\r\n                                                    <i class=\"px-3 bi-cash-stack\" style=\"font-size: 1.5rem;\"></i>\r\n                                                    <p class=\"mb-0\">Efectivo</p>\r\n    \r\n                                                </label>\r\n\r\n                                                </div>\r\n\r\n                                                <div class=\"col p-2\">\r\n\r\n                                                    <input type=\"radio\" (click)=\"limpiarPagos()\" class=\"btn-check\" name=\"type\" formControlName=\"type\" id=\"transferencia-outlined\" value=\"transferencia\" autocomplete=\"off\">\r\n                                                    <label class=\"btn btn-outline-info\" for=\"transferencia-outlined\">\r\n                                                        <i class=\"px-3 bi-credit-card\" style=\"font-size: 1.5rem;\"></i>\r\n                                                        <p class=\"mb-0\">Bancos</p>\r\n                                                    </label>\r\n\r\n                                                </div>\r\n\r\n                                                <div class=\"col p-2\">\r\n                                                    <input type=\"radio\" (click)=\"limpiarPagos()\" class=\"btn-check\" name=\"options-outlined\" name=\"type\" formControlName=\"type\" id=\"mixto-outlined\" value=\"mixto\" autocomplete=\"off\">\r\n                                                    <label class=\"btn btn-outline-dark\" for=\"mixto-outlined\">\r\n                                                    <i class=\"px-3 bi-patch-question\" style=\"font-size: 1.5rem;\"></i>\r\n                                                    <p class=\"mb-0\">Mixto</p>\r\n                                                    </label>\r\n                                                </div>\r\n\r\n                                                <div class=\"col p-2\">\r\n                                                    <input type=\"radio\" (click)=\"limpiarPagos('credito')\" #tcredito class=\"btn-check\" name=\"options-outlined\" name=\"type\" formControlName=\"type\" id=\"credito-outlined\" value=\"credito\" autocomplete=\"off\">\r\n                                                    <label class=\"btn btn-outline-warning\" for=\"credito-outlined\">\r\n                                                    <i class=\"px-3 bi-clock-history\" style=\"font-size: 1.5rem;\"></i>\r\n                                                    <p class=\"mb-0\">Abono</p>\r\n                                                    </label>\r\n                                                </div>\r\n\r\n\r\n\r\n                                            </div>\r\n\r\n                                            <div class=\"mx-auto\">\r\n\r\n                                                <!-- TABLA -->\r\n                                                <div class=\"table-responsive\">\r\n                                                    <table class=\"table table-sm table-borderless\">\r\n                                                        <thead>\r\n                                                            <tr>\r\n                                                                <th>#</th>\r\n                                                                <th>Descripcion</th>\r\n                                                                <th>Monto</th>\r\n                                                                <th></th>\r\n                                                            </tr>\r\n                                                        </thead>\r\n                                                        <tbody>\r\n\r\n                                                            <tr class=\"trHover\" *ngFor=\"let control of payments; let i = index\">\r\n                                                                <th>{{ i + 1}}</th>\r\n                                                                <td>\r\n                                                                    <p class=\"mb-0\">{{ control.type }} <span *ngIf=\"control.description\">- {{ control.description }}</span></p>\r\n                                                                </td>\r\n                                                                <td> {{ control.amount | divisa }} </td>\r\n                                                                <td>\r\n                                                                    <button type=\"button\" class=\"btn btn-link p-1 text-danger text-right\" (click)=\"eliminarPagos(control)\"> <i class=\"bi-trash\"></i> </button>\r\n                                                                </td>\r\n                                                            </tr>\r\n\r\n                                                            <tr class=\"trHover\" *ngFor=\"let control of paymentsCredit; let i = index\">\r\n                                                                <th>{{ i + 1}}</th>\r\n                                                                <td>\r\n                                                                    <p class=\"mb-0\">{{ control.type }} <span *ngIf=\"control.description\">- {{ control.description }}</span></p>\r\n                                                                </td>\r\n                                                                <td> {{ control.amount | divisa }} </td>\r\n                                                                <td>\r\n                                                                    <button type=\"button\" class=\"btn btn-link p-1 text-danger text-right\" (click)=\"eliminarPagos(control)\"> <i class=\"bi-trash\"></i> </button>\r\n                                                                </td>\r\n                                                            </tr>\r\n\r\n                                                        </tbody>\r\n                                                    </table>\r\n\r\n                                                </div>\r\n                                                <!-- TABLA -->\r\n\r\n                                                <!-- AGREGAR METODO DE PAGO -->\r\n                                                <div class=\"row g-3 d-flex justify-content-center\">\r\n\r\n                                                    <div class=\"col-auto\">\r\n\r\n                                                        <select class=\"form-select\" aria-label=\"Default select example\" (change)=\"typeAdd.value\" #typeAdd>\r\n                                                            <option *ngIf=\"invoiceForm.value.type === 'efectivo' || invoiceForm.value.type === 'mixto' || invoiceForm.value.type === 'credito'\" value=\"efectivo\">Efectivo</option>\r\n                                                            <ng-container *ngIf=\"invoiceForm.value.type !== 'efectivo'\">\r\n                                                                <option *ngFor=\"let banco of bancos\" [value]=\"banco.name\"> {{banco.name}}</option>                                                                \r\n                                                            </ng-container>\r\n                                                        </select>\r\n\r\n                                                    </div>\r\n\r\n                                                    <div class=\"col-auto\">\r\n                                                        <label for=\"Descripción\" class=\"visually-hidden\">Descripción</label>\r\n                                                        <input type=\"text\" class=\"form-control w100\" id=\"Descripción\" placeholder=\"Descripción\" (keyup)=\"descripcionAdd.value\" #descripcionAdd>\r\n                                                    </div>\r\n\r\n                                                    <div class=\"col-auto\">\r\n                                                        <label for=\"monto\" class=\"visually-hidden\">Monto</label>\r\n\r\n                                                        <ng-container *ngIf=\"factura\">\r\n                                                            <input type=\"number\" class=\"form-control\" id=\"monto\" placeholder=\"Monto\" [value]=\" vueltos \" autofocus=\"true\" (keyup)=\"montoAdd.value\" #montoAdd>\r\n                                                        </ng-container>\r\n\r\n                                                    </div>\r\n\r\n                                                    <div class=\"col-auto\">\r\n                                                        <button type=\"button\" class=\"btn btn-primary mb-3\" (click)=\"agregarPagos(typeAdd.value, montoAdd.nativeElement.value, descripcionAdd.value, tcredito.checked)\">Agregar</button>\r\n                                                    </div>\r\n\r\n                                                </div>\r\n                                                <!-- AGREGAR METODO DE PAGO -->\r\n\r\n                                            </div>\r\n\r\n\r\n                                        </form>\r\n                                        <!-- FORM INVOICE - FORM INVOICE -->\r\n\r\n                                    </div>\r\n\r\n                                </div>\r\n                            </div>\r\n\r\n\r\n                        </div>\r\n                        <!-- COLUMNA IZQ -->\r\n\r\n                    </div>\r\n\r\n                    <!-- BTN CREAR FACTURA -->\r\n                    <div class=\"my-4 float-end\">\r\n                        <button type=\"button\" (click)=\"guardarPago()\" class=\"btn btn-outline-primary\">\r\n\r\n                                    Guardar\r\n                        </button>\r\n                    </div>\r\n                    <!-- BTN CREAR FACTURA -->\r\n\r\n\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    MODAL FACTURAR \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    MODAL EDITAR VENCIMIENTO\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"editVencimiento\" tabindex=\"-1\" aria-labelledby=\"editVencimientoModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\">Cambiar fecha de vencimiento</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body p-0\">\r\n\r\n                <div class=\"container-fluid\">\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"exampleFormControlInput1\" class=\"form-label\">Seleccionar fecha nueva</label>\r\n                        <input type=\"datetime-local\" class=\"form-control\" id=\"exampleFormControlInput1\" #newVencimiento>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button (click)=\"actualizarVencimiento(newVencimiento.value)\" type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Actualizar</button>\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    MODAL EDITAR VENCIMIENTO \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    MODAL EDITAR CONTROL\r\n========================================================================= -->\r\n<div *ngIf=\"factura\" class=\"modal fade\" id=\"editControl\" tabindex=\"-1\" aria-labelledby=\"editControlModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\">Editar Control</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body p-0\">\r\n\r\n                <div class=\"container-fluid\">\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"exampleFormControlInput1Control\" class=\"form-label\"># Control</label>\r\n                        <input [value]=\"factura.control || 0\" type=\"number\" class=\"form-control\" id=\"exampleFormControlInput1Control\" #newControl>\r\n                        <small>**Solo numeros</small>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button (click)=\"updateControl(newControl.value)\" type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Actualizar</button>\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    MODAL EDITAR CONTROL \r\n========================================================================= -->\r\n<!-- =========================================================================\r\nUO IMGS\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"imgUp\" tabindex=\"-1\" aria-labelledby=\"imgUp\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"imgUp\">\r\n                    <i class=\"bi-reciept\" style=\"font-size: 1rem\"></i> Imagenes </h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n\r\n            <div class=\"modal-body\">\r\n\r\n                <div *ngIf=\"factura\" class=\"card\">\r\n\r\n                    <div class=\"card-body\">\r\n\r\n                        <div>\r\n                            <h4>Imagenes</h4>\r\n                            <p *ngIf=\"factura.images.length === 0\">No se han cargado las imagenes</p>\r\n                        </div>\r\n\r\n                        <!-- IMGS -->\r\n                        <div *ngIf=\"factura.images.length > 0\" class=\"mt-4 d-flex flex-wrap gap-2\">\r\n\r\n                            <div *ngFor=\"let file of factura.images\">\r\n                                <div style=\"background-image: url('{{ file.img | imagen }}');width: 150px; height: 150px; background-repeat: no-repeat; background-size: cover; background-position: center center;\">\r\n\r\n                                </div>\r\n                                <small class=\"gallery-item-caption\"> {{ file.date | date:'medium' }} </small>\r\n                                <!-- <div class=\"w-100 text-danger\">\r\n                                    <a class=\"text-decoration-none text-danger cursor fs-sm\" (click)=\"deleImg(file.img)\">\r\n                                        <i class=\"ti ti-trash\"></i> Eliminar\r\n                                    </a>\r\n                                </div> -->\r\n                            </div>\r\n\r\n                        </div>\r\n                        <!-- IMGS -->\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-facturas',\r\n  templateUrl: './facturas.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class FacturasComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Facturas</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"facturas-tab\" data-bs-toggle=\"tab\" href=\"#facturas\" role=\"tab\" aria-controls=\"facturas\" aria-selected=\"true\"><i class=\"bi-journal-check\" style=\"font-size: 1rem\"></i> Facturas</a>\r\n        </li>\r\n        <!-- <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"creditos-tab\" data-bs-toggle=\"tab\" href=\"#creditos\" role=\"tab\" aria-controls=\"creditos\" aria-selected=\"false\"><i class=\"bi-clock-history\" style=\"font-size: 1rem\"></i> Creditos</a>\r\n        </li> -->\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n<div class=\"tab-content mt-4 bg-light2\" id=\"myTabContent\">\r\n\r\n    <!-- TAB 1 -->\r\n    <div class=\"tab-pane fade show active\" id=\"facturas\" role=\"tabpanel\" aria-labelledby=\"facturas-tab\">\r\n        <app-total></app-total>\r\n    </div>\r\n    <!-- TAB 1 -->\r\n\r\n    <!-- TAB 2 -->\r\n    <!-- <div class=\"tab-pane fade\" id=\"creditos\" role=\"tabpanel\" aria-labelledby=\"creditos-tab\">\r\n        <app-credito></app-credito>\r\n    </div> -->\r\n    <!-- TAB 2 -->\r\n\r\n</div>\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\r\nimport Swal from 'sweetalert2';\r\n\r\n// SERVICES\r\nimport { InvoiceService } from '../../../services/invoice.service';\r\nimport { SearchService } from '../../../services/search.service';\r\nimport { MesasService } from '../../../services/mesas.service';\r\nimport { UserService } from '../../../services/user.service';\r\nimport { EmpresaService } from '../../../services/empresa.service';\r\n\r\n// INTERFACES\r\nimport { LoadInvoice } from '../../../interfaces/invoice.interface';\r\n\r\n// MODELS\r\nimport { Mesa } from '../../../models/mesas.model';\r\nimport { User } from '../../../models/user.model';\r\nimport { Datos, comisiones } from '../../../models/empresa.model';\r\nimport { Client } from 'src/app/models/client.model';\r\n\r\n// EXCEL\r\nimport * as XLSX from 'xlsx';\r\nimport { ImpuestosService } from 'src/app/services/impuestos.service';\r\nimport { Impuestos } from 'src/app/models/impuestos.model';\r\n\r\n@Component({\r\n  selector: 'app-total',\r\n  templateUrl: './total.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class TotalComponent implements OnInit {\r\n\r\n  public totalFacturas: number = 0;\r\n  public facturas: LoadInvoice[] = [];\r\n  public facturasTemp: LoadInvoice[] = [];;\r\n\r\n  // MESAS\r\n  public listaMesas: Mesa[] = [];\r\n  public listaMesasTemp: Mesa[] = [];\r\n  public totalMesas: number = 0;\r\n  // MESAS\r\n\r\n  public cargando: boolean = true;\r\n  public sinResultados: boolean = true;\r\n  public resultado: number = 0;\r\n  public desde: number = 0;\r\n\r\n  public btnAtras: string = '';\r\n  public btnAdelante: string = '';\r\n\r\n  public user!: User;\r\n\r\n  constructor(  private invoiceService: InvoiceService,\r\n                private searchService: SearchService,\r\n                private mesasService: MesasService,\r\n                private impuestosService: ImpuestosService,\r\n                private empresaService: EmpresaService,\r\n                private userService: UserService) { \r\n\r\n                  this.user = userService.user;\r\n\r\n                }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // CARGAR DATOS\r\n    this.cargarDatos();\r\n\r\n    // CARGAR MESAS\r\n    this.cargarMesas();\r\n\r\n    // CARGAR VENDEDORES\r\n    this.cargarVendedore();\r\n\r\n    // CARGAR FACTURAS\r\n    this.loadQueryInvoices();\r\n\r\n    // IMPUESTOS\r\n    this.cargarImpuestos();\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR IMPUESTOS\r\n  ==================================================================== */\r\n  public impuestos: Impuestos[] = [];\r\n  cargarImpuestos(){\r\n\r\n    this.impuestosService.loadImpuestos()\r\n        .subscribe( ({taxes}) => {\r\n\r\n          this.impuestos = taxes;\r\n\r\n          this.impuestos.map( impuesto => {\r\n            impuesto.total = 0;\r\n          });\r\n\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR CLIENTE\r\n  ==================================================================== */\r\n  public sinResultadosClientes: boolean = false;\r\n  public cargandoCliente: boolean = true;\r\n  public listaClientes: Client[] = [];\r\n  public listaClientesTemp: Client[] = [];\r\n  public totalClientes: number = 0;\r\n  @ViewChild('searchClient') searchClient: ElementRef;\r\n  buscarCliente(termino: string){\r\n\r\n    this.cargandoCliente = false;\r\n    this.sinResultadosClientes = false;\r\n\r\n    if (termino.length === 0) {\r\n      this.listaClientes = this.listaClientesTemp;\r\n      this.sinResultadosClientes = true;\r\n      this.cargandoCliente = true;\r\n      return;\r\n    }else{\r\n    \r\n      this.searchService.search('clients', termino)\r\n          .subscribe(({total, resultados}) => {   \r\n            \r\n          this.cargandoCliente = false;\r\n          \r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (resultados.length === 0) {\r\n            this.listaClientes = [];\r\n            this.totalClientes = 0;\r\n            this.sinResultadosClientes = true;\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          \r\n          this.listaClientes = resultados;\r\n          this.totalClientes = total;\r\n\r\n        });\r\n    }\r\n\r\n  }\r\n  /** ================================================================\r\n   *   BUSCAR FACTURA SEGUN EL CLIENTE\r\n  ==================================================================== */\r\n  searchInvoice(client: string){\r\n\r\n    this.listaClientes = [];\r\n    this.listaClientesTemp = [];\r\n    this.searchClient.nativeElement.value = '';\r\n\r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n\r\n    this.impuestos.map( impuesto => {\r\n      impuesto.total = 0;\r\n    });\r\n\r\n    this.searchService.search('invoice', client)\r\n        .subscribe( ({resultados}) => {\r\n\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (resultados.length === 0) {\r\n            this.sinResultados = false;\r\n            this.cargando = false;\r\n            this.facturas = [];\r\n            this.resultado = 0;\r\n            return;                \r\n          }\r\n          \r\n          this.facturas = resultados;\r\n          this.totalFacturas = resultados.length;\r\n          this.cargando = false;\r\n\r\n          for (const factura of resultados) {\r\n\r\n            if( this.empresa.impuesto ){\r\n\r\n              for (const product of factura.products) {\r\n  \r\n                this.impuestos.map( (impuesto) => {\r\n    \r\n                  if (impuesto.taxid === product.product.taxid) {\r\n                    \r\n                    impuesto.total += Math.round(((product.qty * product.price) * impuesto.valor)/100);\r\n  \r\n                  }\r\n    \r\n                });\r\n  \r\n              }\r\n  \r\n            }\r\n            \r\n          }\r\n\r\n          \r\n          \r\n        });\r\n    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR DATOS DE LA EMPRESA\r\n  ==================================================================== */\r\n  public empresa: Datos;\r\n  cargarDatos(){\r\n\r\n    this.empresaService.getDatos()\r\n        .subscribe( datos => {\r\n          this.empresa = datos;   \r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR VENDEDORES\r\n  ==================================================================== */\r\n  public vendedores: User[] = [];\r\n  cargarVendedore(){\r\n\r\n    this.userService.loadUsers()\r\n    .subscribe( ({users}) => {\r\n      \r\n      this.vendedores = users;\r\n      \r\n    }, (err) => { Swal.fire('Error', 'No se pueden cargar los vendedores', 'error') });\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *  CARGAR FACTURAS\r\n  ==================================================================== */\r\n  cargarFacturas(){\r\n\r\n    this.cargando = true;\r\n    this.sinResultados = true;   \r\n\r\n    this.impuestos.map( impuesto => {\r\n      impuesto.total = 0;\r\n    });\r\n\r\n    this.invoiceService.loadInvoices(this.desde)\r\n        .subscribe(({total, invoices}) => {\r\n          \r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (invoices.length === 0) {\r\n            this.sinResultados = false;\r\n            this.cargando = false;\r\n            this.facturas = [];\r\n            this.resultado = 0;\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n\r\n          this.totalFacturas = total;\r\n          this.facturas = invoices;\r\n          this.facturasTemp = invoices;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n\r\n          this.totalAmount = 0;\r\n          this.totalCost = 0;\r\n          this.totalIva = 0;\r\n          this.totalTip = 0;\r\n          \r\n          for (const factura of invoices) {\r\n            this.totalAmount += factura.amount;\r\n            this.totalCost += factura.cost;\r\n            this.totalIva += factura.iva;\r\n\r\n            if (factura.tip) {\r\n              this.totalTip += factura.tip;              \r\n            }\r\n            \r\n            for (const product of factura.products) {\r\n              \r\n              if (product.mayor) {                  \r\n                factura.mayor = true;\r\n              }\r\n              \r\n              \r\n              if( this.empresa.impuesto ){\r\n  \r\n                this.impuestos.map( (impuesto) => {\r\n    \r\n                  if (impuesto.taxid === product.product.taxid) {\r\n                    \r\n                    impuesto.total += Math.round(((product.qty * product.price) * impuesto.valor)/100);\r\n  \r\n                  }\r\n    \r\n                });\r\n  \r\n              }\r\n  \r\n            }\r\n            \r\n          }\r\n\r\n          // BOTONOS DE ADELANTE Y ATRAS          \r\n          if (this.desde === 0 && this.totalFacturas > 10) {\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = '';\r\n          }else if(this.desde === 0 && this.totalFacturas < 11){\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n          }else if((this.desde + 10) >= this.totalFacturas){\r\n            this.btnAtras = '';\r\n            this.btnAdelante = 'disabled';\r\n          }else{\r\n            this.btnAtras = '';\r\n            this.btnAdelante = '';\r\n          }   \r\n          // BOTONOS DE ADELANTE Y ATRAS  \r\n          \r\n\r\n        });\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR MESA\r\n  ==================================================================== */\r\n  public totalAmount: number = 0;\r\n  public totalCost: number = 0;\r\n  public totalIva: number = 0;\r\n  public totalTip: number = 0;\r\n\r\n  buscar(inicial:Date, final: Date, cajeros:string, estado:boolean, credito:boolean){\r\n\r\n    this.totalAmount = 0;    \r\n    this.totalCost = 0;    \r\n    this.totalIva = 0;    \r\n    this.totalTip = 0;    \r\n    this.sinResultados = true;\r\n\r\n    this.impuestos.map( impuesto => {\r\n      impuesto.total = 0;\r\n    });\r\n    \r\n    if (inicial === null && final === null) {\r\n      this.facturas = this.facturasTemp;\r\n      this.resultado = 0;\r\n      return;\r\n    }else{\r\n\r\n      if (!inicial) {\r\n        this.facturas = this.facturasTemp;\r\n        this.resultado = 0;\r\n        return;\r\n      }\r\n\r\n      // SET HOURS      \r\n      inicial = new Date(inicial);      \r\n      let initial = new Date(inicial.getTime() + 1000 * 60 * 60 * 5);\r\n\r\n      final = new Date(final);\r\n      let end = new Date(final.getTime() + 1000 * 60 * 60 * 5);      \r\n      // SET HOURS \r\n\r\n      let url = document.URL.split(':');\r\n      if (url[0] === 'https') {\r\n        initial = new Date(inicial.getTime() + 1000 * 60 * 60 - 7200000); \r\n        end = new Date(final.getTime() + 1000 * 60 * 60 - 3600000);        \r\n      }      \r\n               \r\n      this.sinResultados = true;\r\n      this.invoiceService.loadInvoicesDate(initial, end, cajeros, estado, credito)\r\n          .subscribe(({total, invoices, montos, costos, iva}) => {\r\n\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            if (invoices.length === 0) {\r\n              this.sinResultados = false;\r\n              this.facturas = [];\r\n              this.resultado = 0;\r\n              return;                \r\n            }\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            this.facturas = invoices; \r\n            this.resultado = invoices.length; \r\n            this.totalAmount = montos;\r\n            this.totalCost = costos;\r\n            this.totalIva = iva;\r\n\r\n            for (const factura of invoices) {\r\n              \r\n              if (factura.tip) {\r\n                this.totalTip += factura.tip;              \r\n              }\r\n              \r\n              for (const product of factura.products) {\r\n                \r\n                if (product.mayor) {                  \r\n                  factura.mayor = true;\r\n                }\r\n                \r\n                if( this.empresa.impuesto || this.empresa.tip ){\r\n                  if (product.product.taxid) {\r\n                    \r\n                    this.impuestos.map( (impuesto) => {\r\n        \r\n                      if (impuesto.taxid === product.product.taxid) {\r\n                        \r\n                        impuesto.total += Math.round(((product.qty * product.price) * impuesto.valor)/100);\r\n      \r\n                      }\r\n        \r\n                    });\r\n                  }    \r\n    \r\n                }\r\n    \r\n              }\r\n              \r\n            }\r\n\r\n            this.comisionCalcular(this.totalAmount);\r\n            \r\n\r\n          });\r\n          \r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CAMBIAR PAGINA\r\n  ==================================================================== */\r\n  @ViewChild('mostrar') mostrar!: ElementRef;\r\n  cambiarPagina (valor: number){\r\n    \r\n    this.query.desde += valor;\r\n\r\n    if (this.query.desde < 0) {\r\n      this.query.desde = 0;\r\n    }\r\n    \r\n    this.loadQueryInvoices();\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   CHANGE LIMITE\r\n  ==================================================================== */\r\n  limiteChange( cantidad: any ){  \r\n\r\n    this.query.hasta = Number(cantidad);    \r\n    this.loadQueryInvoices();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR MESAS\r\n  ==================================================================== */\r\n  cargarMesas(){\r\n\r\n    this.mesasService.loadMesas(this.desde)\r\n        .subscribe(({ total, mesas }) => {\r\n\r\n          this.listaMesas = mesas;\r\n          this.listaMesasTemp = mesas;\r\n          this.totalMesas = total;\r\n\r\n        })\r\n  }\r\n\r\n  /** ================================================================\r\n   *   FILTRAR POR RUTA\r\n  ==================================================================== */\r\n  public sumarMonto: number = 0;\r\n  filtroRuta (ruta: string){\r\n    \r\n    this.sumarMonto = 0;\r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n\r\n    this.facturas = this.facturasTemp;\r\n\r\n    const filtro1 = this.facturas.filter(function (el) {\r\n      return el.mesa.name == ruta;\r\n    });\r\n\r\n    this.cargando = false;\r\n    this.sinResultados = true;\r\n\r\n    let facturasF:number = 0;\r\n    for (let i = 0; i < filtro1.length; i++) {\r\n\r\n      facturasF += i;\r\n\r\n      if (filtro1[i].credito === false) { \r\n\r\n        this.facturas = filtro1;\r\n        this.sumarMonto += filtro1[i].amount;  \r\n\r\n      }      \r\n    }\r\n\r\n    if (facturasF === 0) {      \r\n      this.sinResultados = false;\r\n      this.sumarMonto = 0;\r\n      this.facturas = filtro1;\r\n    }\r\n\r\n        \r\n  }\r\n\r\n  /** ================================================================\r\n   *   CALCULAR COMISIONES\r\n  ==================================================================== */\r\n  public comision: number = 0;\r\n  public porcentaje: number = 0;\r\n  comisionCalcular(monto: number){\r\n\r\n    this.comision = 0;\r\n    this.porcentaje = 0;\r\n\r\n    for (const com of this.empresa.comisiones) {\r\n\r\n      if (monto >= com.monto) {\r\n        this.porcentaje = com.comision;\r\n      }\r\n\r\n    }\r\n\r\n    this.comision = (monto * this.porcentaje)/100;\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR POR PLACA\r\n  ==================================================================== */\r\n  buscarPlaca(placa: any){\r\n\r\n    this.totalAmount = 0;    \r\n    this.totalCost = 0;    \r\n    this.totalIva = 0;    \r\n    this.totalTip = 0;    \r\n    this.sinResultados = true;\r\n\r\n    this.impuestos.map( impuesto => {\r\n      impuesto.total = 0;\r\n    });\r\n\r\n    this.invoiceService.postQueryInvoice({placa})\r\n      .subscribe(({total, invoices, montos, costos, iva}) => {\r\n        \r\n        // COMPROBAR SI EXISTEN RESULTADOS\r\n        if (invoices.length === 0) {\r\n          this.sinResultados = false;\r\n          this.facturas = [];\r\n          this.resultado = 0;\r\n          return;                \r\n        }\r\n        // COMPROBAR SI EXISTEN RESULTADOS\r\n        this.facturas = invoices; \r\n        this.resultado = invoices.length; \r\n        this.totalAmount = montos;\r\n        this.totalCost = costos;\r\n        this.totalIva = iva;\r\n\r\n        this.comisionCalcular(this.totalAmount);\r\n\r\n        for (const factura of invoices) {\r\n          \r\n          \r\n          if (factura.tip) {\r\n            this.totalTip += factura.tip;              \r\n          }\r\n          for (const product of factura.products) {\r\n            \r\n\r\n            if (product.mayor) {                  \r\n              factura.mayor = true;                \r\n            }\r\n            \r\n            if( this.empresa.impuesto ){\r\n              this.impuestos.map( (impuesto) => {\r\n                \r\n                if (impuesto.taxid === product.product.taxid) {\r\n                  \r\n                  impuesto.total += Math.round(((product.qty * product.price) * impuesto.valor)/100);\r\n\r\n                }\r\n  \r\n              });\r\n\r\n            }\r\n\r\n          }\r\n        }\r\n        \r\n\r\n      }, (err) => {\r\n          console.log(err);          \r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR POR CONTROL\r\n  ==================================================================== */\r\n  buscarControl(control: any){\r\n\r\n    this.totalAmount = 0;    \r\n    this.totalCost = 0;    \r\n    this.totalIva = 0;    \r\n    this.totalTip = 0;    \r\n    this.sinResultados = true;\r\n\r\n    this.impuestos.map( impuesto => {\r\n      impuesto.total = 0;\r\n    });\r\n\r\n    this.invoiceService.postQueryInvoice({control})\r\n      .subscribe(({total, invoices, montos, costos, iva}) => {\r\n\r\n        // COMPROBAR SI EXISTEN RESULTADOS\r\n        if (invoices.length === 0) {\r\n          this.sinResultados = false;\r\n          this.facturas = [];\r\n          this.resultado = 0;\r\n          return;                \r\n        }\r\n        // COMPROBAR SI EXISTEN RESULTADOS\r\n        this.facturas = invoices; \r\n        this.resultado = invoices.length; \r\n        this.totalAmount = montos;\r\n        this.totalCost = costos;\r\n        this.totalIva = iva;\r\n\r\n        this.comisionCalcular(this.totalAmount);\r\n\r\n        for (const factura of invoices) {\r\n          \r\n          \r\n          if (factura.tip) {\r\n            this.totalTip += factura.tip;              \r\n          }\r\n          for (const product of factura.products) {\r\n            \r\n\r\n            if (product.mayor) {                  \r\n              factura.mayor = true;                \r\n            }\r\n            \r\n            if( this.empresa.impuesto ){\r\n              this.impuestos.map( (impuesto) => {\r\n                \r\n                if (impuesto.taxid === product.product.taxid) {\r\n                  \r\n                  impuesto.total += Math.round(((product.qty * product.price) * impuesto.valor)/100);\r\n\r\n                }\r\n  \r\n              });\r\n\r\n            }\r\n\r\n          }\r\n        }\r\n        \r\n\r\n      }, (err) => {\r\n          console.log(err);          \r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   EXPORTAR EXCEL\r\n  ==================================================================== */\r\n  exportar(){\r\n\r\n    let invoices = [];    \r\n\r\n    for (const invoi of this.facturas) {\r\n\r\n      let clienteName = `${invoi.client?.name || 'CONSUMIDOR FINAL'}`;\r\n      let clienteCedula = `${invoi.client?.cedula || '0000000'}`;\r\n      let usuario = `${invoi.user.name}`;\r\n      let number: any = invoi.invoice;\r\n      \r\n      if (invoi.cufe) {\r\n        number = invoi.number;        \r\n      }\r\n      \r\n\r\n      for (const item of invoi.products) {\r\n\r\n        if (item.product) {\r\n          \r\n          let porc = 0;\r\n          let tipeT = 'N/A';\r\n          if (item.product.tax) {\r\n            porc = item.product.taxid.valor || 0;\r\n            tipeT = item.product.taxid.name;\r\n          }\r\n          \r\n          invoices.push({\r\n            fecha: invoi.fecha,\r\n            invoice: number, \r\n            \"razón social\": clienteName,\r\n            \"Tipo de Documento\": invoi.client?.party_identification_type || 'CC',\r\n            \"Identificación\": clienteCedula,\r\n            \"Tipo de persona\": invoi.client?.party_type || 'PERSONA_NATURAL',\r\n            \"Tipo de regimen\": invoi.client?.tax_level_code || 'NO_RESPONSABLE_DE_IVA',\r\n            Codigo: item.product.code,\r\n            Producto: item.product.name,\r\n            Cantidad: item.qty,\r\n            \"Valor Sin IVA\": item.price,\r\n            \"Tipo de Impuesto\": tipeT,\r\n            \"IVA\": ((item.price * porc)/100).toFixed(2),\r\n            \"Porcentaje de IVA\": porc,\r\n            \"Total\": ((item.price+((item.price * porc)/100)) * item.qty).toFixed(2),\r\n            usuario\r\n          })\r\n        }\r\n      }\r\n      \r\n\r\n\r\n    }\r\n\r\n    /* generate a worksheet */\r\n    var ws = XLSX.utils.json_to_sheet(invoices);\r\n\r\n    /* add to workbook */\r\n    var wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, ws, \"Facturas\");\r\n\r\n    /* title */\r\n    let title = 'Invoices.xls';\r\n\r\n    /* write workbook and force a download */\r\n    XLSX.writeFile(wb, title);\r\n\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   RECARGAR\r\n  ==================================================================== */\r\n  recargar(){\r\n    this.query ={\r\n      desde: 0,\r\n      hasta: 50,\r\n      sort: {invoice: -1}\r\n    }\r\n\r\n    this.loadQueryInvoices();\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR QUERY\r\n  ==================================================================== */\r\n  public total: number = 0;\r\n  public query: any = {\r\n    desde: 0,\r\n    hasta: 50,\r\n    status: true,\r\n    sort: {invoice: -1}\r\n  }\r\n\r\n  loadQueryInvoices(){\r\n\r\n    this.totalAmount = 0;    \r\n    this.totalCost = 0;    \r\n    this.totalIva = 0;  \r\n    this.totalTip = 0;\r\n    this.totalAbonado = 0;\r\n    this.cargando = true;\r\n\r\n    this.impuestos.map( impuesto => {\r\n      impuesto.total = 0;\r\n    });\r\n\r\n    this.invoiceService.postQueryInvoice(this.query)\r\n        .subscribe( ({total, invoices, montos, costos, iva}) => {\r\n\r\n          this.total = total;\r\n          this.cargando = false;\r\n          this.facturas = invoices; \r\n          this.resultado = invoices.length; \r\n          this.totalAmount = montos;\r\n          this.totalCost = costos;\r\n          this.totalIva = iva;          \r\n\r\n        this.comisionCalcular(this.totalAmount);\r\n\r\n        for (const factura of invoices) {\r\n\r\n         \r\n\r\n          if (this.query.credito) {\r\n            for (const pago of factura.paymentsCredit) {              \r\n              this.totalAbonado += pago.amount;\r\n            }\r\n            \r\n            for (const pago of factura.payments) {              \r\n              this.totalAbonado += pago.amount;\r\n            }\r\n          }\r\n          \r\n          \r\n          if (factura.tip) {\r\n            this.totalTip += factura.tip;              \r\n          }\r\n\r\n          for (const product of factura.products) {            \r\n\r\n            if (product.mayor) {                  \r\n              factura.mayor = true;                \r\n            }\r\n            \r\n            if( this.empresa.impuesto && product.product.taxid ){\r\n              this.impuestos.map( (impuesto) => {\r\n                \r\n                if (product.product) {\r\n\r\n                  if (impuesto.taxid === product.product.taxid._id) {\r\n                    \r\n                    impuesto.total += Math.round(((product.qty * product.price) * impuesto.valor)/100);\r\n  \r\n                  }\r\n                  \r\n                }\r\n  \r\n              });\r\n\r\n            }\r\n\r\n          }\r\n        }\r\n          \r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SELECT VENDEDOR\r\n  ==================================================================== */\r\n  seletV(mesero: string) {\r\n\r\n    if(mesero === 'none'){\r\n      delete this.query.mesero;\r\n    }else{\r\n      this.query.mesero = mesero;\r\n    }\r\n\r\n    this.loadQueryInvoices();\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SELECT CLIENT\r\n  ==================================================================== */\r\n  public cliente: Client;\r\n  selectC(client: Client){\r\n\r\n    this.cliente = client;\r\n    this.query.client = this.cliente.cid!;\r\n    this.loadQueryInvoices();\r\n    this.searchClient.nativeElement.value = '';\r\n    this.listaClientes = [];\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   DELETE CLIENT CLIENT\r\n  ==================================================================== */\r\n  deleteClient(){\r\n    delete this.query.client;\r\n    delete this.cliente;\r\n    this.loadQueryInvoices();\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SEARCH FOR CONTROL\r\n  ==================================================================== */\r\n  searchInvoiceControl(control: any){\r\n\r\n    if (control.length === 0 || control === 0 || control < 0) {\r\n      delete this.query.control;\r\n    }else{\r\n      control = Number(control)\r\n      this.query.control = control;\r\n    }\r\n\r\n    this.loadQueryInvoices();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SEARCH FOR DATE\r\n  ==================================================================== */\r\n  searchForDates(inicial:Date, final: Date){\r\n\r\n    if (inicial === null && final === null || !inicial || !final) {\r\n      return;\r\n    }\r\n\r\n    // SET HOURS      \r\n    inicial = new Date(inicial);      \r\n    let initial = new Date(inicial.getTime() + 1000 * 60 * 60 * 5);\r\n\r\n    final = new Date(final);\r\n    let end = new Date(final.getTime() + 1000 * 60 * 60 * 5);      \r\n    // SET HOURS \r\n\r\n    let url = document.URL.split(':');\r\n    if (url[0] === 'https') {\r\n      initial = new Date(inicial.getTime() + 1000 * 60 * 60 - 7200000); \r\n      end = new Date(final.getTime() + 1000 * 60 * 60 - 3600000);        \r\n    }\r\n\r\n    this.query.$and = [{ fecha: { $gte: new Date(initial), $lt: new Date(end) } }];\r\n\r\n    this.loadQueryInvoices();   \r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   LOAD FOR STATUS\r\n  ==================================================================== */\r\n  searchStatus(status: boolean){\r\n\r\n    this.query.status = status;\r\n\r\n    this.loadQueryInvoices();   \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   TIPO DE FACTURA\r\n  ==================================================================== */\r\n  public totalAbonado: number = 0;\r\n  searchInvoiceType(type: string){\r\n\r\n    if (type === 'all') {\r\n      delete this.query.credito;      \r\n    }else if (type === 'credito') {\r\n      this.query.credito = true;      \r\n    }else{\r\n      this.query.credito = false;\r\n    }\r\n\r\n    this.loadQueryInvoices();\r\n\r\n  }\r\n\r\n\r\n  //  FIN DE LA CLASE\r\n}\r\n","<div class=\"container-fluid\">\r\n\r\n    <!-- TITLE - SUBTITLE -->\r\n    <div>\r\n        <h5 class=\"text-dark\">FACTURAS DE VENTAS</h5>\r\n        <p>Lista de todas las facturas de ventas.</p>\r\n    </div>\r\n    <!-- TITLE - SUBTITLE -->\r\n\r\n    <!-- TARJETAS -->\r\n    <div class=\"col-12\">\r\n\r\n        <div class=\"d-flex flex-wrap gap-2\">\r\n\r\n            <div class=\"col-xl-2 col-md-3 mb-4\">\r\n                <!-- Dashboard info widget 1-->\r\n                <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-primary h-100 bg-white\">\r\n                    <div class=\"card-body\">\r\n                        <div class=\"d-flex align-items-center flex-wrap\">\r\n                            <div class=\"flex-grow-1\">\r\n                                <div class=\"small font-weight-bold text-primary mb-1\">Monto Total Facturas</div>\r\n                                <div class=\"h5\">({{totalAmount | divisa}})</div>\r\n                                \r\n                            </div>\r\n                            <div class=\"ms-2\">\r\n                                <i class=\"bi bi-receipt text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div *ngIf=\"user.role === 'ADMIN'\" class=\"col-xl-2 col-md-3 mb-4\">\r\n                <!-- Dashboard info widget 1-->\r\n                <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-success h-100 bg-white\">\r\n                    <div class=\"card-body\">\r\n                        <div class=\"d-flex align-items-center flex-wrap\">\r\n                            <div class=\"flex-grow-1\">\r\n                                <div class=\"small font-weight-bold text-success mb-1\">Ganancia</div>\r\n                                <div class=\"h5\"> {{ totalAmount - totalCost | divisa }} </div>\r\n                                \r\n                            </div>\r\n                            <div class=\"ms-2\">\r\n                                <i class=\"bi bi-cash text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <ng-container *ngIf=\"empresa\">\r\n                <div class=\"col-xl-2 col-md-3 mb-4\" *ngIf=\"empresa.commission || empresa.commissions\">\r\n                    <!-- Dashboard info widget 1-->\r\n                    <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-info h-100 bg-white\">\r\n                        <div class=\"card-body\">\r\n                            <div class=\"d-flex align-items-center flex-wrap\">\r\n                                <div class=\"flex-grow-1\">\r\n                                    <div class=\"small font-weight-bold text-info mb-1\">Comision</div>\r\n                                    <div class=\"h5\"> ({{ comision | divisa}}) </div>\r\n                                    <div class=\"text-xs font-weight-bold text-info d-inline-flex align-items-center\">\r\n                                        {{ porcentaje }}%\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"ms-2\">\r\n                                    <i class=\"bi bi-percent text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </ng-container>\r\n\r\n            <ng-container *ngIf=\"empresa\">\r\n                <div class=\"col-xl-2 col-md-3 mb-4\" *ngIf=\"empresa.tip\">\r\n                    <!-- Dashboard info widget 1-->\r\n                    <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-info h-100 bg-white\">\r\n                        <div class=\"card-body\">\r\n                            <div class=\"d-flex align-items-center flex-wrap\">\r\n                                <div class=\"flex-grow-1\">\r\n                                    <div class=\"small font-weight-bold text-info mb-1\">Propinas</div>\r\n                                    <div class=\"h5\"> ({{ totalTip | divisa}}) </div>\r\n                                </div>\r\n                                <div class=\"ms-2\">\r\n                                    <i class=\"bi bi-coin text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </ng-container>\r\n\r\n            <ng-container *ngIf=\"empresa\">\r\n                <div class=\"col-xl-2 col-md-3 mb-4\" *ngFor=\"let impuesto of impuestos\">\r\n                    <!-- Dashboard info widget 1-->\r\n                    <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-info h-100 bg-white\">\r\n                        <div class=\"card-body\">\r\n                            <div class=\"d-flex align-items-center flex-wrap\">\r\n                                <div class=\"flex-grow-1\">\r\n                                    <div class=\"small font-weight-bold text-info mb-1\"> {{ impuesto.name }} </div>\r\n                                    <div class=\"h5\"> ({{ impuesto.total | divisa}}) </div>\r\n                                </div>\r\n                                <div class=\"ms-2\">\r\n                                    <i class=\"bi bi-cash text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </ng-container>\r\n\r\n            <div class=\"col-xl-2 col-md-3 mb-4\" *ngIf=\"query.credito\">\r\n                <!-- Dashboard info widget 1-->\r\n                <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-warning h-100 bg-white\">\r\n                    <div class=\"card-body\">\r\n                        <div class=\"d-flex align-items-center flex-wrap\">\r\n                            <div class=\"flex-grow-1\">\r\n                                <div class=\"small font-weight-bold text-warning mb-1\">Total Abonado</div>\r\n                                <div class=\"h5\"> {{ totalAbonado | divisa }} </div>\r\n                                \r\n                            </div>\r\n                            <div class=\"ms-2\">\r\n                                <i class=\"bi bi-cash text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"col-xl-2 col-md-3 mb-4\" *ngIf=\"query.credito\">\r\n                <!-- Dashboard info widget 1-->\r\n                <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-warning h-100 bg-white\">\r\n                    <div class=\"card-body\">\r\n                        <div class=\"d-flex align-items-center flex-wrap\">\r\n                            <div class=\"flex-grow-1\">\r\n                                <div class=\"small font-weight-bold text-warning mb-1\">Pendiente por cobrar</div>\r\n                                <div class=\"h5\"> {{ totalAmount - totalAbonado | divisa }} </div>\r\n                                \r\n                            </div>\r\n                            <div class=\"ms-2\">\r\n                                <i class=\"bi bi-cash text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <div class=\"row\">\r\n\r\n        <div class=\"col-md-3\">\r\n            <div class=\"shadow-lg mb-5 py-3 rounded bg-white text-break container\">\r\n\r\n                <!-- BUSCADOR DE CLIENTES  -->\r\n                <div class=\"mb-3\">\r\n                    <h4 class=\"text-muted\">Buscar Cliente</h4>\r\n                    <div *ngIf=\"cliente\" class=\"d-flex flex-wrap align-items-center \">\r\n                        <button type=\"button\" (click)=\"deleteClient()\" class=\"btn btn-link p-1 text-danger\"><i class=\"bi-trash\" style=\"font-size: 0.9rem\"></i></button>\r\n                        <samll  class=\"mb-0\">{{ cliente.name }} </samll>\r\n                    </div>\r\n                    <div>\r\n                        <input type=\"text\" class=\"form-control\" placeholder=\"buscar cliente\" (keyup)=\"buscarCliente(searchClient.value)\" #searchClient>\r\n                    </div>\r\n\r\n                    <div *ngIf=\"listaClientes.length > 0\" class=\"bg-white py-3 px-2 shadow\" style=\"position: absolute; z-index: 1020;\">\r\n\r\n                        <div *ngIf=\"cargandoCliente\" class=\"text-center py-3\">\r\n                            <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                                <span class=\"visually-hidden\">Loading...</span>\r\n                            </div>\r\n                            <div>\r\n                                <small class=\"text-muted\">Cargando...</small>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <ul *ngIf=\"!cargandoCliente\" class=\"list-group list-group-flush overflow-auto\" style=\"max-height: 200px; min-width: 250px;\">\r\n\r\n                            <li class=\"list-group-item\">\r\n                                <h6>Resultados: ({{ listaClientes.length }})</h6>\r\n                            </li>\r\n\r\n                            <li class=\"list-group-item\" *ngFor=\"let item of listaClientes\">\r\n                                <div class=\"d-flex \">\r\n                                    <div class=\"align-self-center\">\r\n                                        <span class=\"text-capitalize fw-bold\"> {{ item.name }} </span><br>\r\n                                        <small> C.C: {{ item.cedula }} </small>\r\n                                    </div>\r\n\r\n                                    <div class=\"ms-auto\">\r\n                                        <button class=\"btn btn-link p-1 text-success float-end\" (click)=\"selectC(item)\"> <i class=\"bi-arrow-90deg-right\"></i></button>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </li>\r\n                        </ul>\r\n\r\n                    </div>\r\n                </div>\r\n                <!-- BUSCADOR DE CLIENTES  -->\r\n\r\n                <h4 class=\"text-muted\">Filtros</h4>\r\n\r\n                <div class=\"col-12\">\r\n                    <h6 class=\"text-muted\">Activa ó Cancelada</h6>\r\n                    <div class=\"form-check form-switch\">\r\n                        <input (change)=\"searchStatus(estado.checked)\" class=\"form-check-input\" type=\"checkbox\" id=\"flexSwitchCheckChecked\" checked #estado>\r\n                        <label class=\"form-check-label\" for=\"flexSwitchCheckChecked\">\r\n                            <span *ngIf=\"estado.checked\">Todas las facturas</span>\r\n                            <span *ngIf=\"!estado.checked\">Solo las canceladas</span>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n\r\n                <hr>\r\n\r\n                <div class=\"form-group\">\r\n                    <h6 class=\"text-muted\">Tipo de factura</h6>\r\n                    <select class=\"form-select\" aria-label=\"Default select example\" (change)=\"searchInvoiceType(typeF.value)\" #typeF>\r\n                        <option value=\"all\" selected>Todas</option>\r\n                        <option value=\"facturas\">Facturas</option>\r\n                        <option value=\"credito\">Facturas a credito</option>\r\n                     </select>\r\n                </div>\r\n\r\n                <hr>\r\n\r\n                <div class=\"form-group\">\r\n                    <h6 class=\"text-muted\">Vendedores</h6>\r\n                    <select class=\"form-select\" aria-label=\"Default select example\" (change)=\"seletV(cajeros.value)\" #cajeros>\r\n                        <option value=\"none\" selected>Todos</option>\r\n                        <option [value]=\"vendedor.uid\" *ngFor=\"let vendedor of vendedores\">{{vendedor.name}}</option>\r\n                     </select>\r\n                </div>\r\n\r\n                <hr>\r\n\r\n                <div class=\"form-group\">\r\n                    <h6 class=\"text-muted\">Control</h6>\r\n                    <div>\r\n                        <input type=\"number\" min=\"0\" class=\"form-control\" placeholder=\"buscar por control\" (keyup.enter)=\"searchInvoiceControl(searchControl.value)\" #searchControl>\r\n                    </div>\r\n                </div>\r\n\r\n                \r\n                <ng-container *ngIf=\"empresa\">\r\n                    <hr [ngClass]=\"{'d-none': !empresa.placa}\" >\r\n                    <div [ngClass]=\"{'d-none': !empresa.placa}\" class=\"form-group\">\r\n                        <h6 class=\"text-muted\">Placa</h6>\r\n                        <div>\r\n                            <input type=\"text\" class=\"form-control\" placeholder=\"buscar por placa\" (keyup.enter)=\"buscarPlaca(searchPlaca.value)\" #searchPlaca>\r\n                        </div>\r\n                    </div>\r\n                </ng-container>\r\n\r\n                <hr>\r\n\r\n                <div class=\"form-group mb-3\">\r\n                    <label class=\"\" for=\"\">Desde</label>\r\n                    <input type=\"datetime-local\" class=\"form-control\" (change)=\"initial.value\" #initial>\r\n                </div>\r\n\r\n                <div class=\"form-group mb-3\">\r\n                    <label class=\"\" for=\"\">Hasta</label>\r\n                    <input type=\"datetime-local\" class=\"form-control\" (change)=\"end.value\" #end>\r\n                </div>\r\n                \r\n                <button type=\"button\" class=\"btn btn-outline-primary btn-sm py-auto w-100\" (click)=\"searchForDates(initial.value, end.value)\"> \r\n                    <i class=\"bi-search\"></i> Buscar \r\n                </button>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div class=\"col-md-9\">\r\n\r\n            <!-- TABLE FACTURAS -->\r\n            <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n                <!-- CARGANDO -->\r\n                <div *ngIf=\"cargando\">\r\n                    <div class=\"text-center p-4\">\r\n                        <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                            <span class=\"visually-hidden\">Loading...</span>\r\n                        </div>\r\n                    </div>\r\n                    <small class=\"text-muted\">cargando...</small>\r\n                </div>\r\n                <!-- CARGANDO -->\r\n\r\n                <div *ngIf=\"!cargando\">\r\n\r\n                    <!-- BUSCADOR -->\r\n                    <div class=\"d-flex justify-content-between flex-wrap\">\r\n\r\n                        <div>\r\n                            <button type=\"button\" class=\"btn btn-outline-primary btn-sm\" (click)=\"recargar()\"> <i class=\"bi-arrow-clockwise\"></i> Recargar </button>\r\n                            <button *ngIf=\"user.role === 'ADMIN'\" type=\"button\" class=\"ml-2 btn btn-outline-success btn-sm\" (click)=\"exportar()\"> <i class=\"bi-file-earmark-spreadsheet\"></i> Excel </button>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label for=\"mostrar\" class=\"me-2\">Mostrar: </label>\r\n                            <select name=\"\" id=\"\" [value]=\"query.hasta\" #mostrar (change)=\"limiteChange(mostrar.value)\">\r\n                                <option value=\"10\">10</option>\r\n                                <option value=\"25\">25</option>\r\n                                <option value=\"50\">50</option>\r\n                                <option value=\"100\">100</option>\r\n                                <option value=\"250\">250</option>\r\n                                <option value=\"500\">500</option>\r\n                                <option value=\"1000\">1000</option>\r\n                                <option value=\"5000\">5000</option>\r\n                                <option value=\"10000\">10000</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <!-- BUSCADOR -->\r\n\r\n                    <div class=\"table-responsive \">\r\n                        <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn overflow-auto\">\r\n                            <thead class=\"border-bottom \">\r\n                                <tr>\r\n                                    <th class=\"text-muted\" scope=\"col \">#</th>\r\n                                    <th class=\"text-muted\" scope=\"col \">Control</th>\r\n                                    <th class=\"text-muted\" scope=\"col \" colspan=\"2\">Cliente</th>\r\n                                    <th class=\"text-muted\" scope=\"col \">Cedula</th>\r\n                                    <th class=\"text-muted\" scope=\"col \" colspan=\"2\">Ticket</th>\r\n                                    <th class=\"text-muted\" scope=\"col \">Monto</th>\r\n                                    <th class=\"text-muted\" scope=\"col \">Metodo</th>\r\n                                    <th class=\"text-muted\" scope=\"col \">fecha</th>\r\n                                    <th class=\"text-muted\" scope=\"col \"></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr *ngIf=\"facturas.length === 0\" class=\"text-center \">\r\n                                    <th colspan=\"10\" class=\"py-4\">\r\n                                        <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                                    </th>\r\n                                </tr>\r\n\r\n                                <ng-container *ngFor=\"let factura of facturas; let i=index \">\r\n\r\n                                    <tr class=\"trHover\" tabindex=\"0\" data-bs-toggle=\"tooltip\" title=\"Cajero: {{ factura.user?.name }}\">\r\n                                        <th>\r\n                                            <span *ngIf=\"factura.electronica && !factura.send\" class=\"text-warning\"><i class=\"bi bi-exclamation-triangle\"></i></span>\r\n                                            <span *ngIf=\"!factura.cufe\">{{ factura.invoice }}</span>\r\n                                            <span *ngIf=\"factura.cufe\">{{factura.number }} </span>\r\n\r\n                                        </th>\r\n                                        <th>{{ factura.control }}</th>\r\n                                        <td colspan=\"2\">\r\n                                            {{ factura.client?.name || 'Consumidor Final' }}\r\n                                            <span *ngIf=\"!factura.status\" class=\"badge rounded-pill bg-danger\">Cancelada</span>\r\n                                            <span *ngIf=\"factura.credito && factura.status\" class=\"badge rounded-pill bg-warning\">Credito <small *ngIf=\"factura.apartado\">- Apartado</small> </span>\r\n                                            <span *ngIf=\"factura.mayor\" class=\"badge rounded-pill bg-success\">M </span>\r\n                                        </td>\r\n                                        <td> {{ factura.client?.cedula || '222222222222' }} </td>\r\n                                        <td colspan=\"2\"> {{ factura.mesa?.name }} </td>\r\n                                        <td> {{ factura.amount | divisa }} </td>\r\n                                        <td> {{ factura.type }} </td>\r\n                                        <td> {{ factura.fecha | date:'medium' }} </td>\r\n                                        <td class=\"text-center\">\r\n                                            <a [routerLink]=\"['/dashboard/factura', factura.iid]\" class=\"btn btn-link p-1 text-primary\"><i class=\"bi bi-box-arrow-up-right\"></i></a>\r\n                                            <a *ngIf=\"factura.pdf_url\" [href]=\"factura.pdf_url\" target=\"_blank\" class=\"btn btn-link p-1 text-danger\"><i class=\"bi bi-file-pdf\"></i></a>\r\n                                        </td>\r\n                                    </tr>\r\n\r\n                                </ng-container>\r\n\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                    <div class=\"row\">\r\n                        <div class=\"col col-md-4\">\r\n\r\n                            <small class=\"text-muted\">Total de facturas: ({{total}})</small>\r\n                            <small *ngIf=\"resultado !== 0\" class=\"text-muted\"> - (Resultados: {{ resultado }})</small>\r\n                            <small *ngIf=\"desde !== 0\" class=\"text-muted\"> - (Desde el: {{ desde + 1}} Hasta el: {{ desde + facturas.length }})</small>\r\n                            <small *ngIf=\"sumarMonto !== 0\" class=\"text-muted\"> - Monto: ({{sumarMonto}})</small>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col d-flex justify-content-end\">\r\n                            <button [disabled]=\"query.desde === 0\" type=\"button\" (click)=\"cambiarPagina((query.hasta * -1))\" class=\"btn btn-sm btn-dark btnW waves-effect waves-light px-3\">Anterior</button>\r\n                            <button [disabled]=\"query.hasta  > facturas.length || query.hasta > total\" type=\"button\" (click)=\"cambiarPagina(query.hasta)\" class=\"btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2\">Siguiente</button>\r\n                        </div>\r\n                    </div>\r\n                    <!-- BTN SIGUIENTE Y ANTERIORS -->\r\n\r\n                </div>\r\n\r\n            </div>\r\n            <!-- TABLE FACTURAS -->\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-inventario',\r\n  templateUrl: './inventario.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class InventarioComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<p>inventario works!</p>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-pages',\r\n  templateUrl: './pages.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class PagesComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<app-header></app-header>\r\n\r\n<router-outlet>\r\n\r\n\r\n</router-outlet>","import { NgModule, CUSTOM_ELEMENTS_SCHEMA   } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { NgxPrinterModule, ngxPrintMarkerPosition } from 'projects/ngx-printer/src/public_api';\r\n\r\n// MODULES\r\nimport { RouterModule } from '@angular/router';\r\nimport { PipesModule } from '../pipes/pipes.module';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { SharedModule } from '../shared/shared.module';\r\nimport { CalendarModule, DateAdapter  } from 'angular-calendar';\r\nimport { adapterFactory } from 'angular-calendar/date-adapters/date-fns';\r\n\r\n\r\n// COMPONENTS\r\nimport { PagesComponent } from './pages.component';\r\nimport { DashboardComponent } from './dashboard/dashboard.component';\r\nimport { VentasComponent } from './ventas/ventas.component';\r\nimport { ClientesComponent } from './clientes/clientes.component';\r\nimport { ProductosComponent } from './productos/productos.component';\r\nimport { InventarioComponent } from './inventario/inventario.component';\r\nimport { ComprasComponent } from './compras/compras.component';\r\nimport { ConfiguracionComponent } from './configuracion/configuracion.component';\r\nimport { FacturasComponent } from './facturas/facturas.component';\r\nimport { PerfilComponent } from './perfil/perfil.component';\r\nimport { ProductoComponent } from './productos/producto.component';\r\nimport { NuevoComponent } from './productos/nuevo/nuevo.component';\r\nimport { DepartamentosComponent } from './productos/departamentos/departamentos.component';\r\nimport { TicketComponent } from './ventas/ticket/ticket.component';\r\nimport { CajaComponent } from './configuracion/caja/caja.component';\r\nimport { UsuariosComponent } from './configuracion/usuarios/usuarios.component';\r\nimport { TotalComponent } from './facturas/total/total.component';\r\nimport { CreditoComponent } from './facturas/credito/credito.component';\r\nimport { FacturaComponent } from './facturas/factura/factura.component';\r\nimport { MesasComponent } from './configuracion/mesas/mesas.component';\r\nimport { MesaComponent } from './ventas/mesa/mesa.component';\r\nimport { EmpresaComponent } from './configuracion/empresa/empresa.component';\r\nimport { CorteComponent } from './corte/corte.component';\r\nimport { CierresComponent } from './configuracion/cierres/cierres.component';\r\nimport { PrintComponent } from './ventas/print/print.component';\r\nimport { MovimientosComponent } from './productos/movimientos/movimientos.component';\r\nimport { CategoriasComponent } from './productos/categorias/categorias.component';\r\nimport { CalendarioComponent } from './calendario/calendario.component';\r\nimport { PedidosComponent } from './pedidos/pedidos.component';\r\nimport { PedidoComponent } from './pedido/pedido.component';\r\nimport { ComandaComponent } from './comanda/comanda.component';\r\nimport { ProveedoresComponent } from './proveedores/proveedores.component';\r\nimport { KardexComponent } from './productos/kardex/kardex.component';\r\nimport { EntradasSalidasComponent } from './configuracion/entradas-salidas/entradas-salidas.component';\r\nimport { ImpuestosComponent } from './configuracion/impuestos/impuestos.component';\r\nimport { BancosComponent } from './configuracion/bancos/bancos.component';\r\nimport { EliminadosComponent } from './productos/eliminados/eliminados.component';\r\nimport { PrestamosComponent } from './configuracion/prestamos/prestamos.component';\r\nimport { PrestamoComponent } from './configuracion/prestamos/prestamo/prestamo.component';\r\nimport { AlquileresComponent } from './alquileres/alquileres.component';\r\nimport { AlquilerComponent } from './alquiler/alquiler.component';\r\nimport { ParqueaderoComponent } from './configuracion/parqueadero/parqueadero.component';\r\nimport { NgxBarcodeModule } from 'ngx-barcode';\r\nimport { ReportesComponent } from './configuracion/parqueadero/reportes/reportes.component';\r\nimport { DomiciliosComponent } from './domicilios/domicilios.component';\r\nimport { AgmCoreModule } from '@agm/core';\r\nimport { BodegasComponent } from './configuracion/bodegas/bodegas.component';\r\nimport { BodegaComponent } from './configuracion/bodega/bodega.component';\r\nimport { CompraComponent } from './compra/compra.component';\r\nimport { QRCodeModule } from 'angularx-qrcode';\r\nimport { VehiculosComponent } from './vehiculos/vehiculos.component';\r\nimport { PisosComponent } from './configuracion/mesas/pisos/pisos.component';\r\nimport { FacturasComprasComponent } from './compras/facturas-compras/facturas-compras.component';\r\nimport { TrasladosComponent } from './configuracion/traslados/traslados.component';\r\nimport { TrasladoComponent } from './configuracion/traslado/traslado.component';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PagesComponent,\r\n    DashboardComponent,\r\n    VentasComponent,\r\n    ClientesComponent,\r\n    ProductosComponent,\r\n    InventarioComponent,\r\n    ComprasComponent,\r\n    ConfiguracionComponent,\r\n    FacturasComponent,\r\n    PerfilComponent,\r\n    ProductoComponent,\r\n    NuevoComponent,\r\n    DepartamentosComponent,\r\n    TicketComponent,\r\n    CajaComponent,\r\n    UsuariosComponent,\r\n    TotalComponent,\r\n    CreditoComponent,\r\n    FacturaComponent,\r\n    MesasComponent,\r\n    MesaComponent,\r\n    EmpresaComponent,\r\n    CorteComponent,\r\n    CierresComponent,\r\n    PrintComponent,\r\n    MovimientosComponent,\r\n    CategoriasComponent,\r\n    CalendarioComponent,\r\n    PedidosComponent,\r\n    PedidoComponent,\r\n    ComandaComponent,\r\n    ProveedoresComponent,\r\n    KardexComponent,\r\n    EntradasSalidasComponent,\r\n    ImpuestosComponent,\r\n    BancosComponent,\r\n    EliminadosComponent,\r\n    PrestamosComponent,\r\n    PrestamoComponent,\r\n    AlquileresComponent,\r\n    AlquilerComponent,\r\n    ParqueaderoComponent,\r\n    ReportesComponent,\r\n    DomiciliosComponent,\r\n    BodegasComponent,\r\n    BodegaComponent,\r\n    CompraComponent,\r\n    VehiculosComponent,\r\n    PisosComponent,\r\n    FacturasComprasComponent,\r\n    TrasladosComponent,\r\n    TrasladoComponent\r\n  ],\r\n  exports: [\r\n    PagesComponent,\r\n    DashboardComponent,\r\n    VentasComponent,\r\n    ClientesComponent,\r\n    ImpuestosComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule,\r\n    SharedModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    PipesModule,\r\n    NgxPrinterModule.forRoot({printOpenWindow: true}),\r\n    CalendarModule.forRoot({ provide: DateAdapter, useFactory: adapterFactory }),\r\n    NgxBarcodeModule,\r\n    QRCodeModule,\r\n    AgmCoreModule.forRoot({\r\n      apiKey: 'AIzaSyAn1G1jlkmzrY2pA1_Rd2-fsJ3Csp9dBDM'\r\n    })\r\n  ],\r\n  schemas: [ CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\nexport class PagesModule { }\r\n","import { Routes, RouterModule } from '@angular/router';\r\nimport { NgModule } from '@angular/core';\r\n\r\n// GUARD\r\nimport { AuthGuard } from '../guards/auth.guard';\r\nimport { AdminGuard } from '../guards/admin.guard';\r\nimport { WaiterGuard } from '../guards/waiter.guard';\r\n\r\n// COMPONENTS\r\nimport { PagesComponent } from './pages.component';\r\nimport { DashboardComponent } from './dashboard/dashboard.component';\r\nimport { ClientesComponent } from './clientes/clientes.component';\r\nimport { VentasComponent } from './ventas/ventas.component';\r\nimport { ProductosComponent } from './productos/productos.component';\r\nimport { InventarioComponent } from './inventario/inventario.component';\r\nimport { ComprasComponent } from './compras/compras.component';\r\nimport { ConfiguracionComponent } from './configuracion/configuracion.component';\r\nimport { FacturasComponent } from './facturas/facturas.component';\r\nimport { PerfilComponent } from './perfil/perfil.component';\r\nimport { ProductoComponent } from './productos/producto.component';\r\nimport { CajaComponent } from './configuracion/caja/caja.component';\r\nimport { UsuariosComponent } from './configuracion/usuarios/usuarios.component';\r\nimport { FacturaComponent } from './facturas/factura/factura.component';\r\nimport { MesasComponent } from './configuracion/mesas/mesas.component';\r\nimport { MesaComponent } from './ventas/mesa/mesa.component';\r\nimport { EmpresaComponent } from './configuracion/empresa/empresa.component';\r\nimport { CorteComponent } from './corte/corte.component';\r\nimport { CierresComponent } from './configuracion/cierres/cierres.component';\r\nimport { PrintComponent } from './ventas/print/print.component';\r\nimport { MovimientosComponent } from './productos/movimientos/movimientos.component';\r\nimport { NuevoComponent } from './productos/nuevo/nuevo.component';\r\nimport { DepartamentosComponent } from './productos/departamentos/departamentos.component';\r\nimport { CategoriasComponent } from './productos/categorias/categorias.component';\r\nimport { CalendarioComponent } from './calendario/calendario.component';\r\nimport { PedidosComponent } from './pedidos/pedidos.component';\r\nimport { PedidoComponent } from './pedido/pedido.component';\r\nimport { ComandaComponent } from './comanda/comanda.component';\r\nimport { ProveedoresComponent } from './proveedores/proveedores.component';\r\nimport { KardexComponent } from './productos/kardex/kardex.component';\r\nimport { EntradasSalidasComponent } from './configuracion/entradas-salidas/entradas-salidas.component';\r\nimport { ImpuestosComponent } from './configuracion/impuestos/impuestos.component';\r\nimport { BancosComponent } from './configuracion/bancos/bancos.component';\r\nimport { EliminadosComponent } from './productos/eliminados/eliminados.component';\r\nimport { PrestamosComponent } from './configuracion/prestamos/prestamos.component';\r\nimport { PrestamoComponent } from './configuracion/prestamos/prestamo/prestamo.component';\r\nimport { AlquileresComponent } from './alquileres/alquileres.component';\r\nimport { AlquilerComponent } from './alquiler/alquiler.component';\r\nimport { ParqueaderoComponent } from './configuracion/parqueadero/parqueadero.component';\r\nimport { ReportesComponent } from './configuracion/parqueadero/reportes/reportes.component';\r\nimport { DomiciliosComponent } from './domicilios/domicilios.component';\r\nimport { BodegasComponent } from './configuracion/bodegas/bodegas.component';\r\nimport { BodegaComponent } from './configuracion/bodega/bodega.component';\r\nimport { CompraComponent } from './compra/compra.component';\r\nimport { WaiterGuardPrivate } from '../guards/waiterPrivate.guard';\r\nimport { VehiculosComponent } from './vehiculos/vehiculos.component';\r\nimport { FacturasComprasComponent } from './compras/facturas-compras/facturas-compras.component';\r\nimport { TrasladosComponent } from './configuracion/traslados/traslados.component';\r\nimport { TrasladoComponent } from './configuracion/traslado/traslado.component';\r\n\r\nconst routes: Routes = [\r\n    \r\n    { \r\n        path: 'dashboard', \r\n        component: PagesComponent,\r\n        canActivate: [AuthGuard],\r\n        children: [\r\n    \r\n          { path: '', component: DashboardComponent, data:{ titulo: 'Dashboard'} },\r\n          { path: 'alquileres', component: AlquileresComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Alquileres'} },\r\n          { path: 'alquiler/:id', component: AlquilerComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Alquiler'} },\r\n          { path: 'domicilios', component: DomiciliosComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Domicilios'} },\r\n          { path: 'calendario', component: CalendarioComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Calendario'} },\r\n          { path: 'clientes', component: ClientesComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Clientes'} },\r\n          { path: 'comandas', component: ComandaComponent, data:{ titulo: 'Comandas'} },\r\n          { path: 'compra/:id', component: CompraComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Compra'} },\r\n          \r\n          { path: 'configuracion', component: ConfiguracionComponent, canActivate: [AdminGuard], data:{ titulo: 'Configuracion'} },\r\n          { path: 'configuracion/bancos', component: BancosComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Bancos'} },\r\n          { path: 'configuracion/bodegas', component: BodegasComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Bodegas'} },\r\n          { path: 'configuracion/bodega/:id', component: BodegaComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Bodega'} },\r\n          { path: 'configuracion/caja', component: CajaComponent, canActivate: [AdminGuard], data:{ titulo: 'Caja' } },\r\n          { path: 'configuracion/compras', component: ComprasComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Compras' } },\r\n          { path: 'configuracion/cierres', component: CierresComponent, canActivate: [AdminGuard, WaiterGuardPrivate], data:{ titulo: 'Cierres' } },\r\n          { path: 'configuracion/empresa', component: EmpresaComponent, canActivate: [AdminGuard, WaiterGuardPrivate], data:{ titulo: 'Mi Empresa' } },\r\n          { path: 'configuracion/mesas', component: MesasComponent, canActivate: [AdminGuard], data:{ titulo: 'Mesas' } },\r\n          { path: 'configuracion/usuarios', component: UsuariosComponent, canActivate: [AdminGuard, WaiterGuardPrivate], data:{ titulo: 'Usuarios' } },\r\n          { path: 'configuracion/impuestos', component: ImpuestosComponent,  canActivate: [AdminGuard, WaiterGuardPrivate], data:{ titulo: 'Impuestos'} },\r\n          \r\n          { path: 'configuracion/prestamos', component: PrestamosComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Prestamos'} },\r\n          { path: 'configuracion/prestamo/:id', component: PrestamoComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Prestamo'} },\r\n          { path: 'configuracion/parqueadero', component: ParqueaderoComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Parqueadero'} },\r\n          { path: 'configuracion/traslados', component: TrasladosComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Traslados'} },\r\n          { path: 'configuracion/traslado/:id', component: TrasladoComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Traslados'} },\r\n          { path: 'parqueadero/reportes', component: ReportesComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Reportes'} },\r\n          \r\n          { path: 'corte', component: CorteComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Corte'} },\r\n\r\n\r\n          { path: 'facturas', component: FacturasComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Facturas'} },\r\n          { path: 'factura/:id', component: FacturaComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Detalles de factura' } },\r\n          { path: 'facturas-compras', component: FacturasComprasComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Facturas de compras'} },\r\n          \r\n          { path: 'inventario', component: InventarioComponent,  canActivate: [AdminGuard, WaiterGuardPrivate], data:{ titulo: 'Inventario'} },\r\n          { path: 'perfil', component: PerfilComponent, data:{ titulo: 'Perfil'} },\r\n\r\n          { path: 'entradas-salidas', component: EntradasSalidasComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Entradas y Salidas'} },\r\n\r\n          { path: 'pedido/:id', component: PedidoComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Pedido'} },\r\n          { path: 'pedidos', component: PedidosComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Pedidos'} },\r\n\r\n          { path: 'productos', component: ProductosComponent,  canActivate: [AdminGuard, WaiterGuardPrivate], data:{ titulo: 'Productos'} },\r\n          { path: 'producto/:id', component: ProductoComponent,  canActivate: [AdminGuard, WaiterGuardPrivate], data:{ titulo: 'Producto'} },\r\n          { path: 'productos/movimientos', component: MovimientosComponent,  canActivate: [AdminGuard, WaiterGuardPrivate], data:{ titulo: 'Movimientos'} },\r\n          { path: 'productos/nuevo', component: NuevoComponent,  canActivate: [AdminGuard, WaiterGuardPrivate], data:{ titulo: 'Crear Producto Nuevo'} },\r\n          { path: 'productos/departamento', component: DepartamentosComponent,  canActivate: [AdminGuard, WaiterGuardPrivate], data:{ titulo: 'Departamentos'} },\r\n          { path: 'productos/categorias', component: CategoriasComponent,  canActivate: [AdminGuard, WaiterGuardPrivate], data:{ titulo: 'Categorias'} },\r\n          { path: 'productos/kardex', component: KardexComponent, canActivate: [WaiterGuardPrivate], data:{ titulo: 'Kardex'} },\r\n          { path: 'productos/eliminados', component: EliminadosComponent,  canActivate: [AdminGuard, WaiterGuardPrivate],  data:{ titulo: 'Kardex'} },\r\n          \r\n          { path: 'proveedores', component: ProveedoresComponent,  canActivate: [AdminGuard, AdminGuard], data:{ titulo: 'Kardex'} },\r\n          \r\n          { path: 'vehiculos', component: VehiculosComponent,  canActivate: [AdminGuard], data:{ titulo: 'Vehiculos'} },\r\n          { path: 'ventas', component: VentasComponent,  canActivate: [WaiterGuard], data:{ titulo: 'Ventas'} },\r\n          { path: 'ventas/mesa/:id', component: MesaComponent,  canActivate: [WaiterGuard], data:{ titulo: 'Mesa'} },\r\n          { path: 'ventas/print/:id', component: PrintComponent,  canActivate: [WaiterGuard], data:{ titulo: 'Imprimir Factura'} }\r\n              \r\n        ]\r\n      },    \r\n];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forChild(routes)],\r\n    exports: [RouterModule]\r\n})\r\nexport class PagesRoutingModule {}\r\n","import { Component, ElementRef, OnInit, TemplateRef, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\n\r\n// PRINTER\r\nimport { NgxPrinterService } from 'projects/ngx-printer/src/lib/ngx-printer.service';\r\nimport { PrintItem } from 'projects/ngx-printer/src/lib/print-item';\r\nimport { ngxPrintMarkerPosition } from 'projects/ngx-printer/src/public_api';\r\n\r\n// SERVICES\r\nimport { PedidosService } from '../../services/pedidos.service';\r\n\r\n// MODELS\r\nimport { Pedido } from 'src/app/models/pedido.models';\r\nimport Swal from 'sweetalert2';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { EmpresaService } from '../../services/empresa.service';\r\nimport { Datos } from '../../models/empresa.model';\r\nimport { ImpuestosService } from 'src/app/services/impuestos.service';\r\nimport { Impuestos } from 'src/app/models/impuestos.model';\r\nimport { ClientService } from 'src/app/services/client.service';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Client } from 'src/app/models/client.model';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport { InvoiceService } from 'src/app/services/invoice.service';\r\nimport { Invoice } from 'src/app/models/invoice.model';\r\nimport { LoadInvoice } from 'src/app/interfaces/invoice.interface';\r\nimport { MesasService } from 'src/app/services/mesas.service';\r\nimport { User } from 'src/app/models/user.model';\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport { ElectronicaService } from 'src/app/services/electronica.service';\r\nimport { DataicoService } from 'src/app/services/dataico.service';\r\nimport { DataicoInterface } from 'src/app/interfaces/dataico.interface';\r\nimport { BancosService } from 'src/app/services/bancos.service';\r\nimport { Banco } from 'src/app/models/bancos.model';\r\n\r\ninterface _Department {\r\n  codigo: string,\r\n  departamento: string,\r\n}\r\n\r\n@Component({\r\n  selector: 'app-pedido',\r\n  templateUrl: './pedido.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class PedidoComponent implements OnInit {\r\n\r\n  @ViewChild('PrintTemplate')\r\n  private PrintTemplateTpl: TemplateRef<any>;\r\n\r\n  title = 'ngx-printer-demo';\r\n\r\n  printWindowSubscription: Subscription;\r\n  $printItems: Observable<PrintItem[]>;\r\n  public user: User;\r\n\r\n  constructor(  private printerService: NgxPrinterService,\r\n                private pedidosService: PedidosService,\r\n                private clientService: ClientService,\r\n                private invoiceService: InvoiceService,\r\n                private http: HttpClient,\r\n                private fb: FormBuilder,\r\n                private mesasService: MesasService,\r\n                private bancosService: BancosService,\r\n                private activatedRoute: ActivatedRoute,\r\n                private impuestosService: ImpuestosService,\r\n                private electronicaService: ElectronicaService,\r\n                private dataicoService: DataicoService,\r\n                private userService: UserService,\r\n                private empresaService: EmpresaService) {\r\n\r\n                  this.user = userService.user;\r\n\r\n                  this.printWindowSubscription = this.printerService.$printWindowOpen.subscribe(\r\n                    val => {\r\n                      console.log('Print window is open:', val);\r\n                    }\r\n                  );\r\n              \r\n                  this.$printItems = this.printerService.$printItems;\r\n\r\n                 }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.cargarImpuestos();\r\n    this.cargarDatos();\r\n    this.loadDepartmentAndCitys();\r\n    this.loadTicket();\r\n    this.loadDataDataico();\r\n    this.cargarBancos();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR MESA\r\n  ==================================================================== */\r\n  public ticket: string = '';\r\n  loadTicket(){\r\n\r\n    this.mesasService.loadMesas(0)\r\n        .subscribe( ({mesas}) => {\r\n          \r\n          this.ticket = mesas[0].mid;\r\n\r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n     *   CARGAR BANCOS\r\n    ==================================================================== */\r\n    public bancos: Banco[] = [];\r\n    cargarBancos(){\r\n  \r\n      this.bancosService.loadBancos()\r\n          .subscribe( ({bancos}) => {\r\n  \r\n            this.bancos = bancos.filter( banco => banco.status === true);          \r\n  \r\n          });\r\n  \r\n    }\r\n\r\n  /** ================================================================\r\n     *  OBTENER DATOS DE LA FACTURA ELECTRONICA\r\n    ==================================================================== */\r\n    public dataDataico: boolean = false;\r\n    public dataico: DataicoInterface;\r\n    loadDataDataico(){\r\n  \r\n      this.dataicoService.loadDataDataico()\r\n          .subscribe( ({dataico}) => {\r\n  \r\n            delete dataico.actions._id;\r\n            delete dataico.actions.email;\r\n            delete dataico.actions.attachments;\r\n            delete dataico.datid;\r\n            delete dataico.customer;\r\n            delete dataico.numbering._id;\r\n  \r\n            if (dataico) {\r\n              this.dataDataico = true;\r\n              this.dataico = dataico;\r\n            }          \r\n  \r\n          }, (err) => {\r\n            console.log(err);\r\n            \r\n          });\r\n  \r\n    }\r\n\r\n  /** ================================================================\r\n     *   CARGAR IMPUESTOS\r\n    ==================================================================== */\r\n    public impuestos: Impuestos[] = [];\r\n    cargarImpuestos(){\r\n  \r\n      this.impuestosService.loadImpuestos()\r\n          .subscribe( ({taxes}) => {\r\n  \r\n            this.impuestos = taxes;\r\n  \r\n            this.impuestos.map( impuesto => {\r\n              impuesto.total = 0;\r\n            })\r\n  \r\n  \r\n            this.activatedRoute.params.subscribe( ({id}) => {\r\n  \r\n              this.pedidoID = id;\r\n      \r\n              this.cargarPedido(this.pedidoID);\r\n              \r\n            });\r\n  \r\n          });\r\n  \r\n    }\r\n\r\n  /** ================================================================\r\n   *   IMPRIMIR\r\n  ==================================================================== */\r\n  printDiv() {\r\n    this.printerService.printDiv('printDiv');\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR DATOS DE LA EMPRESA\r\n  ==================================================================== */\r\n  public empresa: Datos;\r\n  cargarDatos(){\r\n\r\n    this.empresaService.getDatos()\r\n        .subscribe( datos => {\r\n          this.empresa = datos;   \r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR PEDIDO\r\n  ==================================================================== */\r\n  public pedido: any;\r\n  public pedidoID: string;  \r\n  public base: number = 0;\r\n  public iva: number = 0;\r\n\r\n  cargarPedido(id: string){\r\n    \r\n    this.pedidosService.loadPedidoOne(id)\r\n        .subscribe( ({pedido}) => {\r\n\r\n          this.pedido = pedido;\r\n          console.log(pedido);\r\n          \r\n\r\n          for (const product of pedido.products) {\r\n\r\n            this.base += product.price;\r\n            \r\n            if( this.empresa.impuesto ){\r\n\r\n              if(product.product.taxid){\r\n\r\n                this.impuestos.map( (impuesto) => {\r\n    \r\n                  if (impuesto.taxid === product.product.taxid._id) {                  \r\n                    impuesto.total += Math.round(((product.qty * product.price) * impuesto.valor)/100);\r\n                    this.iva += impuesto.total;\r\n                  }\r\n    \r\n                });              \r\n              }\r\n\r\n            }\r\n\r\n          }\r\n\r\n          this.cargagarFactura();\r\n          \r\n          \r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR FACTURA\r\n  ==================================================================== */\r\n  public factura!: LoadInvoice;\r\n  cargagarFactura(){\r\n\r\n    this.invoiceService.postQueryInvoice( {pedido: this.pedido.peid} )\r\n        .subscribe( ({invoices}) => {\r\n\r\n          if (invoices.length > 0) {\r\n            this.factura = invoices[0]\r\n          }\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CAMBIAR ESTADO DEL PEDIDO\r\n  ==================================================================== */\r\n  cambiarEstado(estado: string){\r\n\r\n    this.pedido.estado = estado;\r\n\r\n    this.pedidosService.actualizarEstatusPedido(this.pedido, this.pedidoID)\r\n        .subscribe( (resp: {pedido}) => {\r\n\r\n          this.pedido = resp.pedido;\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); }); \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CANCELAR PEDIDO\r\n  ==================================================================== */\r\n  cancelarPedido(){\r\n\r\n    Swal.fire({\r\n      title: 'Estas Seguro?',\r\n      text: \"De cancelar este pedido!\",\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: 'Si, cancelar!'\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n\r\n        this.pedido.status = false;\r\n        this.pedido.estado = 'Cancelado';\r\n\r\n        this.pedidosService.actualizarEstatusPedido(this.pedido, this.pedidoID)\r\n        .subscribe( (resp: {pedido}) => {\r\n\r\n          this.pedido = resp.pedido;\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n      }\r\n\r\n\r\n    });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n     *  OBTENER DEPARTAMENTOS Y CIUDADES\r\n    ==================================================================== */\r\n    public departments: _Department[] = [];\r\n    public cities: any[] = [];\r\n    loadDepartmentAndCitys(){\r\n  \r\n      this.http.get('assets/json/departamentos.json')\r\n          .subscribe( (data: any) => {          \r\n            this.departments = data;            \r\n          });\r\n  \r\n      this.http.get('assets/json/ciudades.json')\r\n      .subscribe( (data: any) => {          \r\n        this.cities = data;          \r\n      })\r\n  \r\n    }\r\n  \r\n      /** ================================================================\r\n     *  OBTENER CIUDADES DEPENDIENDO DEL DEPARTAMENTO\r\n    ==================================================================== */\r\n    public ListCities: any[] = [];\r\n    searchCities(department: string){\r\n  \r\n      this.ListCities = [];\r\n  \r\n      if (department.length === 0 ) {\r\n        return;\r\n      }\r\n  \r\n      this.ListCities = this.cities.filter( city =>  department === city.departamento );\r\n  \r\n    }\r\n  \r\n    /** ================================================================\r\n     *  SELECCIONAR CLIENTE searchClient\r\n    ==================================================================== */\r\n    seleccionarCliente(pedido: Pedido){\r\n\r\n      this.newClientForm.setValue({\r\n\r\n        party_type: 'PERSONA_NATURAL',\r\n        tax_level_code: 'NO_RESPONSABLE_DE_IVA',\r\n        party_identification_type: 'CC',\r\n        company_name: '',\r\n        first_name: pedido.cliente.first_name,\r\n        family_name: pedido.cliente.family_name,\r\n        department: '',\r\n        address_line: pedido.direccion,\r\n        regimen: 'SIMPLE',\r\n        party_identification: '',\r\n        codigodepartamento: '',\r\n        codigociudad: '',\r\n        sendemail: false,\r\n        name: pedido.cliente.first_name +' '+pedido.cliente.family_name,\r\n        cedula: pedido.cliente.cedula,\r\n        email: '',\r\n        phone: pedido.telefono,\r\n        city: '',\r\n        address: pedido.direccion,\r\n\r\n      })\r\n          \r\n    }\r\n  \r\n    /** ================================================================\r\n     *  CREAR CLIENTE\r\n    ==================================================================== */\r\n    @ViewChild('btnCreateClient') btnCreateClient: ElementRef<any>;\r\n    public formSubmitted: boolean = false;\r\n    public newClientForm = this.fb.group({\r\n      party_type: ['PERSONA_NATURAL', [Validators.required]],\r\n      tax_level_code: ['NO_RESPONSABLE_DE_IVA', [Validators.required]],\r\n      party_identification_type: ['CC', [Validators.required]],\r\n      company_name: '',\r\n      first_name: '',\r\n      family_name: '',\r\n      department: '',\r\n      address_line: '',\r\n      regimen: ['SIMPLE',],\r\n      party_identification: '',\r\n      codigodepartamento: '',\r\n      codigociudad: '',\r\n      sendemail: false,\r\n      // OLD\r\n      name: '',\r\n      cedula: ['', [Validators.required, Validators.minLength(6)]],\r\n      email: ['', [Validators.required]],\r\n      phone: ['', [Validators.required]],\r\n      city: '',\r\n      address: ['', [Validators.required]]\r\n    });\r\n    \r\n  \r\n    async crearCliente(){    \r\n  \r\n      this.formSubmitted = true;\r\n  \r\n      if (this.newClientForm.invalid) {\r\n        return;\r\n      }\r\n  \r\n      // OBTENER CODIGO DEL DEPARTAMENTO Y CIUDAD\r\n      let codigoD = await this.departments.find( departamento => this.newClientForm.value.department === departamento.departamento );\r\n      let codigoC = await this.cities.find( city => this.newClientForm.value.city === city.ciudad );\r\n      this.newClientForm.value.codigodepartamento  = codigoD.codigo;\r\n      this.newClientForm.value.codigociudad  = codigoC.codigo;\r\n  \r\n      if (this.newClientForm.value.party_type === 'PERSONA_NATURAL') {      \r\n        this.newClientForm.value.name = `${this.newClientForm.value.first_name} ${this.newClientForm.value.family_name}`\r\n      }else{\r\n        this.newClientForm.value.name = this.newClientForm.value.company_name;\r\n      }\r\n  \r\n      this.newClientForm.value.party_identification = this.newClientForm.value.cedula;\r\n  \r\n      this.clientService.createClient(this.newClientForm.value)\r\n          .subscribe(({client}) => {            \r\n\r\n            this.pedidosService.actualizarEstatusPedido({client: client.cid, clientedb: true}, this.pedido.peid)\r\n                .subscribe( (resp: {pedido}) => {\r\n                  this.pedido.client = resp.pedido.client;\r\n                  this.pedido.clientedb = resp.pedido.clientedb;\r\n\r\n                  Swal.fire('Estupendo', 'Se ha creado el cliente exitosamente!', 'success');\r\n        \r\n                  this.formSubmitted = false;\r\n                  this.newClientForm.reset();          \r\n                }, (err) => {\r\n                  console.log(err);\r\n                  Swal.fire('Error', err.error.msg, 'error');                  \r\n                })\r\n  \r\n            \r\n          }, (err) =>{\r\n            Swal.fire('Error', err.error.msg, 'error');\r\n          });\r\n  \r\n    }\r\n  \r\n    /** ================================================================\r\n     *  CAMPO VALIDO\r\n    ==================================================================== */\r\n    campoValido(campo: string): boolean{\r\n  \r\n      if (this.formSubmitted && this.newClientForm.get(campo).invalid) {\r\n        return true;\r\n      }else{\r\n        return false;\r\n      }\r\n    \r\n    }\r\n\r\n    /** ================================================================\r\n   *   PAGOS\r\n  ==================================================================== */\r\n  @ViewChild ('montoP') montoP!: ElementRef;\r\n  public payments: any[] = [];\r\n  public restante: number = 0;\r\n  public total: number = 0;\r\n  addPay(monto: any, type: string){\r\n\r\n    monto = Number(monto);\r\n    if (this.payments.length > 0 && this.restante >= 0 ) {\r\n      return;\r\n    }\r\n\r\n    if(monto > (this.restante * -1 ) && this.restante < 0){\r\n      monto = (this.restante * -1);\r\n    }\r\n\r\n    this.payments.push({\r\n      type,\r\n      amount: monto,\r\n      description: ''\r\n    });\r\n\r\n    this.restante = 0;\r\n    for (const pay of this.payments) {\r\n      this.restante = this.restante + pay.amount;\r\n    }\r\n\r\n    this.restante = this.restante - this.pedido.amount;    \r\n\r\n  }\r\n\r\n  delPay(pay: any){    \r\n\r\n    this.payments.splice( pay, 1 );\r\n    this.restante = 0;\r\n    for (const pay of this.payments) {\r\n      this.restante = this.restante + pay.amount;\r\n    }\r\n\r\n    this.restante = this.restante - this.pedido.amount;\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREAR FACTURA\r\n  ==================================================================== */\r\n  public facturando: boolean = false;\r\n  crearFactura( send_dian: boolean ){\r\n\r\n    this.facturando = true;\r\n\r\n    let data: any = {\r\n      amount: this.pedido.amount,\r\n      cost: 0,\r\n      type: 'efectivo',\r\n      payments: this.payments, \r\n      products: this.pedido.products,\r\n      credito: false,\r\n      mesa: this.ticket,\r\n      mesero: this.user.uid,\r\n      fechaCredito: '',\r\n      turno: this.user.turno,\r\n      iva: this.iva,\r\n      base: this.base,\r\n      pago: this.pedido.amount,\r\n      vueltos: 0,\r\n      nota: this.pedido.comentario,\r\n      apartado: false,\r\n      descuento: false,\r\n      porcentaje: 0,\r\n      pedido: this.pedido.peid,\r\n      fecha: new Date(),\r\n      tip: 0,\r\n      datafon: 0,\r\n    }\r\n\r\n    this.invoiceService.createInvoice(data, this.user.turno)\r\n        .subscribe( (resp:{ok: boolean, invoice: LoadInvoice } ) => {\r\n          this.factura = resp.invoice;\r\n          if (this.empresa.electronica && send_dian) {\r\n            \r\n            this.electronicaService.postFacturaDataico(this.factura, this.dataico, this.impuestos)\r\n                .subscribe( (resp: {status, invoice, ok}) => {\r\n                                          \r\n                  if (resp.status === 500) {\r\n                    Swal.fire('Atención', 'No se pudo enviar la factura electronica a la DIAN, ve a la factura y vuelve a enviarla, si el problema persiste, ponte en contacto', 'warning');\r\n                    window.open(`./dashboard/factura/${ this.factura.iid }`, '_blank');\r\n                  }\r\n                  if (resp.invoice.cufe) {\r\n                    this.factura.cufe = resp.invoice.cufe;\r\n                    this.factura.number = resp.invoice.number;\r\n                  }\r\n                  window.open(`./dashboard/factura/${ this.factura.iid }`, '_blank');\r\n                    setTimeout( () => {        \r\n                      window.location.reload();\r\n                    },1000);\r\n                  \r\n                }, (err) => {\r\n                  console.log(err);\r\n                  \r\n                });\r\n            \r\n            \r\n          }else{\r\n            \r\n            window.open(`./dashboard/factura/${ this.factura.iid }`, '_blank');\r\n            setTimeout( () => {        \r\n              window.location.reload();\r\n            },1000);\r\n          }\r\n          \r\n        })\r\n    \r\n   \r\n  \r\n  }\r\n\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">PEDIDO</h5>\r\n    </div>\r\n\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"pedidos-tab\"><i class=\"bi-journal-check\" style=\"font-size: 1rem\"></i> Pedido <span *ngIf=\"pedido\"> #{{pedido.pedido}} </span> </a>\r\n        </li>\r\n\r\n    </ul>\r\n\r\n</header>\r\n\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<div class=\"container-fluid\">\r\n\r\n\r\n    <ng-container *ngIf=\"pedido\">\r\n        <!-- TITLE - SUBTITLE -->\r\n        <div class=\"mt-4\">\r\n            <h5 class=\"text-dark\">DETALLES DEL PEDIDO #{{ pedido.pedido }}</h5>\r\n\r\n        </div>\r\n        <!-- TITLE - SUBTITLE -->\r\n\r\n        <div class=\"row d-flex align-items-center\">\r\n\r\n            <div class=\"col-auto\">\r\n                <select class=\"form-select\" aria-label=\"Default select example\" [disabled]=\" pedido.status === false \" [value]=\"pedido.estado\" (change)=\"cambiarEstado(pedidoEstado.value)\" #pedidoEstado>\r\n                    <option value=\"Pendiente\">Pendiente</option>\r\n                    <option value=\"Procesando\">Procesando</option>\r\n                    <option value=\"Enviado\">Enviado</option>\r\n                    <option value=\"Entregado\">Entregado</option>\r\n                </select>\r\n            </div>\r\n\r\n            <div class=\"col-auto\" *ngIf=\"empresa\">\r\n\r\n                <button (click)=\"printDiv()\" type=\"button\" class=\"btn btn-outline-primary btn-sm mx-1 my-2\"> \r\n                    <i class=\"bi-printer\"></i> Imprimir\r\n                </button>\r\n            </div>\r\n\r\n\r\n            <div class=\"col-auto\">\r\n\r\n                <button (click)=\"cancelarPedido(pedido.peid)\" [disabled]=\" pedido.status === false \" type=\"button\" class=\"btn btn-outline-danger btn-sm mx-1 my-2\"> \r\n                    <i class=\"bi-arrow-counterclockwise\"></i> Cancelar Pedido\r\n                </button>\r\n            </div>\r\n\r\n            <div *ngIf=\"factura\" class=\"col-auto\">\r\n\r\n                <a href=\"./dashboard/factura/{{ this.factura.iid }}\" target=\"_blank\"  [disabled]=\"!pedido.status\" class=\"btn btn-success btn-sm mx-1 my-2\"> \r\n                    <i class=\"bi-receipt\"></i> Ver Facturar\r\n                </a>\r\n            </div>\r\n\r\n            <div *ngIf=\"!factura\" class=\"col-auto\">\r\n                \r\n                <button [disabled]=\"!pedido.status\" type=\"button\" class=\"btn btn-success btn-sm mx-1 my-2\" data-bs-toggle=\"modal\" data-bs-target=\"#crearFacturaM\"> \r\n                    <i class=\"bi-receipt\"></i> Facturar\r\n                </button>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div class=\"row\">\r\n\r\n\r\n            <!-- DETALLES DE LA pedido -->\r\n            <div class=\"col-md-8 shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n                <div id=\"printDiv\">\r\n\r\n                    <!-- ESTADO -->\r\n                    <span *ngIf=\"pedido.estado\" class=\"badge rounded-pill bg-warning text-dark mb-2\" [ngClass]=\"{'bg-success': pedido.estado == 'Entregado', \r\n                                        'bg-warning': pedido.estado == 'Pendiente',\r\n                                        'bg-info text-white': pedido.estado == 'Procesando',\r\n                                        'bg-primary text-white': pedido.estado == 'Enviado',\r\n                                        'bg-danger text-white': pedido.estado == 'Cancelado'}\">\r\n                                        {{pedido.estado}}\r\n                    </span>\r\n\r\n                    <!-- INFORMACION DEL CLIENTE -->\r\n                    <div class=\"row\">\r\n\r\n                        <!-- Informacion del Cliente -->\r\n                        <div class=\"col-md-8 text-left text-muted\" style=\"color:black\">\r\n\r\n                            <div class=\"d-flex flex-wrap gap-1\">\r\n\r\n                                <div *ngIf=\"empresa\">\r\n                                    <!-- Image Product-->\r\n                                    <img *ngIf=\"empresa.logo\" [src]=\" empresa.logo | imagen:'logo'\" class=\"mx-auto\" width=\"120px\" alt=\"\">\r\n                                </div>\r\n\r\n                                <div *ngIf=\"pedido.client\">\r\n                                    <p style=\"font-size: 0.9rem;\" class=\"mb-0 text-dark\"> <strong>RAZON SOCIAL:</strong> <small> {{ pedido.client?.name || 'Consumidor Final' }}</small> </p>\r\n\r\n                                    <p style=\"font-size: 0.9rem;\" class=\"mb-0 text-dark\"> <strong>CC/NIT:</strong> <small> {{ pedido.client?.cedula || '222222222222' }}</small> </p>\r\n\r\n                                    <p style=\"font-size: 0.9rem;\" *ngIf=\"pedido.client?.phone\" class=\"mb-0 text-dark\"> <strong>Telefono:</strong> <small> {{ pedido.client?.phone || '--- --------' }}</small> </p>\r\n\r\n                                    <p style=\"font-size: 0.9rem;\" *ngIf=\"pedido.client?.email\" class=\"mb-0 text-dark\"> <strong>Correo:</strong> <small> {{ pedido.client?.email || ''}}</small> </p>\r\n\r\n                                    <p style=\"font-size: 0.9rem;\" *ngIf=\"pedido.client?.address\" class=\"mb-0 text-dark\"> <strong>Dirección:</strong> <small> {{ pedido.client?.address || ''}}</small> </p>\r\n\r\n                                </div>\r\n\r\n                                <div *ngIf=\"!pedido.client && pedido.cliente\" >\r\n                                    <button type=\"button\" class=\"btn btn-sm btn-success\" data-bs-toggle=\"modal\" data-bs-target=\"#crearClienteM\" (click)=\"seleccionarCliente(pedido)\"> Agregar Cliente </button>\r\n                                    <p style=\"font-size: 0.9rem;\" class=\"mb-0 text-dark\"> <strong>RAZON SOCIAL:</strong> <small> {{ pedido.cliente.first_name + ' '+ pedido.cliente.family_name || 'Consumidor Final' }}</small> </p>\r\n\r\n                                    <p style=\"font-size: 0.9rem;\" class=\"mb-0 text-dark\"> <strong>CC/NIT:</strong> <small> {{ pedido.cliente.cedula || '222222222222' }}</small> </p>\r\n\r\n                                    <p style=\"font-size: 0.9rem;\" class=\"mb-0 text-dark\"> <strong>Telefono:</strong> <small> {{ pedido.telefono || '--- --------' }}</small> </p>\r\n\r\n                                    <p style=\"font-size: 0.9rem;\" class=\"mb-0 text-dark\"> <strong>Ciudad:</strong> <small> {{ pedido.ciudad || ''}}</small> </p>\r\n                                    <p style=\"font-size: 0.9rem;\" class=\"mb-0 text-dark\"> <strong>Dirección:</strong> <small> {{ pedido.direccion || ''}}</small> </p>\r\n                                </div>\r\n                            </div>\r\n\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col\">\r\n                            <div class=\"col-12\" *ngIf=\"empresa\">\r\n                                <!-- <div class=\"mb-2 d-flex justify-content-end\">\r\n                                <img *ngIf=\"empresa.logo\" src=\"{{empresa.logo | imagen:'logo'}}\" class=\"\" width=\"200px\" alt=\"\">\r\n                            </div> -->\r\n                                <h5 class=\"text-muted mb-0 d-flex justify-content-end text-wrap text-end fw-bold\"> {{ empresa.name }} </h5>\r\n                                <p class=\"text-muted mb-0 d-flex justify-content-end text-wrap text-end\"> {{ empresa.address }} </p>\r\n                                <p class=\"text-muted mb-0 d-flex justify-content-end text-wrap text-end\">Nit: {{ empresa.nit }} </p>\r\n\r\n                                <small *ngIf=\"!empresa.responsable\" class=\"mb-0 d-flex justify-content-end\"> No responsable de IVA </small>\r\n                                <small *ngIf=\"empresa.responsable && !empresa.impuestoconsumo\" class=\"mb-0 d-flex justify-content-end\"> Responsable de iva </small>\r\n                                <small *ngIf=\"empresa.responsable && empresa.impuestoconsumo\" class=\"mb-0 d-flex justify-content-end\"> Responsable nacional al consumo </small>\r\n\r\n                                <small *ngIf=\"empresa.responsable\" class=\"mb-0 d-flex justify-content-end\"> Resolución: {{ empresa.resolucion }} </small>\r\n                                <small *ngIf=\"empresa.responsable\" class=\"mb-0 d-flex justify-content-end\"> Prefijo Pos: {{ empresa.prefijopos }} </small>\r\n                                <h3 class=\"display-5 mb-0 d-flex justify-content-end text-primary\"> {{ pedido.pedido }} </h3>\r\n                                <small class=\"mb-0 d-flex justify-content-end\"> {{ pedido.fecha | date:'medium' }} </small>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <!-- INFORMACION DEL CLIENTE -->\r\n\r\n                    <!-- INFORMACION DE LA pedido -->\r\n                    <!-- <ng-container *ngIf=\"empresa\">\r\n                        <h4 *ngIf=\"!empresa.responsable\" class=\"text-center text-wrap\"> Registro de operación de Venta </h4>\r\n                        <h4 *ngIf=\"empresa.responsable\" class=\"text-center text-wrap\"> pedido de venta pos </h4>\r\n                    </ng-container> -->\r\n\r\n                    <h4 *ngIf=\"!pedido.status\" class=\"text-center text-danger\"> CANCELADO </h4>\r\n\r\n\r\n                    <div class=\" table-responsive \">\r\n\r\n                        <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                            <thead class=\"border-bottom \">\r\n                                <tr>\r\n                                    <th class=\"text-muted\" scope=\"col\">#</th>\r\n                                    <th class=\"text-muted\" scope=\"col\">Codigo de barras</th>\r\n                                    <th class=\"text-muted text-left\" scope=\"col \" colspan=\"2 \">Nombre del Producto</th>\r\n                                    <th class=\"text-muted\" scope=\"col\">tipo</th>\r\n                                    <th class=\"text-muted\" scope=\"col\">Precio</th>\r\n                                    <th class=\"text-muted\" scope=\"col\">Cantidad</th>\r\n                                    <th class=\"text-muted\" scope=\"col\">Monto</th>\r\n                                    <th></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n\r\n                                <tr *ngFor=\"let producto of pedido.products; let i = index\">\r\n                                    <th> {{ i + 1 }} </th>\r\n                                    <td><small class=\"text-wrap\">{{ producto.product.code }}</small></td>\r\n                                    <td colspan=\"2\">{{ producto.product.name }}</td>\r\n                                    <td>{{ producto.product.type }}</td>\r\n                                    <td>{{ producto.price | divisa}}</td>\r\n                                    <td class=\"text-center\">{{ producto.qty }}</td>\r\n                                    <td>{{ producto.price * producto.qty | divisa}}</td>\r\n                                    <td>\r\n                                        <button type=\"button\" class=\"btn btn-link p-1 text-warning\" (click)=\"devolverProducto(producto)\">\r\n                                        <i class=\"bi-arrow-90deg-left\"></i>\r\n                                    </button>\r\n                                        <button type=\"button\" (click)=\"eliminarProducto(producto._id)\" class=\"btn btn-link p-1 text-danger\">\r\n                                        <i class=\"bi-x\"></i>\r\n                                    </button>\r\n                                    </td>\r\n                                </tr>\r\n\r\n                            </tbody>\r\n                        </table>\r\n\r\n                    </div>\r\n\r\n                    <!-- TOTAL -->\r\n                    <div>\r\n                        <div class=\"d-flex py-2\">\r\n\r\n                            <div class=\"text-wrap px-2\">\r\n                                <h6 *ngIf=\"pedido.comentario\">Nota:</h6>\r\n                                <p *ngIf=\"pedido.comentario\"> {{ pedido.comentario }} </p>\r\n                            </div>\r\n\r\n                            <div class=\"ms-auto d-flex justify-content-end\">\r\n                                <div class=\"border-start col px-4\" *ngIf=\"empresa\">\r\n\r\n                                    <!-- NO RESPONSABLE -->\r\n                                    <h6 class=\"mb-0 text-wrap text-primary text-rigth\"> {{ base | divisa }} </h6>\r\n                                    <!-- NO RESPONSABLE -->\r\n\r\n                                    <h6 *ngIf=\"!empresa.impuesto\" class=\"mb-0 text-wrap text-primary text-left\">No responsable de IVA</h6>\r\n\r\n                                    <!-- IMPUESTO -->\r\n                                    <ng-container *ngIf=\"empresa.impuesto\">\r\n                                        <ng-container *ngFor=\"let impuesto of impuestos\">\r\n                                            <h6 class=\"mb-0 text-wrap text-primary text-left\" *ngIf=\"impuesto.total > 0\">{{impuesto.name}} {{ impuesto.total | divisa }}</h6>\r\n                                        </ng-container>\r\n                                    </ng-container>\r\n                                    <!-- IMPUESTO -->\r\n\r\n                                    <!-- TOTAL -->\r\n                                    <h5 class=\"display-6 fw-bold text-primary\">{{ pedido.amount | divisa }}</h5>\r\n                                    <!-- TOTAL -->\r\n\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                    <!-- TOTAL -->\r\n\r\n                </div>\r\n\r\n                <!-- INFORMACION DE LA pedido -->\r\n\r\n            </div>\r\n            <!-- DETALLES DE LA pedido -->\r\n\r\n            <!-- PAGOS -->\r\n            <div class=\"col-md-4\">\r\n\r\n                <!-- TABLE CLIENTS -->\r\n                <div class=\"shadow-lg p-3 mb-5 rounded bg-white\" style=\"max-height: 400px; height: auto;\">\r\n                    <h5 class=\"\">\r\n                        Pagos\r\n                    </h5>\r\n                    <!-- CARGANDO -->\r\n                    <div *ngIf=\"cargandoAgotados\">\r\n                        <div class=\"text-center p-4\">\r\n                            <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                                <span class=\"visually-hidden\">Loading...</span>\r\n                            </div>\r\n                        </div>\r\n                        <small class=\"text-muted\">cargando...</small>\r\n                    </div>\r\n                    <!-- CARGANDO -->\r\n\r\n                    <div *ngIf=\"!cargandoAgotados\" style=\"max-height: 100vh\">\r\n\r\n                        <div class=\"table-responsive \" class=\"overflow-auto\" style=\"max-height: 200px;\">\r\n                            <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                                <thead class=\"border-bottom \">\r\n                                    <tr>\r\n                                        <th class=\"text-muted \" scope=\"col \">Descripcion</th>\r\n                                        <th class=\"text-muted \" scope=\"col \">Tipo</th>\r\n                                        <th class=\"text-muted \" scope=\"col \">Monto</th>\r\n                                    </tr>\r\n                                </thead>\r\n\r\n                                <tbody>\r\n\r\n                                    <tr class=\"trHover\" *ngFor=\"let pay of payments; let i = index\">\r\n                                        <td>\r\n                                            <span *ngIf=\"pay.description !== ''\">{{ pay.description }}</span>\r\n                                            <span *ngIf=\"pay.description === ''\">Sin descripción</span>\r\n                                        </td>\r\n                                        <td>{{ pay.type }}</td>\r\n                                        <td>{{ pay.amount | divisa }} </td>\r\n                                    </tr>\r\n\r\n                                </tbody>\r\n                                <tfoot>\r\n                                    <tr class=\"border-top\">\r\n                                        <td colspan=\"2\"> <span class=\"fw-bold\"> Total </span></td>\r\n                                        <td> <span class=\"fw-bold\">{{this.totalPagos | currency }}</span> </td>\r\n                                    </tr>\r\n                                </tfoot>\r\n\r\n                            </table>\r\n\r\n                        </div>\r\n\r\n                        <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                        <!-- <div class=\"row\">\r\n                            <div class=\"col\">\r\n                                <small class=\"text-muted\">Total de pagos: ({{payments.length}})</small>\r\n                            </div>\r\n                        </div> -->\r\n                        <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n                    </div>\r\n                </div>\r\n                <!-- TABLE CLIENTS -->\r\n\r\n                <!-- CONFIRMACION DE PEDIDOS -->\r\n                <div *ngIf=\"pedido.confirmado\" class=\"shadow-lg p-3 mb-5 rounded bg-white\" style=\"max-height: 400px; height: auto;\">\r\n                    <h5 class=\"\">\r\n                        Feedback del cliente\r\n                    </h5>\r\n\r\n                    <div>\r\n                        <h4 *ngIf=\"pedido.feedback.recibido\" class=\"bi bi-check2-all text-center text-success fs-1 mb-0\"></h4>\r\n                        <p *ngIf=\"pedido.feedback.recibido\" class=\"mb-2 text-success text-center\">Entrega Confirmada</p>\r\n                        <h4 *ngIf=\"!pedido.feedback.recibido\" class=\"bi bi-exclamation-triangle text-center text-warning fs-1 mb-0\"></h4>\r\n                        <p *ngIf=\"!pedido.feedback.recibido\" class=\"mb-2 text-warning text-center\">No se a confirmado la entrega</p>\r\n                        <p class=\"mb-1 text-break\"><span class=\"fw-bold\">Nota: </span>{{ pedido.feedback.nota }} </p>\r\n                        <p class=\"mb-1\"><span class=\"fw-bold\">Fecha: </span> {{ pedido.feedback.date | date:'medium' }} </p>\r\n                    </div>\r\n                </div>\r\n                <!-- CONFIRMACION DE PEDIDOS -->\r\n\r\n\r\n            </div>\r\n            <!-- PAGOS -->\r\n\r\n        </div>\r\n\r\n    </ng-container>\r\n\r\n\r\n\r\n</div>\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    MODAL CREAR CLIENTE \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"crearClienteM\" tabindex=\"-1\" aria-labelledby=\"crearClienteMModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"crearClienteMModal\"><i class=\"bi-people\" style=\"font-size: 1rem\"></i>Crear Cliente</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n                <div class=\"mt-2\">\r\n\r\n                    <form autocomplete=\"off\" [formGroup]=\"newClientForm\" (ngSubmit)=\"crearCliente()\">\r\n\r\n                        <!-- =======================================================================\r\n                            DATOS PERSONALES \r\n                        =========================================================================== -->\r\n\r\n                        <div class=\"row mb-2\">\r\n\r\n                            <!-- Tipo de empresa ** -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"partyType\" class=\"col-sm-auto col-form-label\">Tipo de empresa</label>\r\n                                <select formControlName=\"party_type\" class=\"form-select\" id=\"partyType\" #partyType (change)=\"partyType.value\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"PERSONA_NATURAL\">Persona Natural</option>\r\n                                    <option value=\"PERSONA_JURIDICA\" >Persona Juridica</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- Nombre de la empresa -->\r\n                            <div *ngIf=\"partyType.value === 'PERSONA_JURIDICA'\" class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"companyName\">Nombre de la empresa </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"companyName\" formControlName=\"company_name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombre de la empresa\">\r\n                                    <label for=\"floatingInput\">Nombre de la empresa </label>\r\n                                </div>\r\n                                <p *ngIf=\"campoValido('company_name')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <!-- Nombres de la persona natural -->\r\n                            <div *ngIf=\"partyType.value === 'PERSONA_NATURAL'\" class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"firstName\">Nombres de la persona natural </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"firstName\" formControlName=\"first_name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombres de la persona natural\">\r\n                                    <label for=\"floatingInput\">Nombres de la persona natural </label>\r\n                                </div>\r\n                                <p *ngIf=\"campoValido('first_name')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <!-- Apellidos de la persona natural -->\r\n                            <div *ngIf=\"partyType.value === 'PERSONA_NATURAL'\" class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"familyName\">Apellidos de la persona natural </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"familyName\" formControlName=\"family_name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Apellidos de la persona natural\">\r\n                                    <label for=\"floatingInput\">Apellidos de la persona natural </label>\r\n                                </div>\r\n                                <p *ngIf=\"campoValido('family_name')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <!-- TIPO DE DOCUMENTO -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"indentityType\" class=\"col-sm-auto col-form-label\">Tipo de documento</label>\r\n                                <select formControlName=\"party_identification_type\" class=\"form-select\" id=\"indentityType\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"NIT\">NIT</option>\r\n                                    <option value=\"CC\" selected>CC</option>\r\n                                    <option value=\"PASAPORTE\" >PASAPORTE</option>\r\n                                    <option value=\"CE\" >CE</option>\r\n                                    <option value=\"TE\" >TE</option>\r\n                                    <option value=\"PEP\" >PEP</option>\r\n                                    <option value=\"TI\" >TI</option>\r\n                                    <option value=\"RC\" >RC</option>\r\n                                    <option value=\"IE\" >IE</option>\r\n                                    <option value=\"NIT_OTRO_PAIS\" >Nit de otro pais</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- CEDULA O NIT -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"cedula\">CC / NIT </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"cedula\" formControlName=\"cedula\" type=\"text\" class=\"form-control\" placeholder=\"cedula\">\r\n                                    <label for=\"floatingInput\">CC / NIT </label>\r\n                                    <p *ngIf=\"campoValido('cedula')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- EMAIL ** -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"email\">Correo electronico </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"email\" formControlName=\"email\" type=\"text\" class=\"form-control\" placeholder=\"Correo electronico\">\r\n                                    <label for=\"floatingInput\">Correo electronico </label>\r\n                                    <p *ngIf=\"campoValido('email')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- DEPARTAMENTO ** -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"departamentoS\" class=\"col-sm-auto col-form-label\">Departamento</label>\r\n                                <select formControlName=\"department\" class=\"form-select\" id=\"departamentoS\" #departmentSS (change)=\"searchCities(departmentSS.value)\">\r\n                                    <option >Seleccionar Departamento</option>\r\n                                    <option *ngFor=\"let department of departments\" [value]=\"department.departamento\" >{{department.departamento}}</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- CIUDAD ** -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"ciudadS\" class=\"col-sm-auto col-form-label\">Departamento</label>\r\n                                <select formControlName=\"city\" class=\"form-select\" id=\"ciudadS\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"\" selected>Seleccionar Ciudad</option>\r\n                                    <option *ngFor=\"let city of ListCities\" [value]=\"city.ciudad\" >{{city.ciudad}}</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- DIRECCION ** -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"direccion\">Dirección </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"direccion\" formControlName=\"address\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Dirección\">\r\n                                    <label for=\"floatingInput\">Dirección </label>\r\n                                    <p *ngIf=\"campoValido('address')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <!-- TELEFONO -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"telefono\">Telefono </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"telefono\" formControlName=\"phone\" type=\"text\" class=\"form-control\" placeholder=\"Telefono\">\r\n                                    <label for=\"floatingInput\">Telefono </label>\r\n                                    <p *ngIf=\"campoValido('phone')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- REGIMEN -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"regimen\" class=\"col-sm-auto col-form-label\">Regimen</label>\r\n                                <select formControlName=\"regimen\" class=\"form-select\" id=\"regimen\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"SIMPLE\">SIMPLE</option>\r\n                                    <option value=\"AUTORRETENEDOR\" >AUTORRETENEDOR</option>\r\n                                    <option value=\"AGENTE_RETENCION_IVA\" >AGENTE RETENCION IVA</option>\r\n                                    <option value=\"ORDINARIO\" >ORDINARIO</option>\r\n                                    <option value=\"GRAN_CONTRIBUYENTE\" >GRAN CONTRIBUYENTE</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- TIPO DE IMPUESTO ** -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"taxLevel\" class=\"col-sm-auto col-form-label\">Tipo de impuesto</label>\r\n                                <select formControlName=\"tax_level_code\" class=\"form-select\" id=\"taxLevel\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"SIMPLIFICADO\">SIMPLIFICADO</option>\r\n                                    <option value=\"RESPONSABLE_DE_IVA\" >RESPONSABLE DE IVA</option>\r\n                                    <option value=\"NO_RESPONSABLE_DE_IVA\" selected>NO RESPONSABLE DE IVA</option>\r\n                                    <option value=\"COMUN\" >COMUN</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 mb-3 px-md-1 ml-2 ms-2\">\r\n                                <div class=\"form-check mt-2\">\r\n                                    <input formControlName=\"sendemail\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"sendemail\">\r\n                                    <label class=\"form-check-label\" for=\"sendemail\">\r\n                                        Enviar Factura al Correo\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n\r\n                    </form>\r\n\r\n                </div>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    MODAL CREAR FACTURA \r\n========================================================================= -->\r\n<div *ngIf=\"pedido\" class=\"modal fade\" id=\"crearFacturaM\" tabindex=\"-1\" aria-labelledby=\"crearFacturaMModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"crearFacturaMModal\">\r\n                    <i class=\"bi-receipt\" style=\"font-size: 1rem\"></i> Crear Factura\r\n                </h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n                <!-- SUBTOTALES -->\r\n                <div class=\"\">\r\n                    <p class=\"mb-1 text-center text-break\"> Subtotal: {{ base | divisa }} </p>\r\n                    <p class=\"mb-1 text-center text-break\">IVA: {{ iva | divisa }} </p>\r\n                </div>\r\n\r\n                <!-- TOTALES -->\r\n                <div class=\"pb-2\">\r\n                    <p class=\"mb-0 text-center fw-bold\">TOTAL</p>\r\n                    <h4 class=\"mb-3 display-5 text-center text-break fw-bold\"> {{ pedido.amount | divisa }} </h4>\r\n                    <p class=\"mb-2 text-center\" *ngIf=\"payments.length > 0\" [ngClass]=\"{'text-success': restante === 0, 'text-danger': restante < pedido.amount || restante > pedido.amount}\"> Restante {{ restante | divisa }} </p>\r\n                </div>\r\n\r\n                <hr>\r\n\r\n                <!-- PAGOS -->\r\n                <div>\r\n                    <h4 class=\"mb-3 text-center\"> Agregar Pagos </h4>\r\n\r\n                    <!-- TIPO DE PAGO -->\r\n                    <div class=\"form-group\">\r\n                        <label class=\"control-label\">Metodo de pago</label>\r\n                        <select class=\"form-select\" aria-label=\"Default select example\" #typeAdd>\r\n                            <option value=\"efectivo\">Efectivo</option>   \r\n                            <option *ngFor=\"let banco of bancos\" [value]=\"banco.name\"> {{banco.name}}</option>   \r\n                        </select>\r\n                    </div>\r\n\r\n                    <!-- MONTO -->\r\n                    <div class=\"form-group\">\r\n                        <label class=\"control-label\">Monto</label>\r\n                        <input id=\"montoP\" type=\"number\" min=\"0\" class=\"form-control\" placeholder=\"Agrega un monto\" (keyup)=\"montoP.value\" #montoP>\r\n                    </div>\r\n\r\n                    <button (click)=\"addPay(montoP.value, typeAdd.value)\" type=\"button\" class=\"btn btn-primary w-100\">Agregar</button>\r\n\r\n                </div>\r\n\r\n                <!-- LISTA DE PAGOS -->\r\n                <div *ngIf=\"payments.length > 0 \" class=\"table-responsive\" style=\"clear: both;\">\r\n                    <table class=\"table table-hover\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th></th>\r\n                                <th>Metodo</th>\r\n                                <th class=\"text-right\">Monto</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr *ngFor=\"let pay of payments; let i = index\">\r\n                                <td>\r\n                                    <button type=\"button\" (click)=\"delPay(i)\" class=\"btn btn-link p-1 text-danger text-right\"><i class=\"bi-trash\"></i></button>\r\n                                </td>\r\n                                <td> {{ pay.type }} </td>\r\n                                <td class=\"text-right\"> {{ pay.amount }} </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" [disabled]=\"facturando == true || user.cerrada || restante < 0\" class=\"btn btn-sm btn-outline-primary\" (click)=\"crearFactura(false)\">\r\n                    <span *ngIf=\"facturando\">Facturando...</span>\r\n                    <span *ngIf=\"!facturando\">Crear tirilla pos</span>\r\n                    \r\n                </button>\r\n        \r\n                <button type=\"button\" [disabled]=\"facturando == true || user.cerrada || restante < 0\" (click)=\"crearFactura(true)\" class=\"btn btn-sm btn-outline-success\">\r\n                    <span *ngIf=\"facturando\">Facturando...</span>\r\n                    <span *ngIf=\"!facturando\">Crear Factura Electronica</span>\r\n                    \r\n                </button>\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\r\nimport Swal from 'sweetalert2';\r\n\r\n// MODELS\r\nimport { Pedido } from '../../models/pedido.models';\r\n\r\n// INTERFACES\r\nimport { PedidosService } from '../../services/pedidos.service';\r\nimport { SearchService } from '../../services/search.service';\r\n\r\n@Component({\r\n  selector: 'app-pedidos',\r\n  templateUrl: './pedidos.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class PedidosComponent implements OnInit {\r\n\r\n  public pedidos: Pedido[] = [];\r\n  public pedidosTemp: Pedido[] = [];\r\n  public totalPedidos: number = 0;\r\n  \r\n  public resultado: number = 0;  \r\n  public cargando: boolean = true;\r\n  public sinResultados: boolean = true;\r\n\r\n  public btnAtras: string = '';\r\n  public btnAdelante: string = '';\r\n\r\n  constructor(  private pedidosService: PedidosService,\r\n                private searchService: SearchService) { }\r\n\r\n  ngOnInit(): void {\r\n    \r\n\r\n    this.cargarPedidos();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR PEDIDOS\r\n  ==================================================================== */\r\n  @ViewChild('mostrar') mostrar: ElementRef;\r\n  public desde: number = 0;\r\n  public hasta: number = 50;\r\n\r\n  cargarPedidos(){\r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n\r\n    let query = `desde=${this.desde}&hasta=${this.hasta}`;\r\n\r\n    this.pedidosService.loadPedidos(query)\r\n        .subscribe(({ total, pedidos }) =>{  \r\n\r\n          console.log(pedidos);\r\n          \r\n          \r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (pedidos.length === 0) {\r\n            this.sinResultados = false;\r\n            this.cargando = false;\r\n            this.pedidos = [];\r\n            this.resultado = 0;\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n\r\n          this.totalPedidos = total;\r\n          this.pedidos = pedidos;\r\n          this.pedidosTemp = pedidos;\r\n          this.resultado = 0;\r\n          this.cargando = false;          \r\n          \r\n          // BOTONOS DE ADELANTE Y ATRAS          \r\n          if (this.desde === 0 && this.totalPedidos > 10) {\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = '';\r\n          }else if(this.desde === 0 && this.totalPedidos < 11){\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n          }else if((this.desde + 10) >= this.totalPedidos){\r\n            this.btnAtras = '';\r\n            this.btnAdelante = 'disabled';\r\n          }else{\r\n            this.btnAtras = '';\r\n            this.btnAdelante = '';\r\n          }   \r\n          // BOTONOS DE ADELANTE Y ATRAS \r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); }\r\n        )\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR PEDIDOS\r\n  ==================================================================== */  \r\n  buscar(termino:string, mostrar:any = 50){    \r\n    \r\n    this.sinResultados = true;\r\n    if (termino.length === 0) {\r\n      this.pedidos = this.pedidosTemp;\r\n      this.resultado = 0;\r\n      return;\r\n    }else{\r\n      \r\n      this.sinResultados = true;\r\n\r\n      let query = `hasta=${mostrar}`;\r\n      \r\n      this.searchService.search('pedidos', termino, true, query)\r\n          .subscribe(({total, resultados}) => {\r\n            \r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            if (resultados.length === 0) {\r\n              this.sinResultados = false;\r\n              this.pedidos = [];\r\n              this.resultado = 0;\r\n\r\n              return;                \r\n            }\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            \r\n            this.totalPedidos = total;\r\n            this.pedidos = resultados; \r\n            this.resultado = resultados.length;\r\n\r\n            \r\n\r\n          }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CAMBIAR PAGINA\r\n  ==================================================================== */\r\n  cambiarPagina (valor: number){\r\n    \r\n    this.hasta = Number(this.mostrar.nativeElement.value);\r\n    \r\n    if (this.hasta > 10) {\r\n      valor = valor * (this.hasta/10);      \r\n    }\r\n\r\n    this.desde += valor;\r\n    \r\n    if (this.desde < 0) {\r\n      this.desde = 0;\r\n    }else if( this.desde > this.totalPedidos ){\r\n      this.desde -= valor;\r\n    }\r\n\r\n    this.cargarPedidos();\r\n\r\n  }\r\n\r\n\r\n  // FIN CLASE\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-dark py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">PEDIDOS</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link active\" id=\"home-tab\" data-bs-toggle=\"tab\" href=\"#home\" role=\"tab\" aria-controls=\"home\" aria-selected=\"true\"><i class=\"bi-truck\" style=\"font-size: 1rem\"></i> Administración de Pedidos </a>\r\n        </li>\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<div class=\"container-fluid mt-4\">\r\n\r\n    <!-- TABLE CLIENTS -->\r\n    <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n        <!-- CARGANDO -->\r\n        <div *ngIf=\"cargando\">\r\n            <div class=\"text-center p-4\">\r\n                <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                    <span class=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n            </div>\r\n            <small class=\"text-muted\">cargando...</small>\r\n        </div>\r\n        <!-- CARGANDO -->\r\n\r\n        <div *ngIf=\"!cargando\">\r\n\r\n            <div class=\"mb-3\">\r\n                <div class=\"form-floating mb-2\">\r\n                    <span class=\"position-absolute top-50 start-90 translate-middle\"><i class=\" bi-search \" style=\"font-size: 1rem \"></i></span>\r\n                    <input type=\"text\" class=\"form-control\" id=\"floatingInput2\" placeholder=\"Buscar Categoria\" (keyup)=\"buscar(search.value, mostrar.value)\" #search>\r\n                    <label for=\"floatingInput2 \">Buscar Pedido</label>\r\n                </div>\r\n                <div class=\"col-12 text-end\">\r\n                    <label for=\"mostrar\" class=\"me-2\">Mostrar: </label>\r\n                    <select name=\"\" id=\"\" [value]=\"hasta\" #mostrar (change)=\"hasta = mostrar.value\" (change)=\"cargarPedidos()\">\r\n                        <option value=\"10\">10</option>\r\n                        <option value=\"25\">25</option>\r\n                        <option value=\"50\">50</option>\r\n                        <option value=\"100\">100</option>\r\n                        <option value=\"250\">250</option>\r\n                        <option value=\"500\">500</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"table-responsive \">\r\n                <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                    <thead class=\"border-bottom \">\r\n                        <tr>\r\n                            <th class=\"text-muted \" scope=\"col \">#</th>\r\n                            <th class=\"text-muted \" scope=\"col \" colspan=\"2\">Nombre</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Estado</th>\r\n                            <th class=\"text-muted w100 \" scope=\"col \">Acciones</th>\r\n\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr *ngIf=\"!sinResultados\" class=\"text-center \">\r\n                            <th colspan=\"10\" class=\"py-4\">\r\n                                <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                            </th>\r\n                        </tr>\r\n                        <tr class=\"trHover\" *ngFor=\"let pedido of pedidos; let i = index\">\r\n                            <th scope=\"row \">{{ pedido.pedido}}</th>\r\n\r\n                            <td colspan=\"2\">\r\n                                <a class=\"btn btn-link p-1 text-primary\" [routerLink]=\"['/dashboard/pedido', pedido.peid]\">\r\n                                    <span *ngIf=\"pedido.client\">\r\n                                        {{ pedido.client?.name }}\r\n                                    </span>\r\n                                    <span *ngIf=\"!pedido.client && pedido.cliente\" >\r\n                                        {{ pedido.cliente.first_name + ' ' + pedido.cliente.family_name }}\r\n                                    </span>\r\n                                </a>\r\n                            </td>\r\n                            <td>\r\n                                <span class=\"badge rounded-pill\" [ngClass]=\"{   'bg-success': pedido.estado == 'Entregado', \r\n                                                                                'bg-warning': pedido.estado == 'Pendiente',\r\n                                                                                'bg-danger': pedido.estado == 'Cancelado',\r\n                                                                                'bg-info': pedido.estado == 'Procesando'\r\n                                                                            }\"> \r\n                                    {{ pedido.estado}} \r\n                                </span>\r\n                            </td>\r\n                            <td class=\"text-center\">\r\n                                <a class=\"btn btn-link p-1 text-primary\" [routerLink]=\"['/dashboard/pedido', pedido.peid]\">\r\n                                    <i class=\"bi bi-box-arrow-up-right\"></i>\r\n                                </a>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n\r\n                </table>\r\n\r\n            </div>\r\n\r\n            <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n            <div class=\"row\">\r\n                <div class=\"col col-md-4\">\r\n                    <small class=\"text-muted\">Pedidos Totales: ({{totalPedidos}})</small>\r\n                    <small *ngIf=\"resultado !== 0\" class=\"text-muted\"> - (Resultados: {{ resultado }})</small>\r\n                    <small *ngIf=\"desde !== 0\" class=\"text-muted\"> - (Desde el: <span *ngIf=\"(pedidos[0].pedido - hasta) <= 0\"> 1 </span> <span *ngIf=\"(pedidos[0].pedido - hasta) > 0\" > {{ (pedidos[0].pedido - hasta) + 1 | number }} </span>  Hasta el: {{  pedidos[0].pedido }})</small>\r\n                </div>\r\n\r\n                <div *ngIf=\"search.value.length === 0\" class=\"col d-flex justify-content-end\">\r\n                    <button type=\"button\" (click)=\"cambiarPagina(-10)\" class=\"{{btnAtras}} btn btn-sm btn-dark btnW waves-effect waves-light px-3\">Anterior</button>\r\n                    <button type=\"button\" (click)=\"cambiarPagina(10)\" class=\"{{btnAdelante}} btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2\">Siguiente</button>\r\n                </div>\r\n            </div>\r\n            <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n        </div>\r\n    </div>\r\n    <!-- TABLE CLIENTS -->\r\n\r\n\r\n</div>","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\n\r\n// SERVICES\r\nimport { FileUploadService } from '../../services/file-upload.service';\r\nimport { UserService } from '../../services/user.service';\r\n\r\n// MODELS\r\nimport { User } from '../../models/user.model';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-perfil',\r\n  templateUrl: './perfil.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class PerfilComponent implements OnInit {\r\n\r\n  public usuario: User;\r\n\r\n  constructor(  private fileUploadService:FileUploadService,\r\n                private fb: FormBuilder,\r\n                private userService: UserService) {\r\n                  \r\n                  // INFO USER\r\n                  this.usuario = userService.user;\r\n\r\n                  this.upUserForm.reset({\r\n                    usuario: this.usuario.usuario,\r\n                    name: this.usuario.name,\r\n                    uid: this.usuario.uid\r\n                  })\r\n\r\n                }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n  \r\n\r\n  /** ================================================================\r\n   *   ACTUALIZAR USUARIO\r\n  ==================================================================== */\r\n  public formSubmitted: boolean = false;\r\n  public upUserForm = this.fb.group({\r\n\r\n    usuario: ['', [Validators.required, Validators.maxLength(3)]],\r\n    name: ['', [Validators.required, Validators.maxLength(3)]],\r\n    password: ['', [Validators.minLength(6)]],\r\n    repassword: ['', [Validators.minLength(6)]]\r\n\r\n  });\r\n\r\n  actualizarUsuario(){\r\n\r\n    if (this.upUserForm.value.password === '') {\r\n\r\n      this.upUserForm.reset({\r\n        usuario: this.upUserForm.value.usuario,\r\n        name: this.upUserForm.value.name\r\n      });\r\n      \r\n    }\r\n    \r\n    this.userService.updateUser(this.upUserForm.value, this.usuario.uid)\r\n        .subscribe( (resp: {ok: boolean, user: User}) =>  {\r\n          \r\n          Swal.fire('Estupendo', 'Se ha actualizado tu perfil exitosamente', 'success');\r\n\r\n        }, (err) =>{ Swal.fire('Error', err.error.msg, 'error') });\r\n\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  VALIDAR CAMPOS\r\n  ==================================================================== */\r\n  campoValido(campo: string): boolean{\r\n\r\n    if ( this.upUserForm.get(campo).invalid &&  this.formSubmitted) {  \r\n      return true;      \r\n    } else{            \r\n      return false;\r\n    }\r\n  \r\n  }\r\n\r\n\r\n  /** ================================================================\r\n   *   ACTUALIZAR IMAGEN\r\n  ==================================================================== */\r\n  public imgTemp: any = null;\r\n  public subirImagen: File;\r\n  cambiarImage(file: File){\r\n    this.subirImagen = file;\r\n    \r\n    if (!file) { return this.imgTemp = null }\r\n\r\n    const reader = new FileReader();\r\n    const url64 = reader.readAsDataURL( file );\r\n\r\n    reader.onloadend = () => {\r\n      this.imgTemp = reader.result;\r\n    }\r\n\r\n  }\r\n      \r\n  /** ================================================================\r\n   *  SUBIR IMAGEN fileImg\r\n  ==================================================================== */\r\n  @ViewChild('fileImg') fileImg: ElementRef;\r\n  public imgProducto: string = 'no-image';\r\n  subirImg(){\r\n    \r\n    this.fileUploadService.updateImage( this.subirImagen, 'user', this.usuario.uid)\r\n    .then( img => this.usuario.img = img);\r\n    \r\n    this.fileImg.nativeElement.value = '';\r\n    this.imgProducto = 'no-image';\r\n    this.imgTemp = null;\r\n    \r\n  }\r\n\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-yellow py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">PERFIL</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"nuevo-tab\"><i class=\"bi-pencil\" style=\"font-size: 1rem\"></i> Editar Producto</a>\r\n        </li>\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n<div class=\"container-fluid my-4\">\r\n\r\n    <div class=\"row\">\r\n\r\n        <!-- IMAGE -->\r\n        <div class=\"col-lg-4 text-center\">\r\n            <div class=\"card\">\r\n                <div class=\"card-body text-center\">\r\n\r\n                    <!-- Image Product-->\r\n                    <img *ngIf=\"!imgTemp\" [src]=\"usuario.img | imagen:'user'\" class=\"avatar-redondo-lg mx-auto\" alt=\"\">\r\n\r\n                    <!-- IMG TEMPO  imgTemp -->\r\n                    <img *ngIf=\"imgTemp\" [src]=\"imgTemp\" class=\"avatar-redondo-lg mx-auto\" alt=\"\">\r\n\r\n                    <!-- Description-->\r\n                    <div class=\"small font-italic text-muted mb-4\">JPG - PNG - WEBP - no mayor a 5 mb</div>\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"formFileSm\" class=\"form-label\">Seleccionar Imagen</label>\r\n                        <input #fileImg class=\"form-control form-control-sm\" id=\"formFileSm\" type=\"file\" (change)=\"cambiarImage($event.target.files[0])\">\r\n                    </div>\r\n                    <!-- BTN upload Image -->\r\n                    <button *ngIf=\"imgTemp\" class=\"btn btnW btn-primary waves-effect waves-light px-3\" [disabled]=\"!subirImagen\" (click)=\"subirImg()\" type=\"button\">Actualizar Imagen</button>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- IMAGE -->\r\n\r\n        <!-- INFO PRODUCT -->\r\n        <div class=\"col-lg-8\">\r\n            <div class=\"card\">\r\n                <div class=\"card-header\">\r\n                    Mi Perfil\r\n                </div>\r\n                <div class=\"card-body\">\r\n\r\n                    <!-- FORM -->\r\n\r\n                    <form id=\"upProductForm\" autocomplete=\"off\" [formGroup]=\"upUserForm\" (ngSubmit)=\"actualizarUsuario()\">\r\n\r\n                        <!-- =======================================================================\r\n                            DATOS PERSONALES \r\n                        =========================================================================== -->\r\n                        <h5 class=\"text-muted\">Datos Personales</h5>\r\n\r\n                        <div class=\"mb-3\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"usuario\" type=\"text\" class=\"form-control\" placeholder=\"Usuario\">\r\n                                <label for=\"floatingInput\">Usuario</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"mb-3\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"name\" type=\"text\" class=\"form-control\" placeholder=\"Nombres\">\r\n                                <label for=\"floatingInput\">Nombres</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"row mb-3\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"password\" type=\"password\" class=\"form-control\" placeholder=\"Contraseña\">\r\n                                <label for=\"floatingInput\">Contraseña</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"row mb-3\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"repassword\" type=\"password\" class=\"form-control\" placeholder=\"Repetir Contraseña\">\r\n                                <label for=\"floatingInput\">Repetir Contraseña</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"row\">\r\n                            <div class=\"text-danger mb-2\">\r\n                                <!-- <p *ngIf=\"campoValido('name')\" class=\"mb-1 animated fadeIn\">- El nombre es obligatorio</p> -->\r\n                                <!-- <p *ngIf=\"campoValido('cedula')\" class=\"mb-1 animated fadeIn\">- La cedula de ciudadania es obligatoria</p> -->\r\n                                <!-- <p *ngIf=\"campoValido('email')\" class=\"mb-1 animated fadeIn\">- El email es obligatorio y tiene que ser un email valido</p> -->\r\n                                <!-- <p *ngIf=\"campoValido('email')\" class=\"mb-1 animated fadeIn\">- El email es obligatorio y tiene que ser un email valido</p> -->\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                        <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- INFO PRODUCT -->\r\n\r\n\r\n\r\n    </div>\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\r\n\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport Swal from 'sweetalert2';\r\n\r\n// MODELS\r\nimport { Categoria } from '../../../models/categoria.model';\r\n\r\n// SERVICES\r\nimport { CategoriaService } from '../../../services/categoria.service';\r\nimport { SearchService } from '../../../services/search.service';\r\nimport { FileUploadService } from '../../../services/file-upload.service';\r\nimport { Department } from 'src/app/models/department.model';\r\nimport { ListDepartamento } from '../../../models/department.model';\r\n\r\n@Component({\r\n  selector: 'app-categorias',\r\n  templateUrl: './categorias.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class CategoriasComponent implements OnInit {\r\n\r\n  public categorias: Categoria[] = [];\r\n  public categoriasTemp: Categoria[] = [];\r\n  public totalCategorias: number = 0;\r\n  \r\n  public resultado: number = 0;\r\n  public desde: number = 0;\r\n  public cargando: boolean = true;\r\n  public sinResultados: boolean = true;\r\n\r\n  // IMAGEN\r\n  public subirImagen: File;\r\n\r\n  constructor(  private categoriaService: CategoriaService,\r\n                private searchService: SearchService,\r\n                private fb: FormBuilder,\r\n                private fileUploadService: FileUploadService) { }\r\n\r\n  ngOnInit(): void {\r\n    \r\n    this.cargarCategorias();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR CATEGORIAS\r\n  ==================================================================== */\r\n  cargarCategorias(){\r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n\r\n    this.categoriaService.loadDepartment()\r\n        .subscribe(({ total, categorias }) =>{          \r\n\r\n          this.totalCategorias = total;\r\n          this.categorias = categorias;\r\n          this.categoriasTemp = categorias;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); }\r\n        )\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR CATEGORIA\r\n  ==================================================================== */\r\n  buscar(termino:string){\r\n    \r\n    this.sinResultados = true;\r\n    if (termino.length === 0) {\r\n      this.categorias = this.categoriasTemp;\r\n      this.resultado = 0;\r\n      return;\r\n    }else{\r\n      \r\n      this.sinResultados = true;\r\n      \r\n      this.searchService.search('categorias', termino)\r\n          .subscribe(({total, resultados}) => {\r\n            \r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            if (resultados.length === 0) {\r\n              this.sinResultados = false;\r\n              this.categorias = [];\r\n              this.resultado = 0;\r\n              return;                \r\n            }\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            \r\n            this.totalCategorias = total;\r\n            this.categorias = resultados; \r\n            this.resultado = resultados.length;  \r\n\r\n          }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR DEPARTAMENTOS\r\n  ==================================================================== */\r\n  public departamentos: Department[] = [];\r\n  public sinResultados2:boolean = true;\r\n  public cargando2:boolean = false;\r\n  buscarDepartamento(termino:string){\r\n\r\n    this.cargando2 = true;\r\n    \r\n    this.sinResultados2 = true;\r\n    if (termino.length === 0) {\r\n      this.departamentos = [];\r\n      this.cargando2 = false;\r\n      return;\r\n    }else{\r\n      \r\n      this.sinResultados2 = true;\r\n      \r\n      this.searchService.search('departments', termino)\r\n      .subscribe(({total, resultados}) => {\r\n        \r\n            this.cargando2 = false;\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            if (resultados.length === 0) {\r\n              this.sinResultados2 = false;\r\n              this.departamentos = [];\r\n              return;                \r\n            }\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            this.departamentos = resultados; \r\n\r\n          }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SELECCIONAR DEPARTAMENTO\r\n  ==================================================================== */\r\n  public listDepartamento: ListDepartamento[] = [];\r\n  public listadoDepartamento: any[] = [];\r\n  @ViewChild('searchDepartamento') searchDepartamento: ElementRef;\r\n  seleccionarDepartamento(departamentoID: string, departamentoName: string){\r\n\r\n    const validarItem = this.listDepartamento.findIndex( (resp) =>{      \r\n      if (resp.department === departamentoID ) {\r\n        return true;\r\n      }else {\r\n        return false;\r\n      }\r\n    });\r\n\r\n    if ( validarItem === -1 ) {\r\n\r\n      this.listDepartamento.push({\r\n        department: departamentoID\r\n      });\r\n\r\n      this.listadoDepartamento.push({\r\n        name: departamentoName,\r\n        did : departamentoID\r\n      });\r\n\r\n      this.searchDepartamento.nativeElement.value = '';\r\n      this.searchDepartamento.nativeElement.focus();\r\n      this.departamentos = [];\r\n      \r\n    }else{\r\n      this.searchDepartamento.nativeElement.value = '';\r\n      this.searchDepartamento.nativeElement.focus();\r\n      this.departamentos = [];\r\n\r\n      Swal.fire('Atención', 'Ya existe este departamento en esta categoria', 'warning');\r\n      return;\r\n\r\n    }\r\n\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ELIMINAR DEPARTAMENTO DE LA CATEGORIA\r\n  ==================================================================== */\r\n  eliminarProductoCarrito( i: number ){\r\n\r\n    this.listDepartamento.splice(i, 1);\r\n    this.listadoDepartamento.splice(i, 1);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREAR CATEGORIA\r\n  ==================================================================== */\r\n  public newCategoriaForm = this.fb.group({\r\n    name: ['', [Validators.required, Validators.minLength(3)]],\r\n    visibility: [true, [Validators.required]]\r\n  });\r\n  public formSubmitted = false;\r\n\r\n  crearCategoria(){\r\n    \r\n    this.formSubmitted = true;\r\n\r\n    if (this.newCategoriaForm.invalid) {\r\n      return;\r\n    }\r\n   \r\n    this.categoriaService.createDepartment(this.newCategoriaForm.value)\r\n        .subscribe( resp => {\r\n\r\n          this.cargarCategorias();          \r\n          Swal.fire('Estupendo', `Se ha creado la categoria ${this.newCategoriaForm.value.name}, exitosamente!`, 'success')\r\n          this.newCategoriaForm.reset();\r\n          this.formSubmitted = false;\r\n        \r\n        }, (err) => { Swal.fire('Error', err.error.msgm, 'error'); })    \r\n\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  VALIDAR CAMPOS\r\n  ==================================================================== */\r\n  campoValido(campo: string): boolean{\r\n\r\n    if ( this.newCategoriaForm.get(campo).invalid &&  this.formSubmitted) {  \r\n      return true;      \r\n    } else{            \r\n      return false;\r\n    }\r\n  \r\n  }\r\n\r\n  /** ================================================================\r\n   *  OBTENER INFORMACIÓN DEL DEPARTAMENTO PARA ACTUALIZAR\r\n  ==================================================================== */\r\n  public upCategoriaForm = this.fb.group({\r\n    name: ['', [Validators.required, Validators.minLength(3)]],\r\n    id: ['', [Validators.required, Validators.minLength(3)]],\r\n    department: [''],\r\n    visibility: [true, [Validators.required]]\r\n  })\r\n\r\n  public imgCategoria: string = 'no-image';\r\n\r\n  informacionCategoria(categoria: Categoria){\r\n\r\n    this.listDepartamento = [];\r\n    this.listadoDepartamento = [];\r\n\r\n    this.imgCategoria = categoria.img || 'no-image';\r\n\r\n    // CARGAR DEPARTAMENTOS\r\n\r\n    \r\n    if( categoria.department){\r\n      \r\n      let depart = categoria.department;\r\n      \r\n      if (depart.length > 0) {\r\n\r\n        for (let i = 0; i < depart.length; i++) {          \r\n\r\n          this.seleccionarDepartamento(depart[i].department._id, depart[i].department.name);\r\n\r\n        }\r\n\r\n      }else{\r\n        this.listDepartamento = [];\r\n        this.listadoDepartamento = [];\r\n      }     \r\n      \r\n    }else{\r\n      this.listDepartamento = [];\r\n      this.listadoDepartamento = [];\r\n    }\r\n    // CARGAR DEPARTAMENTOS\r\n\r\n    this.upCategoriaForm.setValue({\r\n      name: categoria.name,\r\n      id: categoria.catid,\r\n      department: this.listDepartamento,\r\n      visibility: categoria.visibility || true\r\n    });\r\n\r\n  }\r\n\r\n\r\n  /** ================================================================\r\n   *  ACTUALIZAR CATEGORIA\r\n  ==================================================================== */\r\n  public formSubmittedUp = false;\r\n  actualizarCategoria(){\r\n\r\n    this.formSubmittedUp = true;\r\n    \r\n    if (this.upCategoriaForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    this.upCategoriaForm.value.department = this.listDepartamento;\r\n    \r\n    this.categoriaService.updateDepartment(this.upCategoriaForm.value, this.upCategoriaForm.value.id)\r\n        .subscribe( resp => {\r\n          \r\n          this.cargarCategorias();\r\n          Swal.fire('Estupendo', `La Categoria ${this.upCategoriaForm.value.name}, ha sido actualizado`, 'success');\r\n          this.upCategoriaForm.reset();\r\n          this.formSubmittedUp = false;\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  VALIDAR CAMPOS\r\n  ==================================================================== */\r\n  campoValidoUpdate(campo: string): boolean{\r\n    \r\n    if ( this.upCategoriaForm.get(campo).invalid &&  this.formSubmittedUp) {      \r\n      return true;      \r\n    } else{\r\n      \r\n      return false;\r\n    }\r\n  \r\n  }\r\n    \r\n  /** ================================================================\r\n   *  ACTUALIZAR STATUS DEL DEPARTAMENTO\r\n  ==================================================================== */\r\n  statusUpdate(id:string){\r\n    \r\n    this.categoriaService.statusUpdateDepartment(id)\r\n        .subscribe( (department) => {\r\n\r\n          let information: string;\r\n          if (department.status) {\r\n            information = 'Activado';            \r\n          }else{\r\n            information = 'Desactivado';\r\n          }\r\n          \r\n          \r\n          this.cargarCategorias();\r\n          Swal.fire('Estupendo', `La Categoria ${department.name}, ha sido ${information}`, 'success');\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  SELECCIONAR IMAGEN\r\n  ==================================================================== */\r\n  public imgTemp: any = null;\r\n  cambiarImage(file: File){\r\n\r\n    this.subirImagen = file;\r\n    \r\n    if (!file) { return this.imgTemp = null }\r\n\r\n    const reader = new FileReader();\r\n    const url64 = reader.readAsDataURL( file );\r\n\r\n    reader.onloadend = () => {\r\n      this.imgTemp = reader.result;\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  SUBIR IMAGEN fileImg\r\n  ==================================================================== */\r\n  @ViewChild('fileImg') fileImg: ElementRef;\r\n  subirImg(){\r\n\r\n    this.fileUploadService.updateImage( this.subirImagen, 'categoria', this.upCategoriaForm.value.id)\r\n        .then( img => this.cargarCategorias());\r\n\r\n    this.fileImg.nativeElement.value = '';\r\n    this.imgCategoria = 'no-image';\r\n    this.imgTemp = null;\r\n    \r\n  }\r\n\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-yellow py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">PRODUCTOS</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark\" id=\"administracion-tab\" [routerLink]=\"['/dashboard', 'productos']\">\r\n                <i class=\"bi-files\" style=\"font-size: 1rem\"></i> Administracion de Productos\r\n            </a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-primary\" id=\"nuevo-tab\" [routerLink]=\"['/dashboard/productos', 'nuevo']\"><i class=\"bi-pencil-square\" style=\"font-size: 1rem\"></i> Crear Producto</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark \" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'departamento']\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Departamentos</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark active\" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'categorias']\" aria-selected=\"false\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Categorias</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'movimientos']\" aria-selected=\"false\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Movimientos</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'kardex']\" aria-selected=\"false\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> kardex</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"eliminados-tab\" [routerLink]=\"['/dashboard/productos', 'eliminados']\" aria-selected=\"false\"><i class=\"bi-trash\" style=\"font-size: 1rem\"></i> Eliminados</a>\r\n        </li>\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<div class=\"container-fluid\">\r\n\r\n    <!-- TABLE CLIENTS -->\r\n    <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n        <!-- CARGANDO -->\r\n        <div *ngIf=\"cargando\">\r\n            <div class=\"text-center p-4\">\r\n                <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                    <span class=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n            </div>\r\n            <small class=\"text-muted\">cargando...</small>\r\n        </div>\r\n        <!-- CARGANDO -->\r\n\r\n        <div *ngIf=\"!cargando\">\r\n            <div>\r\n                <div class=\"form-floating mb-2\">\r\n                    <span class=\"position-absolute top-50 start-90 translate-middle\"><i class=\" bi-search \" style=\"font-size: 1rem \"></i></span>\r\n                    <input type=\"text\" class=\"form-control\" id=\"floatingInput2\" placeholder=\"Buscar Categoria\" (keyup)=\"buscar(search.value)\" #search>\r\n                    <label for=\"floatingInput2 \">Buscar Categoria</label>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- BTN CREAR Categoria -->\r\n            <div class=\"d-flex justify-content-end\">\r\n                <button type=\"button\" class=\"btn btn-sm btn-primary btnW waves-effect waves-ligth\" data-bs-toggle=\"modal\" data-bs-target=\"#nuevoCategoria\">Crear Categoria</button>\r\n            </div>\r\n            <!-- BTN CREAR Categoria -->\r\n\r\n            <div class=\"table-responsive \">\r\n                <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                    <thead class=\"border-bottom \">\r\n                        <tr>\r\n                            <th class=\"text-muted \" scope=\"col \">#</th>\r\n                            <th class=\"text-muted \" scope=\"col \"></th>\r\n                            <th class=\"text-muted \" scope=\"col \" colspan=\"2\">Nombre</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Estado</th>\r\n                            <th class=\"text-muted w100 \" scope=\"col \">Acciones</th>\r\n\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr *ngIf=\"!sinResultados\" class=\"text-center \">\r\n                            <th colspan=\"10\" class=\"py-4\">\r\n                                <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                            </th>\r\n                        </tr>\r\n                        <tr class=\"trHover\" *ngFor=\"let categoria of categorias; let i = index\">\r\n                            <th *ngIf=\"desde === 0 \" scope=\"row \">{{ i + 1}}</th>\r\n                            <th *ngIf=\"desde> 0\" scope=\"row\">{{ (i + 1) + desde }}</th>\r\n                            <td>\r\n\r\n                                <img [src]=\"categoria.img | imagen: 'department'\" class=\"avatar avatar-img\" alt=\"\">\r\n\r\n                            </td>\r\n                            <td colspan=\"2\">{{ categoria.name }}</td>\r\n                            <td>\r\n                                <button *ngIf=\"categoria.status\" (click)=\"statusUpdate(categoria.did)\" type=\"button\" class=\"btn btnW waves-effect waves-ligth btn-success btn-sm\">Activo</button>\r\n                                <button *ngIf=\"!categoria.status\" (click)=\"statusUpdate(categoria.did)\" type=\"button\" class=\"btn btnW waves-effect waves-ligth btn-danger btn-sm\">Desactivo</button>\r\n                            </td>\r\n                            <td class=\"text-center\">\r\n                                <button type=\"button\" (click)=\"informacionCategoria(categoria)\" class=\"btn btn-link p-1 text-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#actualizarCategoria\"><i class=\"bi bi-box-arrow-up-right\"></i></button>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n\r\n                </table>\r\n\r\n            </div>\r\n\r\n            <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n            <div class=\"row\">\r\n                <div class=\"col col-md-4\">\r\n                    <small class=\"text-muted\">Total de categorias: ({{totalDepartamentos}})</small>\r\n                    <small *ngIf=\"resultado !== 0\" class=\"text-muted\"> - (Resultados: {{ resultado }})</small>\r\n                    <small *ngIf=\"desde !== 0\" class=\"text-muted\"> - (Desde el: {{ desde + 1}} Hasta el: {{ desde + departmentos.length }})</small>\r\n                </div>\r\n\r\n                <!-- <div *ngIf=\"search.value.length === 0\" class=\"col d-flex justify-content-end\">\r\n                    <button type=\"button\" (click)=\"cambiarPagina(-10)\" class=\"{{btnAtras}} btn btn-sm btn-dark btnW waves-effect waves-light px-3\">Anterior</button>\r\n                    <button type=\"button\" (click)=\"cambiarPagina(10)\" class=\"{{btnAdelante}} btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2\">Siguiente</button>\r\n                </div> -->\r\n            </div>\r\n            <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n        </div>\r\n    </div>\r\n    <!-- TABLE CLIENTS -->\r\n\r\n\r\n</div>\r\n\r\n\r\n<!-- =========================================================================\r\n    NUEVO DEPARTAMENTO \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"nuevoCategoria\" tabindex=\"-1\" aria-labelledby=\"nuevoCategoriaModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"nuevoCategoriaModal\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Crear Categoria</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form id=\"newCategoriaForm\" autocomplete=\"off\" [formGroup]=\"newCategoriaForm\" (ngSubmit)=\"crearCategoria()\">\r\n\r\n                    <!-- =======================================================================\r\n                        Informacion del Categoria\r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Informacion de la Categoria</h5>\r\n\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombre de la Categoria\">\r\n                                <label for=\"floatingInput\">Nombre del Categoria</label>\r\n                            </div>\r\n\r\n                            <div class=\"form-check mt-2\">\r\n                                <input formControlName=\"visibility\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"flexCheckChecked\" checked>\r\n                                <label class=\"form-check-label\" for=\"flexCheckChecked\">\r\n                                  Categoria Visible\r\n                                </label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"text-danger mb-2\">\r\n                            <p *ngIf=\"campoValido('name')\" class=\"mb-1 animated fadeIn\">- El nombre es obligatorio</p>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    NUEVO CATEGORIA \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    ACTUALIZAR CATEGORIA \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"actualizarCategoria\" tabindex=\"-1\" aria-labelledby=\"actualizarCategoriaModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"actualizarCategoriaModal\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Crear Departamento</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form id=\"upCategoriaForm\" autocomplete=\"off\" [formGroup]=\"upCategoriaForm\" (ngSubmit)=\"actualizarCategoria()\">\r\n\r\n                    <!-- =======================================================================\r\n                        Informacion del Departamento\r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Informacion de la Categoria</h5>\r\n\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombre del Departamento\">\r\n                                <label for=\"floatingInput\">Nombre de la Categoria</label>\r\n                            </div>\r\n\r\n                            <div class=\"form-check mt-2\">\r\n                                <input formControlName=\"visibility\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"flexCheckChecked2\">\r\n                                <label class=\"form-check-label\" for=\"flexCheckChecked2\">\r\n                                  Categoria Visible\r\n                                </label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- BUSCAR DEPARTAMENTOS -->\r\n\r\n                    <div class=\"mb-3\">\r\n                        <div class=\"form-floating\">\r\n                            <span class=\"position-absolute top-50 start-90 translate-middle\"><i class=\" bi-search \" style=\"font-size: 1rem \"></i></span>\r\n                            <input type=\"text\" class=\"form-control\" id=\"buscarDepart\" placeholder=\"Buscar Departamento\" (keyup)=\"buscarDepartamento(searchDepartamento.value)\" #searchDepartamento>\r\n                            <label for=\"buscarDepart \">Buscar Departamento</label>\r\n                        </div>\r\n\r\n                        <div *ngIf=\"departamentos.length > 0\" class=\"bg-white py-3 px-2 shadow col-10\" style=\"position: absolute; z-index: 1020;\">\r\n\r\n                            <div *ngIf=\"cargando2\" class=\"text-center py-3\">\r\n                                <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                                    <span class=\"visually-hidden\">Loading...</span>\r\n                                </div>\r\n                                <div>\r\n                                    <small class=\"text-muted\">Cargando...</small>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <ul *ngIf=\"!cargando\" class=\"list-group list-group-flush overflow-auto\" style=\"max-height: 200px;\">\r\n\r\n\r\n                                <li class=\"list-group-item\" *ngFor=\"let item of departamentos\">\r\n                                    <div class=\"d-flex \">\r\n                                        <div class=\"align-self-center\">\r\n                                            <span> {{ item.name }} </span>\r\n                                        </div>\r\n\r\n                                        <div class=\"ms-auto\">\r\n                                            <button type=\"button\" class=\"btn btn-link p-1 text-success float-end\" (click)=\"seleccionarDepartamento(item.did, item.name)\"> <i class=\"bi-arrow-90deg-right\"></i></button>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- BUSCAR DEPARTAMENTOS -->\r\n\r\n                    <!-- TABLA DEPARTAMENTOS -->\r\n                    <div class=\"table-responsive \">\r\n                        <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                            <thead class=\"border-bottom \">\r\n                                <tr>\r\n                                    <th class=\"text-muted \" scope=\"col \">#</th>\r\n                                    <th class=\"text-muted \" scope=\"col \" colspan=\"2\">Nombre</th>\r\n                                    <th class=\"text-muted w100 \" scope=\"col \">Acciones</th>\r\n\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n\r\n                                <tr *ngIf=\"listadoDepartamento.length === 0\" class=\"text-center \">\r\n                                    <th colspan=\"10\" class=\"py-4\">\r\n                                        <h4 class=\"text-muted\">No se a asignado ningun departamento a esta categoria</h4>\r\n                                    </th>\r\n                                </tr>\r\n\r\n                                <tr class=\"trHover\" *ngFor=\"let departamento of listadoDepartamento; let i = index\">\r\n                                    <th scope=\"row \">{{ i + 1}}</th>\r\n                                    <td colspan=\"2\">{{ departamento.name }}</td>\r\n                                    <td class=\"text-center\">\r\n                                        <button type=\"button\" (click)=\"eliminarProductoCarrito(i)\" class=\"btn btn-link p-1 text-danger\"><i class=\"bi bi-trash\"></i></button>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n\r\n                        </table>\r\n\r\n                    </div>\r\n                    <!-- TABLA DEPARTAMENTOS -->\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"text-danger mb-2\">\r\n                            <p *ngIf=\"campoValidoUpdate('name')\" class=\"mb-1 animated fadeIn\">- El nombre es obligatorio</p>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    ACTUALIZAR DEPARTAMENTO \r\n========================================================================= -->","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport Swal from 'sweetalert2';\r\n\r\n// MODELS\r\nimport { Department } from '../../../models/department.model';\r\n\r\n// SERVICES\r\nimport { DepartmentService } from '../../../services/department.service';\r\nimport { SearchService } from '../../../services/search.service';\r\nimport { FileUploadService } from '../../../services/file-upload.service';\r\n\r\n@Component({\r\n  selector: 'app-departamentos',\r\n  templateUrl: './departamentos.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class DepartamentosComponent implements OnInit {\r\n  \r\n  public departmentos: Department[] = [];\r\n  public departmentosTemp: Department[] = [];\r\n  public totalDepartamentos: number = 0;\r\n  \r\n  public resultado: number = 0;\r\n  public desde: number = 0;\r\n  public cargando: boolean = true;\r\n  public sinResultados: boolean = true;\r\n\r\n  // IMAGEN\r\n  public subirImagen: File;\r\n\r\n  constructor(  private departmentService: DepartmentService,\r\n                private searchService: SearchService,\r\n                private fb: FormBuilder,\r\n                private fileUploadService: FileUploadService) { }\r\n\r\n  ngOnInit(): void {\r\n    \r\n    this.cargarDepartamentos();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR DEPARTAMENTOS\r\n  ==================================================================== */\r\n  cargarDepartamentos(){\r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n\r\n    this.departmentService.loadDepartment()\r\n        .subscribe(({ total, departments }) =>{   \r\n\r\n          this.totalDepartamentos = total;\r\n          this.departmentos = departments;\r\n          this.departmentosTemp = departments;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); }\r\n        )\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR DEPARTAMENTOS\r\n  ==================================================================== */\r\n  buscar(termino:string){\r\n    \r\n    this.sinResultados = true;\r\n    if (termino.length === 0) {\r\n      this.departmentos = this.departmentosTemp;\r\n      this.resultado = 0;\r\n      return;\r\n    }else{\r\n      \r\n      this.sinResultados = true;\r\n      \r\n      this.searchService.search('departments', termino)\r\n          .subscribe(({total, resultados}) => {\r\n            \r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            if (resultados.length === 0) {\r\n              this.sinResultados = false;\r\n              this.departmentos = [];\r\n              this.resultado = 0;\r\n              return;                \r\n            }\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            \r\n            this.totalDepartamentos = total;\r\n            this.departmentos = resultados; \r\n            this.resultado = resultados.length;  \r\n\r\n          }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREAR DEPARTAMENTO\r\n  ==================================================================== */\r\n  public newDepartmentForm = this.fb.group({\r\n    name: ['', [Validators.required, Validators.minLength(3)]],\r\n    visibility: [true, [Validators.required]]\r\n  });\r\n  public formSubmitted = false;\r\n\r\n  crearDepartamento(){\r\n    \r\n    this.formSubmitted = true;\r\n\r\n    if (this.newDepartmentForm.invalid) {\r\n      return;\r\n    }\r\n   \r\n    this.departmentService.createDepartment(this.newDepartmentForm.value)\r\n        .subscribe( resp => {\r\n\r\n          this.cargarDepartamentos();          \r\n          Swal.fire('Estupendo', `Se ha creado el Departamento ${this.newDepartmentForm.value.name}, exitosamente!`, 'success')\r\n          this.newDepartmentForm.reset();\r\n          this.formSubmitted = false;\r\n        \r\n        }, (err) => { Swal.fire('Error', err.error.msgm, 'error'); })    \r\n\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  VALIDAR CAMPOS\r\n  ==================================================================== */\r\n  campoValido(campo: string): boolean{\r\n\r\n    if ( this.newDepartmentForm.get(campo).invalid &&  this.formSubmitted) {  \r\n      return true;      \r\n    } else{            \r\n      return false;\r\n    }\r\n  \r\n  }\r\n\r\n  /** ================================================================\r\n   *  OBTENER INFORMACIÓN DEL DEPARTAMENTO PARA ACTUALIZAR\r\n  ==================================================================== */\r\n  public upDepartmentForm = this.fb.group({\r\n    name: ['', [Validators.required, Validators.minLength(3)]],\r\n    id: ['', [Validators.required, Validators.minLength(3)]],\r\n    visibility: [true, [Validators.required]]\r\n  })\r\n\r\n  public imgDepartamento: string = 'no-image';\r\n  public idDepart: string = '';\r\n\r\n  informacionDepartamento(departamento: Department){\r\n\r\n    this.idDepart = departamento.did;\r\n\r\n    this.imgDepartamento = departamento.img || 'no-image';\r\n\r\n    this.upDepartmentForm.setValue({\r\n      name: departamento.name,\r\n      id: departamento.did,\r\n      visibility: departamento.visibility || true\r\n    });\r\n\r\n  }\r\n\r\n\r\n  /** ================================================================\r\n   *  ACTUALIZAR DEPARTAMENTO\r\n  ==================================================================== */\r\n  public formSubmittedUp = false;\r\n  actualizarDepartamento(){\r\n\r\n    this.formSubmittedUp = true;\r\n    \r\n    if (this.upDepartmentForm.invalid) {\r\n      return;\r\n    }\r\n    \r\n    this.departmentService.updateDepartment(this.upDepartmentForm.value, this.upDepartmentForm.value.id)\r\n        .subscribe( resp => {\r\n          \r\n          this.cargarDepartamentos();\r\n          Swal.fire('Estupendo', `El departamento ${this.upDepartmentForm.value.name}, ha sido actualizado`, 'success');\r\n          this.upDepartmentForm.reset();\r\n          this.formSubmittedUp = false;\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  VALIDAR CAMPOS\r\n  ==================================================================== */\r\n  campoValidoUpdate(campo: string): boolean{\r\n    \r\n    if ( this.upDepartmentForm.get(campo).invalid &&  this.formSubmittedUp) {      \r\n      return true;      \r\n    } else{\r\n      \r\n      return false;\r\n    }\r\n  \r\n  }\r\n    \r\n  /** ================================================================\r\n   *  ACTUALIZAR STATUS DEL DEPARTAMENTO\r\n  ==================================================================== */\r\n  statusUpdate(id:string){\r\n    \r\n    this.departmentService.statusUpdateDepartment(id)\r\n        .subscribe( (department) => {\r\n\r\n          let information: string;\r\n          if (department.status) {\r\n            information = 'Activado';            \r\n          }else{\r\n            information = 'Desactivado';\r\n          }\r\n          \r\n          \r\n          this.cargarDepartamentos();\r\n          Swal.fire('Estupendo', `El departamento ${department.name}, ha sido ${information}`, 'success');\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  SELECCIONAR IMAGEN\r\n  ==================================================================== */\r\n  public imgTemp: any = null;\r\n  cambiarImage(file: File){\r\n\r\n    this.subirImagen = file;\r\n    \r\n    if (!file) { return this.imgTemp = null }\r\n\r\n    const reader = new FileReader();\r\n    const url64 = reader.readAsDataURL( file );\r\n\r\n    reader.onloadend = () => {\r\n      this.imgTemp = reader.result;\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  SUBIR IMAGEN fileImg\r\n  ==================================================================== */\r\n  @ViewChild('fileImg') fileImg: ElementRef;\r\n  subirImg(){\r\n\r\n    this.fileUploadService.updateImage( this.subirImagen, 'department', this.upDepartmentForm.value.id)\r\n        .then( img => this.cargarDepartamentos());\r\n\r\n    this.fileImg.nativeElement.value = '';\r\n    this.imgDepartamento = 'no-image';\r\n    this.imgTemp = null;\r\n    \r\n  }\r\n\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-yellow py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">PRODUCTOS</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark\" id=\"administracion-tab\" [routerLink]=\"['/dashboard', 'productos']\">\r\n                <i class=\"bi-files\" style=\"font-size: 1rem\"></i> Administracion de Productos\r\n            </a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-primary\" id=\"nuevo-tab\" [routerLink]=\"['/dashboard/productos', 'nuevo']\"><i class=\"bi-pencil-square\" style=\"font-size: 1rem\"></i> Crear Producto</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark active\" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'departamento']\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Departamentos</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'categorias']\" aria-selected=\"false\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Categorias</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'movimientos']\" aria-selected=\"false\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Movimientos</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'kardex']\" aria-selected=\"false\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> kardex</a>\r\n        </li>\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<div class=\"container-fluid\">\r\n\r\n    <!-- TABLE CLIENTS -->\r\n    <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n        <!-- CARGANDO -->\r\n        <div *ngIf=\"cargando\">\r\n            <div class=\"text-center p-4\">\r\n                <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                    <span class=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n            </div>\r\n            <small class=\"text-muted\">cargando...</small>\r\n        </div>\r\n        <!-- CARGANDO -->\r\n\r\n        <div *ngIf=\"!cargando\">\r\n            <div>\r\n                <div class=\"form-floating mb-2\">\r\n                    <span class=\"position-absolute top-50 start-90 translate-middle\"><i class=\" bi-search \" style=\"font-size: 1rem \"></i></span>\r\n                    <input type=\"text\" class=\"form-control\" id=\"floatingInput2\" placeholder=\"Buscar Departamento\" (keyup)=\"buscar(search.value)\" #search>\r\n                    <label for=\"floatingInput2 \">Buscar Departamento</label>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- BTN CREAR DEPARTAMENTO -->\r\n            <div class=\"d-flex justify-content-end\">\r\n                <button type=\"button\" class=\"btn btn-sm btn-primary btnW waves-effect waves-ligth\" data-bs-toggle=\"modal\" data-bs-target=\"#nuevoDepartamento\">Crear Departamento</button>\r\n            </div>\r\n            <!-- BTN CREAR DEPARTAMENTO -->\r\n\r\n            <div class=\"table-responsive \">\r\n                <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                    <thead class=\"border-bottom \">\r\n                        <tr>\r\n                            <th class=\"text-muted \" scope=\"col \">#</th>\r\n                            <th class=\"text-muted \" scope=\"col \"></th>\r\n                            <th class=\"text-muted \" scope=\"col \" colspan=\"2\">Nombre</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Estado</th>\r\n                            <th class=\"text-muted w100 \" scope=\"col \">Acciones</th>\r\n\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr *ngIf=\"!sinResultados\" class=\"text-center \">\r\n                            <th colspan=\"10\" class=\"py-4\">\r\n                                <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                            </th>\r\n                        </tr>\r\n                        <tr class=\"trHover\" *ngFor=\"let departamento of departmentos; let i = index\">\r\n                            <th *ngIf=\"desde === 0 \" scope=\"row \">{{ i + 1}}</th>\r\n                            <th *ngIf=\"desde> 0\" scope=\"row\">{{ (i + 1) + desde }}</th>\r\n                            <td>\r\n\r\n                                <img [src]=\"departamento.img | imagen: 'department'\" class=\"avatar avatar-img\" alt=\"\">\r\n\r\n                            </td>\r\n                            <td colspan=\"2\">{{ departamento.name }}</td>\r\n                            <td>\r\n                                <button *ngIf=\"departamento.status\" (click)=\"statusUpdate(departamento.did)\" type=\"button\" class=\"btn btnW waves-effect waves-ligth btn-success btn-sm\">Activo</button>\r\n                                <button *ngIf=\"!departamento.status\" (click)=\"statusUpdate(departamento.did)\" type=\"button\" class=\"btn btnW waves-effect waves-ligth btn-danger btn-sm\">Desactivo</button>\r\n                            </td>\r\n                            <td class=\"text-center\">\r\n                                <button type=\"button\" (click)=\"informacionDepartamento(departamento)\" class=\"btn btn-link p-1 text-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#actualizarDepartamento\"><i class=\"bi bi-box-arrow-up-right\"></i></button>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n\r\n                </table>\r\n\r\n            </div>\r\n\r\n            <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n            <div class=\"row\">\r\n                <div class=\"col col-md-4\">\r\n                    <small class=\"text-muted\">Total de departamentos: ({{totalDepartamentos}})</small>\r\n                    <small *ngIf=\"resultado !== 0\" class=\"text-muted\"> - (Resultados: {{ resultado }})</small>\r\n                    <small *ngIf=\"desde !== 0\" class=\"text-muted\"> - (Desde el: {{ desde + 1}} Hasta el: {{ desde + departmentos.length }})</small>\r\n                </div>\r\n\r\n                <!-- <div *ngIf=\"search.value.length === 0\" class=\"col d-flex justify-content-end\">\r\n                    <button type=\"button\" (click)=\"cambiarPagina(-10)\" class=\"{{btnAtras}} btn btn-sm btn-dark btnW waves-effect waves-light px-3\">Anterior</button>\r\n                    <button type=\"button\" (click)=\"cambiarPagina(10)\" class=\"{{btnAdelante}} btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2\">Siguiente</button>\r\n                </div> -->\r\n            </div>\r\n            <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n        </div>\r\n    </div>\r\n    <!-- TABLE CLIENTS -->\r\n\r\n\r\n</div>\r\n\r\n\r\n<!-- =========================================================================\r\n    NUEVO DEPARTAMENTO \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"nuevoDepartamento\" tabindex=\"-1\" aria-labelledby=\"nuevoDepartamentoModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"nuevoDepartamentoModal\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Crear Departamento</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form id=\"newDepartmentForm\" autocomplete=\"off\" [formGroup]=\"newDepartmentForm\" (ngSubmit)=\"crearDepartamento()\">\r\n\r\n                    <!-- =======================================================================\r\n                        Informacion del Departamento\r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Informacion del Departamento</h5>\r\n\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombre del Departamento\">\r\n                                <label for=\"floatingInput\">Nombre del Departamento</label>\r\n                            </div>\r\n\r\n                            <div class=\"form-check mt-2\">\r\n                                <input formControlName=\"visibility\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"flexCheckChecked\" checked>\r\n                                <label class=\"form-check-label\" for=\"flexCheckChecked\">\r\n                                  Departamento Visible\r\n                                </label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"text-danger mb-2\">\r\n                            <p *ngIf=\"campoValido('name')\" class=\"mb-1 animated fadeIn\">- El nombre es obligatorio</p>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    NUEVO DEPARTAMENTO \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    ACTUALIZAR DEPARTAMENTO \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"actualizarDepartamento\" tabindex=\"-1\" aria-labelledby=\"actualizarDepartamentoModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"actualizarDepartamentoModal\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Crear Departamento</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form id=\"upDepartmentForm\" autocomplete=\"off\" [formGroup]=\"upDepartmentForm\" (ngSubmit)=\"actualizarDepartamento()\">\r\n\r\n                    <!-- =======================================================================\r\n                        Informacion del Departamento\r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Informacion del Departamento</h5>\r\n\r\n                    <!-- IMAGE -->\r\n                    <div class=\"col py-2 text-center\">\r\n                        <div class=\"card\">\r\n                            <div class=\"card-body text-center\">\r\n\r\n                                <!-- Image Product-->\r\n                                <img *ngIf=\"!imgTemp\" [src]=\"imgDepartamento | imagen: 'department'\" class=\"avatar-redondo-lg mx-auto\" alt=\"\">\r\n\r\n                                <!-- IMG TEMPO  imgTemp -->\r\n                                <img *ngIf=\"imgTemp\" [src]=\"imgTemp\" class=\"avatar-redondo-lg mx-auto\" alt=\"\">\r\n\r\n                                <div class=\"mb-3\">\r\n                                    <label for=\"formFileSm\" class=\"form-label\">Seleccionar Imagen</label>\r\n                                    <input #fileImg class=\"form-control form-control-sm\" id=\"formFileSm\" type=\"file\" (change)=\"cambiarImage($event.target.files[0])\">\r\n                                </div>\r\n                                <!-- Description-->\r\n                                <div class=\"small font-italic text-muted mb-4\">JPG - PNG - WEBP - no mayor a 5 mb</div>\r\n                                <!-- BTN upload Image -->\r\n                                <button *ngIf=\"imgTemp\" class=\"btn btnW btn-primary waves-effect waves-light px-3\" [disabled]=\"!subirImagen\" (click)=\"subirImg()\" type=\"button\">Actualizar Imagen</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <!-- IMAGE -->\r\n\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-floating mb-3\">\r\n                                <input type=\"text\" class=\"form-control text-capitalize\" readonly placeholder=\"Nombre del Departamento\" [value]=\"idDepart\">\r\n                                <label for=\"floatingInput\">ID</label>\r\n                            </div>\r\n\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombre del Departamento\">\r\n                                <label for=\"floatingInput\">Nombre del Departamento</label>\r\n                            </div>\r\n\r\n                            <div class=\"form-check mt-2\">\r\n                                <input formControlName=\"visibility\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"flexCheckChecked2\">\r\n                                <label class=\"form-check-label\" for=\"flexCheckChecked2\">\r\n                                  Departamento Visible\r\n                                </label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"text-danger mb-2\">\r\n                            <p *ngIf=\"campoValidoUpdate('name')\" class=\"mb-1 animated fadeIn\">- El nombre es obligatorio</p>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    ACTUALIZAR DEPARTAMENTO \r\n========================================================================= -->","import { Component, OnInit } from '@angular/core';\r\nimport { Product } from 'src/app/models/product.model';\r\nimport Swal from 'sweetalert2';\r\n\r\n// SERVICIOS\r\nimport { ProductService } from '../../../services/product.service';\r\n\r\n@Component({\r\n  selector: 'app-eliminados',\r\n  templateUrl: './eliminados.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class EliminadosComponent implements OnInit {\r\n\r\n  public resultado: number = 0;\r\n  public desde: number = 0;\r\n  public cargando: boolean = true;\r\n  public sinResultados: boolean = true;\r\n\r\n  constructor(  private productService: ProductService) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // CARGAR PRODUCTOS ELIMINADOS\r\n    this.cargarProductos();\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR PRODUCTOS ELIMINADOS\r\n  ==================================================================== */\r\n  public productos: Product[] = [];\r\n  public totalProductos: number = 0;\r\n  public total: number = 0;\r\n  cargarProductos(){\r\n\r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n\r\n    this.productService.cargarProductosEliminados()\r\n        .subscribe( ({products, total}) => {\r\n\r\n          this.totalProductos = products.length;\r\n          this.productos = products;\r\n          this.total = total;\r\n          this.cargando = false;\r\n\r\n          \r\n        }, (err) => {\r\n          console.log(err.error);          \r\n        }); \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ACTIVAR Producto\r\n  ==================================================================== */\r\n  activarProducto(_id: string){\r\n\r\n    Swal.fire({\r\n      title: 'Atencion',\r\n      text: \"Estas seguro de Activar este producto?\",\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: 'Si, Activar',\r\n      cancelButtonText: 'Cancelar'\r\n    }).then((result) => {  \r\n      \r\n      if (result.isConfirmed) {\r\n\r\n        this.productService.deleteProduct(_id)\r\n        .subscribe((resp:{product, ok}) =>{\r\n\r\n          if (resp.product.status) {\r\n            Swal.fire('Estupendo', 'Se ha habilitado el Producto exitosamente!', 'success');\r\n          }else{\r\n            Swal.fire('Estupendo', 'Se ha eliminado el Producto exitosamente!', 'success');\r\n          }          \r\n\r\n          this.cargarProductos();\r\n\r\n        }, (err) =>{\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n        });\r\n\r\n      }\r\n\r\n    });\r\n\r\n    \r\n  }\r\n\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-danger py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">PRODUCTOS ElIMINADOS</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark\" id=\"administracion-tab\" [routerLink]=\"['/dashboard', 'productos']\">\r\n                <i class=\"bi-files\" style=\"font-size: 1rem\"></i> Administracion de Productos\r\n            </a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-primary\" id=\"nuevo-tab\" [routerLink]=\"['/dashboard/productos', 'nuevo']\"><i class=\"bi-pencil-square\" style=\"font-size: 1rem\"></i> Crear Producto</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'departamento']\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Departamentos</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"categorias-tab\" [routerLink]=\"['/dashboard/productos', 'categorias']\" aria-selected=\"false\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Categorias</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"movimientos-tab\" [routerLink]=\"['/dashboard/productos', 'movimientos']\" aria-selected=\"false\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Movimientos</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"kardex-tab\" [routerLink]=\"['/dashboard/productos', 'kardex']\" aria-selected=\"false\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> kardex</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark active\" id=\"eliminados-tab\" [routerLink]=\"['/dashboard/productos', 'eliminados']\" aria-selected=\"false\"><i class=\"bi-trash\" style=\"font-size: 1rem\"></i> Eliminados</a>\r\n        </li>\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<div class=\"container-fluid\">\r\n\r\n    <!-- TABLE CLIENTS -->\r\n    <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n        <!-- CARGANDO -->\r\n        <div *ngIf=\"cargando\">\r\n            <div class=\"text-center p-4\">\r\n                <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                    <span class=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n            </div>\r\n            <small class=\"text-muted\">cargando...</small>\r\n        </div>\r\n        <!-- CARGANDO -->\r\n\r\n        <div *ngIf=\"!cargando\">\r\n\r\n            <div class=\"table-responsive \">\r\n                <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                    <thead class=\"border-bottom \">\r\n                        <tr>\r\n                            <th></th>\r\n                            <th class=\"text-muted \" scope=\"col \">#</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Codigo</th>\r\n                            <th class=\"text-muted \" scope=\"col \" colspan=\"2\">Nombre</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Departamento</th>\r\n                            <th class=\"text-muted \" scope=\"col \">stock</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Tipo</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Costo</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Ganancia</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Precio</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Precio Mayor</th>\r\n                            <th class=\"text-muted w100 \" scope=\"col \">Acciones</th>\r\n\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr *ngIf=\"productos.length === 0\" class=\"text-center \">\r\n                            <th colspan=\"14\" class=\"py-4\">\r\n                                <h4 class=\"text-muted\">No se ha eliminado ningun producto</h4>\r\n                            </th>\r\n                        </tr>\r\n\r\n                        <ng-container *ngFor=\"let producto of productos; let i=index \">\r\n\r\n                            <tr class=\"trHover\" [ngClass]=\" { 'table-danger': producto.vencido}\" (mouseover)=\"btnAddInv= true\" (mouseout)=\"btnAddInv= false\">\r\n\r\n                                <th class=\"align-items-center\" *ngIf=\" desde===0 \" scope=\"row \">{{ i + 1}}</th>\r\n                                <th class=\"align-items-center\" *ngIf=\"desde> 0\" scope=\"row\">{{ (i + 1) + desde }}</th>\r\n                                <td>\r\n                                    <img [src]=\"producto.img | imagen:'products'\" class=\"avatar avatar-img\" alt=\"\">\r\n                                </td>\r\n                                <td><small>{{ producto.code }}</small></td>\r\n\r\n                                <td colspan=\"2\">\r\n                                    {{ producto.name }}\r\n                                    <span *ngIf=\"producto.status && producto.low && !producto.out\" class=\"badge rounded-pill bg-warning text-dark\">Bajo</span>\r\n                                    <span *ngIf=\"producto.status && producto.out\" class=\"badge rounded-pill bg-danger\">Agotado</span>\r\n                                    <span *ngIf=\"producto.status && producto.vencido\" class=\"badge rounded-pill bg-danger\">Vencido</span>\r\n                                    <span *ngIf=\"!producto.status\" class=\"badge rounded-pill bg-danger\">Eliminado</span>\r\n                                </td>\r\n\r\n                                <td>\r\n                                    <span *ngIf=\"producto.department\">{{ producto.department.name }}</span>\r\n                                    <span *ngIf=\"!producto.department\"> Sin Departamento </span>\r\n                                </td>\r\n                                <td class=\"text-center\">\r\n                                    <span *ngIf=\"producto.type === 'Granel'\"> {{  producto.inventario | number:'1.3'}} </span>\r\n                                    <span *ngIf=\"producto.type !== 'Granel'\"> {{  producto.inventario | number }} </span>\r\n                                </td>\r\n                                <td>{{ producto.type }}</td>\r\n                                <td>{{ producto.cost | divisa }}</td>\r\n                                <td>{{ producto.gain }}%</td>\r\n                                <td>{{ producto.price | divisa }}</td>\r\n                                <td>{{ producto.wholesale | divisa }}</td>\r\n                                <td class=\"text-center\">\r\n                                    <a [routerLink]=\"['/dashboard/producto', producto.pid]\" class=\"btn btn-link p-1 text-primary\"><i class=\"bi bi-box-arrow-up-right\"></i></a>\r\n                                    <button type=\"button\" (click)=\"activarProducto(producto.pid)\" class=\"btn btn-link p-1 text-success\"><i class=\"bi-check-square\" style=\"font-size: 0.9rem\"></i></button>\r\n                                </td>\r\n                            </tr>\r\n\r\n                        </ng-container>\r\n                    </tbody>\r\n\r\n                </table>\r\n\r\n            </div>\r\n\r\n            <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n            <div class=\"row\">\r\n                <div class=\"col col-md-4\">\r\n                    <small class=\"text-muted\">Total de productos eliminados: ({{totalProductos}}) de {{ total }}</small>\r\n                </div>\r\n\r\n                <!-- <div *ngIf=\"search.value.length === 0\" class=\"col d-flex justify-content-end\">\r\n                    <button type=\"button\" (click)=\"cambiarPagina(-10)\" class=\"{{btnAtras}} btn btn-sm btn-dark btnW waves-effect waves-light px-3\">Anterior</button>\r\n                    <button type=\"button\" (click)=\"cambiarPagina(10)\" class=\"{{btnAdelante}} btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2\">Siguiente</button>\r\n                </div> -->\r\n            </div>\r\n            <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n        </div>\r\n    </div>\r\n    <!-- TABLE CLIENTS -->\r\n\r\n\r\n</div>","import { Component, OnInit, ViewChild, TemplateRef, ElementRef } from '@angular/core';\r\nimport { Subscription, Observable } from 'rxjs';\r\n\r\n// PRINTER\r\nimport { NgxPrinterService } from 'projects/ngx-printer/src/lib/ngx-printer.service';\r\nimport { PrintItem } from 'projects/ngx-printer/src/lib/print-item';\r\nimport { ngxPrintMarkerPosition } from 'projects/ngx-printer/src/public_api';\r\n\r\n// MODELS\r\nimport { Department } from '../../../models/department.model';\r\nimport { Product } from '../../../models/product.model';\r\n\r\n// SERVICES\r\nimport { DepartmentService } from '../../../services/department.service';\r\nimport { ProductService } from '../../../services/product.service';\r\n\r\n@Component({\r\n  selector: 'app-kardex',\r\n  templateUrl: './kardex.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class KardexComponent implements OnInit {\r\n\r\n  @ViewChild('PrintTemplate')\r\n  private PrintTemplateTpl: TemplateRef<any>;\r\n\r\n  title = 'ngx-printer-demo';\r\n\r\n  printWindowSubscription: Subscription;\r\n  $printItems: Observable<PrintItem[]>;\r\n\r\n  constructor(  private departmentService: DepartmentService,\r\n                private productsService: ProductService,\r\n                private printerService: NgxPrinterService,) { \r\n\r\n                  this.printWindowSubscription = this.printerService.$printWindowOpen.subscribe(\r\n                    val => {\r\n                      console.log('Print window is open:', val);\r\n                    }\r\n                  );\r\n              \r\n                  this.$printItems = this.printerService.$printItems;\r\n              }\r\n\r\n  ngOnInit(): void {\r\n\r\n    //CAARGAR DEPARTAMENTOS\r\n    this.cargarDepartamnetos();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   IMPRIMIR\r\n  ==================================================================== */\r\n  printDiv() {\r\n    this.printerService.printDiv('printDiv');\r\n  }\r\n\r\n  /** ===================================================================================\r\n   * CARGAR DEPARTAMENTOS\r\n  ================================================================================== */\r\n  public departamentos: Department[] = [];\r\n  cargarDepartamnetos(){\r\n\r\n    this.departmentService.loadDepartment()\r\n        .subscribe( ({departments}) => {\r\n\r\n          this.departamentos = departments;\r\n\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================================\r\n   * CARGAR PRODUCTOS\r\n  ================================================================================== */\r\n  public desde: number = 0;\r\n  public endPoint: string;\r\n  public productos: Product[] = [];\r\n\r\n  public cargando: boolean = false;\r\n  \r\n  buscar( termino: string ){\r\n\r\n    this.cargando = true;\r\n\r\n    if (termino === 'Ninguno') {\r\n      return;\r\n    }\r\n\r\n    if (termino === 'Todos') {\r\n      this.endPoint = `?desde=${this.desde}&limite=10000&tipo=none&status=false&departamento=none`;\r\n    }else{\r\n      this.endPoint = `?desde=${this.desde}&limite=10000&tipo=none&status=false&departamento=${termino}`;\r\n    }\r\n\r\n\r\n    this.productsService.cargarProductos(this.endPoint)\r\n        .subscribe( ({ products }) => {\r\n\r\n          this.productos = products;\r\n          this.cargando = false;          \r\n\r\n        });    \r\n\r\n  }\r\n\r\n  /** ================================================================================\r\n   * SUMAR PRODUCTO ACTUAL\r\n  ================================================================================== */\r\n  @ViewChild('searchCode') searchCode: ElementRef;\r\n  sumProduct(code: string){\r\n\r\n    if (this.productos.length === 0) {\r\n      this.searchCode.nativeElement.value = '';\r\n      this.searchCode.nativeElement.onFocus = true;\r\n      return;\r\n    }\r\n\r\n    this.productos.map( (product) => {\r\n\r\n      if (product.code === code) {\r\n\r\n        if (!product.kardex) {\r\n          product.kardex = 1;\r\n        }else{\r\n          product.kardex = product.kardex + 1;\r\n        }\r\n\r\n      }\r\n\r\n    });\r\n\r\n    this.searchCode.nativeElement.value = '';\r\n    this.searchCode.nativeElement.onFocus = true;\r\n\r\n  }\r\n\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-yellow py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">PRODUCTOS</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark\" id=\"administracion-tab\" [routerLink]=\"['/dashboard', 'productos']\">\r\n                <i class=\"bi-files\" style=\"font-size: 1rem\"></i> Administracion de Productos\r\n            </a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-primary\" id=\"nuevo-tab\" [routerLink]=\"['/dashboard/productos', 'nuevo']\"><i class=\"bi-pencil-square\" style=\"font-size: 1rem\"></i> Crear Producto</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark \" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'departamento']\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Departamentos</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'categorias']\" aria-selected=\"false\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Categorias</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'movimientos']\" aria-selected=\"false\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Movimientos</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark active\" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'kardex']\" aria-selected=\"false\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> kardex</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"eliminados-tab\" [routerLink]=\"['/dashboard/productos', 'eliminados']\" aria-selected=\"false\"><i class=\"bi-trash\" style=\"font-size: 1rem\"></i> Eliminados</a>\r\n        </li>\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n<div class=\"container-fluid\">\r\n\r\n    <div class=\"row py-4\">\r\n\r\n        <diV class=\"col-md-6\">\r\n\r\n            <div class=\"shadow-lg py-3 mb-2 rounded bg-white\">\r\n                <!-- ESCANEAR PRODUCTO -->\r\n                <div class=\"my-2 container\">\r\n                    <label for=\"scan\">Escanear codigo de barras</label>\r\n                    <input type=\"search\" id=\"scan\" class=\"form-control\" placeholder=\"Ingrese o busca un codigo de barras\" (keyup.enter)=\"sumProduct(searchCode.value)\" #searchCode>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"shadow-lg py-3 mb-5 rounded bg-white sticky-md-top\">\r\n\r\n                <div class=\"container\">\r\n\r\n                    <h4 class=\"mb-0\"> Filtros </h4>\r\n\r\n                    <hr>\r\n\r\n                    <label for=\"\">Kardex</label>\r\n\r\n                    <select class=\"form-select\" aria-label=\"Departamentos\" (change)=\"buscar(selectDepart.value)\" #selectDepart>\r\n                        <option value=\"Ninguno\" selected>Seleccionar Departamento</option>\r\n                        <option value=\"Todos\" > Todos </option>\r\n                        <option [value]=\"departamento.did\" *ngFor=\"let departamento of departamentos\" > {{ departamento.name }} </option>\r\n                    </select>\r\n\r\n                    <hr>\r\n\r\n                    <button (click)=\"printDiv()\" [disabled]=\"productos.length === 0\" type=\"button\" class=\"btn btn-primary btn-lg btn-block\">\r\n                        <i class=\"bi bi-print\"></i>\r\n                        Imprimir\r\n                    </button>\r\n\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </diV>\r\n\r\n        <!-- KARDEX -->\r\n        <div class=\"col-md-6\">\r\n\r\n            <div class=\"shadow-lg py-3 mb-5 rounded bg-white\" style=\"max-width: 16rem;\">\r\n\r\n                <div id=\"printDiv\" style=\"max-width: 16rem;\">\r\n\r\n                    <h4 class=\"ms-2 mb-0\">Listado de productos</h4>\r\n\r\n                    <div *ngIf=\"productos.length === 0 && !cargando\" class=\"text-center\">\r\n                        <hr>\r\n                        <h3 class=\"text-muted\"> Aun no se a cargado ningun producto </h3>\r\n                        <hr>\r\n                    </div>\r\n\r\n                    <!-- CARGANDO -->\r\n                    <div *ngIf=\"cargando\">\r\n                        <div class=\"text-center p-4\">\r\n                            <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                                <span class=\"visually-hidden\">Loading...</span>\r\n                            </div>\r\n                        </div>\r\n                        <small class=\"text-muted\">cargando...</small>\r\n                    </div>\r\n                    <!-- CARGANDO -->\r\n\r\n                    <h5 class=\"ms-2\" *ngIf=\"productos.length > 0\">Total: {{ productos.length }} </h5>\r\n\r\n                    <div *ngIf=\"productos.length > 0\">\r\n\r\n                        <table class=\"table table-sm table-hover align-middle\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Inv</th>\r\n                                    <th>Producto</th>\r\n                                    <th>Escaneado</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr *ngFor=\" let producto of productos \" class=\"align-middle\" style=\"border-bottom: 1px #000 solid;\">\r\n                                    <td class=\"text-center fw-bold\"> {{ producto.inventario | number}} </td>\r\n                                    <td style=\"color: #000\"> {{ producto.name }} </td>\r\n                                    <td class=\"text-center fw-bold\"> {{ producto.kardex || 0 }} </td>\r\n                                </tr>\r\n\r\n                            </tbody>\r\n                        </table>\r\n\r\n                    </div>\r\n\r\n                    <!-- <ul *ngIf=\"productos.length > 0\" class=\"list-group list-group-flush pt-3\">\r\n\r\n\r\n\r\n\r\n\r\n                        <li class=\"list-group-item d-flex align-items-start\" style=\" border-bottom: 2px solid #000; padding-bottom: 4px; margin-bottom: 4px;\">\r\n                            <span class=\"fw-bold \"> INV. - </span>\r\n                            <span class=\"fw-bold \">PRODUCTO - </span>\r\n                            <span class=\"fw-bold \">Escaneado</span>\r\n                        </li>\r\n\r\n                        <ng-container *ngFor=\" let producto of productos \">\r\n\r\n                            <li class=\"list-group-item d-flex align-items-start py-0 \" style=\" border-bottom: 1px solid #000;\">\r\n                                <span class=\"fw-bold \"> {{ producto.inventario }} </span>\r\n                                <span class=\"text-break\"> - {{ producto.name }}</span>\r\n                                <span class=\"text-break\"> - {{ producto.kardex || 0 }}</span>\r\n                            </li>\r\n\r\n                        </ng-container>\r\n\r\n                    </ul> -->\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n\r\n\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\r\n\r\n// MODEL\r\nimport { LogProductsModel } from '../../../models/log-products';\r\n\r\n// SERVICES\r\nimport { LogProductsService } from '../../../services/log-products.service';\r\nimport { SearchService } from '../../../services/search.service';\r\nimport { DepartmentService } from '../../../services/department.service';\r\nimport { Department } from '../../../models/department.model';\r\n\r\n@Component({\r\n  selector: 'app-movimientos',\r\n  templateUrl: './movimientos.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class MovimientosComponent implements OnInit {\r\n\r\n  public total: number = 0;\r\n  public productosLog: LogProductsModel[] = [];\r\n  public productosLogTemp: LogProductsModel[] = [];\r\n  \r\n  public resultado: number = 0;\r\n  public desde: number = 0;\r\n  public limite: number = 10;\r\n  public cargando: boolean = true;\r\n  public sinResultados: boolean = true;\r\n\r\n  public btnAtras: string = '';\r\n  public btnAdelante: string = '';\r\n\r\n  constructor(  private logProductsServices: LogProductsService,\r\n                private searchService: SearchService,\r\n                private departmentService: DepartmentService ) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // CARGAR LOG DE PRODUCTOS\r\n    this.cargarLogProductos();\r\n\r\n    // CARGAR DEPARTAMENTOS\r\n    this.cargarDepartamento();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR DEPARTAMENTOS\r\n  ==================================================================== */\r\n  public departamentos: Department[] = [];\r\n  cargarDepartamento(){\r\n\r\n    this.departmentService.loadDepartment()\r\n        .subscribe( ({departments}) => {\r\n\r\n          this.departamentos = departments;          \r\n\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR LOG PRODUCTOS\r\n  ==================================================================== */\r\n  public query: any = {\r\n    desde: 0,\r\n    hasta: 50,\r\n    sort: {fecha: -1}\r\n  }\r\n  \r\n  cargarLogProductos(){\r\n\r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n    this.monto = 0;\r\n\r\n    this.logProductsServices.loadLogProductsQuery(this.query)\r\n        .subscribe( ({ products, total }) => {\r\n\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (products.length === 0) {\r\n            this.sinResultados = false;\r\n            this.cargando = false;\r\n            this.productosLog = [];\r\n            this.resultado = 0;\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n\r\n          this.total = total;\r\n          this.productosLog = products;\r\n          this.productosLogTemp = products;\r\n          this.resultado = products.length;\r\n          this.cargando = false;\r\n\r\n          for (const log of products) {\r\n            this.monto += log.monto || 0;\r\n          }\r\n\r\n\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CAMBIAR PAGINA\r\n  ==================================================================== */\r\n  @ViewChild('mostrar') mostrar!: ElementRef;\r\n  cambiarPagina (valor: Number){\r\n\r\n    this.query.desde += valor;\r\n\r\n    if (this.query.desde < 0) {\r\n      this.query.desde = 0;\r\n    }\r\n\r\n    this.cargarLogProductos();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CAMBIAR LIMITE\r\n  ==================================================================== */\r\n  limiteChange( cantidad: any ){  \r\n\r\n    this.query.hasta = Number(cantidad);    \r\n    this.cargarLogProductos();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR\r\n  ==================================================================== */\r\n  public monto: number = 0;\r\n  buscar( termino:string ){\r\n\r\n    if (termino.length <= 0) {\r\n      delete this.query['$or'];\r\n      this.cargarLogProductos();\r\n      return;\r\n    }\r\n\r\n    const regex = { $regex: termino, $options: 'i' }; // Construir regex      \r\n    this.query.$or = [\r\n      { name: regex },\r\n      { code: regex },\r\n      { description: regex },\r\n      { type: regex },\r\n      { departamento: regex }\r\n    ];\r\n\r\n    this.cargarLogProductos();\r\n\r\n  }\r\n\r\n\r\n  buscarPor(inicial:Date, final: Date){\r\n\r\n    if (inicial === null && final === null || !inicial || !final) {\r\n      return;\r\n    }\r\n\r\n    // SET HOURS      \r\n    inicial = new Date(inicial);      \r\n    let initial = new Date(inicial.getTime() + 1000 * 60 * 60 * 5);\r\n\r\n    final = new Date(final);\r\n    let end = new Date(final.getTime() + 1000 * 60 * 60 * 5);      \r\n    // SET HOURS \r\n\r\n    let url = document.URL.split(':');\r\n    if (url[0] === 'https') {\r\n      initial = new Date(inicial.getTime() + 1000 * 60 * 60 - 7200000); \r\n      end = new Date(final.getTime() + 1000 * 60 * 60 - 3600000);        \r\n    }\r\n\r\n    this.query.$and = [{ fecha: { $gte: new Date(initial), $lt: new Date(end) } }];\r\n\r\n    this.cargarLogProductos();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR DEPARTAMENTO\r\n  ==================================================================== */\r\n  searchDepartment(departamento: string){    \r\n    \r\n    if (departamento === 'all') {\r\n      delete this.query.departamento;      \r\n    }else{\r\n      this.query.departamento = departamento;\r\n    }\r\n\r\n    this.cargarLogProductos();\r\n\r\n  }\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-yellow py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">PRODUCTOS</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark\" id=\"administracion-tab\" [routerLink]=\"['/dashboard', 'productos']\">\r\n                <i class=\"bi-files\" style=\"font-size: 1rem\"></i> Administracion de Productos\r\n            </a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-primary\" id=\"nuevo-tab\" [routerLink]=\"['/dashboard/productos', 'nuevo']\"><i class=\"bi-pencil-square\" style=\"font-size: 1rem\"></i> Crear Producto</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark \" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'departamento']\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Departamentos</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'categorias']\" aria-selected=\"false\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Categorias</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark active\" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'movimientos']\" aria-selected=\"false\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Movimientos</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'kardex']\" aria-selected=\"false\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> kardex</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"eliminados-tab\" [routerLink]=\"['/dashboard/productos', 'eliminados']\" aria-selected=\"false\"><i class=\"bi-trash\" style=\"font-size: 1rem\"></i> Eliminados</a>\r\n        </li>\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n<div class=\"container-fluid my-4\">\r\n\r\n    <div class=\"col-12\">\r\n\r\n        <div class=\"d-flex flex-wrap gap-2\">\r\n\r\n            <div class=\"col-xl-3 col-md-3 mb-4\">\r\n                <!-- Dashboard info widget 1-->\r\n                <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-primary h-100 bg-white\">\r\n                    <div class=\"card-body\">\r\n                        <div class=\"d-flex align-items-center flex-wrap\">\r\n                            <div class=\"flex-grow-1\">\r\n                                <div class=\"small font-weight-bold text-primary mb-1\">Ingresos</div>\r\n                                <div class=\"h5\">({{monto | currency: 'COP'}})</div>\r\n                                <div class=\"text-xs font-weight-bold text-success d-inline-flex align-items-center\">\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-trending-up mr-1\"><polyline points=\"23 6 13.5 15.5 8.5 10.5 1 18\"></polyline><polyline points=\"17 6 23 6 23 12\"></polyline></svg>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"ms-2\">\r\n                                <i class=\"bi bi-receipt text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n\r\n\r\n    <div class=\"row mb-5\">\r\n\r\n        <!-- FILTRO -->\r\n        <div class=\"col-12 col-md-3 col-xl-3 mt-2\">\r\n            <div class=\"p-3 rounded bg-white\">\r\n\r\n                <h4 class=\"mb-0 text-muted\">Filtros</h4>\r\n\r\n                <hr>\r\n\r\n                <!-- DEPARTAMENTOS -->\r\n                <div>\r\n                    <h6 class=\"text-muted\">Departamentos</h6>\r\n                    <select class=\"form-select\" aria-label=\"Default select example\" (change)=\"searchDepartment(departament.value)\" #departament>\r\n                        <option value=\"all\" selected>Seleccionar departamento</option>\r\n                        <ng-container *ngFor=\"let departmento of departamentos\">\r\n                            <option *ngIf=\"departmento.status\" value=\"{{departmento.name}}\">{{departmento.name}}</option>\r\n                        </ng-container>\r\n                    </select>\r\n                </div>\r\n                <!-- DEPARTAMENTOS -->\r\n\r\n                <!-- DESDE -->\r\n                <div class=\"mt-4\">\r\n                    <label class=\"\" for=\"\">Desde</label>\r\n                    <input type=\"datetime-local\" class=\"form-control\" (change)=\"initial.value\" #initial>\r\n                </div>\r\n                <!-- DESDE -->\r\n\r\n                <!-- HASTA -->\r\n                <div class=\"mt-2\">\r\n                    <label class=\"\" for=\"\">Hasta</label>\r\n                    <input type=\"datetime-local\" class=\"form-control\" (change)=\"end.value\" #end>\r\n                </div>\r\n                <!-- HASTA -->\r\n\r\n                <button type=\"button\" class=\"btn btn-outline-primary btn-sm btn-block mt-4\" (click)=\"buscarPor(initial.value, end.value)\"> \r\n                    <i class=\"bi-search\"></i> Buscar \r\n                </button>\r\n\r\n            </div>\r\n        </div>\r\n        <!-- FILTRO -->\r\n\r\n        <!-- TABLE CLIENTS -->\r\n        <div class=\"shadow p-3 rounded bg-white col-12 col-md-9 col-xl-9 mt-2\">\r\n\r\n            <div>\r\n                <div>\r\n                    <div class=\"form-floating mb-2\">\r\n                        <span class=\"position-absolute top-50 start-90 translate-middle\"><i class=\" bi-search \" style=\"font-size: 1rem \"></i></span>\r\n                        <input type=\"text\" class=\"form-control\" id=\"floatingInput2\" placeholder=\"Buscar Producto\" (keyup)=\"buscar(search.value)\" (keydown.enter)=\"buscar(search.value)\" #search>\r\n                        <label for=\"floatingInput2 \">Buscar Producto</label>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- FILTROS -->\r\n                <div class=\"d-flex justify-content-end flex-wrap\">\r\n\r\n                    <div>\r\n                        <label for=\"mostrar\" class=\"me-2\">Mostrar: </label>\r\n                        <select name=\"\" id=\"\" [value]=\"query.hasta\" #mostrar (change)=\"limiteChange(mostrar.value)\">\r\n                            <option value=\"10\">10</option>\r\n                            <option value=\"25\">25</option>\r\n                            <option value=\"50\">50</option>\r\n                            <option value=\"100\">100</option>\r\n                            <option value=\"250\">250</option>\r\n                            <option value=\"500\">500</option>\r\n                            <option value=\"1000\">1000</option>\r\n                            <option value=\"5000\">5000</option>\r\n                            <option value=\"10000\">10000</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                </div>\r\n                <!-- FILTROS -->                \r\n\r\n                <!-- CARGANDO -->\r\n                <div *ngIf=\"cargando\">\r\n                    <div class=\"text-center p-4\">\r\n                        <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                            <span class=\"visually-hidden\">Loading...</span>\r\n                        </div>\r\n                    </div>\r\n                    <small class=\"text-muted\">cargando...</small>\r\n                </div>\r\n                <!-- CARGANDO -->\r\n\r\n                <div *ngIf=\"!cargando\" class=\"table-responsive \">\r\n                    <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                        <thead class=\"border-bottom \">\r\n                            <tr>\r\n                                <th class=\"text-muted \" scope=\"col \">#</th>\r\n                                <th class=\"text-muted \" scope=\"col \" colspan=\"2\">Codigo</th>\r\n                                <th class=\"text-muted \" scope=\"col \" colspan=\"2\">Nombre</th>\r\n                                <th class=\"text-muted text-center\" scope=\"col\">Departamento</th>\r\n                                <th class=\"text-muted \" scope=\"col \">Descripción</th>\r\n                                <th class=\"text-muted \" scope=\"col \">Tipo</th>\r\n                                <th class=\"text-muted text-center\" scope=\"col\">Antes</th>\r\n                                <th class=\"text-muted text-center\" scope=\"col\">Cantidad</th>\r\n                                <th class=\"text-muted text-center\" scope=\"col\">Stock</th>\r\n                                <th class=\"text-muted \" scope=\"col \">Usuario</th>\r\n                                <th class=\"text-muted \" scope=\"col \">fecha</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr *ngIf=\"!sinResultados\" class=\"text-center \">\r\n                                <th colspan=\"13\" class=\"py-4\">\r\n                                    <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                                </th>\r\n                            </tr>\r\n                            <tr class=\"trHover\" *ngFor=\"let item of productosLog; let i = index\">\r\n                                <th scope=\"row \">{{ i + 1}}</th>\r\n                                <td colspan=\"2\">{{ item.code }}</td>\r\n                                <td colspan=\"2\">{{ item.name }}</td>\r\n                                <td class=\"text-center\">{{ item.departamento }}</td>\r\n                                <td>\r\n                                    <a *ngIf=\"item.invoice\" [routerLink]=\"['/dashboard/factura', item.invoice._id]\">                   \r\n                                        {{ item.description }}\r\n                                    </a>\r\n                                    <a *ngIf=\"item.compra\" [routerLink]=\"['/dashboard/compra', item.compra]\">                   \r\n                                        {{ item.description }}\r\n                                    </a>\r\n                                    <span *ngIf=\"!item.invoice && !item.compra\">\r\n                                        {{ item.description }}                                \r\n                                    </span>\r\n                                </td>\r\n                                <td>\r\n                                    <span *ngIf=\"item.type === 'Salida'\" class=\"badge rounded-pill bg-danger text-white-75\">{{ item.type }}</span>\r\n                                    <span *ngIf=\"item.type === 'Agrego'\" class=\"badge rounded-pill bg-success text-white-75\">{{ item.type }}</span>\r\n                                    <span *ngIf=\"item.type === 'Compra'\" class=\"badge rounded-pill bg-success text-white-75\">{{ item.type }}</span>\r\n                                    <span *ngIf=\"item.type === 'Elimino'\" class=\"badge rounded-pill bg-warning text-white-75\">{{ item.type }}</span>\r\n                                    <span *ngIf=\"item.type === 'Devolución'\" class=\"badge rounded-pill bg-info text-white-75\">{{ item.type }}</span>\r\n                                </td>\r\n\r\n                                <td class=\"text-center\">{{ item.befored | number }}</td>\r\n                                <td class=\"text-center\">{{ item.qty | number }}</td>\r\n                                <td class=\"text-center\">{{ item.stock  | number}}</td>\r\n                                <td>{{ item.cajero.name }}</td>\r\n                                <td> <small class=\"text-wrapp\"> {{ item.fecha | date:'medium'}}</small></td>\r\n                            </tr>\r\n                        </tbody>\r\n\r\n                    </table>\r\n\r\n                </div>\r\n\r\n                <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                <div class=\"row\">\r\n                    <div class=\"col col-md-4\">\r\n                        <small class=\"text-muted\">Total de facturas: ({{total}})</small>\r\n                        <small *ngIf=\"resultado !== 0\" class=\"text-muted\"> - (Resultados: {{ resultado }})</small>\r\n                        <small *ngIf=\"query.desde !== 0\" class=\"text-muted\"> - (Desde el: {{ query.desde + 1}} Hasta el: {{ query.desde + productosLog.length }})</small>\r\n                        \r\n                    </div>\r\n\r\n                    <div class=\"col d-flex justify-content-end\">\r\n                        <button [disabled]=\"query.desde === 0\" type=\"button\" (click)=\"cambiarPagina((query.hasta * -1))\" class=\"btn btn-sm btn-dark btnW waves-effect waves-light px-3\">Anterior</button>\r\n                        <button [disabled]=\"query.hasta  > productosLog.length || query.hasta > total\" type=\"button\" (click)=\"cambiarPagina(query.hasta)\" class=\"btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2\">Siguiente</button>\r\n                    </div>\r\n                </div>\r\n                <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n            </div>\r\n        </div>\r\n        <!-- TABLE CLIENTS -->\r\n\r\n    </div>\r\n\r\n\r\n\r\n</div>\r\n\r\n<!-- =========================================================================\r\nBODY \r\n========================================================================= -->","import { FormBuilder, Validators } from '@angular/forms';\r\nimport { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\r\nimport Swal from 'sweetalert2';\r\nimport { Router } from '@angular/router';\r\n\r\n// EXCEL\r\nimport * as XLSX from 'xlsx';\r\n\r\n// MODELS\r\nimport { Kit } from '../../../models/kits.model';\r\nimport { Product } from '../../../models/product.model';\r\nimport { Impuesto } from '../../../models/impuesto.model';\r\n\r\n// SERVICES\r\nimport { DepartmentService } from '../../../services/department.service';\r\nimport { SearchService } from '../../../services/search.service';\r\nimport { ProductService } from '../../../services/product.service';\r\nimport { Department } from '../../../models/department.model';\r\nimport { ImpuestosService } from '../../../services/impuestos.service';\r\nimport { Impuestos } from '../../../models/impuestos.model';\r\n\r\n\r\n@Component({\r\n  selector: 'app-nuevo',\r\n  templateUrl: './nuevo.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class NuevoComponent implements OnInit {\r\n  \r\n  public producto: Product;\r\n  public kits: Kit[] = []; \r\n\r\n  constructor( private fb: FormBuilder,\r\n                private searchService: SearchService,\r\n                private productService: ProductService,\r\n                private departmentService: DepartmentService,\r\n                private router: Router,\r\n                private impuestosService: ImpuestosService ) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // CARGAR IMPUESTOS\r\n    this.cargarImpuestos();\r\n    \r\n    // CARGAR DEPARTAMENTOS\r\n    this.cargarDepartamentos();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR IMPUESTOS\r\n  ==================================================================== */\r\n  public impuestos: Impuestos[] = [];\r\n  cargarImpuestos(){\r\n\r\n    this.impuestosService.loadImpuestos()\r\n        .subscribe( ({ taxes }) =>  {\r\n          this.impuestos = taxes;\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   IMPORTAR EXCEL\r\n  ==================================================================== */\r\n  arrayBuffer:any;\r\n  file:File;\r\n  public totalItems: number = 0;\r\n  public sendExcel: boolean = false;\r\n\r\n  public products: any[] = [];\r\n\r\n  incomingfile(event: any){\r\n    this.file= event.target.files[0]; \r\n  }\r\n\r\n  Upload() {\r\n\r\n    if (!this.file) {\r\n      Swal.fire('Atención', 'No has seleccionado ningun archivo de excel', 'info');\r\n      return;\r\n    }\r\n\r\n    this.sendExcel = true;\r\n\r\n\r\n    let fileReader = new FileReader();\r\n      fileReader.onload = (e) => {\r\n\r\n          this.arrayBuffer = fileReader.result;\r\n          var data = new Uint8Array(this.arrayBuffer);\r\n          var arr = new Array();\r\n\r\n          for(var i = 0; i != data.length; ++i) arr[i] = String.fromCharCode(data[i]);\r\n          \r\n          var bstr = arr.join(\"\");\r\n          var workbook = XLSX.read(bstr, {type:\"binary\"});\r\n          var first_sheet_name = workbook.SheetNames[0];\r\n          var worksheet = workbook.Sheets[first_sheet_name];\r\n          \r\n          this.products = XLSX.utils.sheet_to_json(worksheet,{raw:true});\r\n          \r\n          this.productService.createProductExcel({products: this.products})\r\n              .subscribe( ({total}) => {\r\n\r\n                Swal.fire('Estupendo', `Se crearon ${total} productos exitosamente!`, 'success');                \r\n                this.sendExcel = false;\r\n                location.reload();\r\n\r\n              }, (err) => {\r\n                this.sendExcel = false;\r\n                console.log(err);\r\n                Swal.fire('Error', err.error.msg, 'error');                \r\n              })\r\n\r\n      }\r\n      \r\n      fileReader.readAsArrayBuffer(this.file);\r\n  };\r\n\r\n  /** ================================================================\r\n   *   DESCARGAR PLANTILLA DE EXCEL\r\n  ==================================================================== */\r\n  plantilla(){\r\n\r\n    let products = [{\r\n      code: '123456',\r\n      sku: 'SKU',\r\n      name: 'Producto 1',\r\n      brand: 'Marca',\r\n      type: 'Unidad',\r\n      cost: 1000,\r\n      price: 1500,\r\n      wholesale: 1200,\r\n      stock: 10\r\n    }];\r\n\r\n    /* generate a worksheet */\r\n    var ws = XLSX.utils.json_to_sheet(products);\r\n\r\n    /* add to workbook */\r\n    var wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, ws, \"Productos\");\r\n\r\n    /* title */\r\n    let title = 'productos.xls';\r\n\r\n    /* write workbook and force a download */\r\n    XLSX.writeFile(wb, title);\r\n  } \r\n  \r\n  /** ================================================================\r\n   *   BUSCAR PRODUCTOS PARA EL PAQUETE O KIT\r\n  ==================================================================== */\r\n  public sinResultados = false;\r\n  public cargando = false;\r\n  public searchInput:string;\r\n  public searchProduct: Product[] = [];\r\n\r\n  buscar(termino: string){\r\n\r\n    this.cargando = true;\r\n\r\n    if (termino.length === 0) {\r\n      this.sinResultados = false;\r\n      this.searchProduct = [];\r\n      return;\r\n    }else{\r\n\r\n      this.searchService.search('products', termino)\r\n            .subscribe(({total, resultados}) => {              \r\n\r\n              this.cargando = false;\r\n              // COMPROBAR SI EXISTEN RESULTADOS\r\n              if (resultados.length === 0) {\r\n                this.searchProduct = [];\r\n                this.sinResultados = true;\r\n                return;                \r\n              }\r\n              // COMPROBAR SI EXISTEN RESULTADOS\r\n              \r\n              this.searchProduct = resultados;\r\n\r\n            }, (err) => {              \r\n\r\n                this.searchProduct = [];\r\n                this.sinResultados = false;\r\n                Swal.fire('Error', err.error.msg, 'error');\r\n                return;  \r\n            });\r\n\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SELECCIONAR PRODUCTO PARA EL PAQUETE O KIT\r\n  ==================================================================== */\r\n  @ViewChild('search') search: ElementRef;\r\n  @ViewChild('qty') qty: ElementRef;\r\n  \r\n  public seleKit: Product;\r\n  public inProducto:string = '';\r\n  public btnAddKit: string = 'disabled';\r\n\r\n  seleccionarProducto( product: Product ){\r\n\r\n    this.searchProduct = [];\r\n    this.sinResultados = false;\r\n    this.search.nativeElement.value = '';\r\n    this.seleKit = product;\r\n    this.inProducto = product.name;\r\n\r\n    if (this.inProducto !== '') {\r\n      this.btnAddKit = '';\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   AGREGAR PRODUCTO AL PAQUETE O KIT\r\n  ==================================================================== */\r\n  agregarProductoKit( qty: any ){\r\n\r\n    this.btnAddKit = 'disabled';\r\n    this.inProducto = '';\r\n    this.qty.nativeElement.value = '';\r\n\r\n    if (qty === 0 || qty === '0' || qty === '' || qty < 0) {\r\n\r\n      Swal.fire('Atención', 'No has agregado una cantidad', 'info');\r\n      return;      \r\n    }\r\n    \r\n    this.kits.push({\r\n      qty, \r\n      product: {\r\n        _id: this.seleKit.pid,\r\n        name: this.seleKit.name\r\n      }\r\n    });\r\n   \r\n    this.productoForm.value.kit = this.kits;  \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ELIMINAR PRODUCTO AL PAQUETE O KIT\r\n  ==================================================================== */\r\n  eliminarProductoKit( item: any ){\r\n    \r\n    const i = this.kits.indexOf(item);\r\n\r\n    if ( i !== -1 ) { this.kits.splice(i, 1); }\r\n\r\n    this.productoForm.value.kit = this.kits;\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREAR PRODUCTO\r\n  ==================================================================== */\r\n  public impuesto: Impuesto[] = [];\r\n  public formSubmitted = false;\r\n  public productoForm = this.fb.group({\r\n    code: ['', [Validators.required, Validators.minLength(2)]],\r\n    name: ['', [Validators.required, Validators.minLength(3)]],\r\n    type: ['', [Validators.required, Validators.minLength(3)]],\r\n    cost: [0, [Validators.required]],\r\n    gain: [20],\r\n    price: [0, [Validators.required]],\r\n    kit: [''],\r\n    wholesale: [0],\r\n    department: [0],\r\n    stock: [0],\r\n    min: [0],\r\n    max: [0],\r\n    mayoreo: [0],\r\n    expiration: [''],\r\n    visibility: [true],\r\n    comanda: [false],\r\n    tipo: [''],\r\n    description: [''],\r\n    tax: [false],\r\n    taxid: '',\r\n    bascula: false,\r\n    brand: '',\r\n    sku: '',\r\n    distribuidor: 0,\r\n  });\r\n  \r\n  crearProducto(){\r\n\r\n    this.impuesto = [];\r\n\r\n    if (this.productoForm.value.type !== 'Paquete' ) {\r\n      this.productoForm.value.kit = [];      \r\n    }else{\r\n      this.productoForm.value.kit = this.kits;\r\n    }\r\n\r\n    // CARGAMOS EL PRECIO\r\n    this.productoForm.value.price = this.precioN;\r\n    this.productoForm.value.gain = this.gananciaN;\r\n    \r\n    this.productoForm.value.impuesto = this.impuesto;\r\n    \r\n\r\n    this.formSubmitted = true;\r\n\r\n    if (this.productoForm.invalid) {\r\n      return;\r\n    }    \r\n\r\n    this.productService.createProduct(this.productoForm.value)\r\n          .subscribe( (resp: any) => {\r\n\r\n            Swal.fire('Estupendo', 'Se ha guardado el producto exitosamente!', 'success');\r\n            this.formSubmitted = false;\r\n\r\n            this.productoForm.reset({\r\n              code: '',\r\n              name: '',\r\n              type: '',\r\n              cost: 0,\r\n              gain: 20,\r\n              price: 0,\r\n              kit: '',\r\n              wholesale: 0,\r\n              department: 0,\r\n              stock: 0,\r\n              min: 0,\r\n              mayoreo: 0,\r\n              max: 0,\r\n              expiration: '',\r\n              tax: false,\r\n              taxid: '',\r\n              visibility: true,\r\n              comanda: false,\r\n            });\r\n\r\n          }, (err) => {            \r\n            Swal.fire('Error', err.error.msg, 'error');\r\n          });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR DEPARTAMENTOS\r\n  ==================================================================== */\r\n  public departamentos: Department[] = [];\r\n\r\n  cargarDepartamentos(){\r\n    \r\n    this.departmentService.loadDepartment()\r\n        .subscribe( ({departments}) => {\r\n            \r\n            this.departamentos = departments;            \r\n            \r\n          }, (err) =>{\r\n            Swal.fire('Error', err.error.msg, 'error');\r\n          }\r\n        );\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  PORCENTAJE\r\n  ==================================================================== */\r\n  public costoN:number = 0;\r\n  public gananciaN:number = 20;\r\n  public precioN:number = 0;  \r\n  \r\n  porcentaje(nombre:string, numero:any){\r\n    \r\n    let porcentaje: number;    \r\n    \r\n    switch (nombre) {\r\n      case 'costo':\r\n        \r\n        this.costoN = parseFloat(numero);    \r\n        \r\n        porcentaje = (this.costoN * this.gananciaN)/100;\r\n        \r\n        this.precioN = (this.costoN / ( 1 - (this.gananciaN / 100)));     \r\n\r\n        break;\r\n      case 'ganancia':\r\n        \r\n        this.gananciaN = parseFloat(numero);\r\n        \r\n        porcentaje = (this.costoN * this.gananciaN)/100;\r\n\r\n        this.precioN = (this.costoN / ( 1 - (this.gananciaN / 100)));   \r\n        \r\n        break;\r\n        \r\n      case 'precio':\r\n\r\n        this.precioN = parseFloat(numero);\r\n        \r\n        porcentaje = ( this.costoN * 100 )/this.precioN;\r\n\r\n        this.gananciaN = (porcentaje - 100) * -1;\r\n\r\n        break;\r\n    \r\n      default:\r\n\r\n        return;\r\n        \r\n        break;\r\n    }\r\n\r\n    this.gananciaN = Math.round(this.gananciaN*100)/100;\r\n    this.productoForm.value.price = Math.round(this.precioN*100)/100;\r\n        \r\n    if(this.tax.nativeElement.checked){\r\n\r\n      let tax = this.impuestos.find( taxS =>  {\r\n\r\n        if (taxS._id === this.selectTax || taxS.taxid === this.selectTax) {\r\n          return taxS;\r\n        }\r\n\r\n      });\r\n      \r\n      \r\n\r\n      this.pIva.nativeElement.value = Math.round( this.productoForm.value.price * ((tax.valor / 100) +1 ));\r\n    }\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *  SELECCIONAR IMPUESTO\r\n  ==================================================================== */\r\n  selectImpuesto( impuesto: Impuesto ){}\r\n  \r\n  /** ================================================================\r\n   *  PRECIO CON IVA\r\n   ==================================================================== */\r\n  public selectTax: string;\r\n\r\n  @ViewChild('pIva') pIva: ElementRef;\r\n  @ViewChild('tax') tax: ElementRef;\r\n  precioIva(){\r\n\r\n    let tax = this.impuestos.find( taxS =>  {\r\n\r\n      if (taxS._id === this.selectTax || taxS.taxid === this.selectTax) {\r\n        return taxS;\r\n      }\r\n\r\n    });\r\n    \r\n\r\n    let precio = 0;\r\n\r\n    precio = this.pIva.nativeElement.value / ((tax.valor / 100)+1);\r\n\r\n    this.porcentaje('precio', precio.toFixed(2));\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  VALIDAR CAMPOS\r\n  ==================================================================== */\r\n  campoValido(campo: string): boolean{\r\n\r\n    if ( this.productoForm.get(campo).invalid &&  this.formSubmitted) {  \r\n      return true;      \r\n    } else{            \r\n      return false;\r\n    }\r\n  \r\n  }\r\n\r\n\r\n  // FIN DE LA CLASE  \r\n}\r\n","<!-- =========================================================================\r\n    HEADER S\r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-yellow py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">PRODUCTOS</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark\" id=\"administracion-tab\" [routerLink]=\"['/dashboard', 'productos']\">\r\n                <i class=\"bi-files\" style=\"font-size: 1rem\"></i> Administracion de Productos\r\n            </a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-primary active\" id=\"nuevo-tab\" [routerLink]=\"['/dashboard/productos', 'nuevo']\"><i class=\"bi-pencil-square\" style=\"font-size: 1rem\"></i> Crear Producto</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark \" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'departamento']\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Departamentos</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'categorias']\" aria-selected=\"false\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Categorias</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'movimientos']\" aria-selected=\"false\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Movimientos</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'kardex']\" aria-selected=\"false\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> kardex</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"eliminados-tab\" [routerLink]=\"['/dashboard/productos', 'eliminados']\" aria-selected=\"false\"><i class=\"bi-trash\" style=\"font-size: 1rem\"></i> Eliminados</a>\r\n        </li>\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    PRODUCTO NUEVO \r\n========================================================================= -->\r\n<div class=\"container-fluid my-4\">\r\n\r\n    <!-- INFO PRODUCT -->\r\n    <div class=\"col-lg-8 mx-auto\">\r\n\r\n        <div class=\"shadow-lg p-3 mb-4 rounded bg-white\">\r\n\r\n            <h4 class=\"text-muted\">Importar Productos <span> <a class=\"btn btn-sm text-primary\" type=\"button\" (click)=\"plantilla()\" >Descargar Plantilla</a> </span></h4>\r\n\r\n            <div class=\"row\">\r\n                <div class=\"col-10\">\r\n                    <input type=\"file\" class=\"form-control form-control-sm\" (change)=\"incomingfile($event)\" placeholder=\"Importar\" accept=\".xlsx\">\r\n                </div>\r\n                <div class=\"col-auto\">\r\n                    <button type=\"button\" [disabled]=\"sendExcel\" class=\"btn btn-sm btnW btn-primary waves-effect waves-light\" (click)=\"Upload()\">\r\n                        <span *ngIf=\"!sendExcel\">\r\n                            Importar\r\n                        </span>\r\n                        <span *ngIf=\"sendExcel\">\r\n                            Cargando...\r\n                        </span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <div class=\"col-lg-8 mx-auto\">\r\n        <div class=\"card\">\r\n            <div class=\"card-header\">\r\n                Informacion del producto\r\n            </div>\r\n            <div class=\"card-body\">\r\n\r\n                <!-- FORM -->\r\n\r\n                <form id=\"productoForm\" autocomplete=\"off\" [formGroup]=\"productoForm\" (ngSubmit)=\"crearProducto()\">\r\n\r\n                    <!-- =======================================================================\r\n                            DATOS PERSONALES \r\n                        =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Producto</h5>\r\n\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-6 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"code\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Codigo de barras\">\r\n                                <label for=\"floatingInput\">Codigo de barras</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div class=\"col-md-6 px-md-1 \">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"sku\" type=\"text\" class=\"form-control\" placeholder=\"Sku del producto\">\r\n                                <label for=\"floatingInput\">Sku del producto</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-6 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"name\" type=\"text\" class=\"form-control\" placeholder=\"Nombre del producto\">\r\n                                <label for=\"floatingInput\">Nombre del producto</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div class=\"col-md-6 px-md-1 \">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"brand\" type=\"text\" class=\"form-control\" placeholder=\"Marca del producto\">\r\n                                <label for=\"floatingInput\">Marca del producto</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-12 px-md-1\">\r\n                            <div class=\"form-floating\">\r\n                                <textarea formControlName=\"description\" class=\"form-control\" id=\"exampleFormControlTextarea1\" rows=\"3\"></textarea>\r\n                                <label for=\"floatingInput\">Description</label>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <h5 class=\"text-muted\">Tipo</h5>\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <select class=\"form-select\" id=\"floatingSelectType\" aria-label=\"Floating label select example\" formControlName=\"type\" #type>\r\n                                    <option selected value=\"0\">Seleccionar Tipo</option>\r\n                                    <option value=\"Unidad\">Unidad</option>\r\n                                    <option value=\"Granel\">Granel</option>\r\n                                    <option value=\"Paquete\">Paquete</option>\r\n                                </select>\r\n                                <label for=\"floatingSelect\">Seleccionar Tipo</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n\r\n                    <div class=\"row mb-3\" *ngIf=\"type.value === 'Paquete'\">\r\n\r\n                        <div class=\"col-md-4 px-md-1\">\r\n                            <div class=\"form-check mt-2\">\r\n                                <input formControlName=\"bascula\" class=\"form-check-input\" type=\"checkbox\" id=\"basc\" #basc>\r\n                                <label class=\"form-check-label\" for=\"basc\">\r\n                                    Bacula\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <h6 class=\"text-muted\">Agregar Productos</h6>\r\n                        <hr>\r\n\r\n                        <!-- KIT -->\r\n                        <!-- KIT -->\r\n                        <div class=\"col-md-12 px-md-1 mb-3\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input type=\"text\" class=\"form-control\" placeholder=\"Buscar Producto\" (keyup)=\"buscar(search.value)\" #search>\r\n                                <label for=\"floatingInput\">Buscar Producto</label>\r\n                            </div>\r\n\r\n                            <div *ngIf=\"sinResultados\" class=\"bg-white py-3 px-2 shadow col-10\" style=\"position: absolute; z-index: 1020;\">\r\n                                <h6 class=\"text-muted\">Sin resultados</h6>\r\n                            </div>\r\n\r\n                            <div *ngIf=\"searchProduct.length > 0\" class=\"bg-white py-3 px-2 shadow col-10\" style=\"position: absolute; z-index: 1020;\">\r\n\r\n                                <div *ngIf=\"cargando\" class=\"text-center py-3\">\r\n                                    <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                                        <span class=\"visually-hidden\">Loading...</span>\r\n                                    </div>\r\n                                    <div>\r\n                                        <small class=\"text-muted\">Cargando...</small>\r\n                                    </div>\r\n                                </div>\r\n\r\n\r\n\r\n                                <ul *ngIf=\"!cargando\" class=\"list-group list-group-flush overflow-auto\" style=\"max-height: 200px;\">\r\n\r\n                                    <li class=\"list-group-item\">\r\n                                        <h6>Resultados: ({{ searchProduct.length }})</h6>\r\n                                    </li>\r\n                                    <li class=\"list-group-item\" *ngFor=\"let item of searchProduct\">\r\n                                        <div class=\"d-flex \">\r\n                                            <div class=\"align-self-center\">\r\n                                                <span> {{ item.name }} </span>\r\n                                            </div>\r\n\r\n                                            <div class=\"ms-auto\">\r\n                                                <button class=\"btn btn-link p-1 text-success float-end\" (click)=\"seleccionarProducto(item)\"> <i class=\"bi-arrow-90deg-right\"></i></button>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"row mb-3\">\r\n\r\n\r\n                            <div class=\"col-md-5 px-md-1\">\r\n\r\n                                <input type=\"text\" disabled class=\"form-control\" placeholder=\"Producto\" [value]=\"inProducto\">\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-5 px-md-1\">\r\n\r\n                                <input type=\"number\" class=\"form-control\" min=\"0\" placeholder=\"Cantidad\" #qty>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-2 px-md-1\">\r\n\r\n                                <button type=\"button\" (click)=\"agregarProductoKit(qty.value)\" class=\"{{ btnAddKit }} btn btnW waves-effect waves-ligth px-3 btn-success\"><i class=\"bi-plus\" style=\"font-size: 1rem\"></i> </button>\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"border border-redounded py-2 px-2\">\r\n\r\n                                <table class=\"table table-sm table-borderless table-striped table-hover\">\r\n                                    <thead class=\"border-bottom\">\r\n                                        <tr class=\"text-muted\">\r\n                                            <th scope=\"col\" style=\"width: 30px;\">#</th>\r\n                                            <th scope=\"col\">Nombre</th>\r\n                                            <th scope=\"col\">Cantidad</th>\r\n                                            <th scope=\"col\"></th>\r\n                                        </tr>\r\n\r\n                                    </thead>\r\n                                    <tbody>\r\n\r\n\r\n                                        <tr class=\"trHover\" *ngFor=\"let kitP of kits; let i=index\">\r\n                                            <th scope=\"row\"><small>{{i + 1}}</small></th>\r\n                                            <td><small>{{kitP.product.name}}</small></td>\r\n                                            <td><small>{{kitP.qty}}</small></td>\r\n                                            <td><button class=\"btn btn-link p-1 text-danger\" (click)=\"eliminarProductoKit(kitP)\"><small class=\"bi-trash\" style=\"font-size: 0.9rem\"></small> </button></td>\r\n                                        </tr>\r\n\r\n\r\n                                    </tbody>\r\n                                </table>\r\n\r\n                            </div>\r\n\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- KIT -->\r\n                    <!-- =======================================================================\r\n                        PRECIO\r\n                        =========================================================================== -->\r\n\r\n                    <!-- IVA -->\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <div class=\"col-md-4 px-md-1\">\r\n                            <div class=\"form-check mt-2\">\r\n                                <input formControlName=\"tax\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"tax\" #tax>\r\n                                <label class=\"form-check-label\" for=\"tax\">\r\n                                    Impuesto\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-8 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <select class=\"form-select\" id=\"floatingSelectIva\" aria-label=\"Floating label select example\" value=\"0\" formControlName=\"taxid\" (change)=\"selectTax = taxS.value\" #taxS>\r\n\r\n                                    <option value=\"\" selected>Seleccionar Impuesto</option>\r\n\r\n                                    <option [value]=\"impuesto.taxid\" *ngFor=\"let impuesto of impuestos\"> {{ impuesto.name }} - {{ impuesto.valor }} </option>                                      \r\n                                \r\n                                </select>\r\n                                <label for=\"floatingSelectIva\">Tipo de impuesto</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n                    <!-- IVA -->\r\n\r\n                    <!-- PRECIO -->\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <div class=\"col-md-4 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"cost\" type=\"number\" class=\"form-control\" min=\"0\" (keyup)=\"porcentaje('costo', costo.value)\" [value]=\"costoN\" placeholder=\"costo\" #costo>\r\n                                <label for=\"floatingInput\">costo</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-md-4 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"gain\" type=\"number\" class=\"form-control\" min=\"0\" (change)=\"porcentaje('ganancia', ganancia.value)\" [value]=\"gananciaN\" placeholder=\"Ganancia\" #ganancia>\r\n                                <label for=\"floatingInput\">Ganancia</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-md-4 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"price\" type=\"number\" class=\"form-control\" min=\"0\" (change)=\"porcentaje('precio', precio.value)\" [value]=\"precioN\" placeholder=\"Precio\" #precio>\r\n                                <label for=\"floatingInput\">Precio</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-4 px-md-1\" *ngIf=\"tax.checked\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input type=\"text\" class=\"form-control\" (change)=\"precioIva()\" placeholder=\"Precio con IVA\" #pIva>\r\n                                <label for=\"floatingInput\">Precio con IVA</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-md-4 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"wholesale\" type=\"text\" class=\"form-control\" placeholder=\"Al Mayor\">\r\n                                <label for=\"floatingInput\">Al Mayor</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-md-4 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"distribuidor\" type=\"text\" class=\"form-control\" placeholder=\"Precio distribuidor\">\r\n                                <label for=\"floatingInput\">Al Distribuidor</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n\r\n                    </div>\r\n\r\n                    <!-- PRECIO -->\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <div class=\"col-md-6 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <select class=\"form-select\" id=\"floatingSelect\" aria-label=\"Floating label select example\" formControlName=\"department\">\r\n                                    <option selected value=\"0\">Seleccionar Departamento</option>\r\n                                        <ng-container *ngFor=\"let departmento of departamentos\">\r\n                                            <option *ngIf=\"departmento.status\" value=\"{{departmento.did}}\">{{departmento.name}}</option>\r\n                                        </ng-container>\r\n                                    </select>\r\n                                <label for=\"floatingSelect\">Seleccionar Departamento</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-md-6 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"expiration\" type=\"date\" class=\"form-control\" placeholder=\"Fecha de vencimiento\">\r\n                                <label for=\"floatingInput\">Fecha de vencimiento</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- KIT -->\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <div class=\"col-md-4 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"stock\" type=\"text\" class=\"form-control\" placeholder=\"Stok\">\r\n                                <label for=\"floatingInput\">Stock</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-md-4 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"min\" type=\"text\" class=\"form-control\" placeholder=\"Minimo\">\r\n                                <label for=\"floatingInput\">Minimo</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-md-4 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"max\" type=\"text\" class=\"form-control\" placeholder=\"Maximo\">\r\n                                <label for=\"floatingInput\">Maximo</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <div class=\"col-md-4 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"mayoreo\" type=\"text\" class=\"form-control\" placeholder=\"Mayoreo apartir de\">\r\n                                <label for=\"floatingInput\">Mayoreo apartir de</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <div class=\"col-md-4 px-md-1\">\r\n                            <div class=\"form-check mt-2\">\r\n                                <input formControlName=\"visibility\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"checkProducto\" checked>\r\n                                <label class=\"form-check-label\" for=\"checkProducto\">\r\n                                  Producto Visible\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-4 px-md-1\">\r\n                            <div class=\"form-check mt-2\">\r\n                                <input formControlName=\"comanda\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"checkComanda\">\r\n                                <label class=\"form-check-label\" for=\"checkComanda\">\r\n                                  Comanda\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-4 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <select class=\"form-select\" id=\"tipo\" aria-label=\"Floating label select example\" formControlName=\"tipo\">\r\n                                    <option value=\"\">Seleccionar</option>\r\n                                    <option value=\"Cocina\">Cocina</option>\r\n                                    <option value=\"Bebidas\">Bebidas</option>\r\n                                    <option value=\"Barra\">Barra</option>\r\n                                </select>\r\n                                <label for=\"Comanda\">Seleccionar</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"text-danger mb-2\">\r\n                            <p *ngIf=\"campoValido('code')\" class=\"mb-1 animated fadeIn\">- El codigo de barra es obligatorio</p>\r\n                            <p *ngIf=\"campoValido('name')\" class=\"mb-1 animated fadeIn\">- El nombre del producto es obligatorio</p>\r\n                            <p *ngIf=\"campoValido('type')\" class=\"mb-1 animated fadeIn\">- El tipo del producto es obligatorio</p>\r\n                            <p *ngIf=\"campoValido('price')\" class=\"mb-1 animated fadeIn\">- El precio es obligatorio</p>\r\n                            <p *ngIf=\"campoValido('cost')\" class=\"mb-1 animated fadeIn\">- El costo es obligatorio</p>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- INFO PRODUCT -->\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    PRODUCTO NUEVO \r\n========================================================================= -->","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\n\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport Swal from 'sweetalert2';\r\n\r\n// SERVICES\r\nimport { ProductService } from '../../services/product.service';\r\nimport { SearchService } from '../../services/search.service';\r\nimport { DepartmentService } from '../../services/department.service';\r\nimport { FileUploadService } from '../../services/file-upload.service';\r\nimport { ImpuestosService } from 'src/app/services/impuestos.service';\r\nimport { LogProductsService } from '../../services/log-products.service';\r\n\r\n// MODELS\r\nimport { Product } from '../../models/product.model';\r\nimport { Kit } from 'src/app/models/kits.model';\r\nimport { Department } from '../../models/department.model';\r\nimport { Impuesto } from '../../models/impuesto.model';\r\nimport { Impuestos } from '../../models/impuestos.model';\r\n\r\n\r\n@Component({\r\n  selector: 'app-producto',\r\n  templateUrl: './producto.component.html'\r\n})\r\n\r\n\r\nexport class ProductoComponent implements OnInit {\r\n\r\n  public producto: Product;\r\n\r\n  public stockP: number;\r\n\r\n  public searchProduct: Product[] = [];\r\n  public kits: Kit[] = [];  \r\n\r\n  constructor(  private productService: ProductService,\r\n                private fb:FormBuilder,\r\n                private router: Router,\r\n                private activatedRoute: ActivatedRoute,\r\n                private searchService: SearchService,\r\n                private departmentService: DepartmentService,\r\n                private fileUploadService: FileUploadService,\r\n                private impuestosService: ImpuestosService,\r\n                private logProdcutsService: LogProductsService ) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.cargarDepartamentos();\r\n    \r\n    this.activatedRoute.params.subscribe( ({id}) => {\r\n\r\n      this.productoID = id; \r\n      \r\n      this.cargarImpuestos();\r\n\r\n      this.cargarProducto(id);\r\n      \r\n    });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR IMPUESTOS\r\n  ==================================================================== */\r\n  public impuestos: Impuestos[] = [];\r\n  cargarImpuestos(){\r\n\r\n    this.impuestosService.loadImpuestos()\r\n        .subscribe( ({taxes}) => {\r\n\r\n          this.impuestos = taxes;\r\n\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR PRODUCTO\r\n  ==================================================================== */\r\n  public costoN:number;\r\n  public gananciaN:number;\r\n  public precioN:number;\r\n  public productoID: string;\r\n  public productoImg: string;\r\n\r\n  public priceIva: number = 0;\r\n\r\n  public vendidos: number = 0;\r\n  public comprados: number = 0;\r\n  public devueltos: number = 0;\r\n\r\n  cargarProducto(id: string){\r\n    \r\n    this.productService.cargarProductoId(id)\r\n        .subscribe( product => {   \r\n\r\n          this.producto = product;\r\n          this.productoImg = product.img;\r\n          \r\n          this.vendidos = this.producto.sold;\r\n          this.comprados = this.producto.bought;\r\n          this.devueltos = this.producto.returned;\r\n          \r\n          const { code, name, department, type, cost, gain, expiration, visibility, price, returned, sold,  wholesale, pid, comanda, tipo, description, tax, impuesto, taxid, bascula, mayoreo, brand, sku, distribuidor } = product;\r\n          \r\n          // let department = '00';\r\n          // if (this.producto.department) {\r\n          //     department = product.department._id;\r\n          // }\r\n\r\n          const stock = product.stock || 0;\r\n          const min = product.min || 0;\r\n          const max = product.max || 0;\r\n\r\n          this.costoN = cost || 0;\r\n          this.gananciaN = gain || 20;\r\n          this.precioN = price || 0;\r\n          \r\n          this.upProductForm.value.price = this.precioN;\r\n\r\n          this.kits = product.kit;\r\n\r\n          let expiracion;\r\n          \r\n          let impuestoT = '';\r\n          let valorT = 0;\r\n          \r\n          if (expiration) {            \r\n            expiracion = expiration.toString().slice(0,10);          \r\n          }\r\n\r\n          if (tax) {\r\n            impuestoT = taxid?.name;\r\n            this.priceIva = Math.round(price * ((taxid?.valor/100)+1));\r\n          }\r\n          \r\n          if (taxid) {\r\n            this.upProductForm.reset({code, name, type, cost, price, visibility, wholesale, gain, department, min, max, expiration: expiracion, pid, comanda, tipo, description, tax, impuestoT, valor: valorT, taxid: taxid._id, bascula, mayoreo, brand, sku, distribuidor });\r\n            this.selectTax = taxid._id;\r\n          }else{\r\n            this.upProductForm.reset({code, name, type, cost, price, visibility, wholesale, gain, department, min, max, expiration: expiracion, pid, comanda, tipo, description, tax, impuestoT, valor: valorT, taxid: '', bascula, mayoreo, brand, sku, distribuidor });\r\n          }\r\n\r\n          // CARGAR LOGS\r\n          this.loadLogs();\r\n\r\n        });\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ACTUALIZAR PRODUCTO\r\n  ==================================================================== */\r\n\r\n  /** ================================================================\r\n   *   BUSCAR PRODUCTOS PARA EL PAQUETE O KIT\r\n  ==================================================================== */\r\n  public sinResultados = false;\r\n  public cargando = false;\r\n  public searchInput:string;\r\n\r\n  buscar(termino:string){\r\n    \r\n    this.cargando = true;\r\n\r\n    if (termino.length === 0) {\r\n      this.sinResultados = false;\r\n      this.searchProduct = [];\r\n      return;\r\n    }else{\r\n\r\n      this.searchService.search('products', termino)\r\n            .subscribe(({total, resultados}) => {\r\n              this.cargando = false;\r\n              // COMPROBAR SI EXISTEN RESULTADOS\r\n              if (resultados.length === 0) {\r\n                this.searchProduct = [];\r\n                this.sinResultados = true;\r\n                return;                \r\n              }\r\n              // COMPROBAR SI EXISTEN RESULTADOS\r\n              \r\n              this.searchProduct = resultados;\r\n\r\n            }, (err) => {\r\n                this.searchProduct = [];\r\n                this.sinResultados = false;\r\n                return;  \r\n            });\r\n\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SELECCIONAR PRODUCTO PARA EL PAQUETE O KIT\r\n  ==================================================================== */\r\n  @ViewChild('search') search: ElementRef;\r\n  @ViewChild('qty') qty: ElementRef;\r\n\r\n  public seleKit: Product;\r\n  public inProducto:string = '';\r\n  public btnAddKit: string = 'disabled';\r\n\r\n  seleccionarProducto( product: Product ){\r\n\r\n    this.searchProduct = [];\r\n    this.sinResultados = false;\r\n    this.search.nativeElement.value = '';\r\n    this.seleKit = product;\r\n    this.inProducto = product.name;\r\n\r\n    if (this.inProducto !== '') {\r\n      this.btnAddKit = '';\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   AGREGAR PRODUCTO AL PAQUETE O KIT\r\n  ==================================================================== */\r\n  agregarProductoKit( qty: any ){\r\n\r\n    this.btnAddKit = 'disabled';\r\n    this.inProducto = '';\r\n    this.qty.nativeElement.value = '';\r\n\r\n    if (qty === 0 || qty === '0' || qty === '' || qty < 0) {\r\n      Swal.fire('Atención', 'No has agregado una cantidad', 'info');\r\n      return;      \r\n    }\r\n    \r\n    this.kits.push({\r\n      qty, \r\n      product: {\r\n        _id: this.seleKit.pid,\r\n        name: this.seleKit.name\r\n      }\r\n    });\r\n   \r\n    this.upProductForm.value.kit = this.kits;    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ELIMINAR PRODUCTO AL PAQUETE O KIT\r\n  ==================================================================== */\r\n  eliminarProductoKit( item: any ){\r\n    \r\n    const i = this.kits.indexOf(item);\r\n\r\n    if ( i !== -1 ) { this.kits.splice(i, 1); }\r\n\r\n    this.upProductForm.value.kit = this.kits;\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR DEPARTAMENTOS\r\n  ==================================================================== */\r\n  public departamentos: Department[] = [];\r\n\r\n  cargarDepartamentos(){\r\n    \r\n    this.departmentService.loadDepartment()\r\n        .subscribe( ({departments}) => {\r\n            \r\n            this.departamentos = departments;            \r\n            \r\n          }, (err) =>{\r\n            Swal.fire('Error', err.error.msg, 'error');\r\n          }\r\n        );\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  PORCENTAJE\r\n  ==================================================================== */\r\n  @ViewChild('pIva') pIva: ElementRef;\r\n  @ViewChild('tax') tax: ElementRef;\r\n  porcentaje(nombre:string, numero:any){    \r\n    \r\n    let porcentaje: number;\r\n    \r\n    switch (nombre) {\r\n      case 'costo':\r\n        \r\n        this.costoN = parseFloat(numero);    \r\n        \r\n        porcentaje = (this.costoN * this.gananciaN)/100;\r\n        \r\n        this.precioN = (this.costoN / ( 1 - (this.gananciaN / 100)));     \r\n\r\n        break;\r\n      case 'ganancia':\r\n        \r\n        this.gananciaN = parseFloat(numero);\r\n        \r\n        porcentaje = (this.costoN * this.gananciaN)/100;\r\n\r\n        this.precioN = (this.costoN / ( 1 - (this.gananciaN / 100)));   \r\n        \r\n        break;\r\n        \r\n      case 'precio':\r\n\r\n        this.precioN = parseFloat(numero);\r\n        \r\n        porcentaje = ( this.costoN * 100 )/this.precioN;\r\n\r\n        this.gananciaN = (porcentaje - 100) * -1;\r\n\r\n        break;\r\n    \r\n      default:\r\n\r\n        return;\r\n        \r\n        break;\r\n    }\r\n\r\n    this.gananciaN = Math.round(this.gananciaN*100)/100;\r\n    this.upProductForm.value.price = Math.round(this.precioN*100)/100;\r\n\r\n    if(this.tax.nativeElement.checked){\r\n\r\n      let tax = this.impuestos.find( taxS =>  {\r\n\r\n        if (taxS._id === this.selectTax || taxS.taxid === this.selectTax) {\r\n          return taxS;\r\n        }\r\n\r\n      });\r\n\r\n      this.pIva.nativeElement.value = Math.round( this.upProductForm.value.price * ((tax.valor / 100) +1 ));\r\n    }\r\n        \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  PRECIO CON IVA\r\n  ==================================================================== */\r\n  public selectTax: string;\r\n  precioIva(){\r\n\r\n    console.log(this.selectTax);\r\n    \r\n\r\n    let tax = this.impuestos.find( taxS =>  {\r\n\r\n      if (taxS._id === this.selectTax || taxS.taxid === this.selectTax) {\r\n        return taxS;\r\n      }\r\n\r\n    });\r\n\r\n    let precio = 0;\r\n\r\n    precio = this.pIva.nativeElement.value / ((tax.valor / 100)+1);\r\n\r\n    this.porcentaje('precio', precio.toFixed(2));    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ACTUALIZAR PRODUCTO\r\n  ==================================================================== */\r\n  public impuesto: any[] = [];\r\n  // FORMULARIO\r\n  public formSubmitted = false;\r\n  public upProductForm = this.fb.group({\r\n\r\n    code: [''],\r\n    name: [''],\r\n    type: [''],\r\n    cost: [''],\r\n    gain: [''],\r\n    price: [''],\r\n    kit: [''],\r\n    wholesale: [''],\r\n    department: [''],\r\n    min: [0],\r\n    max: [0],\r\n    expiration: [''],\r\n    pid: [''],\r\n    visibility: [true],\r\n    comanda: [''],\r\n    tipo: [''],\r\n    description: [''],\r\n    tax: [],\r\n    taxid: [],\r\n    impuestoT:[],\r\n    valor: [],\r\n    mayoreo: 0,\r\n    bascula: false,\r\n    brand: '',\r\n    sku: '',\r\n    distribuidor: 0,\r\n  });\r\n\r\n  actualizarProducto(){\r\n        \r\n    if (this.upProductForm.value.type !== 'Paquete' ) {\r\n      this.upProductForm.value.kit = [];      \r\n    }else{\r\n      this.upProductForm.value.kit = this.kits;\r\n    }\r\n    \r\n    this.upProductForm.value.price = this.precioN;\r\n    this.upProductForm.value.gain = this.gananciaN;\r\n\r\n    let impuestoN = '';\r\n    let valorImp = 0;\r\n\r\n    if (this.upProductForm.value.tax === true) {\r\n      impuestoN = this.upProductForm.value.impuestoT;\r\n      valorImp = this.upProductForm.value.valor;     \r\n    }else{\r\n      this.upProductForm.value.impuesto = [];  \r\n      impuestoN = '';\r\n      valorImp = 0;\r\n    }\r\n\r\n    this.impuesto.push({\r\n      name: impuestoN,\r\n      valor: valorImp\r\n    });    \r\n    \r\n    this.upProductForm.value.impuesto = this.impuesto; \r\n    \r\n    this.productService.actualizarProducto(this.upProductForm.value, this.upProductForm.value.pid)\r\n        .subscribe( resp => {\r\n      \r\n            Swal.fire('Estupendo', `Se ha actualizado el producto, ${this.upProductForm.value.name} con exito!`, 'success');\r\n            this.activatedRoute.params.subscribe( ({id}) => {\r\n              \r\n              this.cargarProducto(id);\r\n              \r\n            });\r\n\r\n          }, (err) => {\r\n            Swal.fire('Error', err.error.msg, 'error');\r\n          });\r\n          \r\n        }\r\n\r\n  /** ================================================================\r\n   *   ACTUALIZAR IMAGEN\r\n  ==================================================================== */\r\n  public imgTemp: any = null;\r\n  public subirImagen: File;\r\n  cambiarImage(file: File){\r\n    this.subirImagen = file;\r\n    \r\n    if (!file) { return this.imgTemp = null }\r\n\r\n    const reader = new FileReader();\r\n    const url64 = reader.readAsDataURL( file );\r\n\r\n    reader.onloadend = () => {\r\n      this.imgTemp = reader.result;\r\n    }\r\n\r\n  }\r\n      \r\n  /** ================================================================\r\n   *  SUBIR IMAGEN fileImg\r\n  ==================================================================== */\r\n  @ViewChild('fileImg') fileImg: ElementRef;\r\n  public imgProducto: string = 'no-image';\r\n  subirImg(){\r\n    \r\n    this.fileUploadService.updateImage( this.subirImagen, 'products', this.productoID)\r\n    .then( img => this.productoImg = img);\r\n    \r\n    this.fileImg.nativeElement.value = '';\r\n    this.imgProducto = 'no-image';\r\n    this.imgTemp = null;\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *  AJUSTAR INVENTARIO\r\n  ==================================================================== */\r\n  @ViewChild('cantidadE') cantidadE: ElementRef;\r\n  @ViewChild('cantidadS') cantidadS: ElementRef;\r\n  public ajustarInventario = {\r\n    cantidad: 0,\r\n    bought: 0,\r\n    damaged: 0,\r\n    type: ''\r\n  };\r\n\r\n  ajustar(tipo: string, cantidad: number){\r\n\r\n    if (cantidad <= 0 || !cantidad) {\r\n      return Swal.fire('Atención', 'Debes de asignar una canitidad', 'info');\r\n    }\r\n\r\n    if (tipo === 'entrada') { \r\n      \r\n      this.ajustarInventario.cantidad = Number(cantidad);\r\n      this.ajustarInventario.bought = Number(cantidad);\r\n      this.ajustarInventario.type = 'Agrego';\r\n      \r\n    }else {\r\n      \r\n      this.ajustarInventario.type = 'Elimino';\r\n      this.ajustarInventario.cantidad = Number(cantidad);\r\n      this.ajustarInventario.damaged = Number(cantidad);\r\n      \r\n    }\r\n\r\n    this.productService.ajustarInventario(this.productoID, this.ajustarInventario)\r\n        .subscribe( (resp: {ok: boolean, product: Product}) => {\r\n\r\n          this.cantidadE.nativeElement.value = '';\r\n          this.cantidadS.nativeElement.value = '';\r\n\r\n          this.producto.inventario = resp.product.inventario;\r\n\r\n          Swal.fire('Estupendo', 'Se ha actualizado el inventario exitosamente!', 'success');                   \r\n\r\n        }, (err) =>{ Swal.fire('Error', err.error.msg, 'error'); });\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CARGAR LOG DE PRODUCTOS\r\n  ==================================================================== */\r\n  public query: any = {\r\n    desde: 0,\r\n    hasta: 50,\r\n    sort: {fecha: -1}\r\n  }\r\n\r\n  public logs: any[] = [];\r\n  public total: number = 0;  \r\n  public resultado: number = 0;\r\n\r\n  loadLogs(){\r\n\r\n    this.utilidad = 0;\r\n    this.comprados = 0;\r\n    this.vendidos = 0;\r\n    this.devueltos = 0;\r\n\r\n    this.query.code = this.producto.code;\r\n\r\n    this.logProdcutsService.loadLogProductsQuery(this.query)\r\n        .subscribe( ({ products, total }) => {\r\n\r\n          this.total = total;\r\n          this.logs = products;\r\n          this.resultado = 0;\r\n          this.cargando = false;          \r\n          \r\n          for (const product of products) {\r\n\r\n            if( product.type === 'Agrego' ){\r\n              this.comprados += product.qty;\r\n            }else if( product.type === 'Salida' ){\r\n              this.vendidos += product.qty;\r\n\r\n              product.invoice.products.map( (item) => {\r\n\r\n                if (item.product === this.producto.pid) {\r\n                  this.utilidad += (item.price - this.producto.cost) * item.qty;\r\n                }\r\n\r\n              })\r\n              \r\n\r\n            }else if( product.type === 'Devolución' ){\r\n              this.devueltos += product.qty;              \r\n            }\r\n            \r\n          }\r\n\r\n\r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CAMBIAR PAGINA\r\n  ==================================================================== */\r\n  @ViewChild('mostrar') mostrar!: ElementRef;\r\n  cambiarPagina (valor: Number){\r\n\r\n    this.query.desde += valor;\r\n\r\n    if (this.query.desde < 0) {\r\n      this.query.desde = 0;\r\n    }\r\n\r\n    this.loadLogs();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CAMBIAR LIMITE\r\n  ==================================================================== */\r\n  limiteChange( cantidad: any ){  \r\n\r\n    this.query.hasta = Number(cantidad);    \r\n    this.loadLogs();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CAMBIAR LIMITE\r\n  ==================================================================== */\r\n  selectType( type: any ){  \r\n\r\n    if (type === 'all') {\r\n      delete this.query.type;      \r\n    }else{\r\n      this.query.type = type;\r\n    }\r\n\r\n    this.loadLogs();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR POR\r\n  ==================================================================== */\r\n  public utilidad: number = 0;\r\n  buscarPor(inicial:Date, final: Date){\r\n\r\n    if (inicial === null && final === null || !inicial || !final) {\r\n      return;\r\n    }\r\n\r\n    // SET HOURS      \r\n    inicial = new Date(inicial);      \r\n    let initial = new Date(inicial.getTime() + 1000 * 60 * 60 * 5);\r\n\r\n    final = new Date(final);\r\n    let end = new Date(final.getTime() + 1000 * 60 * 60 * 5);      \r\n    // SET HOURS \r\n\r\n    let url = document.URL.split(':');\r\n    if (url[0] === 'https') {\r\n      initial = new Date(inicial.getTime() + 1000 * 60 * 60 - 7200000); \r\n      end = new Date(final.getTime() + 1000 * 60 * 60 - 3600000);        \r\n    }\r\n\r\n    this.query.$and = [{ fecha: { $gte: new Date(initial), $lt: new Date(end) } }];\r\n\r\n    this.loadLogs();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BORRAR Ó ACTIVAR PRODUCTO\r\n  ==================================================================== */\r\n  borrarProducto(_id: string){\r\n\r\n    let msg = 'Eliminar';\r\n\r\n    if (this.producto.status === false) {\r\n      msg = 'Activar'\r\n    }\r\n\r\n    Swal.fire({\r\n      title: 'Atencion',\r\n      text: `Estas seguro de ${msg} este producto?`,\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: `Si, ${msg}`,\r\n      cancelButtonText: 'Cancelar'\r\n    }).then((result) => {  \r\n      \r\n      if (result.isConfirmed) {\r\n\r\n        this.productService.deleteProduct(_id)\r\n        .subscribe((resp:{product, ok}) =>{\r\n\r\n          if (resp.product.status) {\r\n            Swal.fire('Estupendo', 'Se ha habilitado el Producto exitosamente!', 'success');\r\n          }else{\r\n            Swal.fire('Estupendo', 'Se ha eliminado el Producto exitosamente!', 'success');\r\n          }\r\n          \r\n          this.producto.status = resp.product.status;\r\n          \r\n        }, (err) =>{\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n        });\r\n\r\n      }\r\n\r\n    });\r\n\r\n    \r\n  }\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n      ","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-yellow py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">PRODUCTOS</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"nuevo-tab\">\r\n                <i class=\"bi-pencil\" style=\"font-size: 1rem\"></i> Editar Producto\r\n            </a>\r\n        </li>\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n<div class=\"container-fluid my-4\">\r\n\r\n    <div class=\"row\">\r\n\r\n        <!-- IMAGE -->\r\n        <div class=\"col-lg-4 text-center\">\r\n\r\n            <div class=\"card bg-success text-white\">\r\n                <div class=\"card-body text-center\">\r\n\r\n                    <p class=\"mb-0\">Stock</p>\r\n                    <ng-container *ngIf=\"producto\">\r\n                        <h4 class=\"display-6\" *ngIf=\"producto.type != 'Granel'\">\r\n                            {{ producto.inventario | number }}\r\n                        </h4>\r\n                        <h4 class=\"display-6\" *ngIf=\"producto.type === 'Granel'\">\r\n                            {{ producto.inventario | number:'1.3' }}\r\n                        </h4>\r\n                    </ng-container>\r\n\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"d-grid gap-2 mt-2 mb-4\">\r\n                <button data-bs-toggle=\"modal\" data-bs-target=\"#ajustarInventario\" class=\"btn btn-dark\" type=\"button\"> \r\n                    <i class=\"bi-card-checklist\"></i> Ajustar Inventario\r\n                </button>\r\n            </div>\r\n\r\n            <div class=\"card\">\r\n                <div class=\"card-body text-center\">\r\n                    <!-- Image Product-->\r\n                    <!-- <img class=\"img-fluid rounded-circle\" src=\"https://source.unsplash.com/QAB-WJcbgJk/300x300\"> -->\r\n                    <!-- <div class=\"avatar-redondo-lg mx-auto\" style=\"background-image: url(https://www.alimentosmary.com/wp-content/uploads/2017/08/arroz-tradicional-4.jpg)\">\r\n                    </div> -->\r\n\r\n                    <!-- Image Product-->\r\n                    <img *ngIf=\"!imgTemp\" [src]=\"productoImg | imagen:'products'\" class=\"avatar-redondo-lg mx-auto\" alt=\"\">\r\n\r\n                    <!-- IMG TEMPO  imgTemp -->\r\n                    <img *ngIf=\"imgTemp\" [src]=\"imgTemp\" class=\"avatar-redondo-lg mx-auto\" alt=\"\">\r\n\r\n                    <!-- Description-->\r\n                    <div class=\"small font-italic text-muted mb-4\">JPG - PNG - WEBP - no mayor a 5 mb</div>\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"formFileSm\" class=\"form-label\">Seleccionar Imagen</label>\r\n                        <input #fileImg class=\"form-control form-control-sm\" id=\"formFileSm\" type=\"file\" (change)=\"cambiarImage($event.target.files[0])\">\r\n                    </div>\r\n                    <!-- BTN upload Image -->\r\n                    <button *ngIf=\"imgTemp\" class=\"btn btnW btn-primary waves-effect waves-light px-3\" [disabled]=\"!subirImagen\" (click)=\"subirImg()\" type=\"button\">Actualizar Imagen</button>\r\n\r\n                </div>\r\n            </div>\r\n\r\n\r\n\r\n        </div>\r\n        <!-- IMAGE -->\r\n\r\n        <!-- INFO PRODUCT -->\r\n        <div class=\"col-lg-8\">\r\n            <div class=\"card\">\r\n                <div class=\"card-header d-flex\" *ngIf=\"producto\">\r\n                    <div>\r\n                        Informacion del producto <span *ngIf=\"!producto.status\" class=\"text-danger\">Eliminado</span>\r\n                    </div>\r\n\r\n                    <button (click)=\"borrarProducto(producto.pid)\" type=\"button\" class=\"btn btn-sm ms-auto\" [ngClass]=\"{'btn-success': !producto.status, 'btn-danger': producto.status}\">\r\n                        <span *ngIf=\"producto.status\"> <i class=\"bi-trash\"></i> Eliminar</span>\r\n                        <span *ngIf=\"!producto.status\"> <i class=\"bi-check\"></i> Activar</span>\r\n                    </button>\r\n\r\n                </div>\r\n                <div class=\"card-body\">\r\n\r\n                    <!-- FORM -->\r\n\r\n                    <form id=\"upProductForm\" autocomplete=\"off\" [formGroup]=\"upProductForm\" (ngSubmit)=\"actualizarProducto()\">\r\n\r\n                        <!-- =======================================================================\r\n                            DATOS \r\n                        =========================================================================== -->\r\n                        <h5 class=\"text-muted\">Producto</h5>\r\n\r\n                        <div class=\"row mb-3\">\r\n                            <div class=\"col-md-6 px-md-1\">\r\n\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"code\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Codigo de barras\">\r\n                                    <label for=\"floatingInput\">Codigo de barras</label>\r\n                                </div>\r\n\r\n                            </div>\r\n                            <div class=\"col-md-6 px-md-1 \">\r\n\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"sku\" type=\"text\" class=\"form-control\" placeholder=\"Sku del producto\">\r\n                                    <label for=\"floatingInput\">Sku del producto</label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div class=\"row mb-3\">\r\n\r\n                            <div class=\"col-md-6 px-md-1\">\r\n\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"name\" type=\"text\" class=\"form-control\" placeholder=\"Nombre del producto\">\r\n                                    <label for=\"floatingInput\">Nombre del producto</label>\r\n                                </div>\r\n\r\n                            </div>\r\n                            <div class=\"col-md-6 px-md-1 \">\r\n\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"brand\" type=\"text\" class=\"form-control\" placeholder=\"Marca del producto\">\r\n                                    <label for=\"floatingInput\">Marca del producto</label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 px-md-1 mt-3\">\r\n                                <div class=\"form-floating\">\r\n                                    <textarea formControlName=\"description\" class=\"form-control\" id=\"exampleFormControlTextarea1\" rows=\"3\"></textarea>\r\n                                    <label for=\"floatingInput\">Description</label>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <h5 class=\"text-muted\">Tipo</h5>\r\n                        <div class=\"row mb-3\">\r\n\r\n                            <div class=\"col-md-12 px-md-1\">\r\n\r\n                                <div class=\"form-floating\">\r\n                                    <select class=\"form-select\" id=\"floatingSelectType\" aria-label=\"Floating label select example\" formControlName=\"type\" #type>\r\n                                        <option selected value=\"0\">Seleccionar Tipo</option>\r\n                                        <option value=\"Unidad\">Unidad</option>\r\n                                        <option value=\"Granel\">Granel</option>\r\n                                        <option value=\"Paquete\">Paquete</option>\r\n                                    </select>\r\n                                    <label for=\"floatingSelect\">Seleccionar Tipo</label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n\r\n                        <div class=\"row mb-3\" *ngIf=\"type.value === 'Paquete'\">\r\n\r\n                            <div class=\"col-md-4 px-md-1\">\r\n                                <div class=\"form-check mt-2\">\r\n                                    <input formControlName=\"bascula\" class=\"form-check-input\" type=\"checkbox\" id=\"basc\" #basc>\r\n                                    <label class=\"form-check-label\" for=\"basc\">\r\n                                        Bacula\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <h6 class=\"text-muted\">Agregar Productos</h6>\r\n                            <hr>\r\n\r\n                            <!-- KIT -->\r\n                            <!-- KIT -->\r\n                            <div class=\"col-md-12 px-md-1 mb-3\">\r\n\r\n                                <div class=\"form-floating\">\r\n                                    <input type=\"text\" class=\"form-control\" placeholder=\"Buscar Producto\" (keyup)=\"buscar(search.value)\" #search>\r\n                                    <label for=\"floatingInput\">Buscar Producto</label>\r\n                                </div>\r\n\r\n                                <div *ngIf=\"sinResultados\" class=\"bg-white py-3 px-2 shadow col-10\" style=\"position: absolute; z-index: 1020;\">\r\n                                    <h6 class=\"text-muted\">Sin resultados</h6>\r\n                                </div>\r\n\r\n                                <div *ngIf=\"searchProduct.length > 0\" class=\"bg-white py-3 px-2 shadow col-10\" style=\"position: absolute; z-index: 1020;\">\r\n\r\n                                    <div *ngIf=\"cargando\" class=\"text-center py-3\">\r\n                                        <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                                            <span class=\"visually-hidden\">Loading...</span>\r\n                                        </div>\r\n                                        <div>\r\n                                            <small class=\"text-muted\">Cargando...</small>\r\n                                        </div>\r\n                                    </div>\r\n\r\n\r\n\r\n                                    <ul *ngIf=\"!cargando\" class=\"list-group list-group-flush overflow-auto\" style=\"max-height: 200px;\">\r\n\r\n                                        <li class=\"list-group-item\">\r\n                                            <h6>Resultados: ({{ searchProduct.length }})</h6>\r\n                                        </li>\r\n                                        <li class=\"list-group-item\" *ngFor=\"let item of searchProduct\">\r\n                                            <div class=\"d-flex \">\r\n                                                <div class=\"align-self-center\">\r\n                                                    <span> {{ item.name }} </span>\r\n                                                </div>\r\n\r\n                                                <div class=\"ms-auto\">\r\n                                                    <button class=\"btn btn-link p-1 text-success float-end\" (click)=\"seleccionarProducto(item)\"> <i class=\"bi-arrow-90deg-right\"></i></button>\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                        </li>\r\n                                    </ul>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"row mb-3\">\r\n\r\n\r\n                                <div class=\"col-md-5 px-md-1\">\r\n\r\n                                    <input type=\"text\" disabled class=\"form-control\" placeholder=\"Producto\" [value]=\"inProducto\">\r\n\r\n                                </div>\r\n\r\n                                <div class=\"col-md-5 px-md-1\">\r\n\r\n                                    <input type=\"number\" class=\"form-control\" min=\"0\" placeholder=\"Cantidad\" #qty>\r\n\r\n                                </div>\r\n\r\n                                <div class=\"col-md-2 px-md-1\">\r\n\r\n                                    <button type=\"button\" (click)=\"agregarProductoKit(qty.value)\" class=\"{{btnAddKit}} btn btnW waves-effect waves-ligth px-3 btn-success\"><i class=\"bi-plus\" style=\"font-size: 1rem\"></i> </button>\r\n\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n\r\n                            <div class=\"col-md-12 px-md-1\">\r\n\r\n                                <div class=\"border border-redounded py-2 px-2\">\r\n\r\n                                    <table class=\"table table-sm table-borderless table-striped table-hover\">\r\n                                        <thead class=\"border-bottom\">\r\n                                            <tr class=\"text-muted\">\r\n                                                <th scope=\"col\" style=\"width: 30px;\">#</th>\r\n                                                <th scope=\"col\">Nombre</th>\r\n                                                <th scope=\"col\">Cantidad</th>\r\n                                                <th scope=\"col\"></th>\r\n                                            </tr>\r\n\r\n                                        </thead>\r\n                                        <tbody>\r\n\r\n\r\n                                            <tr class=\"trHover\" *ngFor=\"let kitP of kits; let i=index\">\r\n                                                <th scope=\"row\"><small>{{i + 1}}</small></th>\r\n                                                <td><small>{{kitP.product.name}}</small></td>\r\n                                                <td><small>{{kitP.qty}}</small></td>\r\n                                                <td><button class=\"btn btn-link p-1 text-danger\" (click)=\"eliminarProductoKit(kitP)\"><small class=\"bi-trash\" style=\"font-size: 0.9rem\"></small> </button></td>\r\n                                            </tr>\r\n\r\n\r\n                                        </tbody>\r\n                                    </table>\r\n\r\n                                </div>\r\n\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                        <!-- KIT -->\r\n                        <!-- KIT -->\r\n                        <!-- =======================================================================\r\n                            PRECIO\r\n                        =========================================================================== -->\r\n                        <!-- IMPUESTO -->\r\n                        <div class=\"row mb-3\">\r\n\r\n                            <div class=\"col-md-4 px-md-1\">\r\n                                <div class=\"form-check mt-2\">\r\n                                    <input formControlName=\"tax\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"tax\" #tax>\r\n                                    <label class=\"form-check-label\" for=\"tax\">\r\n                                      Impuesto\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-8 px-md-1\">\r\n\r\n                                <div class=\"form-floating\">\r\n                                    <select class=\"form-select\" id=\"floatingSelectIva\" aria-label=\"Floating label select example\" value=\"0\" formControlName=\"taxid\" (change)=\"selectTax = taxS.value\" #taxS>\r\n    \r\n                                        <option value=\"\"> Seleccionar el impuesto</option>                                      \r\n                                        <option [value]=\"impuesto.taxid\" *ngFor=\"let impuesto of impuestos\"> {{ impuesto.name }} - {{ impuesto.valor }} </option>                                      \r\n                                    \r\n                                    </select>\r\n                                    <label for=\"floatingSelectIva\">Tipo de impuesto</label>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <!-- IMPUESTO -->\r\n\r\n                        <div class=\"row mb-3\">\r\n\r\n                            <div class=\"col-md-4 px-md-1\">\r\n\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"cost\" type=\"number\" class=\"form-control\" min=\"0\" (keyup)=\"porcentaje('costo', costo.value)\" [value]=\"costoN\" placeholder=\"costo\" #costo>\r\n                                    <label for=\"floatingInput\">costo</label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-4 px-md-1\">\r\n\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"gain\" type=\"number\" class=\"form-control\" min=\"0\" (change)=\"porcentaje('ganancia', ganancia.value)\" [value]=\"gananciaN\" placeholder=\"Ganancia\" #ganancia>\r\n                                    <label for=\"floatingInput\">Ganancia</label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-4 px-md-1\">\r\n\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"price\" type=\"number\" class=\"form-control\" min=\"0\" (change)=\"porcentaje('precio', precio.value)\" [value]=\"precioN\" placeholder=\"Precio\" #precio>\r\n                                    <label for=\"floatingInput\">Precio</label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"row mb-3\">\r\n\r\n                            <div class=\"col-md-4 px-md-1\" *ngIf=\"tax.checked\">\r\n\r\n\r\n                                <div class=\"form-floating\">\r\n                                    <input type=\"text\" class=\"form-control\" (change)=\"precioIva()\" [value]=\"priceIva\" placeholder=\"Precio con IVA\" #pIva>\r\n                                    <label for=\"floatingInput\">Precio con IVA</label>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-3 px-md-1\">\r\n\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"wholesale\" type=\"text\" class=\"form-control\" placeholder=\"Al Mayor\">\r\n                                    <label for=\"floatingInput\">Al Mayor</label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-4 px-md-1\">\r\n\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"distribuidor\" type=\"text\" class=\"form-control\" placeholder=\"Precio distribuidor\">\r\n                                    <label for=\"floatingInput\">Al Distribuidor</label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n\r\n\r\n                        <!-- KIT -->\r\n\r\n                        <div class=\"row mb-3\">\r\n\r\n                            <div class=\"col-md-6 px-md-1\">\r\n\r\n                                <div class=\"form-floating\">\r\n                                    <select class=\"form-select\" id=\"floatingSelect\" aria-label=\"Floating label select example\" formControlName=\"department\">\r\n                                        <option selected value=\"0\">Seleccionar Departamento</option>\r\n                                        <option value=\"00\">Sin Departamento</option>\r\n                                        <ng-container *ngFor=\"let departmento of departamentos\">\r\n                                            <option *ngIf=\"departmento.status\" value=\"{{departmento.did}}\">{{departmento.name}}</option>\r\n                                        </ng-container>\r\n                                    </select>\r\n                                    <label for=\"floatingSelect\">Seleccionar Departamento</label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div class=\"col-md-6 px-md-1\">\r\n\r\n                                <div class=\"form-floating\">\r\n                                    <input formControlName=\"expiration\" type=\"date\" class=\"form-control\" placeholder=\"Fecha de vencimiento\">\r\n                                    <label for=\"floatingInput\">Fecha de vencimiento</label>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                        <!-- KIT -->\r\n                        <ng-container *ngIf=\"producto\">\r\n\r\n                            <div class=\"row mb-3\" *ngIf=\"producto.type !== 'Paquete'\">\r\n\r\n                                <div class=\"col-md-6 px-md-1\">\r\n\r\n                                    <div class=\"form-floating\">\r\n                                        <input formControlName=\"min\" type=\"text\" class=\"form-control\" placeholder=\"Minimo\">\r\n                                        <label for=\"floatingInput\">Minimo</label>\r\n                                    </div>\r\n\r\n                                </div>\r\n\r\n                                <div class=\"col-md-6 px-md-1\">\r\n\r\n                                    <div class=\"form-floating\">\r\n                                        <input formControlName=\"max\" type=\"text\" class=\"form-control\" placeholder=\"Maximo\">\r\n                                        <label for=\"floatingInput\">Maximo</label>\r\n                                    </div>\r\n\r\n                                </div>\r\n\r\n                            </div>\r\n                            <div class=\"row mb-3\">\r\n\r\n                                <div class=\"col-md-6 px-md-1\">\r\n\r\n                                    <div class=\"form-floating\">\r\n                                        <input formControlName=\"mayoreo\" type=\"text\" class=\"form-control\" placeholder=\"Mayoreo apartir de\">\r\n                                        <label for=\"floatingInput\">Mayoreo apartir de</label>\r\n                                    </div>\r\n\r\n                                </div>\r\n\r\n                            </div>\r\n                        </ng-container>\r\n\r\n                        <div class=\"row mb-3\">\r\n\r\n                            <div class=\"col-md-6 px-md-1\">\r\n                                <div class=\"form-check mt-2\">\r\n                                    <input formControlName=\"comanda\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"checkComanda\">\r\n                                    <label class=\"form-check-label\" for=\"checkComanda\">\r\n                                      Comanda\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-6 px-md-1\">\r\n\r\n                                <div class=\"form-floating\">\r\n                                    <select class=\"form-select\" id=\"tipo\" aria-label=\"Floating label select example\" formControlName=\"tipo\">\r\n                                        <option value=\"\">Seleccionar</option>\r\n                                        <option value=\"Cocina\">Cocina</option>\r\n                                        <option value=\"Bebidas\">Bebidas</option>\r\n                                        <option value=\"Barra\">Barra</option>\r\n                                    </select>\r\n                                    <label for=\"Comanda\">Seleccionar</label>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-md-4 px-md-1\">\r\n                            <div class=\"form-check mt-2\">\r\n                                <input formControlName=\"visibility\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"checkProducto\" checked>\r\n                                <label class=\"form-check-label\" for=\"checkProducto\">\r\n                                  Producto Visible\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                        <div class=\"row\">\r\n                            <div class=\"text-danger mb-2\">\r\n                                <!-- <p *ngIf=\"campoValido('name')\" class=\"mb-1 animated fadeIn\">- El nombre es obligatorio</p> -->\r\n                                <!-- <p *ngIf=\"campoValido('cedula')\" class=\"mb-1 animated fadeIn\">- La cedula de ciudadania es obligatoria</p> -->\r\n                                <!-- <p *ngIf=\"campoValido('email')\" class=\"mb-1 animated fadeIn\">- El email es obligatorio y tiene que ser un email valido</p> -->\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                        <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- INFO PRODUCT -->\r\n\r\n\r\n\r\n    </div>\r\n\r\n\r\n    <!-- LOG DE PRODUCTOS -->\r\n    <!-- LOG DE PRODUCTOS -->\r\n    <!-- LOG DE PRODUCTOS -->\r\n\r\n    <div class=\"card mt-5 mb-4\">\r\n        <div class=\"card-body text-center\">\r\n\r\n            <h4>Historial del Producto</h4>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"col-12\">\r\n\r\n        <div class=\"d-flex flex-wrap gap-2\">\r\n\r\n            <div *ngIf=\"producto\" class=\"col-md-3 p-0 mb-4\">\r\n                <!-- Dashboard info widget 1-->\r\n                <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-info h-100 bg-white\">\r\n                    <div class=\"card-body\">\r\n                        <div class=\"d-flex align-items-center flex-wrap\">\r\n                            <div class=\"flex-grow-1\">\r\n                                <div class=\"small font-weight-bold text-info mb-1\">Utilidad</div>\r\n                                <div class=\"h5\">({{ utilidad | divisa }})</div>\r\n                            </div>\r\n                            <div class=\"ms-2\">\r\n                                <i class=\"bi bi-currency-dollar text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div *ngIf=\"producto\" class=\"col-md-2 p-0 mb-4\">\r\n                <!-- Dashboard info widget 1-->\r\n                <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-primary h-100 bg-white\">\r\n                    <div class=\"card-body\">\r\n                        <div class=\"d-flex align-items-center flex-wrap\">\r\n                            <div class=\"flex-grow-1\">\r\n                                <div class=\"small font-weight-bold text-primary mb-1\">Vendidos</div>\r\n                                <div class=\"h5\">({{ vendidos | number}})</div>\r\n                            </div>\r\n                            <div class=\"ms-2\">\r\n                                <i class=\"bi bi-arrow-up text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div *ngIf=\"producto\" class=\"col-md-2 p-0 mb-4\">\r\n                <!-- Dashboard info widget 1-->\r\n                <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-success h-100 bg-white\">\r\n                    <div class=\"card-body\">\r\n                        <div class=\"d-flex align-items-center flex-wrap\">\r\n                            <div class=\"flex-grow-1\">\r\n                                <div class=\"small font-weight-bold text-success mb-1\">Comprados</div>\r\n                                <div class=\"h5\">({{ comprados | number }})</div>\r\n                            </div>\r\n                            <div class=\"ms-2\">\r\n                                <i class=\"bi bi-truck text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div *ngIf=\"producto\" class=\"col-md-2 p-0 mb-4\">\r\n                <!-- Dashboard info widget 1-->\r\n                <div class=\"card border-top-0 border-bottom-0 border-end-0 border-left-lg border-warning h-100 bg-white\">\r\n                    <div class=\"card-body\">\r\n                        <div class=\"d-flex align-items-center flex-wrap\">\r\n                            <div class=\"flex-grow-1\">\r\n                                <div class=\"small font-weight-bold text-warning mb-1\">Devueltos</div>\r\n                                <div class=\"h5\">({{ devueltos | number }})</div>\r\n                            </div>\r\n                            <div class=\"ms-2\">\r\n                                <i class=\"bi bi-arrow-down text-muted\" style=\"font-size: 1.5rem;\"></i>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div class=\"row mb-5\">\r\n\r\n            <!-- FILTRO -->\r\n            <div class=\"col-12 col-md-3 col-xl-3 mt-2\">\r\n                <div class=\"p-3 rounded bg-white\">\r\n\r\n                    <h4 class=\"mb-0 text-muted\">Filtros</h4>\r\n\r\n                    <hr>\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"\" class=\"form-label\">Tipo</label>\r\n                        <select class=\"form-select form-select-lg\" name=\"\" id=\"\" (change)=\"selectType(typeS.value)\" #typeS>\r\n                            <option value=\"all\">Todos</option>\r\n                            <option value=\"Salida\">Salida</option>\r\n                            <option value=\"Agrego\">Agrego</option>\r\n                            <option value=\"Compra\">Compra</option>\r\n                            <option value=\"Elimino\">Elimino</option>\r\n                            <option value=\"Devolución\">Devolución</option>\r\n                        </select>\r\n                    </div>\r\n                    \r\n\r\n                    <hr>\r\n\r\n                    <!-- DESDE -->\r\n                    <div class=\"mt-4\">\r\n                        <label class=\"\" for=\"\">Desde</label>\r\n                        <input type=\"datetime-local\" class=\"form-control\" (change)=\"initial.value\" #initial>\r\n                    </div>\r\n                    <!-- DESDE -->\r\n\r\n                    <!-- HASTA -->\r\n                    <div class=\"mt-2\">\r\n                        <label class=\"\" for=\"\">Hasta</label>\r\n                        <input type=\"datetime-local\" class=\"form-control\" (change)=\"end.value\" #end>\r\n                    </div>\r\n                    <!-- HASTA -->\r\n\r\n                    <button (click)=\"buscarPor(initial.value, end.value)\" type=\"button\" class=\"btn btn-outline-primary btn-sm btn-block mt-4\"> \r\n                        <i class=\"bi-search\"></i> Buscar \r\n                    </button>\r\n\r\n                </div>\r\n            </div>\r\n            <!-- FILTRO -->\r\n\r\n            <!-- TABLE CLIENTS -->\r\n            <div class=\"shadow p-3 rounded bg-white col-12 col-md-9 col-xl-9 mt-2\">\r\n\r\n                <div *ngIf=\"!cargando\">\r\n\r\n                    <!-- BTN CREAR CAJA -->\r\n                    <div class=\"d-flex justify-content-end\">\r\n\r\n                        <div class=\"row\">\r\n                            <div class=\"col pe-0\">Mostrar:</div>\r\n                            <div class=\"col\">\r\n                                <select class=\"form-select form-select-sm\" (change)=\"limiteChange(limit.value)\" [value]=\"query.hasta\" aria-label=\".form-select-sm example\" #limit>\r\n                                    <option value=\"10\">10</option>\r\n                                    <option value=\"25\">25</option>\r\n                                    <option value=\"50\">50</option>\r\n                                    <option value=\"100\">100</option>\r\n                                    <option value=\"250\">250</option>\r\n                                    <option value=\"500\">500</option>\r\n                                    <option value=\"1000\">1000</option>\r\n                                    <option value=\"5000\">5000</option>\r\n                                    <option value=\"10000\">10000</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n\r\n                    </div>\r\n                    <!-- BTN CREAR CAJA -->\r\n\r\n                    <div class=\"table-responsive \">\r\n                        <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                            <thead class=\"border-bottom \">\r\n                                <tr>\r\n                                    <th class=\"text-muted \" scope=\"col \">#</th>\r\n                                    <th class=\"text-muted \" scope=\"col \" colspan=\"2\">Codigo</th>\r\n                                    <th class=\"text-muted \" scope=\"col \" colspan=\"2\">Nombre</th>\r\n                                    <th class=\"text-muted text-center\" scope=\"col\">Departamento</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Descripción</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Tipo</th>\r\n                                    <th class=\"text-muted text-center\" scope=\"col\">Antes</th>\r\n                                    <th class=\"text-muted text-center\" scope=\"col\">Cantidad</th>\r\n                                    <th class=\"text-muted text-center\" scope=\"col\">Stock</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Usuario</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">fecha</th>\r\n                                </tr>\r\n                            </thead>\r\n\r\n                            <tbody>\r\n\r\n                                <tr *ngIf=\"logs.length === 0\" class=\"text-center \">\r\n                                    <th colspan=\"13\" class=\"py-4\">\r\n                                        <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                                    </th>\r\n                                </tr>\r\n\r\n                                <tr class=\"trHover\" *ngFor=\"let item of logs; let i = index\">\r\n                                    <th scope=\"row \">{{ i + 1}}</th>\r\n                                    <td colspan=\"2\">{{ item.code }}</td>\r\n                                    <td colspan=\"2\">{{ item.name }}</td>\r\n                                    <td class=\"text-center\">{{ item.departamento }}</td>\r\n                                    <td>\r\n                                        <a *ngIf=\"item.invoice\" [routerLink]=\"['/dashboard/factura', item.invoice._id]\">                   \r\n                                            {{ item.description }}\r\n                                        </a>\r\n                                        <a *ngIf=\"item.compra\" [routerLink]=\"['/dashboard/compra', item.compra]\">                   \r\n                                            {{ item.description }}\r\n                                        </a>\r\n                                        <span *ngIf=\"!item.invoice && !item.compra\">\r\n                                            {{ item.description }}                                \r\n                                        </span>\r\n                                    </td>\r\n                                    <td>\r\n                                        <span *ngIf=\"item.type === 'Salida'\" class=\"badge rounded-pill bg-danger text-white-75\">{{ item.type }}</span>\r\n                                        <span *ngIf=\"item.type === 'Agrego'\" class=\"badge rounded-pill bg-success text-white-75\">{{ item.type }}</span>\r\n                                        <span *ngIf=\"item.type === 'Compra'\" class=\"badge rounded-pill bg-success text-white-75\">{{ item.type }}</span>\r\n                                        <span *ngIf=\"item.type === 'Elimino'\" class=\"badge rounded-pill bg-warning text-white-75\">{{ item.type }}</span>\r\n                                        <span *ngIf=\"item.type === 'Devolución'\" class=\"badge rounded-pill bg-info text-white-75\">{{ item.type }}</span>\r\n                                    </td>\r\n    \r\n                                    <td class=\"text-center\">{{ item.befored | number }}</td>\r\n                                    <td class=\"text-center\">{{ item.qty | number }}</td>\r\n                                    <td class=\"text-center\">{{ item.stock  | number}}</td>\r\n                                    <td>{{ item.cajero.name }}</td>\r\n                                    <td> <small class=\"text-wrapp\"> {{ item.fecha | date:'medium'}}</small></td>\r\n                                </tr>\r\n                            </tbody>\r\n\r\n                        </table>\r\n\r\n                    </div>\r\n\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                    <div class=\"row\">\r\n                        <div class=\"col col-md-4\">\r\n                            <small class=\"text-muted\">Total de movimientos: ({{total}})</small>\r\n                        </div>\r\n\r\n                        <div class=\"col d-flex justify-content-end\">\r\n                            <button [disabled]=\"query.desde === 0\" type=\"button\" (click)=\"cambiarPagina((query.hasta * -1))\" class=\"btn btn-sm btn-dark btnW waves-effect waves-light px-3\">Anterior</button>\r\n                            <button [disabled]=\"query.hasta  > logs.length || query.hasta > total\" type=\"button\" (click)=\"cambiarPagina(query.hasta)\" class=\"btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2\">Siguiente</button>\r\n                        </div>\r\n                    </div>\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n                </div>\r\n            </div>\r\n            <!-- TABLE CLIENTS -->\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n\r\n</div>\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    MODAL AJUSTAR INVENTARIO\r\n========================================================================= -->\r\n\r\n<div class=\"modal fade\" id=\"ajustarInventario\" tabindex=\"-1\" aria-labelledby=\"ajustarInventarioModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"ajustarInventarioModal\"><i class=\"bi-arrow-left-right\" style=\"font-size: 1rem\"></i> Movimientos </h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n\r\n            <div class=\"modal-body\">\r\n\r\n                <!-- NAV - NAV -->\r\n                <nav>\r\n                    <div class=\"nav nav-tabs\" id=\"nav-tab\" role=\"tablist\">\r\n                        <a class=\"nav-link active\" id=\"nav-entradas-tab\" data-bs-toggle=\"tab\" href=\"#nav-entradas\" role=\"tab\" aria-controls=\"nav-entradas\" aria-selected=\"true\"><i class=\"bi-box-arrow-in-right\"></i>  Ingresar</a>\r\n                        <a class=\"nav-link\" id=\"nav-salidas-tab\" data-bs-toggle=\"tab\" href=\"#nav-salidas\" role=\"tab\" aria-controls=\"nav-salidas\" aria-selected=\"false\"><i class=\"bi-box-arrow-right\"></i> Ajustar</a>\r\n                    </div>\r\n                </nav>\r\n                <!-- NAV - NAV -->\r\n\r\n                <div class=\"tab-content\" id=\"nav-tabContent\">\r\n\r\n                    <!-- ENTRADAS - ENTRADAS - ENTRADAS -->\r\n                    <div class=\"tab-pane fade show active\" id=\"nav-entradas\" role=\"tabpanel\" aria-labelledby=\"nav-entradas-tab\">\r\n\r\n                        <div class=\"py-4\">\r\n\r\n                            <div class=\"form-group\">\r\n                                <label for=\"\">Aumentar</label>\r\n                                <input type=\"number\" class=\"form-control\" placeholder=\"Agregue la cantidad de productos nuevos\" #cantidadE>\r\n                            </div>\r\n\r\n                            <div class=\"col py-2\">\r\n                                <button type=\"button\" (click)=\"ajustar('entrada', cantidadE.value)\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n\r\n                    </div>\r\n                    <!-- ENTRADAS - ENTRADAS - ENTRADAS -->\r\n                    <!-- SALIDAS - SALIDAS - SALIDAS -->\r\n                    <div class=\"tab-pane fade\" id=\"nav-salidas\" role=\"tabpanel\" aria-labelledby=\"nav-salidas-tab\">\r\n\r\n                        <div class=\"py-4\">\r\n\r\n                            <div class=\"form-group\">\r\n                                <label for=\"\">Ajuste</label>\r\n                                <input type=\"number\" class=\"form-control\" placeholder=\"Registre el ajuste de los productos\" #cantidadS>\r\n                            </div>\r\n\r\n                            <div class=\"col py-2\">\r\n                                <button type=\"button\" (click)=\"ajustar('salida', cantidadS.value)\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n                    <!-- SALIDAS - SALIDAS - SALIDAS -->\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    MODAL AJUSTAR INVENTARIO\r\n========================================================================= -->","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport Swal from 'sweetalert2';\r\n\r\n// MODELS\r\nimport { Product } from '../../models/product.model';\r\nimport { Department } from 'src/app/models/department.model';\r\nimport { User } from '../../models/user.model';\r\nimport { Impuestos } from 'src/app/models/impuestos.model';\r\n\r\n// SERVICES\r\nimport { ProductService } from '../../services/product.service';\r\nimport { SearchService } from '../../services/search.service';\r\nimport { DepartmentService } from '../../services/department.service';\r\nimport { UserService } from '../../services/user.service';\r\nimport { ImpuestosService } from 'src/app/services/impuestos.service';\r\n\r\n// EXCEL\r\nimport * as XLSX from 'xlsx';\r\n\r\n@Component({\r\n  selector: 'app-productos',\r\n  templateUrl: './productos.component.html',\r\n  styles: [\r\n  ]\r\n})\r\n\r\nexport class ProductosComponent implements OnInit {\r\n\r\n  public totalProductos: number = 0;\r\n  public inventario: number = 0;\r\n  public productos: Product[] = [];\r\n  public productosTemp: Product[] = [];\r\n\r\n  public listaDepartamentos: Department[] = [];\r\n  \r\n  public resultado: number = 0;\r\n  public desde: number = 0;\r\n  public cargando: boolean = true;\r\n  public sinResultados: boolean = true;\r\n\r\n  public btnAtras: string = '';\r\n  public btnAdelante: string = '';\r\n\r\n  public user: User;\r\n\r\n  constructor(  private productService: ProductService,\r\n                private searchService: SearchService,\r\n                private fb:FormBuilder,\r\n                private departmentService: DepartmentService,\r\n                private userService: UserService,\r\n                private impuestosService: ImpuestosService) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.user = this.userService.user;\r\n    \r\n    this.cargarProductos('none', false);\r\n\r\n    this.cargarCosto();\r\n\r\n    this.cargarDepartamentos();\r\n\r\n    this.cargarImpuestos();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR IMPUESTOS\r\n  ==================================================================== */\r\n  public impuestos: Impuestos[] = [];\r\n  cargarImpuestos(){\r\n\r\n    this.impuestosService.loadImpuestos()\r\n        .subscribe( ({taxes}) => {\r\n\r\n          this.impuestos = taxes;\r\n\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   IMPORTAR EXCEL\r\n  ==================================================================== */\r\n  arrayBuffer:any;\r\n  file:File;\r\n  incomingfile(event: any){\r\n    this.file= event.target.files[0]; \r\n  }\r\n\r\n  Upload() {\r\n\r\n    let fileReader = new FileReader();\r\n      fileReader.onload = (e) => {\r\n          this.arrayBuffer = fileReader.result;\r\n          var data = new Uint8Array(this.arrayBuffer);\r\n          var arr = new Array();\r\n          for(var i = 0; i != data.length; ++i) arr[i] = String.fromCharCode(data[i]);\r\n          var bstr = arr.join(\"\");\r\n          var workbook = XLSX.read(bstr, {type:\"binary\"});\r\n          var first_sheet_name = workbook.SheetNames[0];\r\n          var worksheet = workbook.Sheets[first_sheet_name];\r\n          console.log(XLSX.utils.sheet_to_json(worksheet,{raw:true}));\r\n      }\r\n      \r\n      fileReader.readAsArrayBuffer(this.file);\r\n  };\r\n\r\n  /** ================================================================\r\n   *   EXPORTAR EXCEL\r\n  ==================================================================== */\r\n  exportar(){\r\n\r\n    this.productService.productExcel()\r\n        .subscribe( ({products}) => {\r\n\r\n          /* generate a worksheet */\r\n          var ws = XLSX.utils.json_to_sheet(products);\r\n      \r\n          /* add to workbook */\r\n          var wb = XLSX.utils.book_new();\r\n          XLSX.utils.book_append_sheet(wb, ws, \"Productos\");\r\n      \r\n          /* title */\r\n          let title = 'inventario.xls';\r\n      \r\n          /* write workbook and force a download */\r\n          XLSX.writeFile(wb, title);\r\n\r\n        });\r\n\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR DEPARTAMENTOS\r\n  ==================================================================== */\r\n  cargarDepartamentos(){\r\n\r\n    this.departmentService.loadDepartment()\r\n        .subscribe( ({departments, total}) => {\r\n          \r\n          this.listaDepartamentos = departments;      \r\n          \r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR PRODUCTOS\r\n  ==================================================================== */\r\n  public endPoint: string = `?desde=${this.desde}&status=false`;\r\n  cargarProductos(tipo: string = '', valor: boolean = false, departamento: string = 'none'){\r\n\r\n    this.costoB = 0;\r\n    this.precioB = 0;\r\n    this.inventarioB = 0;\r\n    \r\n    if (tipo === 'agotados' && valor === true) {\r\n      this.endPoint = `?desde=${this.desde}&tipo=${tipo}&valor=${valor}&departamento=${departamento}&status=false`;      \r\n    }else if(tipo === 'vencidos' && valor === true){\r\n      this.endPoint = `?desde=${this.desde}&tipo=${tipo}&valor=${valor}&departamento=${departamento}&status=false`; \r\n    }else{\r\n      this.endPoint = `?desde=${this.desde}&tipo=none&departamento=${departamento}&status=false`;      \r\n    }\r\n    \r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n    this.productService.cargarProductos(this.endPoint)\r\n        .subscribe(({total, products}) => {\r\n            \r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (products.length === 0) {\r\n            this.sinResultados = false;\r\n            this.cargando = false;\r\n            this.productos = [];\r\n            this.resultado = 0;\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n        \r\n          this.totalProductos = total;\r\n          this.productos = products;\r\n          this.productosTemp = products;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n          \r\n          if (departamento === 'none') {      \r\n            this.costoB = 0;\r\n            this.precioB = 0;\r\n            this.inventarioB = 0;\r\n          }else{\r\n\r\n            for (let i = 0; i < this.productos.length; i++) {\r\n\r\n              if (this.productos[i].type !== 'Paquete') {\r\n  \r\n                  const stockF = ((this.productos[i].stock + this.productos[i].returned + this.productos[i].bought) - (this.productos[i].sold + this.productos[i].damaged));\r\n  \r\n                  this.inventarioB += stockF;\r\n                  this.costoB += (stockF * this.productos[i].cost);\r\n                  this.precioB += (stockF * this.productos[i].price);\r\n              }\r\n  \r\n            }            \r\n\r\n          }\r\n\r\n          // BOTONOS DE ADELANTE Y ATRAS          \r\n          if (this.desde === 0 && this.totalProductos > 10) {\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = '';\r\n          }else if(this.desde === 0 && this.totalProductos < 11){\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n          }else if((this.desde + 10) >= this.totalProductos){\r\n            this.btnAtras = '';\r\n            this.btnAdelante = 'disabled';\r\n          }else{\r\n            this.btnAtras = '';\r\n            this.btnAdelante = '';\r\n          }   \r\n          // BOTONOS DE ADELANTE Y ATRAS    \r\n            \r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR COST PRODUCTOS\r\n  ==================================================================== */\r\n  public totalCost: number;\r\n  public totalPrice: number;\r\n  cargarCosto(){\r\n\r\n    this.productService.cargarProductoCost()\r\n    .subscribe(({costo, precio, inventario}) => {\r\n\r\n      console.log(costo);\r\n      console.log(precio);\r\n      console.log(inventario);\r\n      \r\n\r\n      this.totalCost = costo;\r\n      this.totalPrice = precio;\r\n      this.inventario = inventario\r\n\r\n    });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CAMBIAR PAGINA\r\n  ==================================================================== */\r\n  cambiarPagina (valor: number){\r\n    this.desde += valor;\r\n\r\n    if (this.desde < 0) {\r\n      this.desde = 0;\r\n    }else if( this.desde > this.totalProductos ){\r\n      this.desde -= valor;\r\n    }\r\n\r\n    this.cargarProductos('none', false);\r\n\r\n  }\r\n    \r\n  /** ================================================================\r\n   *   BUSCAR\r\n  ==================================================================== */\r\n  public costoB: number = 0;\r\n  public precioB: number = 0;\r\n  public inventarioB: number = 0;\r\n\r\n  buscar( termino:string ){\r\n\r\n    this.costoB = 0;\r\n    this.precioB = 0;\r\n    this.inventarioB = 0;\r\n\r\n    this.sinResultados = true;\r\n\r\n    if (termino.length === 0) {\r\n\r\n      this.productos = this.productosTemp;\r\n      this.resultado = 0;\r\n      this.costoB = 0;\r\n      this.precioB = 0;\r\n      this.inventarioB = 0;\r\n      return;\r\n\r\n    }else{\r\n\r\n      this.sinResultados = true;\r\n\r\n      this.searchService.search('products', termino)\r\n            .subscribe(({total, resultados}) => {\r\n              \r\n              // COMPROBAR SI EXISTEN RESULTADOS\r\n              if (resultados.length === 0) {\r\n                this.sinResultados = false;\r\n                this.productos = [];\r\n                this.resultado = 0;\r\n                return;                \r\n              }\r\n              // COMPROBAR SI EXISTEN RESULTADOS\r\n\r\n              this.totalProductos = total;\r\n              this.productos = resultados; \r\n              this.resultado = resultados.length;\r\n            });\r\n    }    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR POR PRODUCTOS AGOTADOS O VENCIDOS\r\n  ==================================================================== */\r\n  buscarLowOut(){\r\n    this.sinResultados = true;\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BORRAR Producto\r\n  ==================================================================== */\r\n  borrarProducto(_id: string){\r\n\r\n    Swal.fire({\r\n      title: 'Atencion',\r\n      text: \"Estas seguro de eliminar este producto?\",\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: 'Si, eliminar',\r\n      cancelButtonText: 'Cancelar'\r\n    }).then((result) => {  \r\n      \r\n      if (result.isConfirmed) {\r\n\r\n        this.productService.deleteProduct(_id)\r\n        .subscribe((resp:{product, ok}) =>{\r\n\r\n          if (resp.product.status) {\r\n            Swal.fire('Estupendo', 'Se ha habilitado el Producto exitosamente!', 'success');\r\n          }else{\r\n            Swal.fire('Estupendo', 'Se ha eliminado el Producto exitosamente!', 'success');\r\n          }\r\n          \r\n\r\n          this.cargarProductos('none', false);\r\n        }, (err) =>{\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n        });\r\n\r\n      }\r\n\r\n    });\r\n\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   REPARAR INVENTARIO\r\n  ==================================================================== */\r\n  repararInventario(){\r\n\r\n    Swal.fire({\r\n      title: 'Atencion',\r\n      text: \"Estas seguro de que necesitas reparar el inventario?\",\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: 'Si, reparar ahora',\r\n      cancelButtonText: 'Cancelar'\r\n    }).then((result) => {  \r\n      \r\n      if (result.isConfirmed) {\r\n\r\n        this.productService.repararInventario()\r\n            .subscribe( ( resp:{products:number}) => {\r\n              \r\n              Swal.fire('Estupendo', `Se han corregido ${resp.products} productos`, 'success');\r\n              this.cargarProductos('none', false);\r\n              \r\n            },(err) => { Swal.fire('Error', err.error.msg,'error') });\r\n\r\n      }\r\n\r\n    });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   AGREGAR INVENTARIO\r\n  ==================================================================== */\r\n  public btnAddInv: boolean = false;\r\n  public product: Product;\r\n\r\n  @ViewChild('cantidad') cantidadE: ElementRef;\r\n\r\n  public ajustarInventario = {\r\n    cantidad: 0,\r\n    bought: 0,\r\n    damaged: 0,\r\n    type: ''\r\n  };\r\n\r\n  ajustar(tipo: string, cantidad: number){\r\n\r\n    if (cantidad <= 0 || !cantidad) {\r\n      return Swal.fire('Atención', 'Debes de asignar una canitidad', 'info');\r\n    }\r\n\r\n    if (tipo === 'entrada') { \r\n      \r\n      this.ajustarInventario.cantidad = Number(cantidad);\r\n      this.ajustarInventario.bought = Number(cantidad);\r\n      this.ajustarInventario.type = 'Agrego';\r\n      \r\n    }\r\n\r\n    this.productService.ajustarInventario(this.product.pid, this.ajustarInventario)\r\n        .subscribe( (resp: {ok: boolean, product: Product}) => {\r\n\r\n          this.cantidadE.nativeElement.value = '';\r\n\r\n          this.product = resp.product;\r\n\r\n\r\n          Swal.fire('Estupendo', 'Se ha actualizado el inventario exitosamente!', 'success');                   \r\n\r\n        }, (err) =>{ Swal.fire('Error', err.error.msg, 'error'); });\r\n  }\r\n\r\n  /** ================================================================\r\n   *   AGREGAR IVA A TODOS LOS PRODUCTOS\r\n  ==================================================================== */\r\n  public ivaFormSubmitted: boolean = false;\r\n  public ivaForm = this.fb.group({\r\n    taxid: ['', [Validators.required]],\r\n    tax: ['', [Validators.required]]\r\n  });\r\n\r\n  ivaAll(){\r\n\r\n    this.ivaFormSubmitted = true;\r\n\r\n    if (this.ivaForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    if (this.ivaForm.value.taxid === '') {\r\n      Swal.fire('Error', 'Debe de seleccionar el tipo de impuesto', 'info');\r\n      return;\r\n    }\r\n\r\n    this.productService.ivaAllProducts(this.ivaForm.value)\r\n        .subscribe( (resp: { ok: boolean, total: any }) => {\r\n\r\n          this.ivaFormSubmitted = true;\r\n          Swal.fire('Estupendo', `hemos actualizado ${resp.total} productos`, 'success');\r\n                    \r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ACTUALIZAR CON EXCEL TODOS\r\n  ==================================================================== */\r\n   public arrayExceltUpdate:any;\r\n   public excelUpdate:File;\r\n   public totalItems: number = 0; \r\n   public products: any[] = [];\r\n   public sendLote: boolean = false;\r\n \r\n   selectFileExcel(event: any){\r\n     this.excelUpdate= event.target.files[0]; \r\n   }\r\n\r\n   UploadExcel() {\r\n\r\n    if (!this.excelUpdate) {\r\n      Swal.fire('Atención', 'No has seleccionado ningun archivo de excel', 'info');\r\n      return;\r\n    }\r\n\r\n    this.sendLote = true;\r\n\r\n    let fileReader = new FileReader();\r\n      fileReader.onload = (e) => {\r\n\r\n          this.arrayExceltUpdate = fileReader.result;\r\n          var data = new Uint8Array(this.arrayExceltUpdate);\r\n          var arr = new Array();\r\n\r\n          for(var i = 0; i != data.length; ++i) arr[i] = String.fromCharCode(data[i]);\r\n          \r\n          var bstr = arr.join(\"\");\r\n          var workbook = XLSX.read(bstr, {type:\"binary\"});\r\n          var first_sheet_name = workbook.SheetNames[0];\r\n          var worksheet = workbook.Sheets[first_sheet_name];\r\n          \r\n          this.products = XLSX.utils.sheet_to_json(worksheet,{raw:true});\r\n\r\n          this.productService.actualizarProductoExcel({products: this.products})\r\n              .subscribe( ({total}) => {\r\n\r\n                Swal.fire('Estupendo', `Se actualizaron ${total} productos exitosamente!`, 'success');\r\n                location.reload();\r\n                this.sendLote = false;                \r\n                \r\n              },(err) => { \r\n                this.sendLote = false;\r\n                console.log(err);                  \r\n                Swal.fire('Error', err.error.msg, 'error'); \r\n              });\r\n\r\n      }\r\n      \r\n      fileReader.readAsArrayBuffer(this.excelUpdate);\r\n  };\r\n\r\n  /** ================================================================\r\n   *   DESCARGAR PLANTILLA DE EXCEL\r\n  ==================================================================== */\r\n  plantilla(){\r\n\r\n    let products = [{\r\n      code: '123456',\r\n      cost: 1000,\r\n      price: 1500,\r\n      wholesale: 1200,\r\n      agregar: 10\r\n    }];\r\n\r\n    /* generate a worksheet */\r\n    var ws = XLSX.utils.json_to_sheet(products);\r\n\r\n    /* add to workbook */\r\n    var wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, ws, \"actualizar\");\r\n\r\n    /* title */\r\n    let title = 'actualizarProductos.xls';\r\n\r\n    /* write workbook and force a download */\r\n    XLSX.writeFile(wb, title);\r\n\r\n\r\n  }\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-yellow py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">PRODUCTOS</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link text-dark active\" id=\"administracion-tab\" [routerLink]=\"['/dashboard', 'productos']\">\r\n                <i class=\"bi-files\" style=\"font-size: 1rem\"></i> Administracion de Productos\r\n            </a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-primary\" id=\"nuevo-tab\" [routerLink]=\"['/dashboard/productos', 'nuevo']\"><i class=\"bi-pencil-square\" style=\"font-size: 1rem\"></i> Crear Producto</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark \" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'departamento']\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Departamentos</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'categorias']\" aria-selected=\"false\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Categorias</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'movimientos']\" aria-selected=\"false\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> Movimientos</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"departamentos-tab\" [routerLink]=\"['/dashboard/productos', 'kardex']\" aria-selected=\"false\"><i class=\"bi-collection\" style=\"font-size: 1rem\"></i> kardex</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link text-dark\" id=\"eliminados-tab\" [routerLink]=\"['/dashboard/productos', 'eliminados']\" aria-selected=\"false\"><i class=\"bi-trash\" style=\"font-size: 1rem\"></i> Eliminados</a>\r\n        </li>\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n<div class=\"tab-content mt-4 bg-light2\" id=\"myTabContent\">\r\n\r\n    <!-- TAB 1 -->\r\n    <div class=\"tab-pane fade show active\" id=\"administracion\" role=\"tabpanel\" aria-labelledby=\"administracion-tab\">\r\n        <div class=\"container-fluid\">\r\n            <!-- TITLE - SUBTITLE -->\r\n            <div>\r\n                <h5 class=\"text-dark\">ADMINISTRACIÓN DE PRODUCTOS</h5>\r\n                <p>Administra todos los productos de forma centralizada.</p>\r\n            </div>\r\n            <!-- TITLE - SUBTITLE -->\r\n\r\n            <div class=\"row\">\r\n\r\n                <div class=\"col-md-2\">\r\n\r\n                    <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n                        <h4 class=\"text-muted\">Filtros</h4>\r\n\r\n                        <div>\r\n                            <h6 class=\"text-muted\">Agotados</h6>\r\n                            <div class=\"form-check form-switch\">\r\n                                <input class=\"form-check-input\" (change)=\"cargarProductos('agotados', agotados.checked)\" type=\"checkbox\" id=\"flexSwitchCheckChecked\" #agotados>\r\n                                <label class=\"form-check-label\" for=\"flexSwitchCheckChecked\">Agotados</label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <hr>\r\n\r\n                        <div>\r\n                            <h6 class=\"text-muted\">Vencidos</h6>\r\n                            <div class=\"form-check form-switch\">\r\n                                <input class=\"form-check-input\" (change)=\"cargarProductos('vencidos', vencidos.checked)\" type=\"checkbox\" id=\"flexSwitchCheckChecked\" #vencidos>\r\n                                <label class=\"form-check-label\" for=\"flexSwitchCheckChecked\">Vencidos</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <hr>\r\n\r\n                        <div>\r\n                            <h6 class=\"text-muted\">Departamentos</h6>\r\n                            <select class=\"form-select\" aria-label=\"Default select example\" #departamentos (change)=\"cargarProductos('', false, departamentos.value)\">\r\n                                <option value=\"none\" selected>Todos</option>\r\n\r\n                                <ng-container *ngFor=\"let departmento of listaDepartamentos\">\r\n                                    <option *ngIf=\"departmento.status\" value=\"{{departmento.did}}\">{{departmento.name}}</option>\r\n                                </ng-container>\r\n\r\n                            </select>\r\n                        </div>\r\n\r\n                        <hr>\r\n\r\n                        <div>\r\n                            <h6 class=\"text-muted\">Reparar Inventario</h6>\r\n                            <button type=\"button\" (click)=\"repararInventario()\" class=\"btn btn-primary btn-sm btn-block\">Reparar</button>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <!-- PRODUCTOS LISTA COMPLETA -->\r\n                <div class=\"col-md-10\">\r\n\r\n                    <!-- TABLE PRODUCTS -->\r\n                    <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n                        <!-- CARGANDO -->\r\n                        <div *ngIf=\"cargando\">\r\n                            <div class=\"text-center p-4\">\r\n                                <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                                    <span class=\"visually-hidden\">Loading...</span>\r\n                                </div>\r\n                            </div>\r\n                            <small class=\"text-muted\">cargando...</small>\r\n                        </div>\r\n                        <!-- CARGANDO -->\r\n\r\n                        <div *ngIf=\"!cargando\">\r\n                            <div>\r\n\r\n                                <div class=\"d-flex flex-wrap\">\r\n\r\n                                    <div>\r\n                                        <p class=\"mb-0\">Inventario:</p>\r\n                                        <h4 class=\"display-6\"> {{ inventario | number }} </h4>\r\n                                    </div>\r\n\r\n                                    <div class=\"ms-auto text-end\">\r\n                                        <h4 *ngIf=\"user.role === 'ADMIN'\" class=\"mb-0 text-success\"> Ganancia total {{ (totalPrice - totalCost) | divisa }} </h4>\r\n                                        <small *ngIf=\"user.role === 'ADMIN'\" class=\"mb-0 text-muted\"> Total de venta {{ totalPrice | divisa}} </small>\r\n                                        <small *ngIf=\"user.role === 'ADMIN'\" class=\"mb-0 text-muted\"> Total de inversión {{ totalCost | divisa}} </small>\r\n\r\n                                        <div class=\"my-2\">\r\n                                            <button class=\"btn btn-info btn-sm mr-2\" data-bs-toggle=\"modal\" data-bs-target=\"#updateExcel\"> Actualizar Lote</button>\r\n                                            <button class=\"btn btn-primary btn-sm mr-2\" data-bs-toggle=\"modal\" data-bs-target=\"#ivaAll\"> Cambiar Impuestos</button>\r\n                                            <button *ngIf=\"user.role === 'ADMIN'\" (click)=\"exportar()\" class=\"btn btn-success btn-sm\"> Exportar</button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n\r\n                                <div class=\"form-floating mb-2\">\r\n                                    <span class=\"position-absolute top-50 start-90 translate-middle\"><i class=\" bi-search \" style=\"font-size: 1rem \"></i></span>\r\n                                    <input type=\"text\" class=\"form-control\" id=\"floatingInput\" placeholder=\"Buscar Producto\" (keyup)=\"buscar(search.value)\" #search>\r\n                                    <label for=\"floatingInput \">Buscar Producto</label>\r\n                                </div>\r\n\r\n                                <div class=\"alert alert-info\" *ngIf=\"inventarioB > 0\">\r\n\r\n                                    <p class=\"mb-0 text-wrap\"> Detalles del departamento: <span class=\"text-capitalize fw-bold\"> {{ productos[0].department!.name }} </span> </p>\r\n                                    <hr class=\"my-1\">\r\n                                    <div class=\"d-flex flex-wrap\">\r\n\r\n                                        <div class=\"col-sm-12 col-md-4 text-wrap\">\r\n                                            Inventario: <span class=\"fw-bold\"> {{ inventarioB | number }} </span>\r\n                                        </div>\r\n                                        <div class=\"col-sm-12 col-md-4 text-wrap\">\r\n                                            Total Inversion: <span class=\"fw-bold\"> {{ costoB | divisa }} </span>\r\n                                        </div>\r\n                                        <div class=\"col-sm-12 col-md-4 text-wrap\">\r\n                                            Total Venta: <span class=\"fw-bold\"> {{ precioB | divisa }} </span>\r\n                                        </div>\r\n\r\n                                    </div>\r\n\r\n                                </div>\r\n\r\n                            </div>\r\n                            <div class=\"table-responsive \">\r\n                                <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                                    <thead class=\"border-bottom \">\r\n                                        <tr>\r\n                                            <th></th>\r\n                                            <th class=\"text-muted \" scope=\"col \">#</th>\r\n                                            <th class=\"text-muted \" scope=\"col \"></th>\r\n                                            <th class=\"text-muted \" scope=\"col \">Codigo</th>\r\n                                            <th class=\"text-muted \" scope=\"col \" colspan=\"2\">Nombre</th>\r\n                                            <th class=\"text-muted \" scope=\"col \">Departamento</th>\r\n                                            <th class=\"text-muted \" scope=\"col \">stock</th>\r\n                                            <th class=\"text-muted \" scope=\"col \">Tipo</th>\r\n                                            <th class=\"text-muted \" scope=\"col \">Costo</th>\r\n                                            <th class=\"text-muted \" scope=\"col \">Ganancia</th>\r\n                                            <th class=\"text-muted \" scope=\"col \">Precio</th>\r\n                                            <th class=\"text-muted \" scope=\"col \">Precio Mayor</th>\r\n                                            <th class=\"text-muted w100 \" scope=\"col \">Acciones</th>\r\n\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        <tr *ngIf=\"!sinResultados\" class=\"text-center \">\r\n                                            <th colspan=\"14\" class=\"py-4\">\r\n                                                <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                                            </th>\r\n                                        </tr>\r\n\r\n                                        <ng-container *ngFor=\"let producto of productos; let i=index \">\r\n\r\n                                            <tr class=\"trHover\" [ngClass]=\" { 'table-danger': producto.vencido}\" (mouseover)=\"btnAddInv= true\" (mouseout)=\"btnAddInv= false\">\r\n\r\n                                                <!-- BTN ADD -->\r\n                                                <td>\r\n                                                    <button [disabled]=\"user.role !== 'ADMIN'\" type=\"button\" class=\"btn btn-link text-success fw-bold fs-5 p-0\" data-bs-toggle=\"modal\" data-bs-target=\"#ajustarInventario\" (click)=\"product = producto\">\r\n                                                        <i class=\"bi-plus\"></i>\r\n                                                    </button>\r\n                                                </td>\r\n                                                <!-- BTN ADD -->\r\n\r\n                                                <th class=\"align-items-center\" *ngIf=\" desde===0 \" scope=\"row \">{{ i + 1}}</th>\r\n                                                <th class=\"align-items-center\" *ngIf=\"desde> 0\" scope=\"row\">{{ (i + 1) + desde }}</th>\r\n                                                <td>\r\n                                                    <img [src]=\"producto.img | imagen:'products'\" class=\"avatar avatar-img\" alt=\"\">\r\n                                                </td>\r\n                                                <td><small>{{ producto.code }}</small></td>\r\n\r\n                                                <td colspan=\"2\">\r\n                                                    {{ producto.name }}\r\n                                                    <span *ngIf=\"producto.status && producto.low && !producto.out\" class=\"badge rounded-pill bg-warning text-dark\">Bajo</span>\r\n                                                    <span *ngIf=\"producto.status && producto.out\" class=\"badge rounded-pill bg-danger\">Agotado</span>\r\n                                                    <span *ngIf=\"producto.status && producto.vencido\" class=\"badge rounded-pill bg-danger\">Vencido</span>\r\n                                                    <span *ngIf=\"!producto.status\" class=\"badge rounded-pill bg-danger\">Eliminado</span>\r\n                                                </td>\r\n\r\n                                                <td>\r\n                                                    <span *ngIf=\"producto.department\">{{ producto.department.name }}</span>\r\n                                                    <span *ngIf=\"!producto.department\"> Sin Departamento </span>\r\n                                                </td>\r\n                                                <td class=\"text-center\">\r\n                                                    <span *ngIf=\"producto.type === 'Granel'\"> {{  producto.inventario | number:'1.3'}} </span>\r\n                                                    <span *ngIf=\"producto.type !== 'Granel'\"> {{  producto.inventario | number }} </span>\r\n                                                </td>\r\n                                                <td>{{ producto.type }}</td>\r\n                                                <td>{{ producto.cost | divisa }}</td>\r\n                                                <td>{{ producto.gain }}%</td>\r\n                                                <td>{{ producto.price | divisa }}</td>\r\n                                                <td>{{ producto.wholesale | divisa }}</td>\r\n                                                <td class=\"text-center\">\r\n                                                    <a [routerLink]=\"['/dashboard/producto', producto.pid]\" class=\"btn btn-link p-1 text-primary\"><i class=\"bi bi-box-arrow-up-right\"></i></a>\r\n                                                    <button type=\"button\" (click)=\"borrarProducto(producto.pid)\" class=\"btn btn-link p-1 text-danger\"><i class=\"bi-trash\" style=\"font-size: 0.9rem\"></i></button>\r\n                                                </td>\r\n                                            </tr>\r\n\r\n                                        </ng-container>\r\n                                    </tbody>\r\n\r\n                                </table>\r\n\r\n                            </div>\r\n\r\n                            <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                            <div class=\"row\">\r\n                                <div class=\"col col-md-4\">\r\n                                    <small class=\"text-muted\">Total de items: ({{totalProductos}})</small>\r\n                                    <small *ngIf=\"resultado !== 0\" class=\"text-muted\"> - (Resultados: {{ resultado }})</small>\r\n                                    <small *ngIf=\"desde !== 0\" class=\"text-muted\"> - (Desde el: {{ desde + 1}} Hasta el: {{ desde + productos.length }})</small>\r\n                                </div>\r\n\r\n                                <div *ngIf=\"search.value.length === 0\" class=\"col d-flex justify-content-end\">\r\n                                    <button type=\"button\" (click)=\"cambiarPagina(-10)\" class=\"{{btnAtras}} btn btn-sm btn-dark btnW waves-effect waves-light px-3\">Anterior</button>\r\n                                    <button type=\"button\" (click)=\"cambiarPagina(10)\" class=\"{{btnAdelante}} btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2\">Siguiente</button>\r\n                                </div>\r\n                            </div>\r\n                            <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n                        </div>\r\n                    </div>\r\n                    <!-- TABLE PRODUCTS -->\r\n\r\n                </div>\r\n                <!-- PRODUCTOS LISTA COMPLETA -->\r\n\r\n            </div>\r\n\r\n\r\n\r\n        </div>\r\n    </div>\r\n    <!-- TAB 1 -->\r\n\r\n    <!-- =========================================================================\r\n    MODAL AJUSTAR INVENTARIO\r\n========================================================================= -->\r\n\r\n    <div class=\"modal fade\" id=\"ajustarInventario\" tabindex=\"-1\" aria-labelledby=\"ajustarInventarioModal\" aria-hidden=\"true\">\r\n        <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title text-break\" id=\"ajustarInventarioModal\">\r\n\r\n                        <small class=\"badge rounded-pill bg-danger text-white h6\" *ngIf=\"product?.out\">Agotado</small>\r\n                        <span class=\"badge rounded-pill bg-warning text-white\" *ngIf=\"product?.low\">Bajo</span>\r\n\r\n                        <p class=\"mb-0\">\r\n                            {{ product?.name }}\r\n                        </p>\r\n                    </h5>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                </div>\r\n\r\n                <div class=\"modal-body\">\r\n\r\n                    <div class=\"\">\r\n                        <p class=\"text-center mb-0\">Stock</p>\r\n                        <h4 class=\"text-center display-1\"> {{ product?.inventario }} </h4>\r\n                    </div>\r\n\r\n                    <div class=\"d-flex justify-content-center flex-wrap\">\r\n\r\n                        <div class=\"col-auto\">\r\n                            <label for=\"cantidad\" class=\"visually-hidden\">Cantidad</label>\r\n                            <input type=\"number\" class=\"form-control\" min=\"0\" id=\"cantidad\" placeholder=\"cantidad\" #cantidad>\r\n                        </div>\r\n\r\n                        <div class=\"col-auto\">\r\n                            <button type=\"submit\" class=\"btn btn-primary mb-3\" (click)=\"ajustar('entrada', cantidad.value)\"> Agregar </button>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- =========================================================================\r\n    MODAL AJUSTAR INVENTARIO\r\n========================================================================= -->\r\n\r\n\r\n</div>\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    IVA A TODOS LOS PRODUCTOS\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"ivaAll\" tabindex=\"-1\" aria-labelledby=\"ivaAllModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"ivaAllModal\"> Actualizar</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form id=\"newClientForm\" autocomplete=\"off\" [formGroup]=\"ivaForm\" (ngSubmit)=\"ivaAll()\">\r\n\r\n                    <!-- =======================================================================\r\n                        DATOS PERSONALES \r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Actualizar impuesto a todos los productos</h5>\r\n\r\n                    <div class=\"form-floating\">\r\n                        <select formControlName=\"taxid\" id=\"taxIva\" type=\"text\" class=\"form-control text-capitalize\">\r\n                            <option value=\"\" selected>Seleccionar tipo de impuesto</option>\r\n                            <option [value]=\"impuesto.taxid\" *ngFor=\"let impuesto of impuestos\"> {{ impuesto.name }} - {{ impuesto.valor }}% </option>\r\n                        </select>\r\n                        <label for=\"taxIva\">Tipo de impuesto</label>\r\n                    </div>\r\n\r\n                    <div class=\"form-check mt-2\">\r\n                        <input formControlName=\"tax\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"tax\">\r\n                        <label class=\"form-check-label\" for=\"tax\">\r\n                            Impuesto\r\n                        </label>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Actualizar</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    IVA A TODOS LOS PRODUCTOS \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    ACTUALIZAR TODOS LOS PRODUCTOS DESDE EL EXCEL\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"updateExcel\" tabindex=\"-1\" aria-labelledby=\"updateExcelModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"updateExcelModal\"> Actualizar</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n                <h4 class=\"text-muted\">Importar Productos <span> <a class=\"btn btn-sm text-primary\" type=\"button\" (click)=\"plantilla()\" >Descargar Plantilla</a> </span></h4>\r\n\r\n                <div class=\"row\">\r\n                    <div class=\"col-10\">\r\n                        <input type=\"file\" class=\"form-control form-control-sm\" (change)=\"selectFileExcel($event)\" placeholder=\"Importar\" accept=\".xlsx\">\r\n                    </div>\r\n                    <div class=\"col-auto\">\r\n                        <button [disabled]=\"sendLote\" type=\"button\" class=\"btn btn-sm btnW btn-primary waves-effect waves-light mt-2\" (click)=\"UploadExcel()\">\r\n                            <span *ngIf=\"!sendLote\">\r\n                                Importar\r\n                            </span>\r\n                            <span *ngIf=\"sendLote\">\r\n                                Enviando...                                \r\n                            </span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    ACTUALIZAR TODOS LOS PRODUCTOS DESDE EL EXCEL \r\n========================================================================= -->","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\n\r\n// MODEL\r\nimport { Proveedor } from '../../models/proveedor.model';\r\n\r\n// SERVICES\r\nimport { SearchService } from '../../services/search.service';\r\nimport { InvoiceService } from '../../services/invoice.service';\r\nimport { ProveedoresService } from '../../services/proveedores.service';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-proveedores',\r\n  templateUrl: './proveedores.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class ProveedoresComponent implements OnInit {\r\n\r\n  constructor(  private proveedoresService: ProveedoresService,\r\n                private searchService: SearchService,\r\n                private fb:FormBuilder,\r\n                private invoicesService: InvoiceService) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // CARGAR PROVEEDORES\r\n    this.cargarProveedores();\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR PROVEEDORES\r\n  ==================================================================== */\r\n  public cargando: boolean = true;\r\n  public totalProveedores: number = 0;\r\n  public proveedores: Proveedor[] = [];\r\n  public proveedoresTemp: Proveedor[] = [];\r\n  public bodegas: Proveedor[] = [];\r\n  public query: any = {\r\n    desde: 0,\r\n    hasta: 50\r\n  }\r\n\r\n  cargarProveedores(){\r\n    this.cargando = true;\r\n    this.proveedoresService.loadProveedores(this.query)\r\n    .subscribe(({total, proveedores}) => {        \r\n        \r\n      this.proveedores = proveedores;\r\n      this.proveedoresTemp = proveedores;\r\n      this.totalProveedores = total;\r\n      this.cargando = false;\r\n          \r\n      });\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CAMBIAR PAGINA\r\n  ==================================================================== */\r\n  @ViewChild('mostrar') mostrar: ElementRef;\r\n  cambiarPagina (valor: number){\r\n    \r\n    this.query.desde += valor;\r\n\r\n    if (this.query.desde < 0) {\r\n      this.query.desde = 0;\r\n    }\r\n    \r\n    this.cargarProveedores();\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   CHANGE LIMITE\r\n  ==================================================================== */\r\n  limiteChange( cantidad: any ){  \r\n\r\n    this.query.hasta = Number(cantidad);    \r\n    this.cargarProveedores();\r\n\r\n  }\r\n\r\n  /** ======================================================================\r\n   * SEARCH\r\n  ====================================================================== */\r\n  public resultados: number = 0;\r\n  buscar( termino:string ){\r\n\r\n    let query = `desde=${this.query.desde}&hasta=${this.query.hasta}`;\r\n\r\n    if (termino.length === 0) {\r\n      this.proveedores = this.proveedoresTemp;\r\n      this.resultados = 0;\r\n      return;\r\n    }\r\n    \r\n    this.searchService.search('proveedores', termino, false, query)\r\n        .subscribe( ({resultados}) => {\r\n\r\n          this.proveedores = resultados;\r\n\r\n        });   \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREAR PROVEEDOR\r\n  ==================================================================== */\r\n  // FORMULARIO\r\n  public formSubmitted = false;\r\n  public newProveedorForm = this.fb.group({\r\n    name: [ '' , [Validators.required, Validators.minLength(3)]],\r\n    cedula: ['', [Validators.required, Validators.minLength(3)]],\r\n    phone: [''],\r\n    email: [''],\r\n    address: [''],\r\n    city: [''],\r\n    department: [''],\r\n    zip: ['']\r\n  });\r\n\r\n  crearProveedor(){\r\n\r\n    this.formSubmitted = true;\r\n\r\n    if (this.newProveedorForm.invalid) {\r\n      return;\r\n    }    \r\n\r\n    this.proveedoresService.createProveedor(this.newProveedorForm.value)\r\n        .subscribe((resp: any) => {\r\n\r\n          Swal.fire('Estupendo', 'Se ha creado el cliente exitosamente!', 'success');\r\n          this.cargarProveedores();\r\n\r\n          this.formSubmitted = false;\r\n          this.newProveedorForm.reset();          \r\n          \r\n        }, (err) =>{\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n        });\r\n  }\r\n\r\n  // VALIDAR CAMPOS\r\n  campoValido(campo: string): boolean{\r\n\r\n    if ( this.newProveedorForm.get(campo).invalid &&  this.formSubmitted) {      \r\n      return true;      \r\n    } else{\r\n            \r\n      return false;\r\n    }\r\n  \r\n  }\r\n\r\n  /** ================================================================\r\n   *   SELECT PROVEEDOR\r\n  ==================================================================== */\r\n  public proveedorS: string;\r\n  selectedProovedor( proveedor: Proveedor ){\r\n\r\n    this.proveedorS = proveedor.provid;\r\n\r\n    this.updateForm.setValue({\r\n      name: proveedor.name,\r\n      cedula: proveedor.cedula,\r\n      phone: proveedor.phone,\r\n      email: proveedor.email,\r\n      address: proveedor.address,\r\n      city: proveedor.city,\r\n      department: proveedor.department,\r\n      zip: proveedor.zip,\r\n    })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   UPDATE PROVEEDOR\r\n  ==================================================================== */\r\n  public updateFormSubmitted: boolean = true;\r\n  public updateForm = this.fb.group({\r\n    name: ['', Validators.required],\r\n    cedula: ['', Validators.required],\r\n    phone: '',\r\n    email: '',\r\n    address: '',\r\n    city: '',\r\n    department: '',\r\n    zip: '',\r\n  })\r\n\r\n  update(){\r\n\r\n    this.updateFormSubmitted = true;\r\n\r\n    if (this.updateForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    this.proveedoresService.updateProveedor(this.updateForm.value, this.proveedorS )\r\n        .subscribe( ({ proveedor }) => {          \r\n\r\n          this.proveedores.map( (prov) => {\r\n            if (prov.provid === proveedor.provid) {\r\n              prov.name = proveedor.name;\r\n              prov.cedula = proveedor.cedula;\r\n              prov.phone = proveedor.phone;\r\n              prov.email = proveedor.email;\r\n              prov.address = proveedor.address;\r\n              prov.city = proveedor.city;\r\n              prov.department = proveedor.department;\r\n              prov.zip = proveedor.zip;\r\n            }\r\n          });\r\n\r\n          Swal.fire('Estupendo', 'Se ha actualizado el proveedor exitosamente', 'success');\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   VALIDATOR UPDATE\r\n  ==================================================================== */\r\n  validateUp(campo: string): boolean{\r\n\r\n    if (this.updateForm.get(campo).invalid && this.updateFormSubmitted ) {\r\n      return true;      \r\n    }else{\r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n\r\n  // FIN DE LA CLASE\r\n\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-dark py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">PROVEEDORES</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link active\" id=\"home-tab\" data-bs-toggle=\"tab\" href=\"#home\" role=\"tab\" aria-controls=\"home\" aria-selected=\"true\"><i class=\"bi-people\" style=\"font-size: 1rem\"></i> Administración de proveedores </a>\r\n        </li>\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n<div class=\"tab-content mt-4 bg-light2\" id=\"myTabContent\">\r\n\r\n    <!-- TAB 1 -->\r\n    <div class=\"tab-pane fade show active\" id=\"home\" role=\"tabpanel\" aria-labelledby=\"home-tab\">\r\n        <div class=\"px-3\">\r\n            <!-- TITLE - SUBTITLE -->\r\n            <div>\r\n                <h5 class=\"text-dark\">ADMINISTRACIÓN DE PROVEEDORES</h5>\r\n                <p>Administra todos los proveedores de tu negocio de forma centralizada.</p>\r\n            </div>\r\n            <!-- TITLE - SUBTITLE -->\r\n\r\n            <!-- TABLE CLIENTS -->\r\n            <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n                <!-- CARGANDO -->\r\n                <div *ngIf=\"cargando\">\r\n                    <div class=\"text-center p-4\">\r\n                        <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                            <span class=\"visually-hidden\">Loading...</span>\r\n                        </div>\r\n                    </div>\r\n                    <small class=\"text-muted\">cargando...</small>\r\n                </div>\r\n                <!-- CARGANDO -->\r\n\r\n                <div *ngIf=\"!cargando\">\r\n\r\n                    <div>\r\n                        <div class=\"form-floating mb-2\">\r\n                            <span class=\"position-absolute top-50 start-90 translate-middle\"><i class=\" bi-search \" style=\"font-size: 1rem \"></i></span>\r\n                            <input type=\"text\" class=\"form-control\" id=\"floatingInput\" placeholder=\"Buscar Cliente\" (keyup)=\"buscar(search.value)\" #search>\r\n                            <label for=\"floatingInput \">Buscar Proveedor</label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- BTN CREAR PROVEEDOR -->\r\n                    <div class=\"d-flex justify-content-end\">\r\n                        <button type=\"button\" class=\"btn btn-sm btn-primary btnW waves-effect waves-ligth\" data-bs-toggle=\"modal\" data-bs-target=\"#nuevoProveedor\">Crear Proveedor</button>\r\n                    </div>\r\n                    <!-- BTN CREAR PROVEEDOR -->\r\n\r\n                    <div class=\"my-2\">\r\n\r\n                        <label for=\"mostrar\" class=\"me-2\">Mostrar: </label>\r\n                        <select name=\"\" id=\"\" [value]=\"query.hasta\" #mostrar (change)=\"limiteChange(mostrar.value)\">\r\n                            <option value=\"1\">1</option>\r\n                            <option value=\"2\">2</option>\r\n                            <option value=\"10\">10</option>\r\n                            <option value=\"25\">25</option>\r\n                            <option value=\"50\">50</option>\r\n                            <option value=\"100\">100</option>\r\n                            <option value=\"250\">250</option>\r\n                            <option value=\"500\">500</option>\r\n                        </select>\r\n\r\n                    </div>\r\n\r\n\r\n                    <div class=\"table-responsive \">\r\n                        <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                            <thead class=\"border-bottom \">\r\n                                <tr>\r\n                                    <th class=\"text-muted \" scope=\"col \" colspan=\"2 \">Nombres</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Cedula</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Email</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Telefono</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Dirección</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Departamento</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Codigo Postal</th>\r\n                                    <th class=\"text-muted w100 \" scope=\"col \">Acciones</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr *ngIf=\"proveedores.length === 0\" class=\"text-center \">\r\n                                    <th colspan=\"10\" class=\"py-4\">\r\n                                        <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                                    </th>\r\n                                </tr>\r\n                                <tr class=\"trHover\" *ngFor=\"let proveedor of proveedores; let i=index \">\r\n                                    <td colspan=\"2\">{{ proveedor.name }}</td>\r\n                                    <td>{{ proveedor.cedula }}</td>\r\n                                    <td>{{ proveedor.email }}</td>\r\n                                    <td>{{ proveedor.phone }}</td>\r\n                                    <td>{{ proveedor.address }}</td>\r\n                                    <td>{{ proveedor.department }} <span *ngIf=\"proveedor.city || proveedor.department\">-</span> {{ proveedor.city }}</td>\r\n                                    <td>{{ proveedor.zip }}</td>\r\n                                    <td class=\"text-center\">\r\n\r\n                                        <button type=\"button\" (click)=\"selectedProovedor(proveedor)\" class=\"btn btn-link p-1 text-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#actualizarProveedor\"><i class=\"bi-pen\" style=\"font-size: 0.9rem\"></i></button>\r\n\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n\r\n                        </table>\r\n\r\n                    </div>\r\n\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                    <div class=\"row\">\r\n                        <div class=\"col col-md-4\">\r\n                            <small class=\"text-muted\">Total de proveedores: ({{totalProveedores}})</small>\r\n                            <small *ngIf=\"desde !== 0\" class=\"text-muted\"> - (Desde el: {{ query.desde + 1}} Hasta el: {{ query.desde + proveedores.length }})</small>\r\n                        </div>\r\n\r\n                        <div *ngIf=\"search.value.length === 0\" class=\"col d-flex justify-content-end\">\r\n                            <button type=\"button\" [disabled]=\"query.desde === 0\" (click)=\"cambiarPagina(query.hasta * -1)\" class=\"btn btn-sm btn-dark btnW waves-effect waves-light px-3\">Anterior</button>\r\n                            <button type=\"button\" [disabled]=\"( query.desde + query.hasta ) >= totalProveedores\" (click)=\"cambiarPagina(query.hasta)\" class=\" btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2\">Siguiente</button>\r\n                        </div>\r\n                    </div>\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n                </div>\r\n            </div>\r\n            <!-- TABLE CLIENTS -->\r\n\r\n\r\n\r\n        </div>\r\n    </div>\r\n    <!-- TAB 1 -->\r\n\r\n</div>\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    NUEVO PROVEEDOR\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"nuevoProveedor\" tabindex=\"-1\" aria-labelledby=\"nuevoProveedorModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"nuevoProveedorModal\"><i class=\"bi-person-plus\" style=\"font-size: 2rem\"></i> Nuevo Proveedor</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form id=\"newProveedorForm\" autocomplete=\"off\" [formGroup]=\"newProveedorForm\" (ngSubmit)=\"crearProveedor()\">\r\n\r\n                    <!-- =======================================================================\r\n                        DATOS PROVEEDOR \r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Datos Del Proveedor</h5>\r\n\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-6 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombres\">\r\n                                <label for=\"floatingInput\">Nombres</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div class=\"col-md-6 px-md-1 \">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"cedula\" type=\"text\" class=\"form-control\" placeholder=\"Cedula de ciudadania\">\r\n                                <label for=\"floatingInput\">Cedula de ciudadania</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <div class=\"col-md-6 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"email\" type=\"email\" class=\"form-control\" placeholder=\"Email\">\r\n                                <label for=\"floatingInput\">Email</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div class=\"col-md-6 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"phone\" type=\"text\" class=\"form-control\" placeholder=\"Telefono\">\r\n                                <label for=\"floatingInput\">Telefono</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- =======================================================================\r\n                        DIRECCION\r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">DIRECCIÓN</h5>\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"address\" type=\"text\" class=\"form-control\" placeholder=\"Dirección\">\r\n                                <label for=\"floatingInput\">Dirección</label>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <div class=\"col-md-5 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"department\" type=\"text\" class=\"form-control\" placeholder=\"Departamento\">\r\n                                <label for=\"floatingInput\">Departamento</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-md-5 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"city\" type=\"text\" class=\"form-control\" placeholder=\"Ciudad\">\r\n                                <label for=\"floatingInput\">Ciudad</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-md-2 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"zip\" type=\"text\" class=\"form-control\" placeholder=\"ZIP\">\r\n                                <label for=\"floatingInput\">ZIP</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"text-danger mb-2\">\r\n                            <p *ngIf=\"campoValido('name')\" class=\"mb-1 animated fadeIn\">- El nombre es obligatorio</p>\r\n                            <p *ngIf=\"campoValido('cedula')\" class=\"mb-1 animated fadeIn\">-El NIT o La cedula de ciudadania es obligatoria</p>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    ACTUALIZR PROVEEDOR\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"actualizarProveedor\" tabindex=\"-1\" aria-labelledby=\"actualizarProveedorModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"actualizarProveedorModal\"><i class=\"bi-person-plus\" style=\"font-size: 2rem\"></i> Actualizar Proveedor</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form id=\"newProveedorForm\" autocomplete=\"off\" [formGroup]=\"updateForm\" (ngSubmit)=\"update()\">\r\n\r\n                    <!-- =======================================================================\r\n                        DATOS PROVEEDOR \r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">Datos Del Proveedor</h5>\r\n\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-md-6 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombres\">\r\n                                <label for=\"floatingInput\">Nombres</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div class=\"col-md-6 px-md-1 \">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"cedula\" type=\"text\" class=\"form-control\" placeholder=\"Cedula de ciudadania\">\r\n                                <label for=\"floatingInput\">Cedula de ciudadania</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <div class=\"col-md-6 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"email\" type=\"email\" class=\"form-control\" placeholder=\"Email\">\r\n                                <label for=\"floatingInput\">Email</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div class=\"col-md-6 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"phone\" type=\"text\" class=\"form-control\" placeholder=\"Telefono\">\r\n                                <label for=\"floatingInput\">Telefono</label>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- =======================================================================\r\n                        DIRECCION\r\n                    =========================================================================== -->\r\n                    <h5 class=\"text-muted\">DIRECCIÓN</h5>\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <div class=\"col-md-12 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"address\" type=\"text\" class=\"form-control\" placeholder=\"Dirección\">\r\n                                <label for=\"floatingInput\">Dirección</label>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\">\r\n\r\n                        <div class=\"col-md-5 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"department\" type=\"text\" class=\"form-control\" placeholder=\"Departamento\">\r\n                                <label for=\"floatingInput\">Departamento</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-md-5 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"city\" type=\"text\" class=\"form-control\" placeholder=\"Ciudad\">\r\n                                <label for=\"floatingInput\">Ciudad</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"col-md-2 px-md-1\">\r\n\r\n                            <div class=\"form-floating\">\r\n                                <input formControlName=\"zip\" type=\"text\" class=\"form-control\" placeholder=\"ZIP\">\r\n                                <label for=\"floatingInput\">ZIP</label>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"text-danger mb-2\">\r\n                            <p *ngIf=\"campoValido('name')\" class=\"mb-1 animated fadeIn\">- El nombre es obligatorio</p>\r\n                            <p *ngIf=\"campoValido('cedula')\" class=\"mb-1 animated fadeIn\">-El NIT o La CC es obligatoria</p>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport { LoadInvoice } from 'src/app/interfaces/invoice.interface';\r\nimport { Client } from 'src/app/models/client.model';\r\nimport { Invoice } from 'src/app/models/invoice.model';\r\nimport { Vehiculo } from 'src/app/models/vehiculos.model';\r\nimport { InvoiceService } from 'src/app/services/invoice.service';\r\nimport { SearchService } from 'src/app/services/search.service';\r\nimport { VehiculosService } from 'src/app/services/vehiculos.service';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-vehiculos',\r\n  templateUrl: './vehiculos.component.html',\r\n  styleUrls: ['./vehiculos.component.css']\r\n})\r\nexport class VehiculosComponent implements OnInit {\r\n\r\n  constructor(  private vehiculosService: VehiculosService,\r\n                private searchService: SearchService,\r\n                private fb: FormBuilder,\r\n                private invoiceService: InvoiceService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.cargarVehiculos();\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR VEHICULOS\r\n  ==================================================================== */\r\n  public cargando: boolean = true;\r\n  public totalVehiculos: number = 0;\r\n  public vehiculos: Vehiculo[] = [];\r\n  public vehiculosTemp: Vehiculo[] = [];\r\n  public query: any = {\r\n    desde: 0,\r\n    hasta: 50\r\n  }\r\n\r\n  cargarVehiculos(){\r\n    this.cargando = true;\r\n    this.vehiculosService.loadVehiculos(this.query)\r\n    .subscribe(({total, vehiculos}) => {        \r\n        \r\n      this.vehiculos = vehiculos;\r\n      this.vehiculosTemp = vehiculos;\r\n      this.totalVehiculos = total;\r\n      this.cargando = false;\r\n          \r\n      });\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CAMBIAR PAGINA\r\n  ==================================================================== */\r\n  @ViewChild('mostrar') mostrar: ElementRef;\r\n  cambiarPagina (valor: number){\r\n    \r\n    this.query.desde += valor;\r\n\r\n    if (this.query.desde < 0) {\r\n      this.query.desde = 0;\r\n    }\r\n    \r\n    this.cargarVehiculos();\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   CHANGE LIMITE\r\n  ==================================================================== */\r\n  limiteChange( cantidad: any ){  \r\n\r\n    this.query.hasta = Number(cantidad);    \r\n    this.cargarVehiculos();\r\n\r\n  }\r\n\r\n  /** ======================================================================\r\n   * SEARCH\r\n  ====================================================================== */\r\n  public resultados: number = 0;\r\n  buscar( termino:string ){\r\n\r\n    let query = `desde=${this.query.desde}&hasta=${this.query.hasta}`;\r\n\r\n    if (termino.length === 0) {\r\n      this.vehiculos = this.vehiculosTemp;\r\n      this.resultados = 0;\r\n      return;\r\n    }\r\n    \r\n    this.searchService.search('vehiculo', termino, false, query)\r\n        .subscribe( ({resultados}) => {\r\n\r\n          this.vehiculos = resultados;\r\n\r\n        });   \r\n\r\n  }\r\n\r\n\r\n\r\n  /** ======================================================================\r\n   * BUSCAR CLIENTE\r\n  ====================================================================== */\r\n  public listClients: Client[] = [];\r\n  public clientS!: Client;\r\n  buscarClient(termino: string){\r\n\r\n    this.listClients = [];\r\n    \r\n    if (termino.length < 1) {\r\n      this.listClients = [];\r\n      return;      \r\n    }\r\n\r\n    this.searchService.search('clients', termino)\r\n    .subscribe( ({resultados}) => {      \r\n\r\n        this.listClients = resultados;          \r\n\r\n      }, (err) => {\r\n        console.log(err);        \r\n      });\r\n\r\n\r\n  }\r\n\r\n  /** ======================================================================\r\n   * CREATE VEHICULO\r\n  ====================================================================== */\r\n  public newFormSubmitted: boolean = false;\r\n  public newForm = this.fb.group({\r\n    client: '',\r\n    placa: ['', [Validators.required]],\r\n    brand: ['', [Validators.required]],\r\n    model: ['', [Validators.required]],\r\n    year: '',\r\n    description: '',\r\n  })\r\n\r\n  create(){\r\n\r\n    this.newFormSubmitted = true;\r\n    if (this.newForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    if (!this.clientS) {\r\n      Swal.fire('Atención', 'No has seleccionado ningun cliente', 'warning');\r\n      return;\r\n    }\r\n\r\n    this.newForm.value.client = this.clientS.cid;\r\n    console.log(this.newForm.value);    \r\n    \r\n    this.vehiculosService.createVehiculo(this.newForm.value)\r\n        .subscribe( ({vehiculo}) => {\r\n\r\n          vehiculo.vid = vehiculo._id;\r\n\r\n          this.vehiculos.push(vehiculo);\r\n          Swal.fire('Estupendo', 'El vehiculo se ha agregado correctamente', 'success');\r\n          this.newForm.reset();\r\n          delete this.clientS;\r\n\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');    \r\n        })\r\n    \r\n\r\n  }\r\n\r\n  /** ======================================================================\r\n   * VALIDATE INPUTS VEHICULO\r\n  ====================================================================== */\r\n  campoValido(campo: string): boolean{\r\n\r\n    if (this.newFormSubmitted && this.newForm.get(campo).invalid) {\r\n      return true;      \r\n    }else{\r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SELECT VEHICULO\r\n  ==================================================================== */\r\n  public vehiculoS: string;\r\n  selectedProovedor( vehiculo: Vehiculo ){\r\n\r\n    this.vehiculoS = vehiculo.vid;\r\n\r\n    this.updateForm.setValue({\r\n      placa: vehiculo.placa,\r\n      brand: vehiculo.brand,\r\n      model: vehiculo.model,\r\n      year: vehiculo.year,\r\n      description: vehiculo.description\r\n    })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   UPDATE PROVEEDOR\r\n  ==================================================================== */\r\n  public updateFormSubmitted: boolean = true;\r\n  public updateForm = this.fb.group({\r\n    placa: ['', Validators.required],\r\n    brand: ['', Validators.required],\r\n    model: ['', Validators.required],\r\n    year: '',\r\n    description: ''\r\n  })\r\n\r\n  update(){\r\n\r\n    this.updateFormSubmitted = true;\r\n\r\n    if (this.updateForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    this.vehiculosService.updateVehiculo(this.updateForm.value, this.vehiculoS )\r\n        .subscribe( ({ vehiculo }) => {          \r\n\r\n          this.vehiculos.map( (vei) => {\r\n            if (vei.vid === vehiculo.vid) {\r\n              vei.placa = vehiculo.placa;\r\n              vei.brand = vehiculo.brand;\r\n              vei.model = vehiculo.model;\r\n              vei.year = vehiculo.year;\r\n              vei.description = vehiculo.description;\r\n            }\r\n          });\r\n\r\n          Swal.fire('Estupendo', 'Se ha actualizado el vehiculo exitosamente', 'success');\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   VALIDATOR UPDATE\r\n  ==================================================================== */\r\n  validateUp(campo: string): boolean{\r\n\r\n    if (this.updateForm.get(campo).invalid && this.updateFormSubmitted ) {\r\n      return true;      \r\n    }else{\r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n  \r\n\r\n  /** ======================================================================\r\n   * CARGAR FACTURAS DEL VEHICULO VEHICULO\r\n  ====================================================================== */\r\n  public facturas: LoadInvoice[] = [];\r\n  loadFacturas(vehiculo: Vehiculo){\r\n\r\n    this.facturas = [];\r\n\r\n    this.invoiceService.postQueryInvoice({placa: vehiculo.placa, desde: 0, hasta: 50})\r\n        .subscribe( ({invoices}) => {\r\n          this.facturas = invoices;\r\n        })\r\n  }\r\n\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-dark py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Vehiculos</h5>\r\n    </div>\r\n    <ul class=\"nav nav-tabs px-3\" id=\"myTab\" role=\"tablist\">\r\n        <li class=\"nav-item\" role=\"presentation\">\r\n            <a class=\"nav-link active\" id=\"home-tab\" data-bs-toggle=\"tab\" href=\"#home\" role=\"tab\" aria-controls=\"home\" aria-selected=\"true\"><i class=\"bi-people\" style=\"font-size: 1rem\"></i> Administración de vehiculos </a>\r\n        </li>\r\n    </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n<div class=\"tab-content mt-4 bg-light2\" id=\"myTabContent\">\r\n\r\n    <!-- TAB 1 -->\r\n    <div class=\"tab-pane fade show active\" id=\"home\" role=\"tabpanel\" aria-labelledby=\"home-tab\">\r\n        <div class=\"px-3\">\r\n            <!-- TITLE - SUBTITLE -->\r\n            <div>\r\n                <h5 class=\"text-dark\">ADMINISTRACIÓN DE VEHICULOS</h5>\r\n            </div>\r\n            <!-- TITLE - SUBTITLE -->\r\n\r\n            <!-- TABLE CLIENTS -->\r\n            <div class=\"shadow-lg p-3 mb-5 rounded bg-white\">\r\n\r\n                <!-- CARGANDO -->\r\n                <div *ngIf=\"cargando\">\r\n                    <div class=\"text-center p-4\">\r\n                        <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                            <span class=\"visually-hidden\">Loading...</span>\r\n                        </div>\r\n                    </div>\r\n                    <small class=\"text-muted\">cargando...</small>\r\n                </div>\r\n                <!-- CARGANDO -->\r\n\r\n                <div *ngIf=\"!cargando\">\r\n\r\n                    <div>\r\n                        <div class=\"form-floating mb-2\">\r\n                            <span class=\"position-absolute top-50 start-90 translate-middle\"><i class=\" bi-search \" style=\"font-size: 1rem \"></i></span>\r\n                            <input type=\"text\" class=\"form-control\" id=\"floatingInput\" placeholder=\"Buscar Cliente\" (keyup)=\"buscar(search.value)\" #search>\r\n                            <label for=\"floatingInput \">Buscar Vehiculo</label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- BTN CREAR VEHICULO -->\r\n                    <div class=\"d-flex justify-content-end\">\r\n                        <button type=\"button\" class=\"btn btn-sm btn-primary btnW waves-effect waves-ligth\" data-bs-toggle=\"modal\" data-bs-target=\"#nuevoVehiculo\">Crear Vehiculo</button>\r\n                    </div>\r\n                    <!-- BTN CREAR VEHICULO -->\r\n\r\n                    <div class=\"my-2\">\r\n\r\n                        <label for=\"mostrar\" class=\"me-2\">Mostrar: </label>\r\n                        <select name=\"\" id=\"\" [value]=\"query.hasta\" #mostrar (change)=\"limiteChange(mostrar.value)\">\r\n                            <option value=\"1\">1</option>\r\n                            <option value=\"2\">2</option>\r\n                            <option value=\"10\">10</option>\r\n                            <option value=\"25\">25</option>\r\n                            <option value=\"50\">50</option>\r\n                            <option value=\"100\">100</option>\r\n                            <option value=\"250\">250</option>\r\n                            <option value=\"500\">500</option>\r\n                        </select>\r\n\r\n                    </div>\r\n\r\n\r\n                    <div class=\"table-responsive \">\r\n                        <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                            <thead class=\"border-bottom \">\r\n                                <tr>\r\n                                    <th class=\"text-muted \" scope=\"col \">Placa</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Modelo</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Marca</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Año</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Cliente</th>\r\n                                    <th class=\"text-muted w100 \" scope=\"col \">Acciones</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr *ngIf=\"vehiculos.length === 0\" class=\"text-center \">\r\n                                    <th colspan=\"10\" class=\"py-4\">\r\n                                        <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                                    </th>\r\n                                </tr>\r\n                                <tr class=\"trHover\" *ngFor=\"let vehiculo of vehiculos; let i=index \">\r\n                                    <td>{{ vehiculo.placa }}</td>\r\n                                    <td>{{ vehiculo.model }}</td>\r\n                                    <td>{{ vehiculo.brand }}</td>\r\n                                    <td>{{ vehiculo.year }}</td>\r\n                                    <td>{{ vehiculo.client.name }} <span *ngIf=\"vehiculo.client.phone\">| {{ vehiculo.client.phone }} </span> </td>\r\n                                    <td class=\"text-center\">\r\n                                        <button type=\"button\" (click)=\"selectedProovedor(vehiculo)\" class=\"btn btn-link p-1 text-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#actualizarVehiculo\"><i class=\"bi-pen\" style=\"font-size: 0.9rem\"></i></button>\r\n                                        <button type=\"button\" (click)=\"loadFacturas(vehiculo)\" class=\"btn btn-link p-1 text-warning\" data-bs-toggle=\"modal\" data-bs-target=\"#facturas\"><i class=\"bi-calendar-event\" style=\"font-size: 0.9rem\"></i></button>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n\r\n                        </table>\r\n\r\n                    </div>\r\n\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n                    <div class=\"row\">\r\n                        <div class=\"col col-md-4\">\r\n                            <small class=\"text-muted\">Total de vehiculos: ({{totalVehiculos}})</small>\r\n                            <small *ngIf=\"desde !== 0\" class=\"text-muted\"> - (Desde el: {{ query.desde + 1}} Hasta el: {{ query.desde + vehiculos.length }})</small>\r\n                        </div>\r\n\r\n                        <div *ngIf=\"search.value.length === 0\" class=\"col d-flex justify-content-end\">\r\n                            <button type=\"button\" [disabled]=\"query.desde === 0\" (click)=\"cambiarPagina(query.hasta * -1)\" class=\"btn btn-sm btn-dark btnW waves-effect waves-light px-3\">Anterior</button>\r\n                            <button type=\"button\" [disabled]=\"( query.desde + query.hasta ) >= totalVehiculos\" (click)=\"cambiarPagina(query.hasta)\" class=\" btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2\">Siguiente</button>\r\n                        </div>\r\n                    </div>\r\n                    <!-- BTN SIGUIENTE Y ANTERIOR -->\r\n\r\n                </div>\r\n            </div>\r\n            <!-- TABLE CLIENTS -->\r\n\r\n\r\n\r\n        </div>\r\n    </div>\r\n    <!-- TAB 1 -->\r\n\r\n</div>\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    NUEVO VEHICULO\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"nuevoVehiculo\" tabindex=\"-1\" aria-labelledby=\"nuevoVehiculoModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"nuevoVehiculoModal\"> Nuevo Vehiculo</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n                <h5 class=\"text-muted\">Buscar Cliente</h5>\r\n\r\n                <div class=\"col-md-12 mt-2 px-md-1\">\r\n\r\n                    <input type=\"text\" class=\"form-control\" placeholder=\"buscar cliente\" (keyup)=\"buscarClient(searchClient.value)\" #searchClient>\r\n\r\n                    <div *ngIf=\"listClients.length > 0 && searchClient.value.length !== 0\" class=\"bg-white px-2 shadow col-auto\" style=\"position: absolute; z-index: 1020;\">\r\n\r\n                        <ul class=\"list-group list-group-flush overflow-auto\" style=\"max-height: 150px;\">\r\n\r\n                            <li class=\"list-group-item py-1\">\r\n                                <h6>Resultados: ({{ listClients.length }})</h6>\r\n                            </li>\r\n\r\n                            <li class=\"list-group-item py-1\" *ngFor=\"let cliente of listClients\">\r\n                                <button [disabled]=\"!cliente.status\" class=\"border-0 bg-white w-100 text-start\" (click)=\"clientS = cliente; listClients = [] \" type=\"button\">\r\n                                    <div class=\"d-flex\">\r\n                                        <div class=\"align-self-center\">\r\n                                            <span> {{ cliente.name }} </span>\r\n                                            <span> {{ cliente.cedula }} </span>\r\n                                            <span> {{ cliente.phone }} </span>\r\n                                            <span *ngIf=\"!cliente.status\" class=\"badge rounded-pill bg-danger\">Eliminado</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </button>\r\n                            </li>\r\n\r\n                        </ul>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                <hr>\r\n\r\n                <!-- CLIENTE SELECCIONADO -->\r\n                <div *ngIf=\"clientS\">\r\n\r\n                    <h5 class=\"text-muted\">Informacion del Cliente</h5>\r\n\r\n                    <div class=\"form-group\">\r\n\r\n                        <div class=\"form-floating\">\r\n                            <input id=\"Nombre\" readonly class=\"form-control text-capitalize\" [value]=\"clientS.name\">\r\n                            <label for=\"Nombre\">Nombre</label>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n\r\n                        <div class=\"form-floating\">\r\n                            <input id=\"cedula\" readonly type=\"text\" class=\"form-control text-capitalize\" [value]=\"clientS.cedula\">\r\n                            <label for=\"cedula\">Cedula</label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <form id=\"newProveedorForm\" autocomplete=\"off\" [formGroup]=\"newForm\" (ngSubmit)=\"create()\">\r\n\r\n                    <h5 class=\"text-muted\">Informacion del vehiculo nuevo</h5>\r\n\r\n                    <div class=\"form-group\">\r\n                        <div class=\"form-floating\">\r\n                            <input id=\"placa\" formControlName=\"placa\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Placa\">\r\n                            <label for=\"placa\">Placa</label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"form-group \">\r\n                        <div class=\"form-floating\">\r\n                            <input id=\"marca\" formControlName=\"brand\" type=\"text\" class=\"form-control\" placeholder=\"Marca\">\r\n                            <label for=\"marca\">Marca</label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <div class=\"form-floating\">\r\n                            <input id=\"modelo\" formControlName=\"model\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Modeo\">\r\n                            <label for=\"modelo\">Modeo</label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <div class=\"form-floating\">\r\n                            <input id=\"año\" formControlName=\"year\" type=\"text\" class=\"form-control\" placeholder=\"Año\">\r\n                            <label for=\"año\">Año</label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <div class=\"form-floating\">\r\n                            <textarea id=\"descripcion\" formControlName=\"description\" placeholder=\"Descripción\" class=\"form-control\" name=\"\" id=\"\" cols=\"30\" rows=\"10\"></textarea>\r\n                            <label for=\"descripcion\">Descripción</label>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    ACTUALIZR VEHICULO\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"actualizarVehiculo\" tabindex=\"-1\" aria-labelledby=\"actualizarVehiculo\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"actualizarVehiculo\">Actualizar Vehiculo</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form id=\"newProveedorForm\" autocomplete=\"off\" [formGroup]=\"updateForm\" (ngSubmit)=\"update()\">\r\n\r\n                    <h5 class=\"text-muted\">Informacion del vehiculo</h5>\r\n\r\n                    <div class=\"form-group\">\r\n                        <div class=\"form-floating\">\r\n                            <input id=\"placa\" formControlName=\"placa\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Placa\">\r\n                            <label for=\"placa\">Placa</label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"form-group \">\r\n                        <div class=\"form-floating\">\r\n                            <input id=\"marca\" formControlName=\"brand\" type=\"text\" class=\"form-control\" placeholder=\"Marca\">\r\n                            <label for=\"marca\">Marca</label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <div class=\"form-floating\">\r\n                            <input id=\"modelo\" formControlName=\"model\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Modeo\">\r\n                            <label for=\"modelo\">Modeo</label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <div class=\"form-floating\">\r\n                            <input id=\"año\" formControlName=\"year\" type=\"text\" class=\"form-control\" placeholder=\"Año\">\r\n                            <label for=\"año\">Año</label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <div class=\"form-floating\">\r\n                            <textarea id=\"descripcion\" formControlName=\"description\" placeholder=\"Descripción\" class=\"form-control\" name=\"\" id=\"\" cols=\"30\" rows=\"10\"></textarea>\r\n                            <label for=\"descripcion\">Descripción</label>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Actualizar</button>\r\n                </form>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    CAARGAR FACTURAS VEHICULO\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"facturas\" tabindex=\"-1\" aria-labelledby=\"facturasModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"facturasModal\"> Facturas del Vehiculo</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n                <div>\r\n\r\n                    <!-- TABLA DE FACTURAS A CREDITOS DEL CLIENTE -->\r\n                    <div class=\"table-responsive \">\r\n                        <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn overflow-auto \">\r\n                            <thead class=\"border-bottom \">\r\n                                <tr>\r\n                                    <th class=\"text-muted \" scope=\"col \">#</th>\r\n                                    <th class=\"text-muted \" scope=\"col \" colspan=\"2 \">Cliente</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Cedula</th>\r\n                                    <th class=\"text-muted \" scope=\"col \" colspan=\"2 \">Ruta</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Monto</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Abonado</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Metodo</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">fecha</th>\r\n                                    <th class=\"text-muted \" scope=\"col \"></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr *ngIf=\"facturas.length===0 \" class=\"text-center \">\r\n                                    <th colspan=\"10 \" class=\"py-4 \">\r\n                                        <h4 class=\"text-muted \">Este vehiculo no tiene facturas</h4>\r\n                                    </th>\r\n                                </tr>\r\n\r\n                                <ng-container *ngFor=\"let factura of facturas; let i=index \">\r\n\r\n                                    <tr class=\"trHover \" tabindex=\"0 \" data-bs-toggle=\"tooltip \" title=\"Cajero: {{ factura.user.name }} \">\r\n                                        <th>{{ factura.invoice }}</th>\r\n                                        <td colspan=\"2 \">\r\n                                            {{ factura.client.name }}\r\n                                            <span *ngIf=\"!factura.status \" class=\"badge rounded-pill bg-danger \">Cancelada</span>\r\n                                            <span *ngIf=\"factura.credito && factura.status \" class=\"badge rounded-pill bg-warning \">Credito <span *ngIf=\"factura.apartado\" >- Apartado </span> </span>\r\n                                        </td>\r\n                                        <td> {{ factura.client.cedula }} </td>\r\n                                        <td colspan=\"2 \"> {{ factura.mesa.name }} </td>\r\n                                        <td> {{ factura.amount | currency: 'COP' }} </td>\r\n                                        <td> {{ factura.totalAbonado | currency: 'COP' }} </td>\r\n                                        <td> {{ factura.type }} </td>\r\n                                        <td> {{ factura.fecha | date:'medium' }} </td>\r\n                                        <td class=\"text-center \">\r\n                                            <a [routerLink]=\"[ '/dashboard/factura', factura.iid] \" class=\"btn btn-link p-1 text-primary\" data-bs-dismiss=\"modal\" aria-label=\"Close\"><i class=\"bi bi-box-arrow-up-right \"></i></a>\r\n                                        </td>\r\n                                    </tr>\r\n\r\n                                </ng-container>\r\n\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                    <!-- TABLA DE FACTURAS A CREDITOS DEL CLIENTE -->\r\n\r\n                </div>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit, ViewChild, ElementRef, TemplateRef, HostListener, ViewChildren, QueryList  } from '@angular/core';\r\nimport { FormArray, FormBuilder, Validators } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription, Observable } from 'rxjs';\r\nimport Swal from 'sweetalert2';\r\nimport * as SerialPort from 'serialport';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\n\r\nimport {UUID} from 'uuid-generator-ts';\r\n\r\nimport { QRCodeModule } from 'angularx-qrcode';\r\n\r\n// PRINTER\r\nimport { NgxPrinterService } from 'projects/ngx-printer/src/lib/ngx-printer.service';\r\nimport { PrintItem } from 'projects/ngx-printer/src/lib/print-item';\r\nimport { ngxPrintMarkerPosition } from 'projects/ngx-printer/src/public_api';\r\n\r\n// MODELS\r\nimport { Product } from '../../../models/product.model';\r\nimport { Client } from '../../../models/client.model';\r\nimport { Invoice } from '../../../models/invoice.model';\r\nimport { Department } from '../../../models/department.model';\r\nimport { Mesa, _comanda, _ingredientes } from '../../../models/mesas.model';\r\nimport { Kit } from '../../../models/kits.model';\r\nimport { User } from '../../../models/user.model';\r\nimport { Datos } from '../../../models/empresa.model';\r\nimport { Impuestos } from 'src/app/models/impuestos.model';\r\nimport { Banco } from 'src/app/models/bancos.model';\r\n\r\n// SERVICES\r\nimport { ProductService } from '../../../services/product.service';\r\nimport { ClientService } from '../../../services/client.service';\r\nimport { SearchService } from '../../../services/search.service';\r\nimport { InvoiceService } from '../../../services/invoice.service';\r\nimport { TurnoService } from '../../../services/turno.service';\r\nimport { DepartmentService } from '../../../services/department.service';\r\nimport { MesasService } from '../../../services/mesas.service';\r\nimport { EmpresaService } from '../../../services/empresa.service';\r\nimport { UserService } from '../../../services/user.service';\r\nimport { BasculaService } from '../../../services/bascula.service';\r\nimport { PedidosService } from '../../../services/pedidos.service';\r\nimport { EntradasService } from 'src/app/services/entradas.service';\r\nimport { ImpuestosService } from 'src/app/services/impuestos.service';\r\nimport { DataicoService } from 'src/app/services/dataico.service';\r\nimport { ElectronicaService } from 'src/app/services/electronica.service';\r\nimport { BancosService } from '../../../services/bancos.service';\r\n\r\n// INTERFACES\r\nimport { Carrito, _payments, LoadCarrito, _notas } from '../../../interfaces/carrito.interface';\r\nimport { LoadInvoice } from '../../../interfaces/invoice.interface';\r\nimport { LoadTurno, _movements } from '../../../interfaces/load-turno.interface';\r\nimport { LoadMesaId } from '../../../interfaces/load-mesas.interface';\r\nimport { DataicoInterface } from 'src/app/interfaces/dataico.interface';\r\nimport { Entradas } from 'src/app/models/entradas.model';\r\nimport { Vehiculo } from 'src/app/models/vehiculos.model';\r\nimport { FileUploadService } from 'src/app/services/file-upload.service';\r\n\r\ninterface _Department {\r\n  codigo: string,\r\n  departamento: string,\r\n}\r\n\r\n@Component({\r\n  selector: 'app-mesa',\r\n  templateUrl: './mesa.component.html',\r\n  styleUrls: ['./mesa.component.css']\r\n})\r\nexport class MesaComponent implements OnInit {\r\n\r\n  public carrito: LoadCarrito[] = [];\r\n  public comanda: LoadCarrito[] = [];\r\n  public comandaTemp: LoadCarrito[] = [];\r\n  public mesa: Mesa;\r\n  \r\n  public productUp: Carrito[] = [];\r\n\r\n  public facturar: boolean;\r\n\r\n  public user: User;\r\n\r\n  public menu: boolean = true;\r\n\r\n  serialPort: typeof SerialPort;\r\n\r\n  // PRINT\r\n  @ViewChild('PrintTemplate')\r\n  private PrintTemplateTpl: TemplateRef<any>;\r\n\r\n  title = 'ngx-printer-demo';\r\n\r\n  printWindowSubscription: Subscription;\r\n  $printItems: Observable<PrintItem[]>;\r\n\r\n  public basculaT: string = '1';\r\n  public puertoBascula: string = 'COM1';\r\n\r\n  constructor(  private productService: ProductService,\r\n                private clientService: ClientService,\r\n                private searchService: SearchService,\r\n                private fb: FormBuilder,\r\n                private invoiceService: InvoiceService,\r\n                private turnoService: TurnoService,\r\n                private departmentService: DepartmentService,\r\n                private activatedRoute: ActivatedRoute,\r\n                private mesasServices: MesasService,\r\n                private router: Router,\r\n                private printerService: NgxPrinterService,\r\n                private empresaService: EmpresaService,\r\n                private userService: UserService,\r\n                private basculaService: BasculaService,\r\n                private pedidoService: PedidosService,\r\n                private entradasService: EntradasService,\r\n                private modal: NgbModal,\r\n                private impuestosService: ImpuestosService,\r\n                private bancosService: BancosService,\r\n                private dataicoService: DataicoService,\r\n                private electronicaService: ElectronicaService,\r\n                private http: HttpClient,\r\n                private fileUploadService: FileUploadService) {\r\n\r\n                  // CARGAR INFORMACION DEL USUARIO\r\n                  this.user = this.userService.user;                  \r\n\r\n                  this.printWindowSubscription = this.printerService.$printWindowOpen\r\n                  .subscribe(val => {});\r\n              \r\n                  this.$printItems = this.printerService.$printItems;\r\n\r\n                  \r\n\r\n                }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // TECLAS DE FUNCION\r\n    document.addEventListener('keyup', (event) => {\r\n\r\n      // FACTURAR\r\n      if (event.key === 'F2' || event.key === 'F4' || event.key === '-') {\r\n        if (this.user.cerrada) {\r\n          Swal.fire('Atención', 'Debes de abrir caja primero', 'info');\r\n          return;\r\n        }\r\n        (event.key === 'F2' || event.key === '-')? this.crearFactura(false) : this.crearFactura(true);\r\n      }\r\n\r\n      if (event.key === '/') {\r\n        this.searchProduct.nativeElement.focus();\r\n      }\r\n\r\n      if (event.key === '*') {\r\n        this.montoAdd.nativeElement.focus();\r\n      }\r\n\r\n    });    \r\n\r\n    if (!localStorage.getItem('menu')) {\r\n      this.menu = true\r\n    }else{\r\n      this.menu = JSON.parse(localStorage.getItem('menu'));\r\n    }\r\n      \r\n      // TURNOS\r\n      this.cargarTurno();\r\n\r\n      // DATOS\r\n      this.cargarDatos();\r\n\r\n      // PRODUCTOS\r\n      this.cargarProductos();\r\n\r\n      // DEPARTAMENTOS\r\n      this.cargarDepartamentos();\r\n      \r\n      // IMPUESTOS\r\n      this.cargarImpuestos();\r\n      \r\n      // BANCOS\r\n      this.cargarBancos();\r\n\r\n      // CARGAR MESA\r\n      this.activatedRoute.params.subscribe( ({id}) => {\r\n\r\n        this.mesaID = id;\r\n        \r\n        this.cargarMesa(id);\r\n        \r\n      });\r\n\r\n    // CARGAR TODAS LAS MESAS\r\n    this.cargarMesasAll();\r\n\r\n    if (!this.user.cerrada) {\r\n      this.facturar = true;\r\n    }else{\r\n      this.facturar = false;\r\n    }\r\n    \r\n    \r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *  OBTENER DEPARTAMENTOS Y CIUDADES\r\n  ==================================================================== */\r\n  public departments: _Department[] = [];\r\n  public cities: any[] = [];\r\n  loadDepartmentAndCitys(){\r\n\r\n    let JsonCity: string = 'assets/json/ciudades.json';\r\n    let JsonDepartment: string = 'assets/json/departamentos.json';\r\n\r\n    if (this.empresa.pais === 'USA') {\r\n      JsonCity = 'assets/json/usaciudades.json';\r\n      JsonDepartment = 'assets/json/usadepartamentos.json';\r\n    }\r\n\r\n    this.http.get(JsonDepartment)\r\n        .subscribe( (data: any) => {          \r\n          this.departments = data;            \r\n        });\r\n\r\n    this.http.get(JsonCity)\r\n    .subscribe( (data: any) => {          \r\n      this.cities = data;          \r\n    })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  OBTENER CIUDADES DEPENDIENDO DEL DEPARTAMENTO\r\n  ==================================================================== */\r\n  public ListCities: any[] = [];\r\n  searchCities(department: string){\r\n\r\n    this.ListCities = [];\r\n\r\n    if (department.length === 0 ) {\r\n      return;\r\n    }\r\n\r\n    this.ListCities = this.cities.filter( city =>  department === city.departamento );\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  OBTENER DATOS DE LA FACTURA ELECTRONICA\r\n  ==================================================================== */\r\n  public dataDataico: boolean = false;\r\n  public dataico: DataicoInterface;\r\n  loadDataDataico(){\r\n\r\n    this.dataicoService.loadDataDataico()\r\n        .subscribe( ({dataico}) => {\r\n\r\n          delete dataico.actions._id;\r\n          delete dataico.actions.email;\r\n          delete dataico.actions.attachments;\r\n          delete dataico.datid;\r\n          delete dataico.customer;\r\n          delete dataico.numbering._id;\r\n\r\n          if (dataico) {\r\n            this.dataDataico = true;\r\n            this.dataico = dataico;\r\n          }          \r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          \r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR BANCOS\r\n  ==================================================================== */\r\n  public bancos: Banco[] = [];\r\n  cargarBancos(){\r\n\r\n    this.bancosService.loadBancos()\r\n        .subscribe( ({bancos}) => {\r\n\r\n          this.bancos = bancos.filter( banco => banco.status === true);          \r\n\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR IMPUESTOS\r\n  ==================================================================== */\r\n  public impuestos: Impuestos[] = [];\r\n  cargarImpuestos(){\r\n\r\n    this.impuestosService.loadImpuestos()\r\n        .subscribe( ({taxes}) => {\r\n          this.impuestos = taxes;\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CAMBIAR MENU\r\n  ==================================================================== */\r\n  changeMenu(menu : boolean){\r\n\r\n    if (menu) {\r\n      menu = false;\r\n    }else{\r\n      menu = true;\r\n    }\r\n\r\n    this.menu = menu;\r\n    localStorage.setItem('menu', JSON.stringify(menu));\r\n    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR TODAS LAS MESAS\r\n  ==================================================================== */\r\n  public totalMesas: Mesa[] = [];\r\n  cargarMesasAll(){\r\n\r\n    this.mesasServices.loadMesas(0)\r\n        .subscribe( ({mesas}) => {\r\n          this.totalMesas = mesas;\r\n        });\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CAMBIAR MESA\r\n  ==================================================================== */\r\n  cambiarMesa(mesaNew: Mesa){\r\n\r\n    Swal.fire({\r\n      title: 'Atencion',\r\n      text: \"Estas seguro de cambiar de mesa\",\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: 'Si, cambiar mesa',\r\n      cancelButtonText: 'Cancelar'\r\n    }).then((result) => {  \r\n      \r\n      if (result.isConfirmed) {\r\n    \r\n        mesaNew.disponible = false;\r\n        mesaNew.carrito = this.mesa.carrito;\r\n        mesaNew.comanda = this.mesa.comanda;\r\n        mesaNew.nota = this.mesa.nota;\r\n        \r\n        this.mesasServices.updateMesa(mesaNew, mesaNew.mid)\r\n            .subscribe( resp => {\r\n\r\n              this.mesa.disponible = true;\r\n              this.mesa.carrito = [];\r\n              this.mesa.comanda = [];\r\n              this.mesa.nota = [];\r\n              \r\n              this.mesasServices.updateMesa(this.mesa, this.mesaID)\r\n                  .subscribe( resp => {\r\n\r\n                    Swal.fire('Estupendo', `Se ha cambiado ha ${ mesaNew.name } Satisfactoriamente`, 'success');\r\n\r\n                    this.cargarMesasAll();\r\n\r\n                    this.router.navigateByUrl(`dashboard/ventas/mesa/${mesaNew.mid}`);\r\n\r\n              }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n      }\r\n    });\r\n\r\n  }\r\n  \r\n\r\n  /** ================================================================\r\n   *   CARGAR DATOS DE LA EMPRESA\r\n  ==================================================================== */\r\n  public empresa: Datos;\r\n  public ticketHeader: any;\r\n  public ticketfooter: any;\r\n  cargarDatos(){\r\n\r\n    this.empresaService.getDatos()\r\n        .subscribe( datos => {\r\n          this.empresa = datos;\r\n          \r\n          this.ticketHeader =  this.empresa.header.split('\\n');\r\n          this.ticketfooter =  this.empresa.footer.split('\\n');\r\n\r\n          this.loadDataDataico();\r\n\r\n          if (this.empresa.bascula) {\r\n            if (localStorage.getItem('bascula')) {\r\n              this.basculaT = localStorage.getItem('bascula');\r\n            }\r\n\r\n            if (localStorage.getItem('puertoBascula')) {\r\n              this.puertoBascula = localStorage.getItem('puertoBascula');\r\n            }\r\n          }\r\n          \r\n          this.loadDepartmentAndCitys();\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n  }\r\n  \r\n  /** ================================================================\r\n   *  CARGAR DATOS DE LA MESA\r\n  ==================================================================== */\r\n  public mesaID: string;\r\n  public meserID: string;\r\n  cargarMesa(id: string){\r\n\r\n    this.productUp = [];\r\n    this.carrito = [];\r\n    this.comanda = [];\r\n\r\n    this.mesasServices.loadMesaId(id)\r\n        .subscribe( (mesa: any) => {\r\n          this.mesaID = mesa.mid;\r\n          this.carrito = mesa.carrito;\r\n          this.mesa = mesa;\r\n\r\n          // DESCUENTOS          \r\n          this.formDescuento.setValue({\r\n            descuento: mesa.descuento || false,\r\n            porcentaje: mesa.porcentaje || 0\r\n          });\r\n          // DESCUENTOS\r\n          \r\n          this.comandas = mesa.comanda;\r\n          \r\n         if (!mesa.disponible && mesa.cliente) {\r\n           this.clienteTemp = mesa.cliente;\r\n           this.clienteTemp.cid = mesa.cliente._id;\r\n         }         \r\n                \r\n          this.meserID = mesa.mesero._id;\r\n\r\n          for (let i = 0; i < mesa.carrito.length; i++) {\r\n\r\n            this.productUp.push({\r\n              product: mesa.carrito[i].product._id,\r\n              qty: mesa.carrito[i].qty,\r\n              price: mesa.carrito[i].price,\r\n              iva: mesa.carrito[i].iva,\r\n              mayor: mesa.carrito[i].mayor\r\n            });\r\n            \r\n            this.comanda.push({\r\n              product: mesa.carrito[i].product.name,\r\n              tipo: mesa.carrito[i].product.tipo,\r\n              comanda: mesa.carrito[i].product.comanda,\r\n              qty: mesa.carrito[i].qty,\r\n              price: mesa.carrito[i].price\r\n            });\r\n                        \r\n          }\r\n\r\n          this.comandaTemp = this.comanda;\r\n\r\n          // OBTENER NOTAS DE LA COMANDAS\r\n          if (this.mesa.nota) {            \r\n            if (this.mesa.nota.length > 0) {\r\n              this.notas = this.mesa.nota;         \r\n            }else{\r\n              this.notas = [];\r\n            }          \r\n          }\r\n\r\n          this.invoiceForm.reset({\r\n            type: 'efectivo',\r\n            nota: mesa.notaf || '',\r\n            placa: mesa.placa || '',\r\n            images: mesa.images || [],\r\n          });\r\n\r\n          this.sumarTotales();\r\n\r\n        });\r\n\r\n\r\n  }\r\n  /** ================================================================\r\n   *  CAMBIAR VALOR\r\n  ==================================================================== */\r\n  cambiarValor( valor: number ) {\r\n\r\n    if (this.qtySelect < 0) {\r\n      this.qtySelect = 0;\r\n    }\r\n\r\n    if ( this.qtySelect >= this.productSelected.inventario && valor >= 0 && this.productSelected.type !== 'Paquete') {\r\n      return this.qtySelect = this.productSelected.inventario;\r\n    }\r\n\r\n    if ( this.qtySelect <= 0 && valor < 0 ) {\r\n      return this.qtySelect = 0;\r\n    }\r\n\r\n    this.qtySelect = this.qtySelect + valor;\r\n\r\n  }\r\n\r\n\r\n  // CAMBIAR CANTIDADES DE LOS PRODUCTOS\r\n  onChange( nuevoValor: number ){\r\n\r\n    if (this.qtySelect < 0) {\r\n      this.qtySelect = 0;\r\n    }\r\n    \r\n    if( nuevoValor > this.productSelected.inventario && this.productSelected.type !== 'Paquete' ) {\r\n      this.qtySelect = this.productSelected.inventario;\r\n    } else if ( nuevoValor <= 0 && this.productSelected.type !== 'Paquete') {\r\n      this.qtySelect = 0;\r\n    } else {\r\n      this.qtySelect = nuevoValor;\r\n    }\r\n\r\n    if (this.mayor) {   \r\n      this.priceProductSelected = this.productSelected.wholesale;\r\n    }else{\r\n      this.priceProductSelected = this.productSelected.price;\r\n    }\r\n\r\n  }\r\n\r\n  // ACTIVAR MAYOREO O DISTRIBUIDOR\r\n  @ViewChild('cMayor') cMayor: ElementRef\r\n  @ViewChild('cDis') cDis: ElementRef\r\n  public mayor: boolean = false;\r\n  mayoreoApp(mayor: boolean){\r\n\r\n    if (mayor) {\r\n      this.priceProductSelected = this.productSelected.wholesale;\r\n    }else{\r\n      this.priceProductSelected = this.productSelected.price;\r\n    }\r\n\r\n  }\r\n\r\n  distribuidorApp(distribuidor: boolean){\r\n\r\n    if (distribuidor) {\r\n      this.priceProductSelected = this.productSelected.distribuidor;\r\n    }else{\r\n      this.priceProductSelected = this.productSelected.price;\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CHANGE PRICE CALCULADORA\r\n  ==================================================================== */\r\n  appendV(value: any){\r\n\r\n    if (value === 'del') {\r\n      this.priceProductSelected = Number(this.priceProductSelected.toString().slice(0, -1));\r\n      return;\r\n    }\r\n\r\n    this.priceProductSelected = Number(this.priceProductSelected.toString() + value);\r\n    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  MODAL PRODUCTO CODE\r\n  ==================================================================== */\r\n  @ViewChild('modalProductSeleted', { static: true }) modalProductSeleted: TemplateRef<any>;\r\n  @ViewChild('btnAddPr') btnAddPr: ElementRef;\r\n  \r\n  public productSelected: Product;\r\n  public qtySelect : number = 1;\r\n  public priceProductSelected: number = 0;\r\n  modalProducto ( product : Product ) {\r\n\r\n    \r\n\r\n    this.priceProductSelected = 0;\r\n    this.mayor = false;\r\n    \r\n    if (product.inventario === 0 && product.type !== 'Paquete') {\r\n      Swal.fire('Error', 'El producto esta agotado. Porfavor, verifica el stock de este prodcuto.', 'error');             \r\n      return;\r\n    }\r\n    \r\n    this.productSelected = product;\r\n    this.qtySelect = 1;\r\n    this.priceProductSelected = product.price;\r\n\r\n    // SI ES GRANEL\r\n    if (product.type === 'Granel') {\r\n      // SI ESTA USANDO BASCULA\r\n      if (this.empresa.bascula) {\r\n\r\n        this.basculaService.loadPeso(this.basculaT, this.puertoBascula, this.empresa.basculakg)\r\n            .subscribe( resp => {\r\n              this.qtySelect = resp;\r\n            });\r\n      }\r\n    }else if(product.type === 'Paquete' && product.bascula ){\r\n\r\n      if (this.empresa.bascula) {\r\n\r\n        this.basculaService.loadPeso(this.basculaT, this.puertoBascula, this.empresa.basculakg)\r\n            .subscribe( resp => {\r\n              this.qtySelect = resp;\r\n            });\r\n      }\r\n\r\n    }\r\n\r\n    this.modal.open(this.modalProductSeleted);\r\n\r\n    // LIMPIAR INPUT\r\n    this.searchCode.nativeElement.value = '';\r\n    // this.searchCode.nativeElement.onFocus = true;\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  BUSCAR CODIGO\r\n  ==================================================================== */  \r\n  @ViewChild('searchCode') searchCode: ElementRef;\r\n  // public peso: number;\r\n  buscarCodigo(code: string){\r\n\r\n    if (code.length === 0) {\r\n      return;      \r\n    }\r\n\r\n    \r\n    let codigo = '';\r\n    let cantidad:any = 1;\r\n    let precio = 0;\r\n    \r\n\r\n    if (code.includes('+')) {\r\n      \r\n      let newCode = code.split('+');\r\n\r\n      codigo = newCode[1];\r\n      cantidad = Number(newCode[0]);\r\n\r\n    }else{\r\n\r\n      // COMPROBAR SI ES CODIGO DE BARRA CON PESO O PRECIO\r\n      let digitos = this.empresa.basculacode.length;\r\n      let digCode = digitos + 3;\r\n      let totalCode = code.length - 1;\r\n      \r\n\r\n      if (code.slice(0,digitos) === this.empresa.basculacode) {\r\n        codigo = code.slice(digitos, digCode);        \r\n        \r\n        if(this.empresa.basculatype === 'peso'){\r\n\r\n          let cant = Number(code.slice(digCode , totalCode))/1000;\r\n\r\n          cantidad = cant.toFixed(3);\r\n\r\n        }else if(this.empresa.basculatype === 'precio'){\r\n          precio = Number(code.slice(digCode , totalCode));\r\n        }\r\n\r\n      }else{\r\n        codigo = code;\r\n      }\r\n    }\r\n\r\n    this.productService.cargarProductoCodigo(codigo)\r\n    .subscribe( (product) => {\r\n                  \r\n            if (product === null || product.status === false) {\r\n              Swal.fire('Error', 'No existe el producto, verifica el codigo de barras o si el producto a sido desactivado!', 'error');\r\n              this.searchCode.nativeElement.value = '';\r\n              this.searchCode.nativeElement.onFocus = true;\r\n              return;              \r\n            }\r\n\r\n            let digitos = this.empresa.basculacode.length;\r\n            let digCode = digitos + 3;\r\n\r\n            // SI ES GRANEL\r\n            if (product.type === 'Granel') {\r\n              // SI ESTA USANDO BASCULA\r\n\r\n              if (code.slice(0,digitos) === this.empresa.basculacode) {\r\n\r\n                if(this.empresa.basculatype === 'precio'){\r\n                  cantidad = precio / product.price;\r\n                }\r\n\r\n                // GUARDAR AL CARRITO\r\n                this.searchCode.nativeElement.value = '';\r\n                this.searchCode.nativeElement.onFocus = true;\r\n                this.carritoTemp(product, cantidad, product.price);\r\n                // GUARDAR AL CARRITO\r\n                return;\r\n                \r\n              }\r\n\r\n              \r\n              if (this.empresa.bascula) {                \r\n                \r\n                this.basculaService.loadPeso(this.basculaT, this.puertoBascula, this.empresa.basculakg)\r\n                .subscribe( resp => {\r\n                  cantidad = resp;\r\n\r\n                  this.searchCode.nativeElement.value = '';\r\n                  this.searchCode.nativeElement.onFocus = true;\r\n                  this.carritoTemp(product, cantidad, product.price)\r\n\r\n                  return;\r\n\r\n                });\r\n\r\n              }else {\r\n\r\n                if (this.empresa.fruver) {\r\n\r\n                  Swal.fire({\r\n                    title: 'Cantidad',\r\n                    input: 'text',\r\n                    inputAttributes: {\r\n                      autocapitalize: 'off'\r\n                    },\r\n                    showCancelButton: true,\r\n                    confirmButtonText: 'Confirmar',\r\n                    showLoaderOnConfirm: true,\r\n                    preConfirm: (resp) => {\r\n                      \r\n                      return resp;\r\n                    }\r\n                  }).then((result) => {\r\n          \r\n                    if (result.value > 0) {\r\n                      \r\n                      cantidad = result.value;\r\n                      this.searchCode.nativeElement.value = '';\r\n                      this.searchCode.nativeElement.onFocus = true;\r\n          \r\n                      // GUARDAR AL CARRITO\r\n                      this.carritoTemp(product, cantidad, product.price);\r\n                      // GUARDAR AL CARRITO\r\n          \r\n                      return;\r\n                    }else{\r\n                      return;\r\n                    }                \r\n                    \r\n                  });\r\n\r\n                  \r\n                }else{\r\n                  this.searchCode.nativeElement.value = '';\r\n                  this.searchCode.nativeElement.onFocus = true;\r\n                  this.carritoTemp(product, cantidad, product.price);\r\n                  return;\r\n\r\n                }\r\n\r\n              }\r\n              \r\n            }else if( product.type === 'Paquete' && product.bascula ){\r\n\r\n              if (code.slice(0,4) === this.empresa.basculacode) {\r\n\r\n                if(this.empresa.basculatype === 'precio'){\r\n                  cantidad = precio / product.price;\r\n                }\r\n\r\n                // GUARDAR AL CARRITO\r\n                this.searchCode.nativeElement.value = '';\r\n                this.searchCode.nativeElement.onFocus = true;\r\n                this.carritoTemp(product, cantidad, product.price);\r\n                // GUARDAR AL CARRITO\r\n                return;\r\n                \r\n              }\r\n\r\n              \r\n              if (this.empresa.bascula) {                \r\n                \r\n                this.basculaService.loadPeso(this.basculaT, this.puertoBascula, this.empresa.basculakg)\r\n                .subscribe( resp => {\r\n                  cantidad = resp;\r\n\r\n                  this.searchCode.nativeElement.value = '';\r\n                  this.searchCode.nativeElement.onFocus = true;\r\n                  this.carritoTemp(product, cantidad, product.price)\r\n\r\n                  return;\r\n\r\n                });\r\n\r\n              }else {\r\n\r\n                if (this.empresa.fruver) {\r\n\r\n                  Swal.fire({\r\n                    title: 'Cantidad',\r\n                    input: 'text',\r\n                    inputAttributes: {\r\n                      autocapitalize: 'off'\r\n                    },\r\n                    showCancelButton: true,\r\n                    confirmButtonText: 'Confirmar',\r\n                    showLoaderOnConfirm: true,\r\n                    preConfirm: (resp) => {\r\n                      \r\n                      return resp;\r\n                    }\r\n                  }).then((result) => {\r\n          \r\n                    if (result.value > 0) {\r\n                      \r\n                      cantidad = result.value;\r\n                      this.searchCode.nativeElement.value = '';\r\n                      this.searchCode.nativeElement.onFocus = true;\r\n          \r\n                      // GUARDAR AL CARRITO\r\n                      this.carritoTemp(product, cantidad, product.price);\r\n                      // GUARDAR AL CARRITO\r\n          \r\n                      return;\r\n                    }else{\r\n                      return;\r\n                    }                \r\n                    \r\n                  });\r\n\r\n                  \r\n                }else{\r\n                  this.searchCode.nativeElement.value = '';\r\n                  this.searchCode.nativeElement.onFocus = true;\r\n                  this.carritoTemp(product, cantidad, product.price);\r\n                  return;\r\n\r\n                }\r\n\r\n              }\r\n\r\n            }else{\r\n              this.searchCode.nativeElement.value = '';\r\n              this.searchCode.nativeElement.onFocus = true;\r\n              this.carritoTemp(product, cantidad, product.price);\r\n            }\r\n                        \r\n            // this.modalProducto(product);\r\n            \r\n          }, (err) =>         \r\n            { \r\n              console.log(err);\r\n              Swal.fire('Error', err.error.msg, 'error'); \r\n            }\r\n          );\r\n  }\r\n\r\n  /** ================================================================\r\n   *  AGREGAR PRODUCTO POR BOTON\r\n  ==================================================================== */\r\n  btnAddProducto( product: any, qty: number, precio: number ){\r\n    \r\n    if (product.type === 'Granel') {\r\n\r\n      if (this.empresa.bascula) {\r\n\r\n        this.basculaService.loadPeso(this.basculaT, this.puertoBascula, this.empresa.basculakg)\r\n            .subscribe( resp => {\r\n\r\n              qty = resp;\r\n\r\n              // GUARDAR AL CARRITO\r\n              this.carritoTemp(product, qty, product.price);\r\n              // GUARDAR AL CARRITO\r\n\r\n              return;                    \r\n\r\n            });                \r\n        \r\n      }else{             \r\n\r\n        Swal.fire({\r\n          title: 'Cantidad',\r\n          input: 'text',\r\n          inputAttributes: {\r\n            autocapitalize: 'off'\r\n          },\r\n          showCancelButton: true,\r\n          confirmButtonText: 'Confirmar',\r\n          showLoaderOnConfirm: true,\r\n          preConfirm: (resp) => {\r\n            \r\n            return resp;\r\n          }\r\n        }).then((result) => {\r\n\r\n          if (result.value > 0) {\r\n            \r\n            qty = result.value;\r\n\r\n            // GUARDAR AL CARRITO\r\n            this.carritoTemp(product, qty, product.price);\r\n            // GUARDAR AL CARRITO\r\n\r\n            return;\r\n          }else{\r\n            return;\r\n          }                \r\n          \r\n        });\r\n      }\r\n      \r\n    }else{\r\n\r\n      // // GUARDAR AL CARRITO\r\n      // this.carritoTemp(product, qty, product.price);\r\n      // // GUARDAR AL CARRITO\r\n\r\n      Swal.fire({\r\n        title: 'Cantidad',\r\n        input: 'text',\r\n        inputAttributes: {\r\n          autocapitalize: 'off'\r\n        },\r\n        showCancelButton: true,\r\n        confirmButtonText: 'Confirmar',\r\n        showLoaderOnConfirm: true,\r\n        preConfirm: (resp) => {\r\n          \r\n          return resp;\r\n        }\r\n      }).then((result) => {\r\n\r\n        if (result.value > 0) {\r\n          \r\n          const qty:number = result.value;\r\n\r\n          // GUARDAR AL CARRITO\r\n          this.carritoTemp(product, qty, product.price);\r\n          // GUARDAR AL CARRITO\r\n\r\n          return;\r\n        }              \r\n        \r\n      });\r\n\r\n    } \r\n\r\n  }\r\n\r\n\r\n  /** ================================================================\r\n   *  ANTES ALMACENAR PRODUCTO TEMPORAL EN EL CARRITO\r\n  ==================================================================== */\r\n  @ViewChild('searchProductCodeN') searchProductCodeN: ElementRef;\r\n  carritoTempBefored( product: any, qty: number, precio: number, nota: string = '', newPrice: boolean = false ){\r\n\r\n    this.searchProductCodeN.nativeElement.value = '';\r\n    delete this.productSelected;\r\n    delete this.qtySelect;\r\n    \r\n    setTimeout( () =>{\r\n      this.searchProductCodeN.nativeElement.focus();\r\n    }, 500);\r\n\r\n    this.carritoTemp(product, qty, precio, nota, newPrice);\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  ALMACENAR PRODUCTO TEMPORAL EN EL CARRITO\r\n  ==================================================================== */\r\n  public total: number = 0;\r\n  public comandas: _comanda[] = [];\r\n  public ingredientes: _ingredientes[] = [];\r\n  public inventarioNew: number = 0;\r\n  public inventarioNewB: boolean = false;\r\n\r\n  sleep(ms: number) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n  }\r\n\r\n  carritoTemp( product: any, qty: number, precio: number, nota: string = '', newPrice: boolean = false ){\r\n\r\n    // SI ES UNA MESA\r\n    if (this.mesa.img === 'mesa.svg') {\r\n      \r\n      this.carrito = [];\r\n      this.comanda = [];\r\n\r\n    this.mesasServices.loadMesaId(this.mesaID)\r\n        .subscribe( (mesa: any) => {\r\n\r\n          this.carrito = mesa.carrito;\r\n          this.mesa = mesa;\r\n          \r\n          this.comandas = mesa.comanda;\r\n\r\n          for (let i = 0; i < mesa.carrito.length; i++) {\r\n            \r\n            this.comanda.push({\r\n              product: mesa.carrito[i].product.name,\r\n              tipo: mesa.carrito[i].product.tipo,\r\n              comanda: mesa.carrito[i].product.comanda,\r\n              qty: mesa.carrito[i].qty,\r\n              price: mesa.carrito[i].price\r\n            });\r\n                        \r\n          }\r\n\r\n          this.comandaTemp = this.comanda;  \r\n\r\n          this.sumarTotales();\r\n\r\n          /** ===================================\r\n           * \r\n           */\r\n\r\n          let mayor = false;\r\n\r\n          if (this.clienteTemp) {\r\n            if (this.clienteTemp.mayoreo) {\r\n              precio = product.wholesale;\r\n            }\r\n          }\r\n\r\n          if (newPrice) {\r\n            precio = (precio / (qty * 1000)) * 1000;\r\n          }\r\n      \r\n          if(product.mayoreo > 0 && qty >= product.mayoreo){\r\n            precio = product.wholesale;\r\n            mayor = true;\r\n          }\r\n      \r\n          this.inventarioNew = 0;\r\n          this.inventarioNewB = false;\r\n      \r\n          if(this.comanda.length === 0){\r\n            this.mesa.fecha   = new Date(); \r\n          }\r\n          \r\n          const validarItem = this.productUp.findIndex( (resp) =>{      \r\n            if (resp.product === product.pid ) {\r\n              return true;\r\n            }else {\r\n              return false;\r\n            }\r\n          });\r\n\r\n          let ivaP:number = 0;\r\n\r\n    if (product.tax) {\r\n      ivaP = Number(precio * qty) * Number(product.taxid?.valor / 100);\r\n    }\r\n\r\n    if ( validarItem === -1 ) {\r\n\r\n\r\n      // AGREGAMOS EL PRODUCTO\r\n      this.productUp.push({\r\n        product: product.pid,\r\n        qty,\r\n        price: precio,\r\n        iva: ivaP,\r\n        mayor\r\n      });\r\n\r\n      // AGREGAMOS A LA COMANDA\r\n      this.comanda.push({\r\n        product: product.name,\r\n        comanda: product.comanda,\r\n        tipo: product.tipo,\r\n        qty,  \r\n        price: precio\r\n      });\r\n\r\n      \r\n      this.inventarioNew = product.inventario - qty;\r\n      this.inventarioNewB = true;\r\n            \r\n\r\n    }else{\r\n      \r\n      let qtyTemp = this.productUp[validarItem].qty;\r\n      qtyTemp += Number(qty);\r\n\r\n      \r\n      let ivaTemp = this.productUp[validarItem].iva;\r\n      ivaTemp += Number(ivaP);\r\n      \r\n      this.productUp[validarItem].iva = ivaTemp;\r\n      this.productUp[validarItem].qty = qtyTemp;\r\n      this.comanda[validarItem].qty = qtyTemp;\r\n      \r\n      if (product.mayoreo > 0 &&  qtyTemp >= product.mayoreo) {\r\n        this.productUp[validarItem].price = product.wholesale;    \r\n        this.productUp[validarItem].mayor = true;  \r\n      }else{\r\n        this.productUp[validarItem].price = precio;\r\n        this.productUp[validarItem].mayor = false;  \r\n      }\r\n\r\n      this.inventarioNew = product.inventario - qtyTemp;\r\n      this.inventarioNewB = true;\r\n      \r\n      setTimeout( () => {\r\n        this.inventarioNewB = false;        \r\n      }, 2500);\r\n      \r\n    }\r\n\r\n    this.mesa.carrito =  this.productUp;\r\n\r\n    // COMANDA NUEVA\r\n    this.ingredientes = [];\r\n    \r\n    if (this.mesa.img === 'mesa.svg') {\r\n      \r\n      // AGREGAR LOS INGREDIENTES\r\n      for (let i = 0; i < product.kit.length; i++) {\r\n        \r\n        this.ingredientes.push({\r\n\r\n          name: product.kit[i].product.name,\r\n          qty: product.kit[i].qty,\r\n          status: true\r\n\r\n        });\r\n        \r\n      }\r\n      \r\n      if (qty > 1) {\r\n\r\n        for (let i = 0; i < qty; i++) {\r\n          this.comandas.push({\r\n            product: product.pid,\r\n            ingredientes: this.ingredientes,\r\n            qty: 1,\r\n            nota: nota,\r\n            estado: 'pendiente'\r\n          });\r\n          \r\n        }\r\n        \r\n      }else{\r\n\r\n        this.comandas.push({\r\n          product: product.pid,\r\n          ingredientes: this.ingredientes,\r\n          qty: 1,\r\n          nota: nota,\r\n          estado: 'pendiente'\r\n        });\r\n\r\n      }\r\n\r\n    }\r\n\r\n    // GUARDAR LA INFORMACION DE LA COMANDA\r\n    this.mesa.comanda = this.comandas;    \r\n\r\n    this.mesasServices.updateMesa(this.mesa, this.mesaID)\r\n        .subscribe( (resp:{ok: boolean, mesa: any}) => { \r\n          \r\n          this.carrito = resp.mesa.carrito;\r\n          this.productUp = [];\r\n          this.comanda = [];\r\n          this.comandas = [];\r\n\r\n          this.comandas = resp.mesa.comanda;\r\n\r\n          for (let i = 0; i < resp.mesa.carrito.length; i++) {\r\n\r\n            this.productUp.push({\r\n              product: resp.mesa.carrito[i].product._id,\r\n              qty: resp.mesa.carrito[i].qty,\r\n              price: resp.mesa.carrito[i].price,\r\n              iva: resp.mesa.carrito[i].iva,\r\n              mayor: resp.mesa.carrito[i].mayor,\r\n            });\r\n            \r\n            this.comanda.push({\r\n              product:  resp.mesa.carrito[i].product.name,\r\n              comanda:  resp.mesa.carrito[i].product.comanda,\r\n              tipo:     resp.mesa.carrito[i].product.tipo,\r\n              qty:      resp.mesa.carrito[i].qty,\r\n              price:    resp.mesa.carrito[i].price\r\n            });\r\n                        \r\n          }\r\n          this.comandaTemp = this.comanda;\r\n\r\n          this.sumarTotales();\r\n\r\n          // this.cargarMesa(this.mesaID);\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n          \r\n\r\n    });\r\n          \r\n    }else{\r\n\r\n\r\n      let mayor = false;\r\n\r\n    if (this.clienteTemp) {\r\n      if (this.clienteTemp.mayoreo) {\r\n        precio = product.wholesale;\r\n      }\r\n    }\r\n\r\n    \r\n    if (newPrice) {\r\n      precio = (precio / (qty * 1000)) * 1000;\r\n    }\r\n\r\n    if(product.mayoreo > 0 && qty >= product.mayoreo){\r\n      precio = product.wholesale;\r\n      mayor = true;\r\n    }\r\n\r\n    this.inventarioNew = 0;\r\n    this.inventarioNewB = false;\r\n\r\n    if(this.comanda.length === 0){\r\n      this.mesa.fecha   = new Date(); \r\n    }\r\n    \r\n    const validarItem = this.productUp.findIndex( (resp) =>{      \r\n      if (resp.product === product.pid ) {\r\n        return true;\r\n      }else {\r\n        return false;\r\n      }\r\n    });\r\n    \r\n    let ivaP:number = 0;\r\n\r\n    if (product.tax) {\r\n      ivaP = Number(precio * qty) * Number(product.taxid?.valor / 100);\r\n    }\r\n\r\n    if ( validarItem === -1 ) {\r\n\r\n\r\n      // AGREGAMOS EL PRODUCTO\r\n      this.productUp.push({\r\n        product: product.pid,\r\n        qty,\r\n        price: precio,\r\n        iva: ivaP,\r\n        mayor\r\n      });\r\n\r\n      // AGREGAMOS A LA COMANDA\r\n      this.comanda.push({\r\n        product: product.name,\r\n        comanda: product.comanda,\r\n        tipo: product.tipo,\r\n        qty,  \r\n        price: precio\r\n      });\r\n\r\n      \r\n      this.inventarioNew = product.inventario - qty;\r\n      this.inventarioNewB = true;\r\n            \r\n\r\n    }else{\r\n      \r\n      let qtyTemp = this.productUp[validarItem].qty;\r\n      qtyTemp += Number(qty);\r\n\r\n      \r\n      let ivaTemp = this.productUp[validarItem].iva;\r\n      ivaTemp += Number(ivaP);\r\n      \r\n      this.productUp[validarItem].iva = ivaTemp;\r\n      this.productUp[validarItem].qty = qtyTemp;\r\n      this.comanda[validarItem].qty = qtyTemp;\r\n      \r\n      if (product.mayoreo > 0 &&  qtyTemp >= product.mayoreo) {\r\n        this.productUp[validarItem].price = product.wholesale;    \r\n        this.productUp[validarItem].mayor = true;  \r\n      }else{\r\n        this.productUp[validarItem].price = precio;\r\n        this.productUp[validarItem].mayor = false;  \r\n      }\r\n\r\n      this.inventarioNew = product.inventario - qtyTemp;\r\n      this.inventarioNewB = true;\r\n      \r\n      setTimeout( () => {\r\n        this.inventarioNewB = false;        \r\n      }, 2500);\r\n      \r\n    }\r\n    \r\n    this.mesa.carrito =  this.productUp;\r\n\r\n    // COMANDA NUEVA\r\n    this.ingredientes = [];\r\n    \r\n    if (this.mesa.img === 'mesa.svg') {\r\n      \r\n      // AGREGAR LOS INGREDIENTES\r\n      for (let i = 0; i < product.kit.length; i++) {\r\n        \r\n        this.ingredientes.push({\r\n\r\n          name: product.kit[i].product.name,\r\n          qty: product.kit[i].qty,\r\n          status: true\r\n\r\n        });\r\n        \r\n      }\r\n      \r\n      if (qty > 1) {\r\n\r\n        for (let i = 0; i < qty; i++) {\r\n          this.comandas.push({\r\n            product: product.pid,\r\n            ingredientes: this.ingredientes,\r\n            qty: 1,\r\n            nota: nota,\r\n            estado: 'pendiente'\r\n          });\r\n          \r\n        }\r\n        \r\n      }else{\r\n\r\n        this.comandas.push({\r\n          product: product.pid,\r\n          ingredientes: this.ingredientes,\r\n          qty: 1,\r\n          nota: nota,\r\n          estado: 'pendiente'\r\n        });\r\n\r\n      }\r\n\r\n    }\r\n\r\n    // GUARDAR LA INFORMACION DE LA COMANDA\r\n    this.mesa.comanda = this.comandas;    \r\n\r\n    this.mesasServices.updateMesa(this.mesa, this.mesaID)\r\n        .subscribe( (resp:{ok: boolean, mesa: any}) => { \r\n          \r\n          this.carrito = resp.mesa.carrito;\r\n          this.productUp = [];\r\n          this.comanda = [];\r\n          this.comandas = [];\r\n\r\n          this.comandas = resp.mesa.comanda;\r\n\r\n          for (let i = 0; i < resp.mesa.carrito.length; i++) {\r\n\r\n            this.productUp.push({\r\n              product: resp.mesa.carrito[i].product._id,\r\n              qty: resp.mesa.carrito[i].qty,\r\n              price: resp.mesa.carrito[i].price,\r\n              iva: resp.mesa.carrito[i].iva,\r\n              mayor: resp.mesa.carrito[i].mayor,\r\n            });\r\n            \r\n            this.comanda.push({\r\n              product:  resp.mesa.carrito[i].product.name,\r\n              comanda:  resp.mesa.carrito[i].product.comanda,\r\n              tipo:     resp.mesa.carrito[i].product.tipo,\r\n              qty:      resp.mesa.carrito[i].qty,\r\n              price:    resp.mesa.carrito[i].price\r\n            });\r\n                        \r\n          }\r\n          this.comandaTemp = this.comanda;\r\n\r\n          this.sumarTotales();\r\n\r\n          // this.cargarMesa(this.mesaID);\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n    }\r\n\r\n    \r\n    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  ELIMINAR INGREDIENTES\r\n  ==================================================================== */\r\n  eliminarIngredientes(ingrediente: string, y: number ){\r\n\r\n    // FOR \r\n    for (let i = 0; i < this.comandas.length; i++) {\r\n      \r\n      this.comandas[i].ingredientes.findIndex( (resp) =>{ \r\n        \r\n        if (this.comandas[i].ingredientes.length < 2) {\r\n          Swal.fire('Atencion', 'No se pueden eliminar todos los ingredientes', 'info');\r\n          return;\r\n        }\r\n        \r\n        if (resp._id === ingrediente ) {\r\n          \r\n          // this.comandas[i].ingredientes.splice(y, 1);\r\n          \r\n          if (this.comandas[i].ingredientes[y].status === true) {            \r\n            this.comandas[i].ingredientes[y].status = false;\r\n          }else {\r\n            this.comandas[i].ingredientes[y].status = true;\r\n          }\r\n\r\n          return true;\r\n        }else {\r\n          return false;\r\n        }\r\n      });\r\n      \r\n    };\r\n    // FOR \r\n\r\n    // ACTUALZAR COMANDA\r\n    this.mesa.comanda = this.comandas;\r\n    this.comandas = [];\r\n\r\n    this.mesasServices.updateMesa(this.mesa, this.mesaID)\r\n        .subscribe( (resp:{ok: boolean, mesa: any}) => {\r\n\r\n          this.carrito = resp.mesa.carrito;\r\n          this.comandas = resp.mesa.comanda;\r\n          this.productUp = [];\r\n          this.comanda = [];\r\n          \r\n          for (let i = 0; i < resp.mesa.carrito.length; i++) {\r\n\r\n            this.productUp.push({\r\n              product: resp.mesa.carrito[i].product._id,\r\n              qty: resp.mesa.carrito[i].qty,\r\n              price: resp.mesa.carrito[i].price,\r\n              iva: resp.mesa.carrito[i].iva,\r\n              mayor: resp.mesa.carrito[i].mayor\r\n            });\r\n            \r\n            this.comanda.push({\r\n              product: resp.mesa.carrito[i].product.name,\r\n              comanda: resp.mesa.carrito[i].product.comanda,\r\n              tipo: resp.mesa.carrito[i].product.tipo,\r\n              qty: resp.mesa.carrito[i].qty,\r\n              price: resp.mesa.carrito[i].price\r\n            });\r\n                        \r\n          }\r\n\r\n          this.comandaTemp = this.comanda;\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  ELIMINAR PRODUCTO DEL CARRITO CARRITO\r\n  ==================================================================== */\r\n  eliminarProductoCarrito( i: number, product: any ){\r\n\r\n    Swal.fire({\r\n      title: 'Estas Seguro?',\r\n      text: \"De eliminar este producto del carrito!\",\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: 'Si, eliminar!'\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n\r\n        this.productUp.splice(i, 1);\r\n        this.comanda.splice(i, 1);\r\n\r\n        // MODIFICAR COMANDAS\r\n        let comandasTemp = [];\r\n        this.comandas.map( (item:any) => {          \r\n          if (item.product._id !== product._id) {            \r\n            comandasTemp.push(item);            \r\n          }\r\n        });\r\n        this.comandas = comandasTemp;\r\n        // MODIFICAR COMANDAS\r\n       \r\n        this.mesa.comanda = this.comandas;\r\n        this.mesa.carrito =  this.productUp;\r\n\r\n        if(this.comanda.length === 0){\r\n          delete this.mesa.comanda;\r\n        }\r\n\r\n        this.mesasServices.updateMesa(this.mesa, this.mesaID)\r\n            .subscribe( (resp:{ok: boolean, mesa: any}) => {\r\n\r\n              this.carrito = resp.mesa.carrito;\r\n              this.productUp = [];\r\n              this.comanda = [];\r\n              \r\n              for (let i = 0; i < resp.mesa.carrito.length; i++) {\r\n\r\n                this.productUp.push({\r\n                  product: resp.mesa.carrito[i].product._id,\r\n                  qty: resp.mesa.carrito[i].qty,\r\n                  price: resp.mesa.carrito[i].price,\r\n                  iva: resp.mesa.carrito[i].iva,\r\n                  mayor: resp.mesa.carrito[i].mayor\r\n                });\r\n                \r\n                this.comanda.push({\r\n                  product: resp.mesa.carrito[i].product.name,\r\n                  comanda: resp.mesa.carrito[i].product.comanda,\r\n                  tipo: resp.mesa.carrito[i].product.tipo,\r\n                  qty: resp.mesa.carrito[i].qty,\r\n                  price: resp.mesa.carrito[i].price\r\n                });\r\n                            \r\n              }\r\n\r\n              this.comandaTemp = this.comanda;\r\n\r\n              this.sumarTotales();\r\n\r\n              // this.cargarMesa(this.mesaID);\r\n\r\n            }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n        \r\n\r\n        Swal.fire('Eliminado!', 'El producto se a eliminado con exito.', 'success');\r\n      }\r\n    })   \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CONVERTIR AL MAYOREO LOS PRODUCTOS\r\n  ==================================================================== */\r\n  mayoreoChange(){\r\n\r\n    this.productUp = [];\r\n    \r\n    this.carrito.map((it) => {\r\n      \r\n      if (!it.mayor) {\r\n        it.price = it.product.wholesale;\r\n        it.mayor = true;\r\n      }\r\n\r\n      this.productUp.push({\r\n        qty: it.qty,\r\n        product: it.product._id,\r\n        price: it.price,\r\n        mayor: it.mayor\r\n      })\r\n      \r\n    });\r\n\r\n    this.mesa.carrito = this.productUp;\r\n    \r\n    this.mesasServices.updateMesa(this.mesa, this.mesaID)\r\n        .subscribe( (resp:{ok: boolean, mesa: any}) => { \r\n          \r\n          this.carrito = resp.mesa.carrito;\r\n          this.mesa.carrito = resp.mesa.carrito;\r\n\r\n          this.productUp = [];\r\n          this.comanda = [];\r\n          this.comandas = [];\r\n\r\n          this.comandas = resp.mesa.comanda;\r\n\r\n          for (let i = 0; i < resp.mesa.carrito.length; i++) {\r\n\r\n            this.productUp.push({\r\n              product: resp.mesa.carrito[i].product._id,\r\n              qty: resp.mesa.carrito[i].qty,\r\n              price: resp.mesa.carrito[i].price,\r\n              iva: resp.mesa.carrito[i].iva,\r\n              mayor: resp.mesa.carrito[i].mayor\r\n            });\r\n            \r\n            this.comanda.push({\r\n              product:  resp.mesa.carrito[i].product.name,\r\n              comanda:  resp.mesa.carrito[i].product.comanda,\r\n              tipo:     resp.mesa.carrito[i].product.tipo,\r\n              qty:      resp.mesa.carrito[i].qty,\r\n              price:    resp.mesa.carrito[i].price\r\n            });\r\n                        \r\n          }\r\n          this.comandaTemp = this.comanda;          \r\n\r\n          this.inputChange = false;\r\n\r\n          this.sumarTotales();          \r\n\r\n          // this.cargarMesa(this.mesaID);\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n    \r\n    \r\n\r\n  }\r\n  /** ================================================================\r\n   *  ACTIVE DATAFON\r\n  ==================================================================== */\r\n  activeDatafon(datafon: boolean){   \r\n\r\n    this.sumarTotales(datafon)\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CAMBIAR PROPINA\r\n  ==================================================================== */\r\n  changeTip(tip: any){\r\n    \r\n    tip = Number(tip);\r\n\r\n    if (tip >= 0) {\r\n\r\n      this.total = 0;\r\n      this.base = 0;\r\n      this.iva = 0;\r\n      this.totalCosto = 0;\r\n      this.totalTip = 0;\r\n\r\n      this.impuestos.map( (impuesto) => {\r\n        impuesto.total = 0;\r\n      });\r\n\r\n      if (this.carrito.length > 0) {\r\n        \r\n        for (let i = 0; i < this.carrito.length; i++) {\r\n\r\n          this.total += (this.carrito[i].price * this.carrito[i].qty);\r\n          this.base += (this.carrito[i].price * this.carrito[i].qty);\r\n          this.totalCosto += (this.carrito[i].product.cost * this.carrito[i].qty);\r\n\r\n          if (this.empresa?.decimal === false) {          \r\n            this.total = Math.round(this.total);\r\n            this.base = Math.round(this.base);\r\n            this.totalCosto = Math.round(this.totalCosto);\r\n          }\r\n          \r\n\r\n          // SUMAR IMPUESTOS\r\n          if (this.empresa?.impuesto!) {          \r\n            this.impuestos.map( (impuesto) => {            \r\n              \r\n              if (impuesto.taxid === this.carrito[i].product.taxid) {\r\n                impuesto.total += this.carrito[i].iva;\r\n              }\r\n\r\n            })\r\n\r\n            this.iva += Math.round(this.carrito[i].iva);         \r\n            \r\n          }\r\n          // SUMAR IMPUESTOS\r\n          \r\n        }\r\n\r\n        if (this.mesa.descuento) {\r\n          this.total = this.total - Math.round((this.total * this.mesa.porcentaje)/100);\r\n        }\r\n\r\n        if (this.empresa?.impuesto) {\r\n          this.total += this.iva;\r\n        }\r\n\r\n        if (this.empresa.tip) {\r\n          this.totalTip = tip;        \r\n          this.tipIn.nativeElement.value = tip;        \r\n          this.total += tip;\r\n        }\r\n\r\n      }else {\r\n        this.productUp = [];\r\n        this.comanda = [];\r\n        this.comandas = [];\r\n\r\n        this.impuestos.map( (impuesto) => {\r\n          impuesto.total = 0;\r\n        });\r\n\r\n      }\r\n      \r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  SUMAR TOTALES\r\n  ==================================================================== */\r\n  public totalCosto:number = 0;\r\n  public totalItems:number = 0;\r\n  public totalTip:number = 0;\r\n  public checkDatafon: boolean = false;\r\n  public datafon:number = 0;\r\n  public iva:number = 0;\r\n  public base:number = 0;\r\n  sumarTotales( datafon: boolean = false ){\r\n    \r\n    this.total = 0;\r\n    this.base = 0;\r\n    this.iva = 0;\r\n    this.datafon = 0;\r\n    this.totalCosto = 0;\r\n    this.totalTip = 0;\r\n    this.totalItems = 0;\r\n\r\n    this.impuestos.map( (impuesto) => {\r\n      impuesto.total = 0;\r\n    });\r\n\r\n    if (this.carrito.length > 0) {\r\n      \r\n      for (let i = 0; i < this.carrito.length; i++) {\r\n\r\n        this.total += (this.carrito[i].price * this.carrito[i].qty);\r\n        this.base += (this.carrito[i].price * this.carrito[i].qty);\r\n        this.totalCosto += (this.carrito[i].product.cost * this.carrito[i].qty);\r\n\r\n        if (this.empresa?.decimal === false) {          \r\n          this.total = Math.round(this.total);\r\n          this.base = Math.round(this.base);\r\n          this.totalCosto = Math.round(this.totalCosto);\r\n        }\r\n        \r\n\r\n        // SUMAR IMPUESTOS\r\n        if (this.empresa?.impuesto!) {          \r\n          this.impuestos.map( (impuesto) => {            \r\n            \r\n            if (impuesto.taxid === this.carrito[i].product.taxid) {\r\n              impuesto.total += this.carrito[i].iva;\r\n            }\r\n\r\n          })\r\n\r\n          this.iva += Math.round(this.carrito[i].iva);         \r\n          \r\n        }\r\n        // SUMAR IMPUESTOS\r\n\r\n        // SUMAR ITEMS\r\n        this.totalItems += this.carrito[i].qty;\r\n        \r\n      }\r\n\r\n      if (this.mesa.descuento) {\r\n        this.total = this.total - Math.round((this.total * this.mesa.porcentaje)/100);\r\n      }\r\n\r\n      if (this.empresa?.impuesto) {\r\n        this.total += this.iva;\r\n      }\r\n\r\n      if (this.empresa?.tip) {\r\n        this.totalTip = (this.total * this.empresa.propina) / 100;        \r\n        this.tipIn.nativeElement.value = this.totalTip;        \r\n        this.total += this.totalTip;\r\n      }\r\n\r\n      if (datafon) {\r\n        this.datafon = this.redondearCent((this.total * this.empresa.comidatafon) / 100) ;\r\n        this.total += this.datafon;\r\n      }else{\r\n        this.datafon = 0;\r\n        this.total -= this.datafon;\r\n      }\r\n\r\n      this.total = this.redondearCent(this.total);\r\n      this.base = this.redondearCent(this.base);\r\n      this.iva = this.redondearCent(this.iva);\r\n      this.totalCosto = this.redondearCent(this.totalCosto);\r\n      this.totalTip = this.redondearCent(this.totalTip);\r\n\r\n    }else {\r\n      this.productUp = [];\r\n      this.comanda = [];\r\n      this.comandas = [];\r\n\r\n      this.impuestos.map( (impuesto) => {\r\n        impuesto.total = 0;\r\n      });\r\n\r\n      this.totalItems = 0;\r\n\r\n    }\r\n\r\n    this.focusMonto();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  REDONDEAR CENTESIMA\r\n  ==================================================================== */\r\n  redondearCent(monto: number){\r\n\r\n    return monto;\r\n    // return Math.round(monto / 100) * 100;\r\n    // return monto;\r\n  }\r\n\r\n  /** ============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * CLIENTES - CLIENTES - CLIENTES - CLIENTES  \r\n  ==================================================================== */\r\n  public listaClientes: Client[] = [];\r\n  public listaClientesTemp: Client[] = [];\r\n  public totalClientes: number = 0;\r\n  public clienteTemp: Client = {\r\n    name : '',\r\n    cedula: '',\r\n    phone: '',\r\n    email: '',\r\n    address: '',\r\n    city: ''\r\n  };\r\n\r\n  /** ================================================================\r\n   *  BUSCAR CLIENTE\r\n  ==================================================================== */\r\n  public sinResultadosClientes: boolean = false;\r\n  public cargandoCliente: boolean = true;\r\n\r\n  buscarCliente(termino: string){\r\n    \r\n    this.cargandoCliente = false;\r\n    this.sinResultadosClientes = false;\r\n\r\n    if (termino.length === 0) {\r\n      this.listaClientes = this.listaClientesTemp;\r\n      this.sinResultadosClientes = true;\r\n      this.cargandoCliente = true;\r\n      return;\r\n    }else{\r\n    \r\n      this.searchService.search('clients', termino)\r\n          .subscribe(({total, resultados}) => {   \r\n            \r\n          this.cargandoCliente = false;\r\n          \r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (resultados.length === 0) {\r\n            this.listaClientes = [];\r\n            this.totalClientes = 0;\r\n            this.sinResultadosClientes = true;\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          \r\n          this.listaClientes = resultados;\r\n          this.totalClientes = total;\r\n\r\n        });\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  SELECCIONAR CLIENTE searchClient\r\n  ==================================================================== */\r\n  @ViewChild('searchClient') searchClient: ElementRef;\r\n  seleccionarCliente(cliente: Client){\r\n    \r\n    this.clienteTemp = cliente;\r\n\r\n    this.searchClient.nativeElement.value = '';\r\n    this.listaClientes = [];\r\n    this.totalClientes = 0;\r\n    this.cargandoCliente = true;\r\n    this.sinResultadosClientes = false;\r\n\r\n    this.mesa.cliente = this.clienteTemp.cid\r\n\r\n    this.mesasServices.updateMesa(this.mesa, this.mesaID)\r\n        .subscribe( (resp:{ok: boolean, mesa: Mesa}) => {       \r\n          \r\n          this.cargarMesa(this.mesaID);\r\n          \r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });    \r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREAR CLIENTE\r\n  ==================================================================== */\r\n  @ViewChild('btnCreateClient') btnCreateClient: ElementRef<any>;\r\n  public formSubmitted: boolean = false;\r\n  public newClientForm = this.fb.group({\r\n    party_type: ['PERSONA_NATURAL', [Validators.required]],\r\n    tax_level_code: ['NO_RESPONSABLE_DE_IVA', [Validators.required]],\r\n    party_identification_type: ['CC', [Validators.required]],\r\n    company_name: '',\r\n    first_name: '',\r\n    family_name: '',\r\n    department: '',\r\n    address_line: '',\r\n    regimen: ['SIMPLE',],\r\n    party_identification: '',\r\n    codigodepartamento: '',\r\n    codigociudad: '',\r\n    sendemail: false,\r\n    // OLD\r\n    name: '',\r\n    cedula: ['', [Validators.required, Validators.minLength(6)]],\r\n    email: [''],\r\n    phone: [''],\r\n    city: '',\r\n    address: ['']\r\n  });\r\n  \r\n\r\n  async crearCliente(){\r\n\r\n    // OBTENER CODIGO DEL DEPARTAMENTO Y CIUDAD\r\n    if (this.newClientForm.value.city === '' || !this.newClientForm.value.city) {\r\n      \r\n      let ciudaQ = await this.cities.find( city =>  {\r\n        if ( this.dataico.city === city.codigo && this.dataico.department === city['codigo departamento']) {\r\n          return city\r\n        }\r\n      });\r\n      \r\n      this.newClientForm.value.codigodepartamento  = ciudaQ['codigo departamento'];\r\n      this.newClientForm.value.codigociudad  = ciudaQ['codigo'];\r\n      this.newClientForm.value.department  = ciudaQ.departamento;\r\n      this.newClientForm.value.city  = ciudaQ.ciudad;\r\n    \r\n    }else{\r\n\r\n      let ciudaQ = await this.cities.find( city =>  {\r\n        if ( this.newClientForm.value.city === city.ciudad && this.newClientForm.value.department === city.departamento) {\r\n          return city\r\n        }\r\n      });\r\n      \r\n      this.newClientForm.value.codigodepartamento  = ciudaQ['codigo departamento'];\r\n      this.newClientForm.value.codigociudad  = ciudaQ['codigo'];\r\n\r\n    }\r\n\r\n    this.formSubmitted = true;\r\n\r\n    if (this.newClientForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    if (this.newClientForm.value.party_type === 'PERSONA_NATURAL') {      \r\n      this.newClientForm.value.name = `${this.newClientForm.value.first_name} ${this.newClientForm.value.family_name}`\r\n    }else{\r\n      this.newClientForm.value.name = this.newClientForm.value.company_name;\r\n    }\r\n\r\n    this.newClientForm.value.party_identification = this.newClientForm.value.cedula;\r\n\r\n    this.clientService.createClient(this.newClientForm.value)\r\n        .subscribe(({client}) => {\r\n\r\n          Swal.fire('Estupendo', 'Se ha creado el cliente exitosamente!', 'success');\r\n\r\n          this.formSubmitted = false;\r\n          this.newClientForm.reset({\r\n            party_type: 'PERSONA_NATURAL',\r\n            tax_level_code: 'NO_RESPONSABLE_DE_IVA',\r\n            party_identification_type: 'CC',\r\n            regimen: 'SIMPLE',\r\n          });\r\n          \r\n          this.seleccionarCliente(client);\r\n          \r\n        }, (err) =>{\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CAMPO VALIDO\r\n  ==================================================================== */\r\n  campoValido(campo: string): boolean{\r\n\r\n    if ( this.newClientForm.get(campo).invalid &&  this.formSubmitted) {      \r\n      return true;      \r\n    } else{\r\n            \r\n      return false;\r\n    }\r\n  \r\n  }\r\n\r\n  /** ============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   *  PRODUCTOS - PRODUCTOS - PRODUCTOS - PRODUCTOS\r\n  ==================================================================== */\r\n  @ViewChild('searchProduct') searchProduct: ElementRef;\r\n  public listaProductos: Product[] = [];\r\n  public listaProductosTemp: Product[] = [];\r\n  public totalProductos: number = 0;\r\n\r\n  public resultado: number = 0;\r\n  public desde: number = 0;\r\n  public cargando: boolean = true;\r\n  public sinResultados: boolean = true;\r\n  public btnAtras: string = '';\r\n  public btnAdelante: string = '';\r\n\r\n  /** ================================================================\r\n   *  CARGAR PRODUCTOS POR CATEGORIA\r\n  ==================================================================== */\r\n  cargarProductosDepartamento(department: string){\r\n\r\n    \r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n    this.productService.cargarProductoDepartamento(department)\r\n        .subscribe(({total, products}) => {\r\n            \r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (products.length === 0) {\r\n            this.sinResultados = false;\r\n            this.cargando = false;\r\n            this.listaProductos = [];\r\n            this.resultado = 0;\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n        \r\n          this.totalProductos = total;\r\n          this.listaProductos = products;\r\n          this.listaProductosTemp = products;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n          \r\n\r\n          // BOTONOS DE ADELANTE Y ATRAS          \r\n          if (this.desde === 0 && this.totalProductos > 10) {\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = '';\r\n          }else if(this.desde === 0 && this.totalProductos < 11){\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n          }else if(this.desde > this.listaProductos.length){\r\n            this.btnAtras = '';\r\n            this.btnAdelante = 'disabled';\r\n          }else if((this.desde + 10) >= this.totalProductos){\r\n            this.btnAtras = '';\r\n            this.btnAdelante = 'disabled';\r\n          }else{\r\n            this.btnAtras = '';\r\n            this.btnAdelante = '';\r\n          }   \r\n          // BOTONOS DE ADELANTE Y ATRAS       \r\n            \r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CARGAR PRODUCTOS\r\n  ==================================================================== */\r\n  public endPoint: string = `?desde=${this.desde}&status=true`;\r\n  cargarProductos(){\r\n   \r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n    this.productService.cargarProductos(this.endPoint)\r\n        .subscribe(({total, products}) => {\r\n            \r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (products.length === 0) {\r\n            this.sinResultados = false;\r\n            this.cargando = false;\r\n            this.listaProductos = [];\r\n            this.resultado = 0;\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n        \r\n          this.totalProductos = total;\r\n          this.listaProductos = products;\r\n          this.listaProductosTemp = products;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n          \r\n\r\n          // BOTONOS DE ADELANTE Y ATRAS          \r\n          if (this.desde === 0 && this.totalProductos > 10) {\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = '';\r\n          }else if(this.desde === 0 && this.totalProductos < 11){\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n          }else if(this.desde > this.listaProductos.length){\r\n            this.btnAtras = '';\r\n            this.btnAdelante = 'disabled';\r\n          }else if((this.desde + 10) >= this.totalProductos){\r\n            this.btnAtras = '';\r\n            this.btnAdelante = 'disabled';\r\n          }else{\r\n            this.btnAtras = '';\r\n            this.btnAdelante = '';\r\n          }   \r\n          // BOTONOS DE ADELANTE Y ATRAS       \r\n            \r\n        });\r\n\r\n  }\r\n\r\n\r\n  /** ================================================================\r\n   *  BUSCAR PRODUCTOS CODE NEW\r\n  ==================================================================== */\r\n  @ ViewChild('cantidadCo') cantidadCo: ElementRef;\r\n  @ ViewChild('precioCo') precioCo: ElementRef;\r\n  \r\n  buscarProductoCode(code: string){\r\n\r\n    let codigo = '';\r\n    let cantidad:any = 1;    \r\n\r\n    if (code.includes('+')) {\r\n      \r\n      let newCode = code.split('+');\r\n\r\n      codigo = newCode[1];\r\n      cantidad = Number(newCode[0]);\r\n\r\n    }else{\r\n\r\n      // COMPROBAR SI ES CODIGO DE BARRA CON PESO O PRECIO\r\n      let digitos = this.empresa.basculacode.length;\r\n      let digCode = digitos + 3;\r\n      let totalCode = code.length - 1;\r\n      \r\n\r\n      if (code.slice(0,digitos) === this.empresa.basculacode) {\r\n        codigo = code.slice(digitos, digCode);        \r\n        \r\n        if(this.empresa.basculatype === 'peso'){\r\n\r\n          let cant = Number(code.slice(digCode , totalCode))/1000;\r\n\r\n          cantidad = cant.toFixed(3);\r\n\r\n        }\r\n\r\n      }else{\r\n        codigo = code;\r\n      }\r\n    }\r\n\r\n    this.qtySelect = cantidad;\r\n\r\n    this.productService.cargarProductoCodigo(Number(codigo).toString())\r\n        .subscribe( (product) => {\r\n          \r\n\r\n          this.productSelected = product;\r\n          this.priceProductSelected = product.price;\r\n          setTimeout( ()=> {\r\n\r\n            this.precioCo.nativeElement.focus();\r\n          }, 300 )\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n          \r\n        }) \r\n    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  BUSCAR PRODUCTOS\r\n  ==================================================================== */\r\n  buscarProducto( termino: string ){\r\n    \r\n    if (termino.length < 3) {\r\n      this.listaProductos = this.listaProductosTemp;\r\n      return;\r\n    }else{\r\n      \r\n      const status = true;\r\n      this.searchService.search('products', termino)\r\n          .subscribe(({total, resultados}) => {\r\n              \r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            if (resultados.length === 0) {\r\n              this.listaProductos = [];\r\n              this.totalProductos = 0;\r\n              return;                \r\n            }\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n\r\n            this.listaProductos = resultados;\r\n            this.totalProductos = total;\r\n  \r\n          });\r\n\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD BASCULA\r\n  ==================================================================== */\r\n  loadBascula(i: any, product: Product){\r\n\r\n    if (this.empresa.bascula) {        \r\n\r\n      this.basculaService.loadPeso(this.basculaT, this.puertoBascula, this.empresa.basculakg)\r\n          .subscribe( resp => {\r\n\r\n            this.changeCant(resp, product);                \r\n\r\n          });        \r\n    }\r\n    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  SELECCIONAR PRODUCTO\r\n  ==================================================================== */\r\n  @ViewChild('cantidad') cantidad: ElementRef;\r\n  public productTemp: Product = {\r\n    code: '',\r\n    name: '',\r\n    type: '',\r\n    cost: 0,\r\n    gain: 0,\r\n    price: 0,\r\n    wholesale: 0,\r\n    getImage: ''\r\n  };\r\n\r\n  seleccionarProducto( producto: Product ){\r\n\r\n    if (producto.type !== 'Paquete') {\r\n      if (producto.out) {\r\n        Swal.fire('Error', 'El producto esta agotado. Porfavor, verifica el stock de este prodcuto.', 'error');             \r\n        return;\r\n      }else{\r\n        if (producto.low) {\r\n          Swal.fire({\r\n            icon: 'warning',\r\n            title: 'Pocas unidades de este productos, verificar inventario',\r\n            showConfirmButton: true,\r\n            timer: 1500\r\n          });\r\n        }\r\n      }             \r\n    }\r\n\r\n    this.searchProduct.nativeElement.value = '';\r\n\r\n    this.listaProductos = [];\r\n    this.totalProductos = 0;\r\n\r\n    this.productTemp = producto;\r\n\r\n    // SI ES GRANEL\r\n    let qty:number = 1;\r\n    if (producto.type === 'Granel') {\r\n\r\n      if (this.empresa.bascula) {        \r\n\r\n        this.basculaService.loadPeso(this.basculaT, this.puertoBascula, this.empresa.basculakg)\r\n            .subscribe( resp => {\r\n\r\n              qty = resp;\r\n              this.cantidad.nativeElement.value = qty;\r\n              \r\n              return;                    \r\n\r\n            });        \r\n      }\r\n      \r\n    }else if(producto.type === 'Paquete' && producto.bascula ){\r\n\r\n      this.basculaService.loadPeso(this.basculaT, this.puertoBascula, this.empresa.basculakg)\r\n            .subscribe( resp => {\r\n\r\n              qty = resp;\r\n              this.cantidad.nativeElement.value = qty;\r\n              \r\n              return;                    \r\n\r\n            }); \r\n\r\n    }else{      \r\n      this.cantidad.nativeElement.value = qty;\r\n    }\r\n    // SI ES GRANEL\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  ENVIAR PRODUCTO AL CARRITO TEMPORAL POR EL BUSCADOR\r\n  ==================================================================== */\r\n  @ViewChild('precio') newPrice: ElementRef;\r\n  @ViewChild('precioM') newPrice2: ElementRef;\r\n  evniarAlCarrito( qty:number, mayoreo: boolean, code: string, change: boolean = false){\r\n\r\n    if (code === '' || this.productTemp.price === 0) {\r\n      Swal.fire('Atención', 'No has seleccionado ningun producto', 'info');\r\n      return;\r\n    }\r\n\r\n    if (Number(qty) === 0 || qty < 0) {\r\n      Swal.fire('Atención', 'No has seleccionado una cantidad validad', 'info');\r\n      return;\r\n    }\r\n\r\n    let precio: number;\r\n\r\n    if (change) {\r\n\r\n      if (!mayoreo) {\r\n        precio = this.newPrice.nativeElement.value;\r\n      }else{\r\n        precio = this.newPrice2.nativeElement.value;\r\n      }\r\n      \r\n    }else{\r\n\r\n      if (!mayoreo) {\r\n        precio = this.productTemp.price;\r\n      }else{\r\n        precio = this.productTemp.wholesale;\r\n      }\r\n    }\r\n    \r\n    // GUARDAR AL CARRITO\r\n    this.carritoTemp(this.productTemp, qty, precio);\r\n    // GUARDAR AL CARRITO\r\n\r\n    this.productTemp = {\r\n      code: '',\r\n      name: '',\r\n      type: '',\r\n      cost: 0,\r\n      gain: 0,\r\n      price: 0,\r\n      wholesale: 0,\r\n      getImage: ''\r\n    };\r\n\r\n    this.searchProduct.nativeElement.onFocus = true;\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  COMPROBAR PRECIOS\r\n  ==================================================================== */\r\n  @ViewChild('comprobarPrecio') comprobarPrecio: ElementRef;\r\n  public productoCom: Product;\r\n  comprobrarPrecio(code: string){\r\n\r\n    this.productService.cargarProductoCodigo(code)\r\n        .subscribe((producto) => {\r\n\r\n          this.productoCom = producto;\r\n\r\n          this.comprobarPrecio.nativeElement.value = '';\r\n          this.comprobarPrecio.nativeElement.focus();          \r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n  }\r\n\r\n  /** ============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * INVOICE - INVOICE - INVOICE - INVOICE  \r\n  ==================================================================== */\r\n  \r\n  public payments: _payments[] = [];\r\n  public credit: boolean = false;\r\n\r\n  public invoiceForm = this.fb.group({\r\n    amount: ['', [Validators.required, Validators.min(this.total)]],\r\n    cost: [''],\r\n    client: ['', [Validators.required]],\r\n    type: ['efectivo', [Validators.required]],\r\n    payments: [''],\r\n    mesero: [0],\r\n    mesa: [''],\r\n    products: [''],\r\n    credito: [this.credit],\r\n    fechaCredito: [''],\r\n    turno: [''],\r\n    iva: [''],\r\n    base:[''],\r\n    pago: [0],\r\n    vueltos: [0],\r\n    nota: [''],\r\n    apartado: false,\r\n    porcentaje: 0,\r\n    fecha: new Date(),\r\n    descuento: false,\r\n    marca: false,\r\n    tip: 0,\r\n    datafon: 0,\r\n    electronica: false,\r\n    placa: '',\r\n    images: [],\r\n  })\r\n\r\n  /** ================================================================\r\n   *  AGREGAR SALDO\r\n  ==================================================================== */\r\n  @ViewChild('montoAddd') montoAddd: ElementRef;\r\n  @ViewChild('descripcionAddd') descripcionAddd: ElementRef;\r\n  @ViewChildren('cantP') cantP: QueryList<any>;\r\n  public saldo: number = 0;\r\n  addSaldo(price: any, qty: any){\r\n\r\n    qty = Number(qty);\r\n    this.saldo += price*qty;   \r\n\r\n    this.montoAddd.nativeElement.value = this.saldo;   \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  AGREGAR METODO DE PAGO\r\n  ==================================================================== */\r\n  @ViewChild('descripcionAdd') descripcionAdd: ElementRef;\r\n  @ViewChild('montoAdd') montoAdd: ElementRef;\r\n  public vueltos: number = 0;\r\n  public pago: number = 0;\r\n  \r\n\r\n  focusMonto(){\r\n    this.montoAdd.nativeElement.value = this.total;  \r\n    // this.montoAdd.nativeElement.focus();\r\n  }\r\n\r\n  agregarPagos(type: string, amount:number, description:string = '', credito: boolean){\r\n    \r\n    // Setear a number\r\n    // amount = Number(amount);    \r\n\r\n    this.saldo = 0;\r\n    this.descripcionAddd.nativeElement.value = '';\r\n    this.montoAddd.nativeElement.value = '';\r\n\r\n    this.cantP.forEach( itt => {      \r\n      itt.nativeElement.value = '';      \r\n    })\r\n    \r\n\r\n    if (credito) {\r\n      this.credit = true;\r\n      // amount = this.total;\r\n    }else{\r\n      this.credit = false;\r\n    }\r\n\r\n    if (amount === 0 || amount < 1) {\r\n      Swal.fire('Atención', 'No has agregado un monto', 'info');\r\n      return;      \r\n    }\r\n\r\n    if(type === 'efectivo'){      \r\n      this.pago += amount;\r\n    }\r\n\r\n    let totales = Number( this.total - this.totalPagos );\r\n\r\n    // COMPROBAR SI EL MONTO ES MAYOR AL RESTANTE\r\n    if ( amount > totales) {\r\n\r\n      this.vueltos = (amount - totales);\r\n      amount = Number( this.total - this.totalPagos );\r\n      \r\n    }else{\r\n      amount = amount;\r\n      this.vueltos = (amount - totales);\r\n    }\r\n\r\n    this.payments.push({\r\n      type,\r\n      amount,\r\n      description\r\n    });\r\n\r\n    this.descripcionAdd.nativeElement.value = '';\r\n    this.montoAdd.nativeElement.value = '';\r\n\r\n    this.sumarPagos();\r\n  }\r\n  /** ================================================================\r\n   *   ELIMINAR METODO DE PAGO\r\n  ==================================================================== */\r\n  eliminarPagos( item: any ){\r\n\r\n    this.pago -= Number(item.amount);    \r\n    \r\n    const i = this.payments.indexOf(item);\r\n\r\n    if ( i !== -1 ) { this.payments.splice(i, 1); }\r\n\r\n    this.sumarPagos();\r\n\r\n    this.vueltos = (this.total - this.totalPagos);\r\n\r\n  }\r\n  /** ================================================================\r\n   *   LIMPIAR METODO DE PAGO\r\n  ==================================================================== */\r\n  limpiarPagos(tipo: string = ''){\r\n\r\n    if (tipo !== 'credito') {      \r\n      this.credit = false;     \r\n    }else{\r\n      this.credit = true;\r\n    }\r\n\r\n    this.payments = [];\r\n    this.vueltos = 0;\r\n    this.totalPagos = 0;\r\n    this.pago = 0;\r\n\r\n    this.sumarPagos();\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SUMAR METODO DE PAGO\r\n  ==================================================================== */\r\n  public totalPagos:number = 0;\r\n  sumarPagos(){\r\n    \r\n    this.totalPagos = 0;\r\n    if (this.payments.length > 0) {\r\n      \r\n      for (let i = 0; i < this.payments.length; i++) {\r\n        \r\n        this.totalPagos += Number( this.payments[i].amount );        \r\n      }\r\n\r\n    }else{\r\n      this.pago = 0;\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   AGREGAR DESCUENTO\r\n  ==================================================================== */\r\n  public formDescuento = this.fb.group({\r\n    descuento: [false],\r\n    porcentaje: [0, [Validators.min(0), Validators.required]]\r\n  });\r\n\r\n  descuentos(){\r\n\r\n    if (this.formDescuento.value.porcentaje <= 0) {\r\n      this.formDescuento.value.descuento = false;\r\n      this.formDescuento.value.porcentaje = 0;\r\n    }else{\r\n      this.formDescuento.value.descuento = true;\r\n    }    \r\n    \r\n    this.mesasServices.updateMesa(this.formDescuento.value, this.mesaID)\r\n    .subscribe( (resp:{mesa:Mesa, ok:boolean}) => {\r\n      \r\n        this.mesa.descuento = resp.mesa.descuento;\r\n        this.mesa.porcentaje = resp.mesa.porcentaje;\r\n        this.sumarTotales();\r\n               \r\n        Swal.fire('Estupendo', 'Se a actualizado correctamente', 'success');\r\n      \r\n      });\r\n\r\n\r\n  }\r\n  \r\n  /** ================================================================\r\n   *   CREAR FACTURA\r\n  ==================================================================== */\r\n  @ViewChild('tipIn') tipIn: ElementRef;\r\n  @ViewChild('datafIn') datafIn: ElementRef;\r\n  @ViewChild('datafonCheck') datafonCheck: ElementRef;\r\n  @ViewChild('fechCredito') fechCredito: ElementRef;\r\n  public factura: LoadInvoice;\r\n  public facturando: boolean = false;\r\n  \r\n  crearFactura( send_dian: boolean  = false){\r\n\r\n    if (send_dian) {\r\n      if (!this.empresa.electronica) {\r\n        Swal.fire('Atención', 'Debes de configurar la facturación electronica para crear facturas electronicas', 'info');\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.facturando = true;\r\n\r\n    if(!this.credit){\r\n\r\n      this.invoiceForm.value.apartado = false;\r\n\r\n      if (!this.empresa.paiddirect) {\r\n        if (this.totalPagos < this.total) {\r\n          this.facturando = false;\r\n          Swal.fire('Importante', 'El monto del pago es diferente al del total, porfavor verificar', 'warning');\r\n          return;      \r\n        }        \r\n      }\r\n\r\n      if (this.totalPagos === 0) {\r\n        this.agregarPagos('efectivo', this.total, '', false)\r\n      }else{\r\n        if (this.totalPagos < this.total) {\r\n          this.facturando = false;\r\n          Swal.fire('Importante', 'El monto del pago es diferente al del total, porfavor verificar', 'warning');\r\n          return;      \r\n        } \r\n      }\r\n\r\n    }else{\r\n      if (this.invoiceForm.value.fechaCredito === '') {\r\n        this.facturando = false;\r\n        Swal.fire('Importante', 'Debe de asignar una fecha de caducida a la factura a credito', 'warning');\r\n        return;      \r\n      }\r\n\r\n      if (!this.clienteTemp.cedula) {\r\n        this.facturando = false;\r\n        Swal.fire('Importante', 'Debe de asignar un cliente a la factura a credito', 'warning');\r\n        return;      \r\n      }\r\n    }\r\n\r\n    if (this.empresa?.datafon) {\r\n\r\n      this.datafon = 0\r\n      \r\n      if (this.datafonCheck.nativeElement.checked) {        \r\n        if (Number(this.datafIn.nativeElement.value) > 0) {\r\n          this.datafon = Number(this.datafIn.nativeElement.value);\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n    this.invoiceForm.setValue({\r\n      amount: this.total,\r\n      cost: this.totalCosto,\r\n      client: this.clienteTemp.cid || '',\r\n      type: this.invoiceForm.value.type,\r\n      payments: this.payments, \r\n      products: this.carrito,\r\n      credito: this.credit,\r\n      mesa: this.mesaID,\r\n      mesero: this.meserID,\r\n      fechaCredito: this.invoiceForm.value.fechaCredito,\r\n      turno: this.user.turno,\r\n      iva: this.iva,\r\n      base: this.base,\r\n      pago: this.pago,\r\n      vueltos: this.vueltos,\r\n      nota: this.invoiceForm.value.nota,\r\n      apartado: this.invoiceForm.value.apartado,\r\n      marca: this.invoiceForm.value.marca,\r\n      descuento: this.formDescuento.value.descuento,\r\n      porcentaje: this.formDescuento.value.porcentaje,\r\n      fecha: this.invoiceForm.value.fecha || new Date(),\r\n      tip: 0,\r\n      datafon: this.datafon,\r\n      electronica: send_dian,\r\n      placa: this.invoiceForm.value.placa,\r\n      images: this.mesa.images || [],\r\n    });\r\n\r\n    if(!this.clienteTemp){\r\n      this.invoiceForm.value.client = '';      \r\n    }\r\n\r\n    if (this.empresa.tip) {\r\n      this.invoiceForm.value.tip = Number(this.tipIn.nativeElement.value);\r\n      this.invoiceForm.value.amount = this.total - this.totalTip;\r\n    }\r\n\r\n    try {\r\n      \r\n      this.invoiceService.createInvoice(this.invoiceForm.value, this.user.turno)\r\n          .subscribe( (resp:{ok: boolean, invoice: LoadInvoice } ) => {\r\n                       \r\n            this.factura = resp.invoice;\r\n            this.factura.totalItems = this.totalItems;\r\n\r\n            this.invoiceForm.reset({\r\n              type: 'efectivo',\r\n              descuento: false,\r\n              marca: this.factura.marca,\r\n              porcentaje: 0\r\n            });\r\n\r\n            this.total = 0;\r\n            this.iva = 0;\r\n            this.base = 0;\r\n            this.totalItems = 0;\r\n            \r\n            this.carrito = [];\r\n            this.payments = [];\r\n            this.clienteTemp = {\r\n              name : '',\r\n              cedula: '',\r\n              phone: '',\r\n              email: '',\r\n              address: '',\r\n              city: '',\r\n              cid: '',\r\n              \r\n            };\r\n\r\n            // BORRAMOS LA FECHA CREDITO\r\n            this.credit = false;\r\n\r\n            // LIMPIAMOS LA MESA\r\n            this.mesa.carrito = [];\r\n            this.mesa.images = [];\r\n\r\n            // LIMPIAMOS LAS NOTAS DE LAS COMANDA\r\n            this.mesa.nota = [];\r\n            this.mesa.notaf = '';\r\n            this.mesa.placa = '';\r\n            this.mesa.descuento = false;\r\n            this.mesa.porcentaje = 0;\r\n\r\n            this.mesa.deleteClient = true;\r\n            \r\n            this.mesasServices.updateMesa(this.mesa, this.mesaID)\r\n              .subscribe( (resp:{ok: boolean, mesa: Mesa}) => {\r\n                \r\n                // TODO DESARROLLO NORMAL\r\n                if (this.empresa.electronica && send_dian) {\r\n                  \r\n                  this.electronicaService.postFacturaDataico(this.factura, this.dataico, this.impuestos)\r\n                      .subscribe( (resp: {status, invoice, ok}) => {\r\n\r\n                        this.facturando = false;\r\n                        \r\n                        // TODO: OLD \r\n                        if (resp.status === 500) {\r\n                          Swal.fire('Atención', 'No se pudo enviar la factura electronica a la DIAN, ve a la factura y vuelve a enviarla, si el problema persiste, ponte en contacto', 'warning');\r\n                          window.open(`./dashboard/factura/${ this.factura.iid }`, '_blank');\r\n                        }\r\n\r\n                        if (resp.invoice.cufe) {\r\n                          this.factura.cufe = resp.invoice.cufe;\r\n                          this.factura.number = resp.invoice.number;\r\n                        }\r\n\r\n                        if (this.empresa.printpos) {              \r\n                          // window.open(`./dashboard/ventas/print/${ resp.invoice.iid }`, '_blank');\r\n                          // IMPRIMIR FACTURA\r\n                          setTimeout( () => {\r\n                            this.printDiv2();                      \r\n                          },2000);\r\n                          \r\n                        }else{\r\n                          window.open(`./dashboard/factura/${ this.factura.iid }`, '_blank');\r\n                          setTimeout( () => {             \r\n                            window.location.reload();\r\n                          },1000);\r\n                        }\r\n                        \r\n                      }, (err) => {\r\n                        console.log(err);\r\n                        \r\n                      });\r\n                      // TODO: OLD\r\n                  \r\n                  \r\n                }else{\r\n\r\n                  if (this.empresa.printpos) {              \r\n                    // window.open(`./dashboard/ventas/print/${ resp.invoice.iid }`, '_blank');\r\n                    // IMPRIMIR FACTURA\r\n                    setTimeout( () => {\r\n                      this.printDiv2();                      \r\n                    },2000);\r\n                    \r\n                  }else{\r\n                    window.open(`./dashboard/factura/${ this.factura.iid }`, '_blank');\r\n                    setTimeout( () => {             \r\n                      window.location.reload();\r\n                    },1000);\r\n                  }\r\n                }\r\n\r\n                // TODO: PRUEBAS\r\n                // if (this.empresa.printpos) {              \r\n                //   // window.open(`./dashboard/ventas/print/${ resp.invoice.iid }`, '_blank');\r\n                //   // IMPRIMIR FACTURA\r\n                //   setTimeout( () => {\r\n                //     this.printDiv2();                      \r\n                //   },2000);\r\n                  \r\n                // }else{\r\n                //   window.open(`./dashboard/factura/${ this.factura.iid }`, '_blank');\r\n                //   setTimeout( () => {             \r\n                //     window.location.reload();\r\n                //   },1000);\r\n                // }\r\n\r\n              \r\n            }, (err) => { \r\n              this.facturando = false;\r\n              Swal.fire('Error', err.error.msg, 'error'); \r\n            });\r\n            \r\n\r\n\r\n\r\n          }, (err) => {\r\n            this.facturando = false;\r\n            Swal.fire('Error', err.error.msg, 'error');\r\n          });\r\n      \r\n    } catch (err) {      \r\n      this.facturando = false;   \r\n      Swal.fire('Error', err.error.msg, 'error');\r\n      \r\n    }    \r\n\r\n  }\r\n\r\n  /** ============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * CAJA - CAJA - CAJA - CAJA  \r\n  ==================================================================== */\r\n  public turno: LoadTurno;\r\n  cargarTurno(){\r\n\r\n    if (this.user.cerrada === false) {\r\n      \r\n      this.turnoService.getTurnoId(this.user.turno)\r\n          .subscribe( (turno) => {\r\n            this.turno = turno;\r\n            this.movimientos = turno.movements;                    \r\n          });\r\n    }\r\n\r\n  }\r\n  \r\n  /** ================================================================\r\n   *   REGISTRAR ENTRADAS Y SALIDAS\r\n  ==================================================================== */\r\n  @ViewChild('montoE') montoE: ElementRef;\r\n  @ViewChild('descriptionE') descriptionE: ElementRef;\r\n  @ViewChild('montoS') montoS: ElementRef;\r\n  @ViewChild('descriptionS') descriptionS: ElementRef;\r\n\r\n  public movimientos: _movements[] = [];\r\n  public sendMovimiento: boolean = false;\r\n  public movimiento: Entradas;\r\n\r\n  entradaSalida(type: string, descripcion: string, monto: number){\r\n\r\n    // COMPROBAR QUE NO VENGA VACIO\r\n    if ( descripcion === '' || monto === 0) {\r\n      Swal.fire('Error', 'Todos los campos son obligatorios', 'error');\r\n      return;      \r\n    }\r\n    // COMPROBAR QUE NO VENGA VACIO\r\n\r\n    this.sendMovimiento = true;\r\n    \r\n    // COMPROBAR EL TIPO SALIDA\r\n    if (type === 'salida') {\r\n      monto = monto * -1;            \r\n    }\r\n    // COMPROBAR EL TIPO SALIDA\r\n    \r\n    // AGREGAR EL MOVIMIENTO AL OBJECTO\r\n    this.movimientos.push({\r\n      type,\r\n      descripcion,\r\n      monto\r\n    });\r\n\r\n    this.turno.movements = this.movimientos;\r\n    // AGREGAR EL MOVIMIENTO AL OBJECTO\r\n    \r\n    // GUARDAR ACTUALIZAR EN LA BASE DE DATOS\r\n    this.turnoService.updateTurno(this.turno, this.turno.tid)\r\n    .subscribe((resp) => {\r\n      \r\n      this.montoE.nativeElement.value = '';\r\n      this.descriptionE.nativeElement.value = '';\r\n      \r\n      this.montoS.nativeElement.value = '';\r\n      this.descriptionS.nativeElement.value = '';\r\n\r\n      let movi = {\r\n        monto,\r\n        descripcion,\r\n        type,\r\n        turno: this.turno.tid,\r\n      }\r\n\r\n      this.sendMovimiento = false;\r\n\r\n      this.entradasService.createMovimiento(movi)\r\n          .subscribe( ({movimiento}) => {\r\n\r\n            Swal.fire('Estupendo!', 'Se ha guardado exitosament', 'success');\r\n            \r\n            if (type === 'salida') {\r\n              this.movimiento = movimiento;\r\n              \r\n              setTimeout( () => {\r\n                this.printerService.printDiv('printDiv4');                   \r\n              },2000);\r\n            }\r\n\r\n          }, (err) => {\r\n            console.log(err);\r\n            Swal.fire('Error', err.error.msg, 'error');            \r\n          });\r\n\r\n    }, (err) =>{\r\n      Swal.fire('Error', err.error.msg, 'error');\r\n      this.sendMovimiento = false;\r\n    }); \r\n    // GUARDAR ACTUALIZAR EN LA BASE DE DATOS\r\n\r\n  }\r\n\r\n  /** ============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   *  DEPARTAMENTOS - DEPARTAMENTOS - DEPARTAMENTOS - DEPARTAMENTOS\r\n  ==================================================================== */\r\n  public departmentos: Department[] = [];\r\n  public departmentosTemp: Department[] = [];\r\n  public totalDepartamentos: number = 0;\r\n\r\n  cargarDepartamentos(){\r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n\r\n    this.departmentService.loadDepartment()\r\n        .subscribe(({ total, departments }) =>{   \r\n\r\n          this.totalDepartamentos = total;\r\n          this.departmentos = departments;\r\n          this.departmentosTemp = departments;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); }\r\n        )\r\n  }\r\n  /** ================================================================\r\n   *   ELIMINAR COMENTARIO DE LA COMANDA\r\n  ==================================================================== */\r\n  eliminarComentario( i: number ){\r\n\r\n    this.mesa.nota.splice(i,1);\r\n    let data =  { nota: this.mesa.nota, add: false }\r\n        \r\n    this.mesasServices.updateNotaMesa(data, this.mesaID, false)\r\n    .subscribe( resp => {\r\n      \r\n      this.nota.nativeElement.value = '';\r\n      this.nota.nativeElement.focus = true;\r\n      \r\n    });    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   FILTRAR COMANDA\r\n  ==================================================================== */\r\n  public timeComanda: Date;\r\n  timeCommand(){\r\n    this.timeComanda = new Date();\r\n  }\r\n\r\n  /** ================================================================\r\n   *   FILTRAR COMANDA\r\n  ==================================================================== */\r\n  filtrarComanda(tipo:string){\r\n\r\n    if (tipo === 'Todos') {\r\n      this.comanda = this.comandaTemp;\r\n      return;\r\n    }\r\n\r\n    const filtro = this.comandaTemp.filter( command => {\r\n      return command.tipo === tipo;\r\n    });\r\n\r\n    this.comanda = filtro;\r\n\r\n    return;\r\n    \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ELIMINAR PRODUCTO DE LA COMANDA\r\n  ==================================================================== */\r\n  eliminarProductoComanda(i: number){\r\n        \r\n    this.comanda.splice(i, 1);\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   IMPRIMIR\r\n  ==================================================================== */\r\n  @ViewChild('nota') nota: ElementRef;\r\n  printDiv() {\r\n    this.printerService.printDiv('printDiv');\r\n    \r\n    this.nota.nativeElement.value = '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   IMPRIMIR\r\n  ==================================================================== */\r\n  // @ViewChild ('printComandaC') printComandaC: ElementRef;\r\n  public printComandaC: boolean = false;\r\n  printDiv2() {\r\n    this.printerService.printDiv('printDiv2');\r\n\r\n    \r\n    if (this.printComandaC) {\r\n      setTimeout( () => {\r\n        this.printerService.printDiv('printComanda');\r\n      }, 2500)\r\n    }\r\n\r\n    setTimeout( () => {\r\n      // Swal.fire('Success', `Se ha creado la factura <strong> #${ this.factura.invoice }</strong>, exitosamente`, 'success');\r\n      Swal.fire({\r\n        icon: 'success',\r\n        title: `Factura #${ this.factura.invoice }`,\r\n        text: `Se ha creado exitosamente`,\r\n        showDenyButton: false,\r\n        showCancelButton: false,\r\n        confirmButtonText: `ok`,\r\n      }).then((result) => {\r\n        window.location.reload();\r\n      })       \r\n    },1500);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ABRIR CAJA\r\n  ==================================================================== */\r\n  abrirCaja(){\r\n    \r\n    if (!this.user.cerrada) {\r\n\r\n      Swal.fire('Ya existe una caja abierta', 'Debes de cerrar caja para poder abrir he iniciar un turno nuevo', 'warning');\r\n      return;\r\n\r\n    }\r\n    \r\n    Swal.fire({\r\n      title: 'Monto Inicial de caja',\r\n      input: 'text',\r\n      inputAttributes: {\r\n        autocapitalize: 'off'\r\n      },\r\n      showCancelButton: true,\r\n      confirmButtonText: 'Confirmar',\r\n      showLoaderOnConfirm: true,\r\n      preConfirm: (resp) => {\r\n        \r\n        return resp;\r\n      }\r\n      }).then((result) => {\r\n\r\n        if (result.value > 0) {\r\n\r\n          const initial:number = result.value;\r\n\r\n          const open = {\r\n            initial\r\n          };\r\n\r\n          this.turnoService.createCaja(open)\r\n              .subscribe( (resp:{ ok:boolean, turno:any}) => {\r\n\r\n                this.userService.user.turno = resp.turno.tid;\r\n                this.userService.user.cerrada = false;\r\n                this.facturar = true;\r\n                \r\n              });  \r\n              \r\n          return;\r\n        }else{\r\n          return;\r\n        }                \r\n        \r\n    });\r\n\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   COMANDA\r\n  ==================================================================== */\r\n  @ViewChild('scrollMe') private myScrollContainer: ElementRef;\r\n  public notas: _notas[] = [];\r\n  enviarNota(msg: string){\r\n    \r\n    let nota = {};    \r\n    \r\n    nota = {\r\n      nota: msg,\r\n      date: new Date()\r\n    }\r\n    \r\n    this.notas.push({\r\n      nota: msg,\r\n      date: new Date()\r\n    });\r\n    \r\n    this.mesasServices.updateNotaMesa(nota, this.mesaID)\r\n    .subscribe( resp => {\r\n      \r\n      this.nota.nativeElement.value = '';\r\n      this.nota.nativeElement.focus = true;\r\n      \r\n    });\r\n        \r\n  }\r\n  /** ================================================================\r\n   *   SCROLL AL FONDO\r\n  ==================================================================== */\r\n  @ViewChildren('messages') messages: QueryList<any>;\r\n  @ViewChild('content') content: ElementRef;\r\n\r\n  ngAfterViewInit() {\r\n    this.scrollToBottom();\r\n    this.messages.changes.subscribe(this.scrollToBottom);\r\n  }\r\n\r\n  scrollToBottom = () => {\r\n    try {\r\n      this.content.nativeElement.scrollTop = this.content.nativeElement.scrollHeight;\r\n    } catch (err) {}\r\n  }\r\n\r\n  /** ============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * PEDIDOS - PEDIDOS - PEDIDOS - PEDIDOS  \r\n  ==================================================================== */\r\n  public comentarios!: string;\r\n  public uuid!: any;\r\n  public ped: boolean;\r\n  public btnPedido: boolean = true;\r\n\r\n  public pedidoForm = this.fb.group({\r\n    name: ['', [Validators.required]],\r\n    telefono: ['', [Validators.required]],\r\n    email: ['', [Validators.required]],\r\n    cedula: ['', [Validators.required]],\r\n    direccion: ['', [Validators.required]],\r\n    ciudad: ['', [Validators.required]],\r\n    departamento: ['', [Validators.required]],\r\n    comentario: [''],\r\n    products: ['', [Validators.required]],\r\n    amount: ['', [Validators.required, Validators.min(1)]],\r\n    paystatus: [''],\r\n    referencia: [''],\r\n    transaccion: [''],\r\n    status: [true]\r\n  });\r\n\r\n  crearPedido(){\r\n\r\n    this.btnPedido = false;\r\n\r\n    this.uuid = new UUID();\r\n\r\n    if( this.mesa.carrito.length === 0 ){\r\n      Swal.fire('Atencion', 'No has agregado ningun producto', 'info');\r\n      this.btnPedido = true;\r\n      return;\r\n    }\r\n\r\n    this.pedidoForm.reset({\r\n      name: this.clienteTemp?.name || '',\r\n      telefono: this.clienteTemp?.phone || '',\r\n      email: this.clienteTemp?.email || '',\r\n      cedula: this.clienteTemp?.cedula || '',\r\n      direccion: this.clienteTemp?.address || '',\r\n      ciudad: this.clienteTemp?.city || '',\r\n      departamento: this.clienteTemp?.department || '',\r\n      comentario: '',\r\n      products: this.mesa.carrito,\r\n      amount: this.total,\r\n    });\r\n\r\n    this.ped = true;\r\n    this.uuid = new UUID();\r\n    this.pedidoForm.value.paystatus = 'PENDENT';\r\n    this.pedidoForm.value.referencia = this.uuid.getDashFreeUUID();\r\n    this.pedidoForm.value.transaccion = this.uuid.getDashFreeUUID();\r\n    this.pedidoForm.value.status = true;\r\n    this.pedidoForm.value.comentario = this.comentarios;\r\n    \r\n    this.pedidoService.createPedidos(this.pedidoForm.value, this.clienteTemp.cid, this.mesaID)\r\n        .subscribe( resp => {   \r\n          \r\n          this.invoiceForm.reset({\r\n            type: 'efectivo'\r\n          });\r\n\r\n          this.total = 0;\r\n          this.iva = 0;\r\n          this.base = 0;\r\n          this.totalPagos = 0;\r\n          this.carrito = [];\r\n          this.payments = [];\r\n          this.clienteTemp = {\r\n            name : '',\r\n            cedula: '',\r\n            phone: '',\r\n            email: '',\r\n            address: '',\r\n            city: '',\r\n            cid: ''\r\n          };\r\n\r\n          // BORRAMOS LA FECHA CREDITO\r\n          this.credit = false;\r\n\r\n          // LIMPIAMOS LA MESA\r\n          this.mesa.carrito = [];\r\n\r\n          // LIMPIAMOS LAS NOTAS DE LAS COMANDA\r\n          this.mesa.nota = [];\r\n\r\n          // LIMPIAMOS LAS COMANDAS\r\n          this.mesa.comanda = [];\r\n          \r\n          this.mesasServices.updateMesa(this.mesa, this.mesaID)\r\n          .subscribe( (resp:{ok: boolean, mesa: Mesa}) => {\r\n            \r\n            this.btnPedido = true;\r\n            this.pedidoForm.reset();\r\n\r\n            Swal.fire('Exito!', 'el pedido se ha creado correctamente', 'success');\r\n\r\n          });          \r\n\r\n        });\r\n  }\r\n\r\n  /** ============================================================================================\r\n   * PREFACTURA - PREFACTURA - PREFACTURA - PREFACTURA  \r\n  ==================================================================== */\r\n  prefactura(){\r\n\r\n    this.printerService.printDiv('copiaPre');\r\n\r\n  }\r\n\r\n  /** ============================================================================================\r\n   * CAMBIAR CANTIDADES\r\n  ==================================================================== */\r\n  public inputChange: boolean = false;\r\n\r\n  changeCant(cant: any, item: any){    \r\n    \r\n    this.inputChange = true;\r\n    \r\n    this.mesa.carrito.map((it) => {\r\n\r\n      if(it._id === item._id){\r\n        \r\n        if (cant < 0) {\r\n          Swal.fire('Error', 'debes de agregar una catidad validad', 'error');      \r\n        } else if(cant > item.product.inventario){\r\n          it.qty = item.product.inventario;\r\n          Swal.fire('Error', `No puedes agregar mas de ${item.product.inventario}`, 'warning');\r\n        }else{\r\n          it.qty = cant;          \r\n        }\r\n\r\n        if (item.product.mayoreo > 0 && it.qty >= item.product.mayoreo) {\r\n          it.price = item.product.wholesale;\r\n          it.mayor = true;\r\n        }else{\r\n          it.price = item.product.price;\r\n          it.mayor = false;\r\n        }\r\n        \r\n        if (item.product.tax) {\r\n          it.iva = ((item.price * item.product.impuesto[0].valor)/100) * item.qty ;\r\n        }        \r\n\r\n      }\r\n\r\n      return it;\r\n    });\r\n    \r\n    this.mesasServices.updateMesa(this.mesa, this.mesaID)\r\n        .subscribe( (resp:{ok: boolean, mesa: any}) => { \r\n          \r\n          this.carrito = resp.mesa.carrito;\r\n          this.mesa.carrito = resp.mesa.carrito;\r\n\r\n          this.productUp = [];\r\n          this.comanda = [];\r\n          this.comandas = [];\r\n\r\n          this.comandas = resp.mesa.comanda;\r\n\r\n          for (let i = 0; i < resp.mesa.carrito.length; i++) {\r\n\r\n            this.productUp.push({\r\n              product: resp.mesa.carrito[i].product._id,\r\n              qty: resp.mesa.carrito[i].qty,\r\n              price: resp.mesa.carrito[i].price,\r\n              iva: resp.mesa.carrito[i].iva,\r\n              mayor: resp.mesa.carrito[i].mayor\r\n            });\r\n            \r\n            this.comanda.push({\r\n              product:  resp.mesa.carrito[i].product.name,\r\n              comanda:  resp.mesa.carrito[i].product.comanda,\r\n              tipo:     resp.mesa.carrito[i].product.tipo,\r\n              qty:      resp.mesa.carrito[i].qty,\r\n              price:    resp.mesa.carrito[i].price\r\n            });\r\n                        \r\n          }\r\n          this.comandaTemp = this.comanda;          \r\n\r\n          this.inputChange = false;\r\n\r\n          this.sumarTotales();          \r\n\r\n          // this.cargarMesa(this.mesaID);\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n  }\r\n\r\n  /** ============================================================================================\r\n   * GUARDAR NOTA\r\n  ============================================================================================== */\r\n  saveNota(notaf: string){\r\n\r\n    this.mesasServices.updateMesa({notaf}, this.mesaID)\r\n        .subscribe( resp => {\r\n          this.mesa.notaf = notaf;\r\n        }, (err) => {\r\n          console.log(err);          \r\n        })\r\n  }\r\n\r\n  /** ============================================================================================\r\n   * GUARDAR PLACA\r\n  ============================================================================================== */\r\n  savePlaca(placa: string){\r\n\r\n    this.mesasServices.updateMesa({placa}, this.mesaID)\r\n        .subscribe( resp => {\r\n          this.mesa.placa = placa;\r\n        }, (err) => {\r\n          console.log(err);          \r\n        })\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CONFIG SWIPER\r\n  ==================================================================== */  \r\n  public config = {\r\n    slidesPerView:1,\r\n    spaceBetween:10,\r\n    centeredSlides: true,\r\n    navigation: true,\r\n    pagination: { clickable: true, dynamicBullets: true },\r\n    breakpoints:{\r\n      '450': {\r\n        slidesPerView: 2,\r\n        spaceBetween: 20,\r\n        centeredSlides: false,\r\n      },\r\n      '640': {\r\n        slidesPerView: 3,\r\n        spaceBetween: 30,\r\n        centeredSlides: false,\r\n      },\r\n      '768': {\r\n        slidesPerView: 3,\r\n        spaceBetween: 40,\r\n        centeredSlides: false,\r\n      },\r\n    }\r\n\r\n  }\r\n\r\n  /** ======================================================================\r\n   * SEARCH VEHICULO\r\n  ====================================================================== */\r\n  public vehiculos: Vehiculo[] = [];\r\n  public resultados: number = 0;\r\n  buscarV( termino:string ){\r\n\r\n    let query = `desde=${0}&hasta=${20}`;\r\n\r\n    if (termino.length === 0) {\r\n      this.vehiculos = [];\r\n      this.resultados = 0;\r\n      return;\r\n    }\r\n    \r\n    this.searchService.search('vehiculo', termino, false, query)\r\n        .subscribe( ({resultados}) => {\r\n\r\n          this.vehiculos = resultados;          \r\n\r\n        });   \r\n\r\n  }\r\n\r\n  /** ======================================================================\r\n   * SELECT VEHICULO\r\n  ====================================================================== */\r\n  @ViewChild ('searchV') searchV: ElementRef;\r\n  @ViewChild ('placaIn') placaIn: ElementRef;\r\n  selectV(vehiculo: Vehiculo){\r\n\r\n    vehiculo.client.cid = vehiculo.client._id;\r\n    this.placaIn.nativeElement.value = vehiculo.placa\r\n    \r\n    this.seleccionarCliente(vehiculo.client);\r\n    this.savePlaca(vehiculo.placa);\r\n    this.vehiculos = [];\r\n    this.searchV.nativeElement.value = '';\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ACTUALIZAR IMAGEN\r\n  ==================================================================== */\r\n  public imgTempP: any = null;\r\n  public subirImagen!: any;\r\n  cambiarImage(file: any): any{  \r\n    \r\n    this.subirImagen = file.target.files[0];\r\n    \r\n    if (!this.subirImagen) { return this.imgTempP = null }    \r\n    \r\n    const reader = new FileReader();\r\n    const url64 = reader.readAsDataURL(file.target.files[0]);\r\n        \r\n    reader.onloadend = () => {\r\n      this.imgTempP = reader.result;      \r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  SUBIR IMAGEN\r\n  ==================================================================== */\r\n  @ViewChild('fileImg') fileImg!: ElementRef;\r\n  public imgPerfil: string = 'no-image';\r\n  subirImg(){\r\n    \r\n    this.fileUploadService.updateImage( this.subirImagen, 'taller', this.mesaID)\r\n    .then( \r\n      (resp:{ date: Date, nombreArchivo: string, ok: boolean }) => {\r\n        \r\n        this.cargarMesa(this.mesaID);\r\n      }\r\n    );\r\n    \r\n    this.fileImg.nativeElement.value = '';\r\n    this.imgTempP = null;\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *  ELIMINAR IMAGEN\r\n  ==================================================================== */\r\n  deleImg(img: string){\r\n\r\n    this.fileUploadService.deleteFile(img, this.mesaID, 'mesa')\r\n        .subscribe( (resp: {mesa: Mesa}) => {\r\n          \r\n          this.mesa.images = resp.mesa.images;\r\n          Swal.fire('Estupendo', 'Se ha eliminado la imagen exitosamente!', 'success');\r\n          \r\n        }, (err)  => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        });\r\n\r\n  }\r\n  \r\n  // FIN DE LA CLASE \r\n}\r\n","<!-- =========================================================================\r\n    TICKET 1 \r\n========================================================================= -->\r\n<div class=\"container-fluid mb-5\">\r\n\r\n    <div class=\"row\">\r\n\r\n        <div class=\"col-md-8 align-self-start animated fadeIn mb-5\" *ngIf=\"menu\">\r\n\r\n            <!-- BOTONES -->\r\n            <div class=\"d-flex flex-wrap gap-2 my-2\">\r\n\r\n                <button *ngIf=\"this.user.cerrada\" [disabled]=\"user.role === 'WAITERALL' || user.role === 'WAITER'\" (click)=\"abrirCaja()\" class=\"btn btn-success btn-sm\" type=\"button\">Abrir caja</button>\r\n                <button *ngIf=\"!this.user.cerrada\" [disabled]=\"user.role === 'WAITERALL' || user.role === 'WAITER'\" [routerLink]=\"['/dashboard', 'corte']\" class=\"btn btn-secondary btn-sm\" type=\"button\">Cerrar caja</button>\r\n\r\n                <button *ngIf=\"user.role !== 'WAITERALL' && user.role !== 'WAITER'\" #btnCreateClient type=\"button\" class=\"btn btn-outline-success btn-sm\" data-bs-toggle=\"modal\" data-bs-target=\"#buscarCliente\"><i class=\"bi-people\"></i> Crear Cliente </button>\r\n\r\n                <!-- <button type=\"button\" class=\"btn btn-outline-primary btn-sm\" data-bs-toggle=\"collapse\" href=\"#productsColl\" role=\"button\" aria-expanded=\"false\" aria-controls=\"collapseExample\"><i class=\"bi-box\"></i> Productos </button> -->\r\n                <button *ngIf=\"user.role !== 'WAITERALL' && user.role !== 'WAITER'\" type=\"button\" class=\"btn btn-outline-primary btn-sm\" data-bs-toggle=\"modal\" data-bs-target=\"#buscarProducto\"><i class=\"bi-box\"></i> Nuevo Codigo </button>\r\n\r\n                <button *ngIf=\"user.role !== 'WAITERALL' && user.role !== 'WAITER'\" type=\"button\" class=\"btn btn-outline-primary btn-sm\" data-bs-toggle=\"modal\" data-bs-target=\"#entradaSalidas\"><i class=\"bi-arrow-left-right\"></i> Entradas y Salidas </button>\r\n                <button type=\"button\" (click)=\"scrollToBottom()\" (click)=\"timeCommand()\" class=\"btn btn-outline-info btn-sm\" data-bs-toggle=\"modal\" data-bs-target=\"#comandas\"><i class=\"bi-receipt\"></i> Comandas </button>\r\n                <button type=\"button\" *ngIf=\"mesa?.img === 'mesa.svg'\" (click)=\"cargarMesasAll()\" class=\"btn btn-outline-dark btn-sm\" data-bs-toggle=\"modal\" data-bs-target=\"#cambiarMesa\"><i class=\"bi-arrow-repeat\"></i> Cambiar Mesa </button>\r\n                <button *ngIf=\"user.role !== 'WAITERALL' && user.role !== 'WAITER'\" type=\"button\" class=\"btn btn-outline-warning btn-sm\" data-bs-toggle=\"modal\" data-bs-target=\"#descuentoModal\"><i class=\"bi-percent\"></i> Descuento </button>\r\n                <a *ngIf=\"user.role !== 'WAITERALL' && user.role !== 'WAITER'\" [routerLink]=\"['/', 'dashboard', 'productos', 'kardex']\" class=\"btn btn-outline-primary btn-sm\"><i class=\"bi-box\"></i> Kardex </a>\r\n                <button *ngIf=\"user.role !== 'WAITERALL' && user.role !== 'WAITER'\" (click)=\"mayoreoChange()\" type=\"button\" class=\"btn btn-outline-dark btn-sm\"><i class=\"bi-arrow-down-up\"></i> Mayoreo </button>\r\n                <button (click)=\"changeMenu(menu)\" type=\"button\" class=\"btn btn-outline-primary\">\r\n                    <i *ngIf=\"!menu\" class=\"bi bi-grid\"></i>\r\n                    <i *ngIf=\"menu\" class=\"bi bi-justify\"></i>\r\n                </button>\r\n\r\n            </div>\r\n\r\n            <hr>\r\n\r\n            <!-- <div class=\"p-2 border-bottom my-2 d-flex flex-wrap justify-content-start gap-2\"> -->\r\n            <div id=\"dd\" class=\"p-2 my-2 d-flex flex-wrap justify-content-start gap-2\" style=\"max-height: 105px; overflow-y: scroll;\">\r\n\r\n                <ng-container *ngFor=\"let departamento of departmentos\">\r\n\r\n                    <div *ngIf=\"departamento.visibility && departamento.status\">\r\n\r\n                        <button style=\"width: auto;\" type=\"button\" (click)=\"cargarProductosDepartamento(departamento.did)\" class=\"btn bg-white p-0 m-0 btnW waves-effect waves-blue text-muted d-flex align-items-center\"> \r\n                            <img style=\"width: 1.5rem; height: 1.5rem; object-fit: cover; \" [src]=\"departamento.img | imagen:'department'\" alt=\"...\">\r\n                            <p class=\"mb-0 mx-1\" style=\"font-size: 0.9rem\">{{ departamento.name }}</p>\r\n                        </button>\r\n\r\n                    </div>\r\n\r\n                </ng-container>\r\n\r\n            </div>\r\n            <!-- DEPARTAMENTOS -->\r\n\r\n            <hr>\r\n\r\n            <!-- PRODUCTOS -->\r\n            <div class=\"d-flex justify-content-center flex-wrap mb-5\">\r\n\r\n                <div *ngIf=\"listaProductos.length < 1\" class=\"py-4\">\r\n                    <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                </div>\r\n\r\n                <ng-container *ngFor=\"let producto of listaProductos\">\r\n\r\n                    <div class=\"card m-1 animated fadeIn\" style=\"width: 12rem;\" *ngIf=\"producto.visibility && producto.status\">\r\n                        <div class=\"position-absolute ms-2 mt-2\">\r\n                            <span *ngIf=\"producto.inventario <= producto.min && producto.type !== 'Paquete' && producto.inventario > 0\" class=\"badge rounded-pill bg-warning text-dark\">Bajo</span>\r\n                            <span *ngIf=\"producto.inventario <= 0 && producto.type !== 'Paquete'\" class=\"badge rounded-pill bg-danger\">Agotado</span>\r\n                            <span *ngIf=\"producto.vencido\" class=\"badge rounded-pill bg-warning\">Vencido</span>\r\n                        </div>\r\n\r\n                        <img class=\"avatar-xxl avatar-img avatar-redondo-lg mx-auto\" style=\"height: 180px; width: auto;\" [src]=\"producto.img | imagen:'products'\" class=\"card-img-top\" alt=\"...\">\r\n\r\n                        <div *ngIf=\"empresa\" class=\"card-body py-2 d-flex align-items-start flex-column\">\r\n\r\n                            <div>\r\n                                <p class=\"mb-0\">cant. {{ producto.inventario | number }}</p>\r\n                                <h5 class=\"card-title mb-1\">{{ producto.name }}</h5>\r\n                            </div>\r\n                            <div class=\"col-12 mt-auto\">\r\n                                <div class=\"d-flex align-items-center\">\r\n\r\n                                    <p class=\"mb-0 text-success\">{{ producto.price | divisa }}</p>\r\n                                    <button *ngIf=\"!empresa.kiosco\" type=\"button\" [disabled]=\" producto.vencido || producto.inventario <= 0 && producto.type !== 'Paquete'\" (click)=\"buscarCodigo( producto.code )\" class=\"btn btn-link btn-primary text-white ms-auto\" style=\"font-size: 1rem;\">\r\n                                        <i class=\"bi bi-cart-plus\"></i>\r\n                                    </button>\r\n                                    <button *ngIf=\"empresa.kiosco\" type=\"button\" [disabled]=\" producto.vencido || producto.inventario <= 0 && producto.type !== 'Paquete'\" (click)=\"modalProducto(producto)\" class=\"btn btn-link btn-primary text-white ms-auto\" style=\"font-size: 1rem;\">\r\n                                        <i class=\"bi bi-cart-plus\"></i>\r\n                                    </button>\r\n\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                </ng-container>\r\n\r\n\r\n            </div>\r\n            <!-- PRODUCTOS -->\r\n\r\n        </div>\r\n\r\n        <div class=\"col-md-8 align-self-start animated fadeIn\" *ngIf=\"!menu\">\r\n\r\n            <!-- BOTONES -->\r\n            <div class=\"d-flex flex-wrap gap-2 my-2\">\r\n\r\n                <button *ngIf=\"this.user.cerrada\" (click)=\"abrirCaja()\" class=\"btn btn-success btn-sm\" type=\"button\">Abrir caja</button>\r\n                <button *ngIf=\"!this.user.cerrada\" [routerLink]=\"['/dashboard', 'corte']\" class=\"btn btn-secondary btn-sm\" type=\"button\">Cerrar caja</button>\r\n\r\n                <button *ngIf=\"user.role !== 'WAITERALL' && user.role !== 'WAITER'\" type=\"button\" class=\"btn btn-outline-success btn-sm\" data-bs-toggle=\"modal\" data-bs-target=\"#buscarCliente\"><i class=\"bi-people\"></i> Crear Cliente </button>\r\n\r\n                <!-- <button *ngIf=\"user.role !== 'WAITERALL' && user.role !== 'WAITER'\"  type=\"button\" class=\"btn btn-outline-primary btn-sm\" data-bs-toggle=\"collapse\" href=\"#productsColl\" role=\"button\" aria-expanded=\"false\" aria-controls=\"collapseExample\"><i class=\"bi-box\"></i> Productos </button> -->\r\n                <button *ngIf=\"user.role !== 'WAITERALL' && user.role !== 'WAITER'\" type=\"button\" class=\"btn btn-outline-primary btn-sm\" data-bs-toggle=\"modal\" data-bs-target=\"#buscarProducto\"><i class=\"bi-box\"></i> Nuevo Codigo </button>\r\n\r\n                <button *ngIf=\"user.role !== 'WAITERALL' && user.role !== 'WAITER'\" type=\"button\" class=\"btn btn-outline-primary btn-sm\" data-bs-toggle=\"modal\" data-bs-target=\"#entradaSalidas\"><i class=\"bi-arrow-left-right\"></i> Entradas y Salidas </button>\r\n                <button type=\"button\" (click)=\"scrollToBottom()\" (click)=\"timeCommand()\" class=\"btn btn-outline-info btn-sm\" data-bs-toggle=\"modal\" data-bs-target=\"#comandas\"><i class=\"bi-receipt\"></i> Comandas </button>\r\n                <button type=\"button\" *ngIf=\"mesa?.img === 'mesa.svg'\" (click)=\"cargarMesasAll()\" class=\"btn btn-outline-dark btn-sm\" data-bs-toggle=\"modal\" data-bs-target=\"#cambiarMesa\"><i class=\"bi-arrow-repeat\"></i> Cambiar Mesa </button>\r\n                <button *ngIf=\"user.role !== 'WAITERALL' && user.role !== 'WAITER'\" type=\"button\" class=\"btn btn-outline-warning btn-sm\" data-bs-toggle=\"modal\" data-bs-target=\"#descuentoModal\"><i class=\"bi-percent\"></i> Descuento </button>\r\n                <a *ngIf=\"user.role !== 'WAITERALL' && user.role !== 'WAITER'\" [routerLink]=\"['/', 'dashboard', 'productos', 'kardex']\" class=\"btn btn-outline-primary btn-sm\"><i class=\"bi-box\"></i> Kardex </a>\r\n                <button *ngIf=\"user.role !== 'WAITERALL' && user.role !== 'WAITER'\" (click)=\"mayoreoChange()\" type=\"button\" class=\"btn btn-outline-dark btn-sm\"><i class=\"bi-arrow-down-up\"></i> Mayoreo </button>\r\n                <button (click)=\"changeMenu(menu)\" type=\"button\" class=\"btn btn-outline-primary\">\r\n                    <i *ngIf=\"!menu\" class=\"bi bi-grid\"></i>\r\n                    <i *ngIf=\"menu\" class=\"bi bi-justify\"></i>\r\n                </button>\r\n            </div>\r\n\r\n            <hr>\r\n\r\n            <div class=\"card py-4 mt-3\">\r\n\r\n                <!-- SEARCH PRODUCT CODE -->\r\n                <div>\r\n                    <div class=\"col-12 d-flex justify-content-between\">\r\n                        <div class=\"form-row w-100\">\r\n                            <div class=\"col-md-6 mt-2\">\r\n\r\n                                <input type=\"text\" class=\"form-control\" placeholder=\"Ingrese o busca un codigo de barras\" (keyup.enter)=\"buscarCodigo(searchCode.value)\" #searchCode>\r\n                                <p class=\"mb-0 text-info fadeIn\" *ngIf=\"inventarioNewB\"> Stock: {{ inventarioNew | number }} </p>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-6 mt-2\">\r\n\r\n                                <input type=\"text\" class=\"form-control\" placeholder=\"buscar producto\" (keyup)=\"buscarProducto(searchProduct.value)\" #searchProduct>\r\n\r\n                                <div *ngIf=\"listaProductos.length > 0 && searchProduct.value.length !== 0\" class=\"bg-white px-2 shadow col-auto\" style=\"position: absolute; z-index: 1020;\">\r\n\r\n                                    <ul class=\"list-group list-group-flush overflow-auto\" style=\"max-height: 150px;\">\r\n\r\n                                        <li class=\"list-group-item py-1\">\r\n                                            <h6>Resultados: ({{ listaProductos.length }})</h6>\r\n                                        </li>\r\n\r\n                                        <li class=\"list-group-item py-1\" *ngFor=\"let item of listaProductos\">\r\n                                            <button [disabled]=\"item.inventario <= 0 && item.type !== 'Paquete' || !item.status\" class=\"border-0 bg-white w-100 text-start\" (click)=\"modalProducto(item); searchProduct.value = '' \" type=\"button\">\r\n                                                    <div class=\"d-flex\">\r\n                                                        <div class=\"align-self-center\">\r\n                                                            <span> {{ item.name }} </span>\r\n                                                            <span *ngIf=\"!item.status\" class=\"badge rounded-pill bg-danger\">Eliminado</span>\r\n                                                            <span *ngIf=\"item.inventario <= 0 && item.type !== 'Paquete'\" class=\"badge rounded-pill bg-danger\">Agotado</span>\r\n                                                            <span *ngIf=\"item.inventario > 0 && item.inventario <= item.min &&  item.type !== 'Paquete'\" class=\"badge rounded-pill bg-warning text-dark\">Bajo</span>\r\n                                                        </div>\r\n                                                        \r\n                                                        <div class=\"ms-auto\">\r\n                                                            <span *ngIf=\"!item.out\" class=\"btn btn-link p-1 text-success float-end\" > \r\n                                                                <i class=\"bi-arrow-90deg-right\"></i>\r\n                                                            </span>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </button>\r\n                                        </li>\r\n\r\n                                    </ul>\r\n\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <!-- SEARCH PRODUCT CODE -->\r\n\r\n                <hr class=\"my-2\">\r\n\r\n                <div class=\"table-responsive\">\r\n                    <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                        <thead class=\"border-bottom \">\r\n                            <tr>\r\n                                <th class=\"text-muted text-left\" scope=\"col \" colspan=\"2 \">Descripción</th>\r\n                                <th class=\"text-muted \" scope=\"col \">Precio</th>\r\n                                <th class=\"text-muted \" scope=\"col \">Cantidad</th>\r\n                                <th class=\"text-muted \" scope=\"col \">Monto</th>\r\n                                <th class=\"text-muted \" scope=\"col \"></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr *ngIf=\"carrito.length === 0\" class=\"text-center \">\r\n                                <th colspan=\"10\" class=\"py-4\">\r\n                                    <h4 class=\"text-muted\">No has seleccionado ningun producto</h4>\r\n                                </th>\r\n                            </tr>\r\n\r\n                            <ng-container *ngIf=\"carrito.length > 0 \">\r\n                                <ng-container *ngFor=\"let item of carrito; let i = index\">\r\n                                    <tr class=\"trHover\" *ngIf=\"item.product\" [ngClass]=\"{'table-success': item.mayor}\">\r\n                                        <td colspan=\"2\">\r\n                                            <div>\r\n                                                <p class=\"mb-0\">{{ item.product.name }}<span *ngIf=\"item.mayor\" class=\"badge text-dark\">M</span></p>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td>{{ item.price | divisa }}</td>\r\n                                        <td class=\"text-center\">\r\n                                            <button *ngIf=\"empresa.bascula\" type=\"button\" (click)=\"loadBascula(i, item)\" class=\"btn btn-link p-1 text-primary\">\r\n                                                <i class=\"bi-arrow-down-square-fill\" style=\"font-size: 1rem\"></i>\r\n                                            </button>\r\n                                            <input [readonly]=\"user.role === 'WAITER' || user.role === 'WAITERALL'\" class=\"w-75\" min=\"1\" type=\"number\" [value]=\"item.qty\" (change)=\"changeCant(cantt.value, item)\" #cantt>\r\n                                        </td>\r\n                                        <td>{{ item.price * item.qty | divisa}}</td>\r\n                                        <td>\r\n                                            <button type=\"button\" [disabled]=\"user.role !== 'ADMIN' && user.role !== 'STAFF' && user.role !== 'CASHIER'\" (click)=\"eliminarProductoCarrito(i, item.product)\" class=\"btn btn-link p-1 text-danger\"><i class=\"bi-trash\" style=\"font-size: 0.9rem\"></i></button>\r\n                                        </td>\r\n                                    </tr>\r\n                                </ng-container>\r\n\r\n                            </ng-container>\r\n\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div class=\"col-md-4 bg-white py-4 px-2 border-start\" style=\"min-height: 100vh;\">\r\n\r\n            <div class=\"d-grid\">\r\n\r\n                <div class=\"mb-3\">\r\n\r\n                    <div class=\"mb-3\">\r\n                        <input type=\"text\" class=\"form-control\" placeholder=\"buscar cliente\" (keyup)=\"buscarCliente(searchClient.value)\" #searchClient>\r\n                    </div>\r\n\r\n                    <div *ngIf=\"listaClientes.length > 0\" class=\"bg-white py-3 px-2 shadow\" style=\"position: absolute; z-index: 1020;\">\r\n\r\n                        <div *ngIf=\"cargandoCliente\" class=\"text-center py-3\">\r\n                            <div class=\"spinner-grow text-secondary\" role=\"status\">\r\n                                <span class=\"visually-hidden\">Loading...</span>\r\n                            </div>\r\n                            <div>\r\n                                <small class=\"text-muted\">Cargando...</small>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <ul *ngIf=\"!cargandoCliente\" class=\"list-group list-group-flush overflow-auto\" style=\"max-height: 200px; min-width: 250px;\">\r\n\r\n                            <li class=\"list-group-item\">\r\n                                <h6>Resultados: ({{ listaClientes.length }})</h6>\r\n                            </li>\r\n\r\n                            <li class=\"list-group-item\" *ngFor=\"let item of listaClientes\">\r\n                                <div class=\"d-flex \">\r\n                                    <div class=\"align-self-center\">\r\n                                        <span class=\"text-capitalize fw-bold\"> {{ item.name }} </span><br>\r\n                                        <small> C.C: {{ item.cedula }} </small>\r\n                                    </div>\r\n\r\n                                    <div class=\"ms-auto\">\r\n                                        <button class=\"btn btn-link p-1 text-success float-end\" (click)=\"seleccionarCliente(item)\"> <i class=\"bi-arrow-90deg-right\"></i></button>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </li>\r\n                        </ul>\r\n\r\n                    </div>\r\n\r\n                    <ng-container *ngIf=\"empresa\">\r\n                        <div *ngIf=\"empresa.taller\">\r\n\r\n                            <input type=\"text\" class=\"form-control\" placeholder=\"buscar Vehiculo\" (keyup)=\"buscarV(searchV.value)\" #searchV>\r\n\r\n                            <div *ngIf=\"vehiculos.length > 0 && searchV.value.length !== 0\" class=\"bg-white px-2 shadow col-auto\" style=\"position: absolute; z-index: 1020;\">\r\n\r\n                                <ul class=\"list-group list-group-flush overflow-auto\" style=\"max-height: 150px;\">\r\n\r\n                                    <li class=\"list-group-item py-1\">\r\n                                        <h6>Resultados: ({{ vehiculos.length }})</h6>\r\n                                    </li>\r\n\r\n                                    <li class=\"list-group-item py-1\" *ngFor=\"let vehiculo of vehiculos\">\r\n                                        <button [disabled]=\"!vehiculo.status\" class=\"border-0 bg-white w-100 text-start\" (click)=\"selectV(vehiculo)\" type=\"button\">\r\n                                            <div class=\"d-flex\">\r\n                                                <div class=\"align-self-center\">\r\n                                                    <span> {{ vehiculo.placa }} </span>\r\n                                                    <span> {{ vehiculo.model }} </span>\r\n                                                    <span> {{ vehiculo.client.name }} </span>\r\n                                                    <span *ngIf=\"!vehiculo.status\" class=\"badge rounded-pill bg-danger\">Eliminado</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        </button>\r\n                                    </li>\r\n\r\n                                </ul>\r\n\r\n                            </div>\r\n\r\n\r\n                            <button type=\"button\" class=\"btn btn-sm btn-outline-info mt-3\" data-bs-toggle=\"modal\" data-bs-target=\"#imgUp\">Subir Fotos</button>\r\n                        </div>\r\n\r\n\r\n                    </ng-container>\r\n\r\n\r\n                </div>\r\n\r\n            </div>\r\n            <!-- BUSCAR CLIENTE -->\r\n\r\n            <div>\r\n\r\n                <div *ngIf=\"menu\" class=\"animated fadeIn\">\r\n\r\n                    <hr class=\"my-2\">\r\n\r\n                    <!-- SEARCH PRODUCT CODE -->\r\n                    <div>\r\n                        <input type=\"text\" class=\"form-control\" placeholder=\"Ingrese o busca un codigo de barras\" (keyup.enter)=\"buscarCodigo(searchCode.value)\" #searchCode>\r\n                        <p class=\"mb-0 text-info fadeIn\" *ngIf=\"inventarioNewB\"> Stock: {{ inventarioNew | number }} </p>\r\n                    </div>\r\n                    <!-- SEARCH PRODUCT CODE -->\r\n\r\n                    <hr class=\"my-2\">\r\n\r\n                    <div>\r\n                        <input type=\"text\" class=\"form-control\" placeholder=\"buscar producto\" (keyup)=\"buscarProducto(searchProduct.value)\" #searchProduct>\r\n                    </div>\r\n\r\n                    <div *ngIf=\"listaProductos.length > 0 && searchProduct.value.length !== 0\" class=\"bg-white px-2 shadow col-auto\" style=\"position: absolute; z-index: 1020;\">\r\n\r\n                        <ul class=\"list-group list-group-flush overflow-auto\" style=\"max-height: 150px;\">\r\n\r\n                            <li class=\"list-group-item py-1\">\r\n                                <h6>Resultados: ({{ listaProductos.length }})</h6>\r\n                            </li>\r\n\r\n                            <li class=\"list-group-item py-1\" *ngFor=\"let item of listaProductos\">\r\n                                <button [disabled]=\"item.status === false || item.inventario <= 0 && item.type !== 'Paquete' \" class=\"border-0 bg-white w-100 text-start\" (click)=\"modalProducto(item); searchProduct.value = '' \" type=\"button\">\r\n                                    <div class=\"d-flex\">\r\n                                        <div class=\"align-self-center\">\r\n                                            <span> {{ item.name }} </span>\r\n                                            <span *ngIf=\"!item.status\" class=\"badge rounded-pill bg-danger\">Eliminado</span>\r\n                                            <span *ngIf=\"item.status && item.inventario <= 0 && item.type !== 'Paquete'\" class=\"badge rounded-pill bg-danger\">Agotado</span>\r\n                                            <span *ngIf=\"item.status && item.inventario > 0 && item.inventario <= item.min &&  item.type !== 'Paquete'\" class=\"badge rounded-pill bg-warning text-dark\">Bajo</span>\r\n                                        </div>\r\n                                        \r\n                                        <div class=\"ms-auto\">\r\n                                            <span *ngIf=\"!item.out\" class=\"btn btn-link p-1 text-success float-end\" > \r\n                                                <i class=\"bi-arrow-90deg-right\"></i>\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n                                </button>\r\n                            </li>\r\n\r\n                        </ul>\r\n\r\n                    </div>\r\n\r\n                    <hr class=\"my-2\">\r\n\r\n                    <div class=\"table-responsive\">\r\n                        <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                            <thead class=\"border-bottom \">\r\n                                <tr>\r\n                                    <th class=\"text-muted text-left\" scope=\"col \" colspan=\"2 \">Descripción</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Precio</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Cantidad</th>\r\n                                    <th class=\"text-muted \" scope=\"col \">Monto</th>\r\n                                    <th class=\"text-muted \" scope=\"col \"></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr *ngIf=\"carrito.length === 0\" class=\"text-center \">\r\n                                    <th colspan=\"10\" class=\"py-4\">\r\n                                        <h4 class=\"text-muted\">No has seleccionado ningun producto</h4>\r\n                                    </th>\r\n                                </tr>\r\n\r\n                                <ng-container *ngIf=\"carrito.length > 0 \">\r\n\r\n                                    <ng-container *ngFor=\"let item of carrito; let i = index\">\r\n                                        <tr class=\"trHover\" *ngIf=\"item.product\" [ngClass]=\"{'table-success': item.mayor}\">\r\n                                            <td colspan=\"2\">\r\n                                                <p class=\"mb-0\">{{ item.product.name }} <span *ngIf=\"item.mayor\" class=\"badge text-dark\">M</span></p>\r\n                                            </td>\r\n                                            <td>{{ item.price | divisa}}</td>\r\n                                            <td class=\"text-center\">\r\n                                                <input [readonly]=\"inputChange || user.role === 'WAITER' || user.role === 'WAITERALL'\" class=\"w-75\" min=\"1\" type=\"number\" [value]=\"item.qty\" [max]=\"item.product.inventario\" (change)=\"changeCant(cant.value, item)\" #cant>\r\n                                            </td>\r\n                                            <td>{{ item.price * item.qty | divisa}}</td>\r\n                                            <td>\r\n                                                <button type=\"button\" [disabled]=\"user.role !== 'ADMIN' && user.role !== 'STAFF' && user.role !== 'CASHIER'\" (click)=\"eliminarProductoCarrito(i, item.product)\" class=\"btn btn-link p-1 text-danger\"><i class=\"bi-trash\" style=\"font-size: 0.9rem\"></i></button>\r\n                                            </td>\r\n                                        </tr>\r\n                                    </ng-container>\r\n\r\n                                </ng-container>\r\n\r\n                            </tbody>\r\n                            <tfoot>\r\n                                <th colspan=\"5\">ITEMS</th>\r\n                                <th> {{ totalItems | number }} </th>\r\n                            </tfoot>\r\n                        </table>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <!-- TOTALES -->\r\n\r\n                <hr>\r\n\r\n                <div class=\"container-fluid\">\r\n                    <div class=\"\">\r\n\r\n                        <!-- COLUMNA IZQ -->\r\n                        <div class=\"col px-0 bg-white\">\r\n\r\n                            <div class=\"container-fluid\">\r\n\r\n                                <ng-container *ngIf=\"empresa?.min && empresa.electronica\">\r\n                                    <div *ngIf=\"total >= empresa.min\" class=\"alert alert-warning fade show\" role=\"alert\">\r\n                                        <strong>Atención:</strong> Para montos mayores a <strong>{{ empresa.min | number }}</strong> se debe crear factura electronica\r\n                                    </div>\r\n                                </ng-container>\r\n\r\n                                <div class=\"d-flex justify-content-center\">\r\n\r\n                                    <div>\r\n\r\n                                        <!-- FORM INVOICE - FORM INVOICE -->\r\n                                        <form autocomplete=\"off\" [formGroup]=\"invoiceForm\">\r\n\r\n                                            <!-- <div class=\"col-auto\">\r\n                                                <label for=\"fecha\" class=\"\">Fecha</label>\r\n                                                <input type=\"datetime-local\" formControlName=\"fecha\" class=\"form-control\" id=\"fecha\" placeholder=\"Selecciona una fecha limite\" #fechCredito>\r\n                                            </div> -->\r\n\r\n                                            <div class=\"mx-auto my-3\" *ngIf=\"empresa?.marca\">\r\n\r\n                                                <div class=\"form-check\">\r\n                                                    <input formControlName=\"marca\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"marcaCheck\">\r\n\r\n                                                    <label class=\"form-check-label h5\" for=\"marcaCheck\">\r\n                                                        Marca de Pagado\r\n                                                    </label>\r\n                                                </div>\r\n\r\n                                            </div>\r\n\r\n                                            <div class=\"d-flex flex-wrap gap-2 justify-content-center\">\r\n                                                <div class=\"\">\r\n\r\n                                                    <input type=\"radio\" (click)=\"limpiarPagos()\" class=\"btn-check\" name=\"type\" formControlName=\"type\" id=\"efectivo-outlined\" value=\"efectivo\" autocomplete=\"off\" checked>\r\n                                                    <label class=\"btn btn-outline-success\" for=\"efectivo-outlined\">\r\n                                                        <i class=\"px-2 bi-cash-stack\" style=\"font-size: 1rem;\"></i>\r\n                                                        <p class=\"mb-0\" style=\"font-size: 0.9rem;\" >Efectivo</p>        \r\n                                                    </label>\r\n\r\n                                                </div>\r\n\r\n                                                <div class=\"\">\r\n\r\n                                                    <input type=\"radio\" (click)=\"limpiarPagos()\" class=\"btn-check\" name=\"type\" formControlName=\"type\" id=\"tarjeta-outlined\" value=\"transferencia\" autocomplete=\"off\">\r\n                                                    <label class=\"btn btn-outline-info\" for=\"tarjeta-outlined\">\r\n                                                        <i class=\"px-2 bi-credit-card\" style=\"font-size: 1rem;\"></i>\r\n                                                        <p class=\"mb-0\" style=\"font-size: 0.9rem;\" >Bancos</p>\r\n                                                    </label>\r\n\r\n                                                </div>\r\n\r\n                                                <div class=\"\">\r\n                                                    <input type=\"radio\" (click)=\"limpiarPagos()\" class=\"btn-check\" name=\"options-outlined\" name=\"type\" formControlName=\"type\" id=\"mixto-outlined\" value=\"mixto\" autocomplete=\"off\">\r\n                                                    <label class=\"btn btn-outline-dark\" for=\"mixto-outlined\">\r\n                                                        <i class=\"px-2 bi-patch-question\" style=\"font-size: 1rem;\"></i>\r\n                                                        <p class=\"mb-0\" style=\"font-size: 0.9rem;\" >Mixto</p>\r\n                                                    </label>\r\n\r\n                                                </div>\r\n\r\n                                                <div class=\"\">\r\n                                                    <input type=\"radio\" (click)=\"limpiarPagos('credito')\" #tcredito class=\"btn-check\" name=\"options-outlined\" name=\"type\" formControlName=\"type\" id=\"credito-outlined\" value=\"credito\" autocomplete=\"off\">\r\n                                                    <label class=\"btn btn-outline-warning\" for=\"credito-outlined\">\r\n                                                        <i class=\"px-2 bi-clock-history\" style=\"font-size: 1rem;\"></i>\r\n                                                        <p class=\"mb-0\" style=\"font-size: 0.9rem;\" >Credito</p>\r\n                                                    </label>\r\n                                                </div>\r\n\r\n                                            </div>\r\n\r\n                                            <div class=\"d-flex justify-content-center flex-row flex-wrap gap-2 mb-3\" *ngIf=\"invoiceForm.value.type === 'efectivo' || invoiceForm.value.type === 'mixto' || invoiceForm.value.type === 'credito'\">\r\n\r\n                                                <div>\r\n                                                    <a type=\"button\" (click)=\"agregarPagos('efectivo', 100000, '', false)\">\r\n                                                        <img src=\"../../../../assets/img/billetes/100.svg\" alt=\"\" style=\"max-width: 60px; height: 30px;\">\r\n                                                    </a>\r\n                                                </div>\r\n                                                <div>\r\n                                                    <a type=\"button\" (click)=\"agregarPagos('efectivo', 50000, '', false)\">\r\n                                                        <img src=\"../../../../assets/img/billetes/50.svg\" alt=\"\" style=\"max-width: 60px; height: 30px;\">\r\n                                                    </a>\r\n                                                </div>\r\n                                                <div>\r\n                                                    <a type=\"button\" (click)=\"agregarPagos('efectivo', 20000, '', false)\">\r\n                                                        <img src=\"../../../../assets/img/billetes/20.svg\" alt=\"\" style=\"max-width: 60px; height: 30px;\">\r\n                                                    </a>\r\n                                                </div>\r\n                                                <div>\r\n                                                    <a type=\"button\" (click)=\"agregarPagos('efectivo', 10000, '', false)\">\r\n                                                        <img src=\"../../../../assets/img/billetes/10.svg\" alt=\"\" style=\"max-width: 60px; height: 30px;\">\r\n                                                    </a>\r\n                                                </div>\r\n                                                <div>\r\n                                                    <a type=\"button\" (click)=\"agregarPagos('efectivo', 5000, '', false)\">\r\n                                                        <img src=\"../../../../assets/img/billetes/5.svg\" alt=\"\" style=\"max-width: 60px; height: 30px;\">\r\n                                                    </a>\r\n                                                </div>\r\n                                                <div>\r\n                                                    <a type=\"button\" (click)=\"agregarPagos('efectivo', 2000, '', false)\">\r\n                                                        <img src=\"../../../../assets/img/billetes/2.svg\" alt=\"\" style=\"max-width: 60px; height: 30px;\">\r\n                                                    </a>\r\n                                                </div>\r\n\r\n                                            </div>\r\n\r\n                                            \r\n\r\n                                            <div class=\"mx-auto my-3\" *ngIf=\"invoiceForm.value.type === 'credito'\">\r\n\r\n                                                <div class=\"form-check\">\r\n                                                    <input formControlName=\"apartado\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"apartado\">\r\n\r\n                                                    <label class=\"form-check-label h4\" for=\"apartado\">\r\n                                                      Con sistema de apartado\r\n                                                    </label>\r\n                                                </div>\r\n\r\n                                            </div>\r\n\r\n                                            <div class=\"mx-auto\">\r\n\r\n                                                <!-- TABLA -->\r\n                                                <div class=\"table-responsive\" *ngIf=\"payments.length > 0\">\r\n                                                    <table class=\"table table-sm table-borderless\">\r\n                                                        <thead>\r\n                                                            <tr>\r\n                                                                <th>#</th>\r\n                                                                <th>Descripcion</th>\r\n                                                                <th>Monto</th>\r\n                                                                <th></th>\r\n                                                            </tr>\r\n                                                        </thead>\r\n                                                        <tbody formArrayName=\"payments\">\r\n                                                            <tr class=\"trHover\" *ngFor=\"let control of payments; let i = index\">\r\n                                                                <th>{{ i + 1}}</th>\r\n                                                                <td>\r\n                                                                    <p class=\"mb-0\">{{ control.type }} <span *ngIf=\"control.description\">- {{ control.description }}</span></p>\r\n                                                                </td>\r\n                                                                <td> {{ control.amount | divisa }} </td>\r\n                                                                <td>\r\n                                                                    <button type=\"button\" class=\"btn btn-link p-1 text-danger text-right\" (click)=\"eliminarPagos(control)\"> <i class=\"bi-trash\"></i> </button>\r\n                                                                </td>\r\n                                                            </tr>\r\n                                                        </tbody>\r\n                                                    </table>\r\n\r\n                                                </div>\r\n                                                <!-- TABLA -->\r\n\r\n                                                <!-- FECHA DE VENCIMIENTO -->\r\n                                                <hr *ngIf=\"credit\">\r\n                                                <div class=\"col-auto mb-3\" *ngIf=\"credit\">\r\n                                                    <label for=\"credi\" class=\"\">Fecha de vencimiento de la factura</label>\r\n                                                    <input type=\"date\" formControlName=\"fechaCredito\" class=\"form-control\" id=\"credi\" placeholder=\"Selecciona una fecha limite\" #fechCredito>\r\n                                                </div>\r\n                                                <hr *ngIf=\"credit\">\r\n\r\n                                                <!-- FECHA DE VENCIMIENTO -->\r\n\r\n                                                <!-- AGREGAR METODO DE PAGO -->\r\n\r\n                                                <div class=\"row g-3 d-flex justify-content-center\">\r\n\r\n                                                    <div class=\"col-auto\">\r\n\r\n                                                        <select class=\"form-select\" aria-label=\"Default select example\" (change)=\"typeAdd.value\" #typeAdd>\r\n                                                            <option *ngIf=\"invoiceForm.value.type === 'efectivo' || invoiceForm.value.type === 'mixto' || invoiceForm.value.type === 'credito'\" value=\"efectivo\">Efectivo</option>                                                     \r\n                                                            <ng-container *ngIf=\"invoiceForm.value.type !== 'efectivo'\">\r\n                                                                <option *ngFor=\"let banco of bancos\" [value]=\"banco.name\"> {{banco.name}}</option>                                                                \r\n                                                            </ng-container>\r\n                                                        </select>\r\n\r\n                                                    </div>\r\n\r\n                                                    <div class=\"col-auto\">\r\n                                                        <label for=\"Descripción\" class=\"visually-hidden\">Descripción</label>\r\n                                                        <input type=\"text\" class=\"form-control w100\" id=\"Descripción\" placeholder=\"Descripción\" (keyup)=\"descripcionAdd.value\" #descripcionAdd>\r\n                                                    </div>\r\n\r\n                                                    <div class=\"col-auto\">\r\n                                                        <label for=\"monto\" class=\"visually-hidden\">Monto</label>\r\n                                                        <input type=\"number\" class=\"form-control\" id=\"monto\" placeholder=\"Monto\" autofocus=\"true\" (keyup)=\"montoAdd.value\" #montoAdd>\r\n                                                    </div>\r\n\r\n                                                    <div class=\"col-auto\">\r\n                                                        <button [disabled]=\"vueltos >= 0 && this.payments.length > 0 \" type=\"button\" class=\"btn btn-primary mb-3\" (click)=\"agregarPagos(typeAdd.value, montoAdd.value, descripcionAdd.value, tcredito.checked)\">Agregar</button>\r\n                                                    </div>\r\n\r\n                                                </div>\r\n                                                <!-- AGREGAR METODO DE PAGO -->\r\n\r\n                                                <hr>\r\n                                                <div>\r\n                                                    <h4>Dividir Cuenta</h4>\r\n                                                    <button class=\"btn btn-primary mb-3\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapseExample\" aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                                                        Ver Productos\r\n                                                    </button>\r\n\r\n                                                    <div class=\"collapse\" id=\"collapseExample\">\r\n                                                        <div class=\"card card-body\">\r\n\r\n                                                            <!-- TOTAL -->\r\n                                                            <div class=\"text-center my-3\" *ngIf=\"empresa\">\r\n                                                                <h4 class=\"display-4 text-primary\">{{ total | divisa }}</h4>\r\n\r\n\r\n                                                                <h5 *ngIf=\"empresa.usd\" class=\"text-primary fw-normal\">{{ (total / empresa.currencyusd ) | number : '1.2-2' }} USD</h5>\r\n                                                                <h5 *ngIf=\"empresa.cop\" class=\"text-primary fw-normal\">{{ (total * empresa.currencycop ) | number : '1.2-2' }} COP</h5>\r\n                                                                <!-- <h4 class=\"display-4 text-primary\" *ngIf=\"empresa.responsable\">{{ total + ((total * empresa.tax)/100) | divisa }}</h4> -->\r\n\r\n                                                                <small *ngIf=\"totalPagos > 0 && totalPagos < total\" class=\"text-danger animated fadeIn\">Resta</small>\r\n                                                                <small *ngIf=\"totalPagos > 0 && totalPagos >= total\" class=\"text-success animated fadeIn\">Vueltos</small>\r\n                                                                <h4 class=\"mb-0 fw-normal animated fadeIn\" [ngClass]=\" {   'text-danger': totalPagos < total, 'text-success': totalPagos >= total  }\" *ngIf=\"totalPagos > 0\">\r\n                                                                    {{ vueltos | divisa }}\r\n                                                                </h4>\r\n\r\n                                                            </div>\r\n                                                            <!-- TOTAL -->\r\n\r\n                                                            <div class=\"table-responsive\">\r\n                                                                <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                                                                    <thead class=\"border-bottom \">\r\n                                                                        <tr>\r\n                                                                            <th class=\"text-muted text-left\" scope=\"col \" colspan=\"2 \">Descripción</th>\r\n                                                                            <th class=\"text-muted \" scope=\"col \">Precio</th>\r\n                                                                            <th class=\"text-muted \" scope=\"col \">Cantidad</th>\r\n                                                                            <th class=\"text-muted \" scope=\"col \">Monto</th>\r\n                                                                            <th class=\"text-muted \" scope=\"col \"></th>\r\n                                                                        </tr>\r\n                                                                    </thead>\r\n                                                                    <tbody>\r\n                                                                        <tr *ngIf=\"carrito.length === 0\" class=\"text-center \">\r\n                                                                            <th colspan=\"10\" class=\"py-4\">\r\n                                                                                <h4 class=\"text-muted\">No has seleccionado ningun producto</h4>\r\n                                                                            </th>\r\n                                                                        </tr>\r\n\r\n                                                                        <ng-container *ngIf=\"carrito.length > 0 \">\r\n\r\n                                                                            <ng-container *ngFor=\"let item of carrito; let i = index\">\r\n                                                                                <tr class=\"trHover\" *ngIf=\"item.product\">\r\n                                                                                    <td colspan=\"2\">{{ item.product.name }}</td>\r\n                                                                                    <td>{{ item.price | divisa}}</td>\r\n                                                                                    <td class=\"text-center\">\r\n                                                                                        <input class=\"w-75\" min=\"1\" type=\"number\" #cantP (keyup)=\"cantP.value = cantP.value; addSaldo(item.price, cantP.value)\">\r\n                                                                                    </td>\r\n                                                                                    <td>{{ item.price * cantP.value | divisa}}</td>\r\n                                                                                </tr>\r\n                                                                            </ng-container>\r\n\r\n                                                                        </ng-container>\r\n\r\n                                                                    </tbody>\r\n                                                                </table>\r\n                                                            </div>\r\n\r\n                                                            <div class=\"row g-3 d-flex justify-content-center\">\r\n\r\n                                                                <div class=\"col-auto\">\r\n\r\n                                                                    <select class=\"form-select\" aria-label=\"Default select example\" (change)=\"typeAddd.value\" #typeAddd>\r\n                                                                        <option value=\"efectivo\">Efectivo</option>\r\n                                                                        <option value=\"transferencia\">Transferencia</option>                                                            \r\n                                                                        <ng-container>\r\n                                                                            <option *ngFor=\"let banco of bancos\" [value]=\"banco.name\"> {{banco.name}}</option>                                                                \r\n                                                                        </ng-container>\r\n                                                                    </select>\r\n\r\n                                                                </div>\r\n\r\n                                                                <div class=\"col-auto\">\r\n                                                                    <label for=\"Descripción\" class=\"visually-hidden\">Descripción</label>\r\n                                                                    <input type=\"text\" class=\"form-control w100\" id=\"Descripción\" placeholder=\"Descripción\" (keyup)=\"descripcionAdd.value\" #descripcionAddd>\r\n                                                                </div>\r\n\r\n                                                                <div class=\"col-auto\">\r\n                                                                    <label for=\"monto\" class=\"visually-hidden\">Monto</label>\r\n                                                                    <input type=\"number\" class=\"form-control\" id=\"monto\" placeholder=\"Monto\" (keyup)=\"montoAddd.value\" #montoAddd>\r\n                                                                </div>\r\n\r\n                                                                <div class=\"col-auto\">\r\n                                                                    <button type=\"button\" [value]=\"saldo\" class=\"btn btn-primary mb-3\" (click)=\"agregarPagos(typeAddd.value, montoAddd.value, descripcionAddd.value, tcredito.checked)\">Agregar Pago</button>\r\n                                                                </div>\r\n\r\n                                                            </div>\r\n\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n\r\n                                                </div>\r\n\r\n\r\n                                                <hr>\r\n\r\n                                                <div class=\"mb-3\">\r\n                                                    <div class=\"formGroup\">\r\n                                                        <label for=\"propi\" class=\"form-label fw-bold\">Servicio</label>\r\n                                                        <input id=\"propi\" (keyup.enter)=\"changeTip(tipIn.value)\" type=\"number\" min=\"0\" class=\"form-control\" placeholder=\"propina\" #tipIn>\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                <ng-container *ngIf=\"empresa\">\r\n\r\n                                                    <div *ngIf=\"empresa!.datafon\">\r\n\r\n                                                        <div class=\"col-md-4\">\r\n\r\n                                                            <div class=\"form-check\">\r\n                                                                <input class=\"form-check-input\" type=\"checkbox\" id=\"printpos\" #datafonCheck (change)=\"datafonCheck.checked; activeDatafon(datafonCheck.checked)\">\r\n                                                                <label class=\"form-check-label\" for=\"printpos\">\r\n                                                            Comisión de datafon\r\n                                                          </label>\r\n                                                            </div>\r\n\r\n                                                        </div>\r\n\r\n                                                        <div class=\"col-md-12 mt-3\" *ngIf=\"datafonCheck.checked\">\r\n                                                            <div class=\"formGroup\">\r\n                                                                <label for=\"datafonCo\" class=\"form-label fw-bold\">Comision de datafon</label>\r\n                                                                <input id=\"datafonCo\" (keyup.enter)=\"changeTip(tipIn.value)\" type=\"number\" min=\"0\" class=\"form-control\" placeholder=\"Datafon\" #datafIn [value]=\"datafon\">\r\n                                                            </div>\r\n                                                        </div>\r\n\r\n\r\n                                                    </div>\r\n\r\n                                                    <div *ngIf=\"empresa.taller\" class=\"mb-3\">\r\n                                                        <div class=\"formGroup\">\r\n                                                            <label for=\"propi\" class=\"form-label fw-bold\">Placa</label>\r\n                                                            <input readonly formControlName=\"placa\" id=\"placa\" type=\"text\" class=\"form-control\" placeholder=\"Placa\" (change)=\"savePlaca(placaIn.value)\" #placaIn>\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n                                                </ng-container>\r\n\r\n                                                <div class=\"row g-3 d-flex justify-content-center\" *ngIf=\"mesa\">\r\n\r\n                                                    <div class=\"mb-5\">\r\n                                                        <label for=\"nota\" class=\"form-label fw-bold\">Nota</label>\r\n                                                        <textarea formControlName=\"nota\" class=\"form-control\" id=\"nota\" rows=\"3\" (change)=\"saveNota(notaTxt.value)\" #notaTxt></textarea>\r\n                                                    </div>\r\n\r\n                                                </div>\r\n\r\n                                            </div>\r\n\r\n\r\n                                        </form>\r\n                                        <!-- FORM INVOICE - FORM INVOICE -->\r\n\r\n                                    </div>\r\n\r\n                                </div>\r\n                            </div>\r\n\r\n\r\n                        </div>\r\n                        <!-- COLUMNA IZQ -->\r\n\r\n                    </div>\r\n\r\n                    <!-- <div class=\"d-flex justify-content-end gap-2\">\r\n                        <div class=\"float-end\">\r\n                            <button type=\"button\" [disabled]=\"facturando == true || user.cerrada\" (click)=\"crearFactura(false)\" class=\"btn btn-outline-primary\">\r\n                            Crear Factura Pos\r\n                        </button>\r\n                        </div>\r\n                        <div class=\"float-end\" *ngIf=\"empresa?.electronica\">\r\n                            <button type=\"button\" [disabled]=\"facturando == true || user.cerrada\" (click)=\"crearFactura(true)\" class=\"btn btn-outline-success\">\r\n                            Crear Factura Electronica\r\n                        </button>\r\n                        </div>\r\n                    </div> -->\r\n\r\n\r\n                </div>\r\n\r\n                <div class=\"d-flex justify-content-center mb-3\">\r\n                    <div class=\"card border-0 pb-4\" [ngStyle]=\"{'width': empresa.impresora === 58 ? '14rem' : '24rem'}\" style=\"width: 14rem; color:black; background: white;\" id=\"printDiv2\" *ngIf=\"factura\">\r\n\r\n                        <!-- EMPRESA -->\r\n                        <div class=\"card-body px-1 mb-2\" style=\"border-bottom: 2px solid black;\" *ngIf=\"empresa\">\r\n\r\n                            <div class=\"d-flex justify-content-center\">\r\n                                <img *ngIf=\"empresa.logo\" [src]=\"empresa.logo | imagen:'logo'\" class=\"mx-auto\" width=\"200px\" alt=\"\">\r\n                            </div>\r\n\r\n                            <h4 class=\"card-title mb-0 text-wrap text-center\"> {{ empresa.name }} </h4>\r\n                            <p class=\"text-center mb-0\" *ngFor=\"let text of ticketHeader\" style=\"line-height: 1rem;\"> {{ text }} </p>\r\n\r\n                        </div>\r\n                        <!-- EMPRESA -->\r\n\r\n                        <!-- CLIENTE -->\r\n                        <div class=\"pb-2\" style=\"border-bottom: 2px solid black;\">\r\n                            <h6 class=\"mb-0 text-wrap text-left\">\r\n                                CLIENTE / RAZON SOCIAL <br>\r\n                                <small *ngIf=\"factura.client\" class=\"text-wrap fw-normal\"> {{ factura.client.name }} </small>\r\n                                <small *ngIf=\"!factura.client\" class=\"text-wrap fw-normal\"> Consumidor Final </small>\r\n                            </h6>\r\n\r\n                            <h6 class=\"mb-0 text-wrap text-left\">\r\n                                CC / NIT <br>\r\n                                <small *ngIf=\"factura.client\" class=\"text-wrap fw-normal\"> {{ factura.client.cedula }} </small>\r\n                                <small *ngIf=\"!factura.client\" class=\"text-wrap fw-normal\"> 222222222222 </small>\r\n                            </h6>\r\n                            <h6 class=\"mb-0 text-wrap text-left\">\r\n                                TELEFONO <br>\r\n                                <small *ngIf=\"factura.client\" class=\"text-wrap fw-normal\"> {{ factura.client.phone }} </small>\r\n                            </h6>\r\n                            <h6 class=\"mb-0 text-wrap text-left\" *ngIf=\"factura.client\">\r\n                                CIUDAD <br>\r\n                                <small *ngIf=\"factura.client\" class=\"text-wrap fw-normal\"> {{ factura.client.city || '----------'}} </small>\r\n                            </h6>\r\n                            <h6 class=\"mb-0 text-wrap text-left\" *ngIf=\"factura.client\">\r\n                                DIRECCIÓN <br>\r\n                                <small *ngIf=\"factura.client\" class=\"text-wrap fw-normal\"> {{ factura.client.address || '----------'}} </small>\r\n                            </h6>\r\n                            <h6 class=\"mb-0 text-wrap text-left\" *ngIf=\"factura.placa.length > 0\">\r\n                                Placa <br>\r\n                                <small class=\"text-wrap fw-normal\"> {{ factura.placa || '----------'}} </small>\r\n                            </h6>\r\n\r\n                            <h6 class=\"mb-0 text-wrap text-left\">\r\n                                <p class=\"text-wrap fw-normal mb-0\"> {{ factura.mesa.name }} - {{ factura.mesero.name }} </p>\r\n                            </h6>\r\n                        </div>\r\n                        <!-- CLIENTE -->\r\n\r\n                        <!-- FACTURA -->\r\n                        <div class=\"py-2\" style=\"border-bottom: 2px solid black;\">\r\n                            <h6 class=\"mb-0 text-wrap text-left\">{{ empresa.type }}: <span *ngIf=\"!factura.cufe\"> {{ factura?.invoice }} </span> <span *ngIf=\"factura.cufe\"> {{ factura?.number }} </span></h6>\r\n                            <h6 class=\"mb-0 text-wrap text-left\">Control: {{ factura?.control }}</h6>\r\n                            <small class=\"mb-0 text-wrap text-left\">Fecha: {{ factura.fecha | date:'short' }}</small>\r\n                        </div>\r\n                        <!-- FACTURA -->\r\n\r\n                        <table class=\"table table-borderless table-hover table-sm\" [ngClass]=\" {'tabla-con-marca': factura.marca && !factura.credito}\">\r\n                            <tbody style=\"color: black;\" [ngStyle]=\"{'fonto-size': empresa.impresora === 80 ? '1.4rem importan!' : '1rem'}\">\r\n                                <tr *ngFor=\"let item of factura.products\" class=\"trHover\">\r\n                                    <td class=\"py-0\" [ngStyle]=\"{'line-height': empresa.impresora === 80 ? '1rem importan!' : '0.8rem'}\">\r\n                                        <small class=\"text-wrap\"> {{ item.qty }} x {{item.price | divisa}} </small> <br>\r\n                                        <small class=\"text-wrap\"> {{ item.product.name }} <strong *ngIf=\"item.mayor\" class=\"fw-bolde text-black\">M</strong> </small>\r\n                                    </td>\r\n                                    <td class=\"text-end\">\r\n                                        <small *ngIf=\"item.product.tax\"> {{ item.product.taxid.valor }}% </small>\r\n                                        <small *ngIf=\"!item.product.tax\"> 0% </small>\r\n                                    </td>\r\n                                    <td>\r\n                                        <small *ngIf=\"!empresa.impuesto\" class=\"text-wrap\"> {{ item.qty * item.price | divisa }} </small>\r\n                                        <small *ngIf=\"empresa.impuesto\" class=\"text-wrap\"> {{ (item.qty * item.price) + ((item.qty * item.price) * (item.product.taxid?.valor/100)) | divisa }} </small>\r\n                                    </td>\r\n                                </tr>\r\n                                <tr class=\"\" style=\"border-top: 2px solid black;\">\r\n                                    <td>\r\n                                        <h6 class=\"mb-0 text-wrap text-left\">Sub-total</h6>\r\n                                    </td>\r\n                                    <td class=\"fw-bold\">\r\n                                        <h6 class=\"mb-0 text-wrap text-rigth\"> {{ factura.base | divisa }} </h6>\r\n                                    </td>\r\n                                </tr>\r\n\r\n                                <!-- DESCUENTO -->\r\n                                <tr class=\"\" style=\"border-top: 2px solid black;\">\r\n                                    <td>\r\n                                        <h6 class=\"mb-0 text-wrap text-left\">Descuento</h6>\r\n                                    </td>\r\n                                    <td class=\"fw-bold\">\r\n                                        <h6 class=\"mb-0 text-wrap text-rigth\" *ngIf=\"factura.descuento\"> {{ (factura.base * factura.porcentaje )/100 | divisa }} </h6>\r\n                                    </td>\r\n                                </tr>\r\n                                \r\n                                <ng-container *ngIf=\"!empresa.impuesto\">\r\n                                    <tr class=\"\" style=\"border-top: 2px solid black;\">\r\n                                        <td>\r\n                                            <h6 *ngIf=\"!empresa.impuestos\" class=\"mb-0 text-wrap text-left\">No responsable de IVA</h6>\r\n                                        </td>\r\n                                        <td class=\"fw-bold\">\r\n                                            <h6 class=\"mb-0 text-wrap text-rigth\"> 0 </h6>\r\n                                        </td>\r\n                                    </tr>\r\n                                </ng-container>\r\n\r\n                                <ng-container *ngIf=\"empresa.impuesto\">\r\n                                    <ng-container *ngFor=\"let impuesto of impuestos\">\r\n\r\n                                        <tr *ngIf=\"impuesto.total > 0\" class=\"\" style=\"border-top: 2px solid black;\">\r\n                                            <td>\r\n                                                <h6 class=\"mb-0 text-wrap text-left\"> {{ impuesto.name }} </h6>\r\n\r\n                                            </td>\r\n                                            <td class=\"fw-bold\">\r\n                                                <h6 class=\"mb-0 text-wrap text-rigth\"> {{ impuesto.total | divisa }} </h6>\r\n                                            </td>\r\n                                        </tr>\r\n                                    </ng-container>\r\n                                </ng-container>\r\n\r\n                                <tr class=\"\" style=\"border-top: 2px solid black;\">\r\n                                    <td>\r\n                                        <h6 class=\"mb-0 text-wrap text-left\">Total</h6>\r\n                                    </td>\r\n                                    <td class=\"fw-bold\">\r\n                                        <h6 class=\"mb-0 text-wrap text-rigth\"> {{ factura.amount - datafon | divisa}} </h6>\r\n                                    </td>\r\n                                </tr>\r\n\r\n                                <tr class=\"\" style=\"border-top: 2px solid black;\" *ngIf=\"empresa.tip\">\r\n                                    <td>\r\n                                        <h6 class=\"mb-0 text-wrap text-left\">Servicio Sugerido del {{empresa.propina}}%</h6>\r\n                                    </td>\r\n                                    <td class=\"fw-bold\">\r\n                                        <h6 class=\"mb-0 text-wrap text-rigth\"> {{ factura.tip | divisa }} </h6>\r\n                                    </td>\r\n                                </tr>\r\n\r\n                                <tr class=\"\" style=\"border-top: 2px solid black;\" *ngIf=\"empresa.datafon && datafon > 0\">\r\n                                    <td>\r\n                                        <h6 class=\"mb-0 text-wrap text-left\">Datafon Comisión {{empresa.comidatafon}}%</h6>\r\n                                    </td>\r\n                                    <td class=\"fw-bold\">\r\n                                        <h6 class=\"mb-0 text-wrap text-rigth\"> {{ datafon | divisa }} </h6>\r\n                                    </td>\r\n                                </tr>\r\n\r\n                                <tr class=\"\" style=\"border-top: 2px solid black;\" *ngIf=\"empresa.tip\">\r\n                                    <td>\r\n                                        <h6 class=\"mb-0 text-wrap text-left\">Total + Servicio <span *ngIf=\"empresa.datafon && datafon > 0\"> + Datafon </span></h6>\r\n                                    </td>\r\n                                    <td class=\"fw-bold\">\r\n                                        <h6 class=\"mb-0 text-wrap text-rigth\"> {{ factura.tip + factura.amount + datafon | divisa}} </h6>\r\n                                    </td>\r\n                                </tr>\r\n\r\n                            </tbody>\r\n                            <tfoot>\r\n                                <tr>\r\n                                    <th colspan=\"\">ITEMS</th>\r\n                                    <th> {{ factura.totalItems | number }} </th>\r\n                                </tr>\r\n                            </tfoot>\r\n                        </table>\r\n\r\n                        <hr class=\"my-1\">\r\n                        <div *ngIf=\"!factura.apartado\">\r\n                            <p class=\"mb-0 mx-auto\"><small class=\"text-wrap text-center mb-0\">Pago con: {{factura.pago | divisa}} </small></p>\r\n                            <p class=\"mb-0 mx-auto\"><small class=\"text-wrap text-center mb-0\">Vueltos: {{factura.vueltos | divisa}} </small></p>\r\n                        </div>\r\n\r\n                        <div *ngIf=\"factura.apartado\">\r\n                            <h6 class=\"mb-2 fw-bold\">Historial de pagos</h6>\r\n                            <table class=\"table table-sm\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th scope=\"col\">Desc</th>\r\n                                        <th scope=\"col\">Pago</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr *ngFor=\"let pay of factura.payments\">\r\n                                        <td>Abono {{ pay.type }} </td>\r\n                                        <td> {{ pay.amount | divisa }} </td>\r\n                                    </tr>\r\n\r\n                                </tbody>\r\n                                <tfoot>\r\n                                    <tr>\r\n                                        <th>Restante</th>\r\n                                        <th> {{ factura.amount - totalPagos | divisa }} </th>\r\n                                    </tr>\r\n                                </tfoot>\r\n                            </table>\r\n\r\n                        </div>\r\n\r\n                        <hr *ngIf=\"factura.cufe\" class=\"my-1\">\r\n\r\n                        <div *ngIf=\"factura.cufe\">\r\n                            <h6 class=\"mb-0\">cufe:</h6>\r\n                            <p class=\"\">- {{ factura.cufe }} </p>\r\n\r\n                            <div class=\"qrcodeImage d-flex justify-content-center\">\r\n                                <qrcode [qrdata]=\"'https://catalogo-vpfe.dian.gov.co/document/searchqr?documentkey='+factura.cufe\" [allowEmptyString]=\"true\" [alt]=\"'A custom alt attribute'\" [ariaLabel]=\"'QR Code image with the following content...'\" [cssClass]=\"'center'\" [colorDark]=\"'#000'\"\r\n                                    [colorLight]=\"'#ffffffff'\" [elementType]=\"'img'\" [errorCorrectionLevel]=\"'M'\" [margin]=\"3\" [scale]=\"1\" [title]=\"'A custom title attribute'\" [width]=\"200\"></qrcode>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                        <hr class=\"my-1\">\r\n\r\n\r\n                        <h6 class=\"mb-0\">Nota:</h6>\r\n                        <p class=\"\">- {{ factura.nota }} </p>\r\n\r\n\r\n                        <hr *ngIf=\"factura.nota\" class=\"my-1\">\r\n\r\n                        <p class=\"text-center mb-0\" *ngFor=\"let text of ticketfooter\" style=\"line-height: 1rem;\"> {{ text }} </p>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"d-flex justify-content-center mb-3\" *ngIf=\"printComandaC\">\r\n                    <div class=\"card border-0 pb-4\" [ngStyle]=\"{'width': empresa.impresora === 58 ? '14rem' : '24rem'}\" style=\"width: 14rem; color:black; background: white;\" id=\"printComanda\">\r\n                        <div class=\" text-wrap bg-white p-3 position-relative\">\r\n                            <h2 class=\"mb-2 text-center\">Orden # {{ mesa.fecha | date: 'H-ms' }}</h2>\r\n                            <i [ngClass]=\"{'text-danger': mesa.disponible == false, 'text-success': mesa.disponible == true}\" class=\"bi-dot position-absolute top-0 start-100 translate-middle pe-4 pt-2\" style=\"font-size: 2.5rem;\"></i>\r\n                            <h5 class=\"mb-0 text-center text-wrap text-capitalize\">{{ mesa.name }}</h5>\r\n                            <h6 class=\"mb-0 text-center text-wrap text-capitalize fw-normal\"> {{ mesa.mesero.name }} </h6>\r\n                            <p class=\"mb-0 text-center\"> Fecha: {{ mesa.fecha | date: \"medium\" }} </p>\r\n                            <h5 class=\"mb-0 text-center text-wrap text-capitalize\" *ngIf=\"mesa.cliente?.name\">{{ mesa.cliente?.name || 'Consumidor Final' }}</h5>\r\n        \r\n        \r\n                            <div class=\"table-responsive\">\r\n        \r\n                                <table class=\"table table-sm align-middle\">\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th scope=\"col\">Item</th>\r\n                                            <th scope=\"col\">Estado</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n        \r\n                                        <ng-container *ngFor=\"let item of comandas; let i = index\">\r\n        \r\n                                            <tr style=\"color: black;\">\r\n                                                <td>\r\n                                                    <h6 class=\"mb-0 lh-1 text-capitalize fs-5\" style=\"color: #000;\"> <span class=\"lh-1\">01 - {{item.product.name}}  </span></h6>\r\n                                                    <small> {{ item.fecha | date:'short' }} </small>\r\n                                                    <!-- <span *ngFor=\"let ingrediente of item.ingredientes\" class=\"badge rounded-pill bg-light text-primary fw-normal\"> {{ ingrediente.name }} </span> -->\r\n                                                    <ng-container *ngFor=\"let ingrediente of item.ingredientes\">\r\n                                                        <small *ngIf=\"!ingrediente.status\" class=\"me-1\"> X {{ ingrediente.name }} </small>\r\n                                                    </ng-container>\r\n\r\n                                                </td>\r\n                                                <td>\r\n                                                    <select class=\"form-select form-select-sm\" aria-label=\".form-select-sm example\" (change)=\"cambiarEstado(mesa.comanda, item.product, esta.value, mesa)\" #esta>\r\n                                                        <option class=\"text-danger\" value=\"pendiente\" [selected]=\"item.estado === 'pendiente'\">Pendiente</option>\r\n                                                        <option class=\"text-warning\" value=\"Preparando\" [selected]=\"item.estado === 'Preparando'\">Preparando</option>\r\n                                                        <option class=\"text-success\" value=\"Entregado\" [selected]=\"item.estado === 'Entregado'\">Entregado</option>\r\n                                                    </select>\r\n                                                </td>\r\n                                            </tr>\r\n                                        </ng-container>\r\n                                    </tbody>\r\n                                </table>\r\n        \r\n                                <!-- NOTAS -->\r\n                                <div *ngIf=\"mesa?.nota.length > 0\" class=\"container border rounded overflow-auto\" #content style=\"max-height: 15rem; min-height: 5rem; overflow-x: hidden!important;\">\r\n                                    <ul class=\"list-group list-group-flush py-2\" #messages>\r\n                                        <li class=\"list-group-item border-0 py-1 px-1\" *ngFor=\"let nota of mesa.nota\">\r\n                                            <div class=\"d-flex justify-content-start\">\r\n                                                <!-- <div>\r\n                                                    <button type=\"button\" disabled class=\"btn btn-link p-1 text-danger\">\r\n                                                        <i class=\"bi-trash\" style=\"font-size: 0.9rem\"></i>\r\n                                                    </button>\r\n                                                </div> -->\r\n                                                <div class=\"badge bg-light2 text-muted px-2 py-2 text-wrap text-start\" style=\"width: auto;\">\r\n                                                    <h6 class=\"mb-0 text-break\">\r\n                                                        {{ nota.nota }}\r\n                                                    </h6>\r\n                                                    <p class=\"mb-0 text-end\" *ngIf=\"nota.date \"><small class=\"text-muted\"> {{ nota?.date  | date: \"medium\" }} </small></p>\r\n                                                </div>\r\n                                            </div>\r\n                                        </li>\r\n        \r\n                                    </ul>\r\n                                </div>\r\n                                <!-- NOTAS -->\r\n        \r\n                            </div>\r\n        \r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    TICKET 1 \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    FOOTER\r\n========================================================================= -->\r\n<div class=\"fixed-bottom rounded-0  border-end-0 border-start-0 border-bottom-0\">\r\n\r\n    <div class=\"card\">\r\n        <div class=\"card-body\">\r\n\r\n            <div class=\"d-flex justify-content-between flex-wrap align-items-center\">\r\n\r\n                <!-- CLIENT -->\r\n                <div>\r\n\r\n                    <!-- MESA -->\r\n                    <div *ngIf=\"mesa\">\r\n                        <h6 class=\"fw-bold mb-0\">\r\n                            <span class=\"text-primary text-wrap\">\r\n                            {{ mesa.name }} - {{ mesa.mesero.name || '' }} \r\n                        </span>\r\n                        </h6>\r\n                    </div>\r\n\r\n                    <!-- INFORMACION DEL CLIENTE -->\r\n                    <div class=\"d-flex flex-column\">\r\n\r\n                        <div>\r\n                            <h6 class=\"fw-bold mb-0\">CLIENTE: <small> {{ clienteTemp.name }}</small> </h6>\r\n                        </div>\r\n                        <div>\r\n                            <h6 class=\"fw-bold mb-0\">CC/Nit: <small *ngIf=\"clienteTemp.cedula\"> {{ clienteTemp.cedula }} </small> </h6>\r\n                        </div>\r\n                    </div>\r\n                    <!-- INFORMACION DEL CLIENTE -->\r\n\r\n                </div>\r\n\r\n                <!-- AMOUNT -->\r\n                <div>\r\n                    <div class=\"text-center\" *ngIf=\"empresa\">\r\n\r\n                        <p class=\"h6 fw-normal text-muted mb-0\">Sub-total {{ base | divisa }} <span *ngIf=\"empresa.propina\"> + Servicio {{ totalTip | divisa }}</span> <span *ngIf=\"empresa.datafon && datafon > 0\"> + Datafon {{ datafon | divisa }}</span> </p>\r\n                        <p class=\"h6 fw-normal text-danger mb-0\" *ngIf=\"mesa?.descuento\">Descuento {{ ((base * mesa?.porcentaje) / 100) | divisa }}</p>\r\n                        <h4 class=\"fw-normal display-7 text-primary mb-1\">{{ total | divisa }}</h4>\r\n                        <h5 class=\"mb-0 fw-normal animated fadeIn\" [ngClass]=\" {   'text-danger': totalPagos < total, 'text-success': totalPagos >= total  }\" *ngIf=\"totalPagos > 0\">\r\n                            <small *ngIf=\"totalPagos > 0 && totalPagos < total\" class=\"text-danger animated fadeIn\">Resta:</small>\r\n                            <small *ngIf=\"totalPagos > 0 && totalPagos >= total\" class=\"text-success animated fadeIn\">Vueltos:</small> {{ vueltos | divisa }}\r\n                        </h5>\r\n\r\n                    </div>\r\n                    <!-- TOTAL -->\r\n                </div>\r\n\r\n                <!-- Buttons -->\r\n                <div *ngIf=\"empresa\">\r\n\r\n                    <div class=\"mx-auto my-3\" [ngClass]=\"{'d-none': !empresa.comandas}\">\r\n\r\n                        <!-- IMPRIMIR COMANDA -->\r\n                        <div class=\"form-check\">\r\n                            <input #checkCom (change)=\"printComandaC = checkCom.checked\" class=\"form-check-input\" type=\"checkbox\" id=\"checkCom\">\r\n\r\n                            <label class=\"form-check-label h5\" for=\"checkCom\">\r\n                                Imprimir Comanda\r\n                            </label>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"d-flex justify-content-end gap-2\">\r\n\r\n                        <!-- <button (click)=\"crearPedido()\" [disabled]=\"carrito.length === 0 || clienteTemp.cedula === '' || btnPedido === false\" type=\"button\" class=\"btn btn-info mt-2 btnW waves-effect waves-dark text-white\"> Crear Pedido </button> -->\r\n                        <!-- BTN PREFACTURA -->\r\n                        <div class=\"float-end\">\r\n                            <button type=\"button\" (click)=\"timeCommand()\" class=\"btn btn-sm btn-outline-info\" data-bs-toggle=\"modal\" data-bs-target=\"#prefactura\">\r\n                            Prefactura\r\n                        </button>\r\n                        </div>\r\n                        <!-- BTN PREFACTURA -->\r\n\r\n                        <!-- BTN COTIZACIÓN -->\r\n                        <div *ngIf=\"empresa?.cotizacion\" class=\"float-end\">\r\n                            <button type=\"button\" [disabled]=\"facturando == true || user.cerrada\" (click)=\"crearFactura(false)\" class=\"btn btn-sm btn-outline-primary\">\r\n                                Cotización\r\n                            </button>\r\n                        </div>\r\n                        <!-- BTN COTIZACIÓN -->\r\n\r\n                        <!-- BTN CREAR FACTURA -->\r\n                        <div class=\"float-end\" *ngIf=\"empresa?.electronica\">\r\n                            <button type=\"button\" [disabled]=\"facturando == true || user.cerrada\" (click)=\"crearFactura(true)\" class=\"btn btn-sm btn-outline-success\">\r\n                        Crear Factura Electronica\r\n                    </button>\r\n                        </div>\r\n                        <!-- BTN CREAR FACTURA -->\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    MODAL CREAR CLIENTE \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"buscarCliente\" tabindex=\"-1\" aria-labelledby=\"buscarClienteModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"buscarClienteModal\"><i class=\"bi-people\" style=\"font-size: 1rem\"></i>Crear Cliente</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n                <div class=\"mt-2\">\r\n\r\n                    <form autocomplete=\"off\" [formGroup]=\"newClientForm\" (ngSubmit)=\"crearCliente()\">\r\n\r\n                        <!-- =======================================================================\r\n                            DATOS PERSONALES \r\n                        =========================================================================== -->\r\n\r\n                        <div class=\"row mb-2\">\r\n\r\n                            <!-- Tipo de empresa ** -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"partyType\" class=\"col-sm-auto col-form-label\">Tipo de empresa</label>\r\n                                <select formControlName=\"party_type\" class=\"form-select\" id=\"partyType\" #partyType (change)=\"partyType.value\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"PERSONA_NATURAL\">Persona Natural</option>\r\n                                    <option value=\"PERSONA_JURIDICA\" >Persona Juridica</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- Nombre de la empresa -->\r\n                            <div *ngIf=\"partyType.value === 'PERSONA_JURIDICA'\" class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"companyName\">Nombre de la empresa </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"companyName\" formControlName=\"company_name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombre de la empresa\">\r\n                                    <label for=\"floatingInput\">Nombre de la empresa </label>\r\n                                </div>\r\n                                <p *ngIf=\"campoValido('company_name')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <!-- Nombres de la persona natural -->\r\n                            <div *ngIf=\"partyType.value === 'PERSONA_NATURAL'\" class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"firstName\">Nombres de la persona natural </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"firstName\" formControlName=\"first_name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombres de la persona natural\">\r\n                                    <label for=\"floatingInput\">Nombres de la persona natural </label>\r\n                                </div>\r\n                                <p *ngIf=\"campoValido('first_name')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <!-- Apellidos de la persona natural -->\r\n                            <div *ngIf=\"partyType.value === 'PERSONA_NATURAL'\" class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"familyName\">Apellidos de la persona natural </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"familyName\" formControlName=\"family_name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Apellidos de la persona natural\">\r\n                                    <label for=\"floatingInput\">Apellidos de la persona natural </label>\r\n                                </div>\r\n                                <p *ngIf=\"campoValido('family_name')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                            </div>\r\n\r\n                            <!-- TIPO DE DOCUMENTO -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"indentityType\" class=\"col-sm-auto col-form-label\">Tipo de documento</label>\r\n                                <select formControlName=\"party_identification_type\" class=\"form-select\" id=\"indentityType\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"NIT\">NIT</option>\r\n                                    <option value=\"CC\" selected>CC</option>\r\n                                    <option value=\"PASAPORTE\" >PASAPORTE</option>\r\n                                    <option value=\"CE\" >CE</option>\r\n                                    <option value=\"TE\" >TE</option>\r\n                                    <option value=\"PEP\" >PEP</option>\r\n                                    <option value=\"TI\" >TI</option>\r\n                                    <option value=\"RC\" >RC</option>\r\n                                    <option value=\"IE\" >IE</option>\r\n                                    <option value=\"NIT_OTRO_PAIS\" >Nit de otro pais</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- CEDULA O NIT -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"cedula\">CC / NIT </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"cedula\" formControlName=\"cedula\" type=\"text\" class=\"form-control\" placeholder=\"cedula\">\r\n                                    <label for=\"floatingInput\">CC / NIT </label>\r\n                                    <p *ngIf=\"campoValido('cedula')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- EMAIL ** -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"email\">Correo electronico </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"email\" formControlName=\"email\" type=\"text\" class=\"form-control\" placeholder=\"Correo electronico\">\r\n                                    <label for=\"floatingInput\">Correo electronico </label>\r\n                                    <p *ngIf=\"campoValido('email')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- DEPARTAMENTO ** -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"departamentoS\" class=\"col-sm-auto col-form-label\">Departamento</label>\r\n                                <select formControlName=\"department\" class=\"form-select\" id=\"departamentoS\" #departmentSS (change)=\"searchCities(departmentSS.value)\">\r\n                                    <option >Seleccionar Departamento</option>\r\n                                    <option *ngFor=\"let department of departments\" [value]=\"department.departamento\" >{{department.departamento}}</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- CIUDAD ** -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"ciudadS\" class=\"col-sm-auto col-form-label\">Departamento</label>\r\n                                <select formControlName=\"city\" class=\"form-select\" id=\"ciudadS\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"\" selected>Seleccionar Ciudad</option>\r\n                                    <option *ngFor=\"let city of ListCities\" [value]=\"city.ciudad\" >{{city.ciudad}}</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- DIRECCION ** -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"direccion\">Dirección </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"direccion\" formControlName=\"address\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Dirección\">\r\n                                    <label for=\"floatingInput\">Dirección </label>\r\n                                    <p *ngIf=\"campoValido('address')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <!-- TELEFONO -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"telefono\">Telefono </label>\r\n                                <div class=\"form-floating\">\r\n                                    <input id=\"telefono\" formControlName=\"phone\" type=\"text\" class=\"form-control\" placeholder=\"Telefono\">\r\n                                    <label for=\"floatingInput\">Telefono </label>\r\n                                    <p *ngIf=\"campoValido('phone')\" class=\"mb-1 animated fadeIn text-danger\"> <small>Este campo es obligatorio</small> </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- REGIMEN -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"regimen\" class=\"col-sm-auto col-form-label\">Regimen</label>\r\n                                <select formControlName=\"regimen\" class=\"form-select\" id=\"regimen\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"SIMPLE\">SIMPLE</option>\r\n                                    <option value=\"AUTORRETENEDOR\" >AUTORRETENEDOR</option>\r\n                                    <option value=\"AGENTE_RETENCION_IVA\" >AGENTE RETENCION IVA</option>\r\n                                    <option value=\"ORDINARIO\" >ORDINARIO</option>\r\n                                    <option value=\"GRAN_CONTRIBUYENTE\" >GRAN CONTRIBUYENTE</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <!-- TIPO DE IMPUESTO ** -->\r\n                            <div class=\"col-md-12 mb-3 px-md-1\">\r\n                                <label for=\"taxLevel\" class=\"col-sm-auto col-form-label\">Tipo de impuesto</label>\r\n                                <select formControlName=\"tax_level_code\" class=\"form-select\" id=\"taxLevel\" aria-label=\"Floating label select example\">\r\n                                    <option value=\"SIMPLIFICADO\">SIMPLIFICADO</option>\r\n                                    <option value=\"RESPONSABLE_DE_IVA\" >RESPONSABLE DE IVA</option>\r\n                                    <option value=\"NO_RESPONSABLE_DE_IVA\" selected>NO RESPONSABLE DE IVA</option>\r\n                                    <option value=\"COMUN\" >COMUN</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <div class=\"col-md-12 mb-3 px-md-1 ml-2 ms-2\">\r\n                                <div class=\"form-check mt-2\">\r\n                                    <input formControlName=\"sendemail\" class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"sendemail\">\r\n                                    <label class=\"form-check-label\" for=\"sendemail\">\r\n                                        Enviar Factura al Correo\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n\r\n                    </form>\r\n\r\n                </div>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    MODAL BUSCAR CLIENTE \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    BUSCAR PRODUCTO \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"buscarProducto\" tabindex=\"-1\" aria-labelledby=\"buscarProductoModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\" style=\"min-height: 350px;\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"buscarProductoModal\"><i class=\"bi-file-spreadsheet\" style=\"font-size: 1rem\"></i> Productos</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <div class=\"col\">\r\n\r\n                    <div class=\"my-2\">\r\n                        <div>\r\n                            <label for=\"precioM\">Buscar Productos:</label>\r\n                            <input type=\"text\" class=\"form-control\" placeholder=\"buscar producto\" (keyup.enter)=\"buscarProductoCode(searchProductCodeN.value)\" #searchProductCodeN>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div *ngIf=\"productSelected\" class=\"mt-4\">\r\n\r\n                        <div class=\"form-group\">\r\n                            <label for=\"\">Codigo de barras:</label>\r\n                            <input readonly type=\"text\" class=\"form-control\" placeholder=\"Codigo de Barras\" [value]=\"productSelected.code\" #barcode>\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                            <label for=\"\">Nombre:</label>\r\n                            <input readonly type=\"text\" class=\"form-control\" placeholder=\"Nombre\" [value]=\"productSelected.name\">\r\n                        </div>\r\n\r\n                        <div class=\"row\">\r\n\r\n\r\n                            <div class=\"form-group col-md-6\">\r\n                                <label for=\"cantidad\">Cantidad:</label>\r\n                                <input readonly type=\"number\" min=\"1\" class=\"form-control\" placeholder=\"\" [value]=\"qtySelect\" #cantidadCo>\r\n                            </div>\r\n\r\n                            <div class=\"form-group col-md-6\">\r\n                                <label for=\"precio\">Precio:</label>\r\n                                <input type=\"number\" min=\"1\" class=\"form-control\" [value]=\"priceProductSelected\" placeholder=\"Precio\" #precioCo>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"form-check form-switch my-2\">\r\n                            <input #newPriNew (change)=\"newPriNew.checked = newPriNew.checked\" class=\"form-check-input\" type=\"checkbox\" role=\"switch\" id=\"newPriceC\">\r\n                            <label class=\"form-check-label\" for=\"newPriceC\">Totalizar Precio </label>\r\n                        </div>\r\n\r\n                        <button type=\"button\" (click)=\"carritoTempBefored(productSelected, qtySelect, precioCo.value, '', newPriNew.checked)\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Agregar Producto</button>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    BUSCAR PRODUCTO \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    MODAL REGISTRAR ENTRADAS Y SALIDAS\r\n========================================================================= -->\r\n\r\n<div class=\"modal fade\" id=\"entradaSalidas\" tabindex=\"-1\" aria-labelledby=\"entradaSalidasModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"entradaSalidasModal\"><i class=\"bi-arrow-left-right\" style=\"font-size: 1rem\"></i> Movimientos </h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n\r\n            <div class=\"modal-body\">\r\n\r\n                <!-- NAV - NAV -->\r\n                <nav>\r\n                    <div class=\"nav nav-tabs\" id=\"nav-tab\" role=\"tablist\">\r\n                        <a class=\"nav-link active\" id=\"nav-entradas-tab\" data-bs-toggle=\"tab\" href=\"#nav-entradas\" role=\"tab\" aria-controls=\"nav-entradas\" aria-selected=\"true\"><i class=\"bi-box-arrow-in-right\"></i>  Entradas</a>\r\n                        <a class=\"nav-link\" id=\"nav-salidas-tab\" data-bs-toggle=\"tab\" href=\"#nav-salidas\" role=\"tab\" aria-controls=\"nav-salidas\" aria-selected=\"false\"><i class=\"bi-box-arrow-right\"></i> Salidas</a>\r\n                    </div>\r\n                </nav>\r\n                <!-- NAV - NAV -->\r\n\r\n                <div class=\"tab-content\" id=\"nav-tabContent\">\r\n\r\n                    <!-- ENTRADAS - ENTRADAS - ENTRADAS -->\r\n                    <div class=\"tab-pane fade show active\" id=\"nav-entradas\" role=\"tabpanel\" aria-labelledby=\"nav-entradas-tab\">\r\n\r\n                        <div class=\"py-4\">\r\n\r\n                            <div class=\"form-group\">\r\n                                <label for=\"\">Entrada</label>\r\n                                <input type=\"number\" class=\"form-control\" placeholder=\"Monto de entrada\" #montoE>\r\n                            </div>\r\n\r\n                            <div class=\"form-group\">\r\n                                <label for=\"\">Descripción</label>\r\n                                <input type=\"text\" class=\"form-control\" placeholder=\"Descripción\" #descriptionE>\r\n                            </div>\r\n\r\n                            <div class=\"col py-2\">\r\n                                <button [disabled]=\"sendMovimiento\" type=\"button\" (click)=\"entradaSalida('entrada', descriptionE.value, montoE.value)\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">\r\n                                    <span *ngIf=\"!sendMovimiento\">Guardar</span>\r\n                                    <span *ngIf=\"sendMovimiento\">Guardando...</span>                                    \r\n                                </button>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n\r\n                    </div>\r\n                    <!-- ENTRADAS - ENTRADAS - ENTRADAS -->\r\n                    <!-- SALIDAS - SALIDAS - SALIDAS -->\r\n                    <div class=\"tab-pane fade\" id=\"nav-salidas\" role=\"tabpanel\" aria-labelledby=\"nav-salidas-tab\">\r\n\r\n                        <div class=\"py-4\">\r\n\r\n                            <div class=\"form-group\">\r\n                                <label for=\"\">Salida</label>\r\n                                <input type=\"number\" class=\"form-control\" placeholder=\"Monto de salida\" #montoS>\r\n                            </div>\r\n\r\n                            <div class=\"form-group\">\r\n                                <label for=\"\">Descripción</label>\r\n                                <input type=\"text\" class=\"form-control\" placeholder=\"Descripción\" #descriptionS>\r\n                            </div>\r\n\r\n                            <div class=\"col py-2\">\r\n                                <button type=\"button\" (click)=\"entradaSalida('salida', descriptionS.value, montoS.value)\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <ng-container *ngIf=\"empresa && movimiento\">\r\n                            <div [ngStyle]=\"{'width': empresa.impresora === 58 ? '14rem' : '24rem'}\" style=\"width: 14rem; color:black; background: white;\" id=\"printDiv4\">\r\n                                <div class=\"card\">\r\n                                    <div class=\"text-center\" style=\"color: #000;\">\r\n                                        <h4 class=\"mb-0 fw-normal\">Salida</h4>\r\n                                        <h2 class=\"fw-bold\"> {{ movimiento.monto | divisa}} </h2>\r\n                                        <p class=\"mb-0\"> {{ movimiento.user.name }} </p>\r\n                                        <p> {{ movimiento.fecha | date: 'short' }} </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </ng-container>\r\n\r\n                    </div>\r\n                    <!-- SALIDAS - SALIDAS - SALIDAS -->\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    MODAL REGISTRAR ENTRADAS Y SALIDAS\r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\nVERIFICADOR DE PRECIOS\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"verificarPrecio\" tabindex=\"-1\" aria-labelledby=\"verificarPrecioModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"verificarPrecioModal\"><i class=\"bi-upc-scan\" style=\"font-size: 1rem\"></i> Verificar Precio </h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n\r\n            <div class=\"modal-body\">\r\n\r\n                <div class=\"text-center pb-4\">\r\n                    <h4 class=\"text-muted\">Comprobar Precio</h4>\r\n                    <div class=\"form-group\">\r\n                        <input type=\"text\" class=\"form-control\" placeholder=\"Escanear Codigo\" (keyup.enter)=\"comprobrarPrecio(comprobarPrecio.value)\" #comprobarPrecio>\r\n                    </div>\r\n\r\n                    <div *ngIf=\"productoCom\" class=\"mt-4\">\r\n                        <h6 class=\"text-muted mb-0\"> {{ productoCom.name }} </h6>\r\n                        <h4 class=\"display-2 text-primary\"> {{ productoCom.price | divisa }} </h4>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- =========================================================================\r\nVERIFICADOR DE PRECIOS\r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\nCOMANDAS\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"comandas\" tabindex=\"-1\" aria-labelledby=\"comandasModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"comandasModal\"><i class=\"bi-upc-scan\" style=\"font-size: 1rem\"></i> COMANDAS: </h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n\r\n            <div class=\"modal-body\">\r\n\r\n                <div class=\"row\">\r\n\r\n                    <!-- COMENTARIO -->\r\n                    <div class=\"col-sm-12 col-md-6\">\r\n                        <div class=\"container border rounded overflow-auto\" #content style=\"max-height: 15rem; min-height: 10rem;\">\r\n\r\n                            <p class=\"mb-1 fw-bold mt-2 text-muted\">Notas:</p>\r\n\r\n                            <ul class=\"list-group list-group-flush py-2\" #messages>\r\n                                <li class=\"list-group-item border-0 py-1 px-1\" *ngFor=\"let nota of notas; let i = index\">\r\n                                    <div class=\"d-flex justify-content-start\">\r\n                                        <div>\r\n                                            <button (click)=\"eliminarComentario(i)\" type=\"button\" class=\"btn btn-link p-1 text-danger\">\r\n                                                <i class=\"bi-trash\" style=\"font-size: 0.9rem\"></i>\r\n                                            </button>\r\n                                        </div>\r\n                                        <div class=\"badge bg-light2 text-muted px-2 py-2 text-wrap text-start\" style=\"width: auto;\">\r\n                                            <h6 class=\"mb-0 text-break\">\r\n                                                {{ nota.nota }}\r\n                                            </h6>\r\n                                            <p class=\"mb-0 text-end\" *ngIf=\"nota.date \"><small class=\"text-muted\"> {{ nota?.date  | date: \"medium\" }} </small></p>\r\n                                        </div>\r\n                                    </div>\r\n                                </li>\r\n\r\n                            </ul>\r\n                        </div>\r\n\r\n                        <!-- MENSAJE -->\r\n                        <!-- <div class=\"clearfix my-2\">\r\n                            <input type=\"text\" name=\"\" id=\"\" class=\"form-control float-start col-8\" placeholder=\"Notas\" (keyup)=\"nota.value\" (keyup.enter)=\"enviarNota(nota.value)\" #nota>\r\n                            <button type=\"button\" (click)=\"enviarNota(nota.value)\" class=\"btn btn-primary  ms-auto float-end col-3\"> <i class=\"bi-arrow-right\"></i> </button>\r\n                        </div> -->\r\n\r\n                        <div class=\"input-group my-2\">\r\n                            <input type=\"text\" class=\"form-control\" placeholder=\"Notas\" aria-label=\"Notas\" aria-describedby=\"button-addon2\" (keyup)=\"nota.value\" (keyup.enter)=\"enviarNota(nota.value)\" #nota>\r\n                            <button class=\"btn btn-primary\" (click)=\"enviarNota(nota.value)\" type=\"button\" id=\"button-addon2\">Enviar</button>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <!-- COMANDA -->\r\n                    <div class=\"col-sm-12 col-md-6\">\r\n\r\n                        <div class=\"container border rounded overflow-auto\" style=\"max-height: 15rem; min-height: 10rem;\">\r\n\r\n                            <p class=\"mb-1 fw-bold mt-2 text-muted\">Comanda</p>\r\n\r\n                            <!-- PRODUCTOS DE LAS COMANDAS -->\r\n                            <ul class=\"py-1 px-0 list-group list-group-flush\">\r\n                                <li class=\"mb-2 border-bottom border-info py-1 px-0 list-group-item\" *ngFor=\"let comanda of comandas; let i=index\">\r\n                                    <span class=\" py-1 px-2 fw-bold text-uppercase bg-dark text-white \">{{ i + 1 }} - {{ comanda.product?.name }} </span>\r\n\r\n                                    <!-- INGREDIENTES -->\r\n                                    <ul class=\" py-1 px-0 ps-1 list-group list-group-flush\">\r\n                                        <li class=\" py-1 px-0 list-group-item\" *ngFor=\"let ingrediente of comanda.ingredientes; let y = index\">\r\n                                            <button (click)=\"eliminarIngredientes(ingrediente._id, y)\" type=\"button\" class=\"btn btn-link p-1 text-danger\">\r\n                                                <i class=\"bi-trash\" style=\"font-size: 0.9rem\"></i>\r\n                                            </button> <i class=\"bi-x\" *ngIf=\"!ingrediente.status\"></i> {{ ingrediente.name }}\r\n                                        </li>\r\n                                    </ul>\r\n                                    <!-- INGREDIENTES -->\r\n                                </li>\r\n                            </ul>\r\n\r\n                            <!-- PRODUCTOS DE LAS COMANDAS -->\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- =========================================================================\r\nCambiar Mesa\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"cambiarMesa\" tabindex=\"-1\" aria-labelledby=\"cambiarMesa\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog molda-lg modal-dialog-centered modal-dialog-scrollable\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"cambiarMesa\">\r\n                    <i class=\"bi-arrow-repeat\" style=\"font-size: 1rem\"></i> Cambiar Mesa </h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n\r\n            <div class=\"modal-body\">\r\n\r\n                <h4 class=\"mb-0 fw-bold\">Selecciona la mesa que quieres cambiar</h4>\r\n                <hr>\r\n\r\n                <div class=\"d-flex flex-row justify-content-center flex-wrap gap-3 py-4\">\r\n\r\n                    <ng-container *ngFor=\"let mesa of totalMesas\">\r\n                        <a type=\"button\" (click)=\"cambiarMesa(mesa)\" class=\"px-3 shadow text-decoration-none\" *ngIf=\"mesa.img === 'mesa.svg' && mesa.disponible === true\">\r\n                            <img src=\"../../../assets/img/icons/{{ mesa.img }}\" alt=\"\" style=\"max-height: 100px; stroke:white;\">\r\n                            <p class=\"pb-0 text-center fw-bold text-capitalize text-break \">{{ mesa.name }}</p>\r\n                        </a>\r\n\r\n                    </ng-container>\r\n\r\n\r\n\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- =========================================================================\r\nCAMBIAR MESA\r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\nAPLICAR DESCUENTO\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"descuentoModal\" tabindex=\"-1\" aria-labelledby=\"descuentoM\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog molda-lg modal-dialog-centered modal-dialog-scrollable\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"descuentoM\">Aplicar descuento </h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n\r\n            <div class=\"modal-body\">\r\n\r\n                <p class=\"mb-2 fs-4 text-muted\"> Agrega el porcentaje de descuento</p>\r\n\r\n                <form [formGroup]=\"formDescuento\" (ngSubmit)=\"descuentos()\">\r\n\r\n                    <div class=\"form-group\">\r\n                        <label for=\"descc\"></label>\r\n                        <input formControlName=\"porcentaje\" min=\"0\" type=\"number\" class=\"form-control\" name=\"descc\" id=\"\" aria-describedby=\"helpId\" placeholder=\"Porcentaje\">\r\n\r\n                    </div>\r\n\r\n                    <button type=\"submit\" name=\"\" id=\"\" class=\"btn btn-primary btn-lg btn-block\"> Guardar </button>\r\n\r\n                </form>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- =========================================================================\r\nAPLICAR DESCUENTO\r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\nPREFACTURA\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"prefactura\" tabindex=\"-1\" aria-labelledby=\"prefactura\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"prefactura\">\r\n                    <i class=\"bi-reciept\" style=\"font-size: 1rem\"></i> Prefactura </h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n\r\n            <div class=\"modal-body\">\r\n\r\n                <div id=\"copiaPre\" style=\"width: 24rem; color:black; background: white;\">\r\n\r\n                    <!-- EMPRESA -->\r\n                    <div class=\"card-body px-1 mb-2\" style=\"border-bottom: 2px solid black;\" *ngIf=\"empresa\">\r\n\r\n                        <h4 class=\"card-title mb-0 text-wrap text-center\"> {{ empresa.name }} </h4>\r\n                        <p class=\"text-center mb-0\" *ngFor=\"let text of ticketHeader\" style=\"line-height: 1rem;\"> {{ text }} </p>\r\n                    </div>\r\n                    <!-- EMPRESA -->\r\n\r\n                    <div *ngIf=\"mesa\">\r\n                        <p class=\"text-center fs-4\"> {{ mesa.name }} </p>\r\n                    </div>\r\n\r\n                    <div class=\"table-responsive\">\r\n\r\n                        <table class=\"table table-sm table-striped align-middle\">\r\n                            <thead>\r\n                                <tr class=\"align-middle\">\r\n                                    <th scope=\"col\">Item</th>\r\n                                    <th scope=\"col\">Precio</th>\r\n                                    <th scope=\"col\">Cantidad</th>\r\n                                    <th scope=\"col\">Monto</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n\r\n                                <tr *ngIf=\"carrito.length === 0\">\r\n                                    <th scope=\"row\" colspan=\"5\"> No has seleccionado ningun producto</th>\r\n                                </tr>\r\n\r\n                                <tr *ngFor=\"let producto of carrito\">\r\n                                    <th scope=\"row\"> {{ producto.product.name }} </th>\r\n                                    <td> {{ producto.price | divisa }} </td>\r\n                                    <td class=\"text-center\"> {{ producto.qty | number }} </td>\r\n                                    <td> {{ (producto.qty * producto.price) | divisa }} </td>\r\n                                </tr>\r\n\r\n                            </tbody>\r\n                            <tfoot>\r\n                                <tr>\r\n                                    <td colspan=\"4\" class=\"text-end\">\r\n                                        <div class=\"col ms-auto text-end\" *ngIf=\"empresa\">\r\n                                            <p class=\"h6 fw-bold mb-0\" *ngIf=\"!empresa.responsable\">Sub-total: {{ base / 1 | divisa }}</p>\r\n                                            <p class=\"h6 fw-bold mb-0\" *ngIf=\"empresa.responsable\">Sub-total: {{ base - iva | divisa }}</p>\r\n                                            <p class=\"h6 fw-bold mb-0\" *ngIf=\"mesa?.descuento\">Descuento: {{ (base * mesa?.porcentaje) /100 | divisa }}</p>\r\n                                            <p class=\"h6 fw-bold mb-0\" *ngIf=\"empresa.responsable\">IVA: {{ iva | divisa }}</p>\r\n                                            <p class=\"fw-bold mb-0\" [ngClass]=\"{'h4': empresa.tip === false, 'h6': empresa.tip }\" *ngIf=\"!empresa.responsable\">Total: {{ (total - totalTip ) | divisa }}</p>\r\n                                            <p class=\"fw-bold mb-0\" [ngClass]=\"{'h4': empresa.tip === false, 'h6': empresa.tip }\" *ngIf=\"empresa.responsable\">Total: {{ (total - totalTip ) | divisa }}</p>\r\n                                            <p class=\"h6 fw-bold mb-0\" *ngIf=\"empresa.tip\"> Servicio del {{empresa.propina}}%: {{ totalTip | divisa }}</p>\r\n                                            <p class=\"h4 fw-bold mb-0\" *ngIf=\"empresa.tip\"> Total + Servicio: {{ total | divisa }}</p>\r\n                                            <p class=\"h4 fw-bold mb-0\" *ngIf=\"empresa.usd\"> Total USD: {{ (total / empresa.currencyusd ) | number : '1.2-2' }}</p>\r\n                                            <p class=\"h4 fw-bold mb-0\" *ngIf=\"empresa.bs\"> Total BS: {{ (total / empresa.currencybs ) | number : '1.2-2' }}</p>\r\n                                        </div>\r\n                                    </td>\r\n                                </tr>\r\n                            </tfoot>\r\n                        </table>\r\n\r\n\r\n                    </div>\r\n\r\n\r\n\r\n                </div>\r\n                <button type=\"button\" class=\"btn btn-primary btn-lg btn-block\" (click)=\"prefactura()\">imprimir</button>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- =========================================================================\r\nPREFACTURA\r\n========================================================================= -->\r\n<!-- =========================================================================\r\nPRODUCT SELECT\r\n========================================================================= -->\r\n<ng-template #modalProductSeleted let-close=\"close\">\r\n\r\n    <div class=\"modal-header\">\r\n        <h5 class=\"modal-title\">Producto</h5>\r\n        <button type=\"button\" class=\"close\" (click)=\"close()\">\r\n            <span aria-hidden=\"true\">&times;</span>\r\n        </button>\r\n    </div>\r\n\r\n    <div class=\"modal-body\">\r\n        <div class=\"d-flex flex-wrap\">\r\n            <p class=\"mb-0\">Codigo: <small> {{productSelected.code}} </small></p>\r\n            <p class=\"mb-0 ms-auto\"> stock: {{ productSelected.inventario | number }}</p>\r\n        </div>\r\n        <h4 class=\"mb-0 text-break\"> {{ productSelected.name }} </h4>\r\n        <p class=\"mb-2\" *ngIf=\"productSelected.inventario <= productSelected.min &&  productSelected.type !== 'Paquete'\"><span class=\"badge bg-warning text-dark\">Inventario Bajo</span></p>\r\n        \r\n        <!-- PRICES -->\r\n        <div>\r\n            <!-- <h4 class=\"display-5 mb-2 text-center text-success fw-bold\"> $ {{ priceProductSelected * (qtySelect || 1) | number: '':'en-US' }} </h4> -->\r\n            <h4 *ngIf=\"!newPri.checked\" class=\"display-5 mb-2 text-center text-success fw-bold\"> {{ priceProductSelected * qtySelect | number: '':'en-US' }} </h4>\r\n            <h4 *ngIf=\"newPri.checked\" class=\"display-5 mb-2 text-center text-success fw-bold\"> {{ ((priceProductSelected / (qtySelect * 1000)) * 1000 ) * qtySelect | number: '':'en-US' }} </h4>\r\n\r\n        </div>\r\n        <!-- PRICES -->\r\n\r\n        <label for=\"canttt\">Cantidad:</label>\r\n\r\n        <div class=\"input-group mb-2\">\r\n\r\n            <button class=\"btn btn-primary\" type=\"button\" id=\"button-addon1\" (click)=\"cambiarValor(-1)\"> - </button>\r\n\r\n            <input #canttt type=\"number\" [max]=\"productSelected.inventario\" min=\"0\" class=\"form-control\" placeholder=\"\" (ngModelChange)=\"onChange($event)\" [(ngModel)]=\"qtySelect\" (keyup.enter)=\"carritoTemp(productSelected, qtySelect, pricePr.value); close()\">\r\n\r\n            <button class=\"btn btn-primary\" type=\"button\" id=\"button-addon2\" (click)=\"cambiarValor(1)\"> + </button>\r\n        </div>\r\n\r\n        <div class=\"container my-2\">\r\n            <div class=\"d-flex flex-row gap-4\">\r\n                <div class=\"form-check form-switch\">\r\n                    <input [disabled]=\"user.role !== 'ADMIN' && user.role !== 'STAFF' || cDis.checked\" #cMayor (change)=\"mayoreoApp(cMayor.checked)\" class=\"form-check-input\" type=\"checkbox\" role=\"switch\" id=\"flexSwitchCheckDefault\">\r\n                    <label class=\"form-check-label\" for=\"flexSwitchCheckDefault\">Mayoreo</label>\r\n                </div>\r\n                <div class=\"form-check form-switch\">\r\n                    <input [disabled]=\"user.role !== 'ADMIN' && user.role !== 'STAFF' || cMayor.checked \" #cDis (change)=\"distribuidorApp(cDis.checked)\" class=\"form-check-input\" type=\"checkbox\" role=\"switch\" id=\"flexSwitchCheckDefaultDistr\">\r\n                    <label class=\"form-check-label\" for=\"flexSwitchCheckDefaultDistr\">Distribuidor</label>\r\n                </div>\r\n                <div class=\"form-check form-switch\">\r\n                    <input [disabled]=\"user.role !== 'ADMIN' && user.role !== 'STAFF' && user.role !== 'CASHIER'\" #newPri (change)=\"newPri.checked = newPri.checked\" class=\"form-check-input\" type=\"checkbox\" role=\"switch\" id=\"newPriceC\">\r\n                    <label class=\"form-check-label\" for=\"newPriceC\">Totalizar Precio </label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <label for=\"pricePr\">Precio:</label>\r\n        <div class=\"input-group\">\r\n            <input [readOnly]=\"user.role !== 'ADMIN' && user.role !== 'STAFF' && user.role !== 'CASHIER'\" #pricePr type=\"number\" min=\"0\" class=\"form-control\" placeholder=\"\" [(ngModel)]=\"priceProductSelected\">\r\n        </div>\r\n\r\n        <p class=\"mb-3 text-danger\" *ngIf=\"qtySelect <= 0\"> <small> Debes de agregar cantidad </small> </p>\r\n        <p class=\"mb-3 text-danger text-break\" *ngIf=\"qtySelect > productSelected.inventario && productSelected.type !== 'Paquete'\"> <small> La cantidad es mayor de la que tenemos en stock. Stock actual {{ productSelected.inventario | number }} </small> </p>\r\n\r\n        <!-- TECLADO NUMERICO -->\r\n        <div class=\"mt-4\" *ngIf=\"empresa.kiosco\">\r\n\r\n            <div class=\"d-flex flex-row gap-1 mb-1\">\r\n                <div class=\"w25\"><button class=\"btn btn-secondary keypad-button\" (click)=\"appendV(7)\">7</button></div>\r\n                <div class=\"w25\"><button class=\"btn btn-secondary keypad-button\" (click)=\"appendV(8)\">8</button></div>\r\n                <div class=\"w25\"><button class=\"btn btn-secondary keypad-button\" (click)=\"appendV(9)\">9</button></div>\r\n                <div class=\"w25\"><button class=\"btn btn-danger keypad-button\" (click)=\"priceProductSelected = ''\">C</button></div>\r\n            </div>\r\n            <div class=\"d-flex flex-row gap-1 mb-1\">\r\n                <div class=\"w25\"><button class=\"btn btn-secondary keypad-button\" (click)=\"appendV(4)\">4</button></div>\r\n                <div class=\"w25\"><button class=\"btn btn-secondary keypad-button\" (click)=\"appendV(5)\">5</button></div>\r\n                <div class=\"w25\"><button class=\"btn btn-secondary keypad-button\" (click)=\"appendV(6)\">6</button></div>\r\n                <div class=\"w25\"><button class=\"btn btn-warning keypad-button\" (click)=\"appendV('del')\">←</button></div>\r\n            </div>\r\n            <div class=\"d-flex flex-row gap-1 mb-1\">\r\n                <div class=\"w25\"><button class=\"btn btn-secondary keypad-button\" (click)=\"appendV(1)\">1</button></div>\r\n                <div class=\"w25\"><button class=\"btn btn-secondary keypad-button\" (click)=\"appendV(2)\">2</button></div>\r\n                <div class=\"w25\"><button class=\"btn btn-secondary keypad-button\" (click)=\"appendV(3)\">3</button></div>\r\n                <div class=\"w25\"><button class=\"btn btn-dark keypad-button\" (click)=\"appendV('00')\">00</button></div>\r\n            </div>\r\n            <div class=\"d-flex flex-row gap-1 mb-1\">\r\n                <div class=\"w50\"><button class=\"btn btn-secondary keypad-button\" (click)=\"appendV(0)\">0</button></div>\r\n                <div class=\"w50\"><button class=\"btn btn-dark keypad-button\" (click)=\"appendV('000')\">000</button></div>\r\n            </div>\r\n\r\n        </div>\r\n    \r\n    </div>\r\n\r\n    <div class=\"modal-footer\">\r\n        <button #btnAddPr ngbAutofocus [disabled]=\"qtySelect <= 0 || qtySelect > productSelected.inventario && productSelected.type !== 'Paquete'\" type=\"button\" class=\"btn btn-outline-success\" (click)=\"carritoTemp(productSelected, qtySelect, pricePr.value, '',newPri.checked)\"\r\n            (click)=\"close()\">\r\n            Agregar\r\n        </button>\r\n    </div>\r\n\r\n</ng-template>\r\n<!-- =========================================================================\r\nPRODUCT SELECT\r\n========================================================================= -->\r\n<!-- =========================================================================\r\nUO IMGS\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"imgUp\" tabindex=\"-1\" aria-labelledby=\"imgUp\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"imgUp\">\r\n                    <i class=\"bi-reciept\" style=\"font-size: 1rem\"></i> Subir Imagenes </h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n\r\n            <div class=\"modal-body\">\r\n\r\n                <div *ngIf=\"mesa\" class=\"card\">\r\n\r\n                    <div class=\"card-body\">\r\n\r\n                        <div class=\"form-group file-area border\">\r\n                            <input #fileImg (change)=\"cambiarImage($event)\" type=\"file\" name=\"images\" id=\"images\" required=\"required\" multiple=\"multiple\" />\r\n                            <div class=\"file-dummy\">\r\n\r\n                                <div class=\"default py-5\">\r\n                                    <h5 class=\"text-center card-title text-muted\">\r\n                                        Agregar Imagen\r\n                                    </h5>\r\n                                    <p class=\"text-center card-text fs-2 mb-0\">\r\n                                        <i class=\"mdi mdi-plus\"></i>\r\n                                    </p>\r\n                                    <p class=\"text-center card-text fs-sm\">Arrastre la imagen ó dar click aquí</p>\r\n                                </div>\r\n\r\n                                <!-- IMG VALIDA -->\r\n                                <div class=\"success\">\r\n\r\n                                    <div class=\"d-flex justify-content-center\" *ngIf=\"imgTempP\">\r\n                                        <div class=\"mx-auto\" style=\"background-image: url({{imgTempP}});width: 400px; height: 300px; background-repeat: no-repeat; background-size: cover; background-position: center center;\"></div>\r\n                                    </div>\r\n\r\n                                </div>\r\n                                <!-- IMG VALIDA -->\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div *ngIf=\"imgTempP\" class=\"d-flex justify-content-between flex-wrap pt-4 gap-2\">\r\n                            <button type=\"button\" class=\"btn btn-info btn-sm\" [disabled]=\"!subirImagen\" (click)=\"subirImg()\"> Subir </button>\r\n                            <button type=\"button\" class=\"btn btn-danger btn-sm\" (click)=\"imgTempP = ''; fileImg.value = ''\"> Eliminar </button>\r\n                        </div>\r\n\r\n                        <hr>\r\n\r\n                        <div>\r\n                            <h4>Imagenes</h4>\r\n                            <p *ngIf=\"mesa.images.length === 0\">No se han cargado las imagenes</p>\r\n                        </div>\r\n\r\n                        <!-- IMGS -->\r\n                        <div *ngIf=\"mesa.images.length > 0\" class=\"mt-4 d-flex flex-wrap gap-2\">\r\n\r\n                            <div *ngFor=\"let file of mesa.images\">\r\n                                <div style=\"background-image: url('{{ file.img | imagen }}');width: 150px; height: 150px; background-repeat: no-repeat; background-size: cover; background-position: center center;\">\r\n\r\n                                </div>\r\n                                <small class=\"gallery-item-caption\"> {{ file.date | date:'medium' }} </small>\r\n                                <div class=\"w-100 text-danger\">\r\n                                    <a class=\"text-decoration-none text-danger cursor fs-sm\" (click)=\"deleImg(file.img)\">\r\n                                        <i class=\"ti ti-trash\"></i> Eliminar\r\n                                    </a>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <!-- IMGS -->\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- =========================================================================\r\nUO IMGS\r\n========================================================================= -->","import { Component, OnInit, ViewChild, TemplateRef, ElementRef } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Subscription, Observable } from 'rxjs';\r\nimport Swal from 'sweetalert2';\r\n\r\nimport { QRCodeModule } from 'angularx-qrcode';\r\n\r\n// PRINTER\r\nimport { NgxPrinterService } from 'projects/ngx-printer/src/lib/ngx-printer.service';\r\nimport { PrintItem } from 'projects/ngx-printer/src/lib/print-item';\r\nimport { ngxPrintMarkerPosition } from 'projects/ngx-printer/src/public_api';\r\n\r\n// SERVICES\r\nimport { InvoiceService } from '../../../services/invoice.service';\r\nimport { EmpresaService } from '../../../services/empresa.service';\r\n\r\n// INTERFACES\r\nimport { LoadInvoice } from '../../../interfaces/invoice.interface';\r\n\r\n// MODELS\r\nimport { Datos } from '../../../models/empresa.model';\r\nimport { ImpuestosService } from 'src/app/services/impuestos.service';\r\nimport { Impuestos } from '../../../models/impuestos.model';\r\n\r\n@Component({\r\n  selector: 'app-print',\r\n  templateUrl: './print.component.html',\r\n  styleUrls: ['./print.component.css']\r\n})\r\nexport class PrintComponent implements OnInit {\r\n\r\n  @ViewChild('PrintTemplate')\r\n  private PrintTemplateTpl: TemplateRef<any>;\r\n\r\n  title = 'ngx-printer-demo';\r\n\r\n  printWindowSubscription: Subscription;\r\n  $printItems: Observable<PrintItem[]>;\r\n\r\n  public factura: LoadInvoice;\r\n\r\n  constructor(  private activatedRoute: ActivatedRoute,\r\n                private invoiceService: InvoiceService,\r\n                private printerService: NgxPrinterService,\r\n                private empresaService: EmpresaService,\r\n                private impuestosService: ImpuestosService\r\n                ) {\r\n\r\n                  this.printWindowSubscription = this.printerService.$printWindowOpen.subscribe(\r\n                    val => {\r\n                      console.log('Print window is open:', val);\r\n                    }\r\n                  );\r\n              \r\n                  this.$printItems = this.printerService.$printItems;\r\n\r\n                 }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // CARGAR DATOS\r\n    this.cargarDatos();      \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR IMPUESTOS\r\n  ==================================================================== */\r\n  public impuestos: Impuestos[] = [];\r\n  cargarImpuestos(){\r\n\r\n    this.impuestosService.loadImpuestos()\r\n        .subscribe( ({taxes}) => {\r\n\r\n          this.impuestos = taxes;\r\n\r\n          this.impuestos.map( impuesto => {\r\n            impuesto.total = 0;\r\n          })\r\n\r\n\r\n          // CARGAR FACTURA\r\n          this.activatedRoute.params.subscribe( ({id}) => {\r\n            \r\n            this.cargarFactura(id);\r\n            \r\n          });  \r\n\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   IMPRIMIR\r\n  ==================================================================== */\r\n  printDiv() {\r\n\r\n    this.printerService.printDiv('printDiv');\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR FACTURA\r\n  ==================================================================== */\r\n  public totalPagos: number = 0;\r\n  public totalItems: number = 0;\r\n  cargarFactura(id: string){\r\n    \r\n    this.invoiceService.loadInvoiceId(id)\r\n        .subscribe( ({invoice}) => {\r\n\r\n          this.factura = invoice;\r\n          this.totalItems = 0;      \r\n\r\n          for (const pay of invoice.payments) {\r\n            this.totalPagos = this.totalPagos + pay.amount;\r\n          }\r\n\r\n          \r\n          for (const product of invoice.products) {\r\n            \r\n            if( this.empresa.impuesto ){\r\n\r\n              if (product.product.taxid) {\r\n                \r\n                this.impuestos.map( (impuesto) => {  \r\n                  if (impuesto.taxid === product.product.taxid._id) {                  \r\n                    impuesto.total += Math.round(((product.qty * product.price) * impuesto.valor)/100);\r\n                  }  \r\n                });\r\n              }\r\n\r\n            }            \r\n\r\n            this.totalItems += product.qty;\r\n\r\n          }\r\n          \r\n          // IMPRIMIR FACTURA\r\n          setTimeout( () => {\r\n\r\n            this.printDiv();\r\n\r\n          },3000);          \r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR DATOS DE LA EMPRESA\r\n  ==================================================================== */\r\n  public empresa: Datos;\r\n  public ticketHeader: any;\r\n  public ticketfooter: any;\r\n  cargarDatos(){\r\n\r\n    this.empresaService.getDatos()\r\n        .subscribe( datos => {\r\n          this.empresa = datos;\r\n          this.ticketHeader =  this.empresa.header.split('\\n');\r\n          this.ticketfooter =  this.empresa.footer.split('\\n');\r\n\r\n          this.cargarImpuestos();\r\n          \r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n  }\r\n  \r\n  // FIN DE LA CLASE\r\n}\r\n","<div class=\"container-fluid mb-5\">\r\n\r\n    <div class=\"my-4\">\r\n\r\n        <h5 class=\"text-dark\">Imprimir factura</h5>\r\n        <p>Si, la factura no se imprime automaticamente dar click en siguiente boton</p>\r\n        <button type=\"button\" (click)=\"printDiv()\" class=\"btn btn-sm btn-outline-primary\"> <i class=\"bi-printer\"></i> Imprimir ticket</button>\r\n\r\n    </div>\r\n\r\n    <div *ngIf=\"factura\" class=\"d-flex justify-content-center\">\r\n\r\n        <div class=\"card border-0 pb-4\" [ngStyle]=\"{'width': empresa?.impresora === 58 ? '14rem' : '24rem'}\" style=\"width: 14rem; color:black; background: white;\" id=\"printDiv\">\r\n\r\n            <!-- EMPRESA -->\r\n            <div class=\"card-body px-1 mb-2\" style=\"border-bottom: 2px solid black;\">\r\n\r\n                <div class=\"d-flex justify-content-center\">\r\n                    <img *ngIf=\"empresa?.logo\" [src]=\"empresa?.logo | imagen:'logo'\" class=\"mx-auto\" width=\"200px\" alt=\"\">\r\n                </div>\r\n\r\n                <h4 class=\"card-title mb-0 text-wrap text-center\"> {{ empresa?.name }} </h4>\r\n                <p class=\"text-center mb-0\" *ngFor=\"let text of ticketHeader\" style=\"line-height: 1rem;\"> {{ text }} </p>\r\n\r\n            </div>\r\n            <!-- EMPRESA -->\r\n\r\n            <!-- CLIENTE -->\r\n            <div class=\"pb-2\" style=\"border-bottom: 2px solid black;\" *ngIf=\"factura\">\r\n                <h6 class=\"mb-0 text-wrap text-left\">\r\n                    CLIENTE / RAZON SOCIAL <br>\r\n                    <small *ngIf=\"factura?.client\" class=\"text-wrap fw-normal\"> {{ factura?.client.name }} </small>\r\n                    <small *ngIf=\"!factura?.client\" class=\"text-wrap fw-normal\"> Consumidor Final </small>\r\n                </h6>\r\n\r\n                <h6 class=\"mb-0 text-wrap text-left\">\r\n                    CC / NIT <br>\r\n                    <small *ngIf=\"factura?.client\" class=\"text-wrap fw-normal\"> {{ factura?.client.cedula }} </small>\r\n                    <small *ngIf=\"!factura?.client\" class=\"text-wrap fw-normal\"> 222222222222 </small>\r\n                </h6>\r\n                <h6 class=\"mb-0 text-wrap text-left\">\r\n                    TELEFONO <br>\r\n                    <small *ngIf=\"factura?.client\" class=\"text-wrap fw-normal\"> {{ factura?.client.phone || '--- ------' }} </small>\r\n                </h6>\r\n                <h6 class=\"mb-0 text-wrap text-left\" *ngIf=\"factura?.client\">\r\n                    CIUDAD <br>\r\n                    <small *ngIf=\"factura?.client\" class=\"text-wrap fw-normal\"> {{ factura?.client.city || '----------' }} </small>\r\n                </h6>\r\n                <h6 class=\"mb-0 text-wrap text-left\" *ngIf=\"factura?.client\">\r\n                    DIRECCIÓN <br>\r\n                    <small *ngIf=\"factura?.client\" class=\"text-wrap fw-normal\"> {{ factura?.client.address || '----------' }} </small>\r\n                </h6>\r\n                \r\n                <ng-container *ngIf=\"factura.placa\">\r\n                    <h6 class=\"mb-0 text-wrap text-left\" *ngIf=\"factura.placa.length > 0\">\r\n                        Placa <br>\r\n                        <small class=\"text-wrap fw-normal\"> {{ factura.placa || '----------'}} </small>\r\n                    </h6>\r\n                </ng-container>\r\n                \r\n\r\n                <h6 class=\"mb-0 text-wrap text-left\">\r\n                    <p class=\"text-wrap fw-normal mb-0\"> {{ factura?.mesa.name }} - {{ factura?.mesero.name }} </p>\r\n                </h6>\r\n            </div>\r\n            <!-- CLIENTE -->\r\n\r\n            <!-- FACTURA -->\r\n            <div class=\"py-2\" style=\"border-bottom: 2px solid black;\">\r\n                <h6 class=\"mb-0 text-wrap text-left\">{{ empresa?.type }}: <span *ngIf=\"!factura?.cufe\"> {{ factura?.invoice }} </span> <span *ngIf=\"factura?.cufe\"> {{ factura?.number }} </span> </h6>\r\n                <h6 class=\"mb-0 text-wrap text-left\">Control: {{ factura?.control }}</h6>\r\n                <small class=\"mb-0 text-wrap text-left\">Fecha: {{ factura?.fecha | date:'short' }}</small>\r\n            </div>\r\n            <!-- FACTURA -->\r\n\r\n            <table class=\"table table-borderless table-hover table-sm\" [ngClass]=\" {'tabla-con-marca': factura.marca && !factura.credito}\">\r\n                <tbody style=\"color: black;\" [ngStyle]=\"{'fonto-size': empresa.impresora === 80 ? '1.4rem importan!' : '1rem'}\">\r\n                    <tr *ngFor=\"let item of factura?.products\" class=\"trHover\" >\r\n                        <td class=\"py-0\" [ngStyle]=\"{'line-height': empresa.impresora === 80 ? '1rem importan!' : '0.8rem'}\">\r\n                            <span class=\"text-wrap\"> {{ item.qty }} x {{item.price | divisa}} </span> <br>\r\n                            <span class=\"text-wrap\"> {{ item.product.name }} <strong *ngIf=\"item.mayor\" class=\"fw-bolde text-black\">M</strong></span>\r\n                        </td>\r\n                        <td class=\"text-end\">\r\n                            <span *ngIf=\"item.product.tax\"> {{ item.product.taxid.valor }}% </span>\r\n                            <span *ngIf=\"!item.product.tax\"> 0% </span>\r\n                        </td>\r\n                        <td class=\"py-0\">\r\n                            <span *ngIf=\"!empresa.impuesto\" class=\"text-wrap\"> {{ item.qty * item.price | divisa }} </span>\r\n                            <span *ngIf=\"empresa.impuesto\" class=\"text-wrap\"> {{ (item.qty * item.price) + ((item.qty * item.price) * (item.product.taxid?.valor/100)) | divisa }} </span>\r\n                        </td>\r\n                    </tr>\r\n\r\n                    <tr class=\"\" style=\"border-top: 2px solid black;\">\r\n                        <td>\r\n                            <h6 class=\"mb-0 text-wrap text-left\">Sub-total</h6>\r\n                        </td>\r\n                        <td colspan=\"2\" class=\"fw-bold\">\r\n                            <h6 class=\"mb-0 text-wrap text-rigth\" *ngIf=\"empresa?.impuesto\"> {{ factura?.base | divisa }} </h6>\r\n                        </td>\r\n                    </tr>\r\n\r\n                    <tr class=\"\" style=\"border-top: 2px solid black;\">\r\n                        <td>\r\n                            <h6 class=\"mb-0 text-wrap text-left\">Descuento</h6>\r\n                        </td>\r\n                        <td colspan=\"2\" class=\"fw-bold\">\r\n                            <h6 class=\"mb-0 text-wrap text-rigth\" *ngIf=\"factura?.descuento\"> {{ (factura?.base * factura?.porcentaje)/100 | divisa }} </h6>\r\n                        </td>\r\n                    </tr>\r\n\r\n                    <!-- IMPUESTOS -->\r\n                    <ng-container *ngIf=\"!empresa?.impuesto\">\r\n                        <tr class=\"\" style=\"border-top: 2px solid black;\">\r\n                            <td>\r\n                                <h6 class=\"mb-0 text-wrap text-left\">No responsable de IVA</h6>\r\n                            </td>\r\n                            <td colspan=\"2\" class=\"fw-bold\">\r\n                                <h6 class=\"mb-0 text-wrap text-rigth\"> 0 </h6>\r\n                            </td>\r\n                        </tr>\r\n                    </ng-container>\r\n\r\n                    <ng-container *ngIf=\"empresa?.impuesto\">\r\n                        <ng-container *ngFor=\"let impuesto of impuestos\">\r\n\r\n                            <tr *ngIf=\"impuesto.total > 0\" class=\"\" style=\"border-top: 2px solid black;\">\r\n                                <td>\r\n                                    <h6 class=\"mb-0 text-wrap text-left\"> {{ impuesto.name }} </h6>\r\n\r\n                                </td>\r\n                                <td class=\"fw-bold\">\r\n                                    <h6 class=\"mb-0 text-wrap text-rigth\"> {{ impuesto.total | divisa }} </h6>\r\n                                </td>\r\n                            </tr>\r\n                        </ng-container>\r\n                    </ng-container>\r\n                    <!-- IMPUESTOS -->\r\n\r\n                    <!-- TOTAL -->\r\n                    <tr class=\"\" style=\"border-top: 2px solid black;\">\r\n                        <td>\r\n                            <h6 class=\"mb-0 text-wrap text-left\">Total</h6>\r\n                        </td>\r\n                        <td colspan=\"2\" class=\"fw-bold\">\r\n                            <h6 class=\"mb-0 text-wrap text-rigth\"> {{ factura?.amount | divisa}} </h6>\r\n                        </td>\r\n                    </tr>\r\n                    <!-- TOTAL -->\r\n\r\n                    <tr class=\"\" style=\"border-top: 2px solid black;\" *ngIf=\"empresa?.tip\">\r\n                        <td>\r\n                            <h6 class=\"mb-0 text-wrap text-left\">Servicio Sugerida del {{empresa?.propina}}%</h6>\r\n                        </td>\r\n                        <td class=\"fw-bold\">\r\n                            <h6 class=\"mb-0 text-wrap text-rigth\"> {{ factura?.tip | divisa }} </h6>\r\n                        </td>\r\n                    </tr>\r\n                    <tr class=\"\" style=\"border-top: 2px solid black;\" *ngIf=\"empresa?.tip\">\r\n                        <td>\r\n                            <h6 class=\"mb-0 text-wrap text-left\">Total + Servicio</h6>\r\n                        </td>\r\n                        <td class=\"fw-bold\">\r\n                            <!-- <h6 class=\"mb-0 text-wrap text-rigth\"> {{ (factura?.amount+ factura?.tip) + (factura?.amount * empresa?.tax)/100 | divisa}} </h6> -->\r\n                            <h6 class=\"mb-0 text-wrap text-rigth\"> {{ factura?.amount + factura?.tip | divisa }} </h6>\r\n                        </td>\r\n                    </tr>\r\n\r\n                </tbody>\r\n                <tfoot>\r\n                    <tr>\r\n                        <th colspan=\"\">ITEMS</th>\r\n                        <th> {{ totalItems | number}} </th>\r\n                    </tr>\r\n                </tfoot>\r\n            </table>\r\n\r\n            <hr class=\"my-1\">\r\n            <div *ngIf=\"!factura?.apartado\">\r\n\r\n                <p class=\"mb-0 mx-auto \"><small class=\"text-wrap text-center mb-0\">Pago con: {{factura?.pago | divisa}} </small></p>\r\n                <p class=\"mb-0 mx-auto \"><small class=\"text-wrap text-center mb-0\">Vueltos: {{factura?.vueltos | divisa}} </small></p>\r\n            </div>\r\n            <div *ngIf=\"factura?.apartado\">\r\n                <h6 class=\"mb-2 fw-bold\">Historial de pagos</h6>\r\n                <table class=\"table table-sm\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th scope=\"col\">Desc</th>\r\n                            <th scope=\"col\">Pago</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr *ngFor=\"let pay of factura?.payments\">\r\n                            <td>Abono {{ pay.type }} </td>\r\n                            <td> {{ pay.amount | divisa }} </td>\r\n                        </tr>\r\n\r\n                    </tbody>\r\n                    <tfoot>\r\n                        <tr>\r\n                            <th>Restante</th>\r\n                            <th> {{ factura?.amount - totalPagos | divisa }} </th>\r\n                        </tr>\r\n                    </tfoot>\r\n                </table>\r\n\r\n            </div>\r\n\r\n            <hr *ngIf=\"factura.cufe\" class=\"my-1\">\r\n\r\n            <div *ngIf=\"factura.cufe\">\r\n                <h6 class=\"mb-0\">cufe:</h6>\r\n                <p class=\"\">{{ factura.cufe }} </p>\r\n\r\n                <div class=\"qrcodeImage d-flex justify-content-center\">\r\n                    <qrcode [qrdata]=\"'https://catalogo-vpfe.dian.gov.co/document/searchqr?documentkey='+factura.cufe\" [allowEmptyString]=\"true\" [alt]=\"'A custom alt attribute'\" [ariaLabel]=\"'QR Code image with the following content...'\" [cssClass]=\"'center'\" [colorDark]=\"'#000'\"\r\n                        [colorLight]=\"'#ffffffff'\" [elementType]=\"'img'\" [errorCorrectionLevel]=\"'M'\" [margin]=\"3\" [scale]=\"1\" [title]=\"'A custom title attribute'\" [width]=\"200\"></qrcode>\r\n                </div>\r\n            </div>\r\n\r\n            <hr class=\"my-1\">\r\n\r\n            <h6 *ngIf=\"factura.nota\" class=\"mb-0\">Nota:</h6>\r\n            <p *ngIf=\"factura.nota\" class=\"\">- {{ factura.nota }} </p>\r\n\r\n            <hr *ngIf=\"factura.nota\" class=\"my-1\">\r\n\r\n            <p class=\"text-center mb-0\" *ngFor=\"let text of ticketfooter\" style=\"line-height: 1rem;\"> {{ text }} </p>\r\n\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\r\nimport { FormArray, FormBuilder, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport Swal from 'sweetalert2';\r\n\r\n// MODELS\r\nimport { Product } from '../../../models/product.model';\r\nimport { Client } from '../../../models/client.model';\r\nimport { Invoice } from '../../../models/invoice.model';\r\nimport { Department } from '../../../models/department.model';\r\n\r\n// SERVICES\r\nimport { ProductService } from '../../../services/product.service';\r\nimport { ClientService } from '../../../services/client.service';\r\nimport { SearchService } from '../../../services/search.service';\r\nimport { InvoiceService } from '../../../services/invoice.service';\r\nimport { TurnoService } from '../../../services/turno.service';\r\nimport { DepartmentService } from '../../../services/department.service';\r\n\r\n// INTERFACES\r\nimport { Carrito, _payments } from '../../../interfaces/carrito.interface';\r\nimport { LoadInvoice } from '../../../interfaces/invoice.interface';\r\nimport { LoadTurno, _movements } from '../../../interfaces/load-turno.interface';\r\n\r\n\r\n@Component({\r\n  selector: 'app-ticket',\r\n  templateUrl: './ticket.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class TicketComponent implements OnInit {\r\n\r\n  public carrito: Carrito[] = [];\r\n\r\n  constructor( private productService: ProductService,\r\n                private clientService: ClientService,\r\n                private searchService: SearchService,\r\n                private fb: FormBuilder,\r\n                private invoiceService: InvoiceService,\r\n                private turnoService: TurnoService,\r\n                private departmentService: DepartmentService, \r\n                private router: Router) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    if (localStorage.getItem('turno') !== null) {\r\n      \r\n      // CLIENTES\r\n      this.cargarCLientes();\r\n\r\n      // TURNOS\r\n      this.cargarTurno();\r\n\r\n      // PRODUCTOS\r\n      this.cargarProductos();\r\n\r\n      // DEPARTAMENTOS\r\n      this.cargarDepartamentos();\r\n\r\n    }else{\r\n      Swal.fire('Atención!', 'Debes de abrir una caja antes de poder facturar', 'info');\r\n      // REDIRECCIONAR AL DASHBOARD\r\n      this.router.navigateByUrl('/');\r\n      return;\r\n    }\r\n\r\n    \r\n        \r\n  }  \r\n\r\n  /** ================================================================\r\n   *  BUSCAR CODIGO\r\n  ==================================================================== */\r\n  @ViewChild('searchCode') searchCode: ElementRef;\r\n  buscarCodigo(code: string){\r\n\r\n    this.productService.cargarProductoCodigo(code)\r\n    .subscribe( (product) => {\r\n                  \r\n            if (product === null || product.status === false) {\r\n              Swal.fire('Error', 'No existe el producto, verifica el codigo de barras o si el producto a sido desactivado!', 'error');\r\n              this.searchCode.nativeElement.value = '';\r\n              this.searchCode.nativeElement.onFocus = true;\r\n              return;              \r\n            }            \r\n            \r\n            // PEDIMOS LA CANTIDAD\r\n            if (product.type === 'Granel') {\r\n\r\n              Swal.fire({\r\n                title: 'Cantidad',\r\n                input: 'text',\r\n                inputAttributes: {\r\n                  autocapitalize: 'off'\r\n                },\r\n                showCancelButton: true,\r\n                confirmButtonText: 'Confirmar',\r\n                showLoaderOnConfirm: true,\r\n                preConfirm: (resp) => {\r\n                  \r\n                  return resp;\r\n                }\r\n              }).then((result) => {\r\n\r\n                if (result.value > 0) {\r\n                  \r\n                  const qty:number = result.value;\r\n  \r\n                  // GUARDAR AL CARRITO\r\n                  this.carritoTemp(product, qty, product.price);\r\n                  // GUARDAR AL CARRITO\r\n  \r\n                  return;\r\n                }else{\r\n                  return;\r\n                }                \r\n                \r\n              });\r\n              \r\n            }else{\r\n\r\n              const qty:number = 1;\r\n\r\n              // GUARDAR AL CARRITO\r\n              this.carritoTemp(product, qty, product.price);\r\n              // GUARDAR AL CARRITO\r\n\r\n            }            \r\n            \r\n            // LIMPIAR INPUT\r\n            this.searchCode.nativeElement.value = '';\r\n            this.searchCode.nativeElement.onFocus = true;\r\n            \r\n          }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n  }\r\n\r\n  /** ================================================================\r\n   *  ALMACENAR PRODUCTO TEMPORAL EN EL CARRITO\r\n  ==================================================================== */\r\n  public total: number = 0;\r\n  carritoTemp( product: Product, qty: number, precio: number ){ \r\n\r\n    const pid:any = product.pid;\r\n    let mayor = false;\r\n    // VALIDAR EL SI EXISTE EL PRODUCTO EN EL CARRITO\r\n    const validarItem = this.carrito.findIndex( (resp) =>{      \r\n      if (resp.product === pid ) {\r\n        return true;\r\n      }else {\r\n        return false;\r\n      }\r\n    });\r\n\r\n    // GUARDAR ITEM EN EL CARRITO\r\n    if (validarItem === -1) {\r\n      \r\n      this.carrito.push({\r\n        producto: product,\r\n        product: product.pid,\r\n        qty,\r\n        price: precio,\r\n        mayor\r\n      });\r\n\r\n    } else {\r\n      \r\n      let qtyTemp = this.carrito[validarItem].qty;\r\n      qtyTemp += qty;\r\n\r\n      this.carrito[validarItem].qty = qtyTemp;\r\n    }\r\n    \r\n    // SUMAR TOTALES\r\n    this.sumarTotales();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  ELIMINAR PRODUCTO DEL CARRITO CARRITO\r\n  ==================================================================== */\r\n  eliminarProductoCarrito( i: number ){\r\n\r\n    Swal.fire({\r\n      title: 'Estas Seguro?',\r\n      text: \"De eliminar este producto del carrito!\",\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: 'Si, eliminar!'\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n\r\n        this.carrito.splice(i, 1);\r\n        this.sumarTotales();\r\n\r\n        Swal.fire('Eliminado!', 'El producto se a eliminado con exito.', 'success');\r\n      }\r\n    })   \r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  SUMAR TOTALES\r\n  ==================================================================== */\r\n  sumarTotales(){\r\n    \r\n    this.total = 0;\r\n    if (this.carrito.length > 0) {\r\n      \r\n      for (let i = 0; i < this.carrito.length; i++) {\r\n        \r\n        this.total += (this.carrito[i].price * this.carrito[i].qty);        \r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  /** ============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * CLIENTES - CLIENTES - CLIENTES - CLIENTES  \r\n  ==================================================================== */\r\n  public listaClientes: Client[] = [];\r\n  public listaClientesTemp: Client[] = [];\r\n  public totalClientes: number = 0;\r\n  public clienteTemp: Client = {\r\n    name : '',\r\n    cedula: '',\r\n    phone: '',\r\n    email: '',\r\n    address: '',\r\n    city: ''\r\n  };\r\n\r\n  cargarCLientes(){\r\n    \r\n    this.clientService.cargarClientes(0)\r\n          .subscribe(({total, clients}) => {\r\n\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            if (clients.length === 0) {\r\n              this.listaClientes = [];\r\n              this.totalClientes = 0;\r\n              return;                \r\n            }\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            \r\n            this.listaClientes = clients;\r\n            this.listaClientesTemp = clients;\r\n            this.totalClientes = total;\r\n\r\n          }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  BUSCAR CLIENTE\r\n  ==================================================================== */\r\n  buscarCliente(termino: string){\r\n\r\n    if (termino.length === 0) {\r\n      this.listaClientes = this.listaClientesTemp;\r\n      return;\r\n    }else{\r\n    \r\n      this.searchService.search('clients', termino)\r\n          .subscribe(({total, resultados}) => {          \r\n          \r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (resultados.length === 0) {\r\n            this.listaClientes = [];\r\n            this.totalClientes = 0;\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          \r\n          this.listaClientes = resultados;\r\n          this.totalClientes = total;\r\n\r\n        });\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  SELECCIONAR CLIENTE\r\n  ==================================================================== */\r\n  seleccionarCliente(cliente: Client){\r\n    \r\n    this.clienteTemp = cliente;\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREAR CLIENTE\r\n  ==================================================================== */\r\n  public newClientForm = this.fb.group({\r\n    name: ['' , [Validators.required, Validators.minLength(3)]],\r\n    cedula: ['', [Validators.required, Validators.minLength(6)]],\r\n    email: ['', [Validators.email, Validators.minLength(7)]],\r\n    phone: ['', [Validators.minLength(3)]]\r\n  });\r\n  public formSubmitted: boolean = false;\r\n\r\n  crearCliente(){\r\n\r\n    this.formSubmitted = true;\r\n\r\n    if (this.newClientForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    this.clientService.createClient(this.newClientForm.value)\r\n        .subscribe((resp: any) => {\r\n\r\n          Swal.fire('Estupendo', 'Se ha creado el cliente exitosamente!', 'success');\r\n          this.cargarCLientes();\r\n\r\n          this.formSubmitted = false;\r\n          this.newClientForm.reset();          \r\n          \r\n        }, (err) =>{\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CAMPO VALIDO\r\n  ==================================================================== */\r\n  campoValido(campo: string): boolean{\r\n\r\n    if ( this.newClientForm.get(campo).invalid &&  this.formSubmitted) {      \r\n      return true;      \r\n    } else{\r\n            \r\n      return false;\r\n    }\r\n  \r\n  }\r\n\r\n  /** ============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   *  PRODUCTOS - PRODUCTOS - PRODUCTOS - PRODUCTOS\r\n  ==================================================================== */\r\n  @ViewChild('searchProduct') searchProduct: ElementRef;\r\n  public listaProductos: Product[] = [];\r\n  public listaProductosTemp: Product[] = [];\r\n  public totalProductos: number = 0;\r\n\r\n  public resultado: number = 0;\r\n  public desde: number = 0;\r\n  public cargando: boolean = true;\r\n  public sinResultados: boolean = true;\r\n  public btnAtras: string = '';\r\n  public btnAdelante: string = '';\r\n\r\n  /** ================================================================\r\n   *  CARGAR PRODUCTOS POR CATEGORIA\r\n  ==================================================================== */\r\n  cargarProductosDepartamento(department: string){\r\n\r\n    \r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n    this.productService.cargarProductoDepartamento(department)\r\n        .subscribe(({total, products}) => {\r\n            \r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n          if (products.length === 0) {\r\n            this.sinResultados = false;\r\n            this.cargando = false;\r\n            this.listaProductos = [];\r\n            this.resultado = 0;\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n            return;                \r\n          }\r\n          // COMPROBAR SI EXISTEN RESULTADOS\r\n        \r\n          this.totalProductos = total;\r\n          this.listaProductos = products;\r\n          this.listaProductosTemp = products;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n          \r\n\r\n          // BOTONOS DE ADELANTE Y ATRAS          \r\n          if (this.desde === 0 && this.totalProductos > 10) {\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = '';\r\n          }else if(this.desde === 0 && this.totalProductos < 11){\r\n            this.btnAtras = 'disabled';\r\n            this.btnAdelante = 'disabled';\r\n          }else if(this.desde > this.listaProductos.length){\r\n            this.btnAtras = '';\r\n            this.btnAdelante = 'disabled';\r\n          }else if((this.desde + 10) >= this.totalProductos){\r\n            this.btnAtras = '';\r\n            this.btnAdelante = 'disabled';\r\n          }else{\r\n            this.btnAtras = '';\r\n            this.btnAdelante = '';\r\n          }   \r\n          // BOTONOS DE ADELANTE Y ATRAS       \r\n            \r\n        });\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CARGAR PRODUCTOS\r\n  ==================================================================== */\r\n  cargarProductos(){\r\n\r\n    \r\n    // this.cargando = true;\r\n    // this.sinResultados = true;\r\n    // this.productService.cargarProductos(this.desde)\r\n    //     .subscribe(({total, products}) => {\r\n            \r\n    //       // COMPROBAR SI EXISTEN RESULTADOS\r\n    //       if (products.length === 0) {\r\n    //         this.sinResultados = false;\r\n    //         this.cargando = false;\r\n    //         this.listaProductos = [];\r\n    //         this.resultado = 0;\r\n    //         this.btnAtras = 'disabled';\r\n    //         this.btnAdelante = 'disabled';\r\n    //         return;                \r\n    //       }\r\n    //       // COMPROBAR SI EXISTEN RESULTADOS\r\n        \r\n    //       this.totalProductos = total;\r\n    //       this.listaProductos = products;\r\n    //       this.listaProductosTemp = products;\r\n    //       this.resultado = 0;\r\n    //       this.cargando = false;\r\n          \r\n\r\n    //       // BOTONOS DE ADELANTE Y ATRAS          \r\n    //       if (this.desde === 0 && this.totalProductos > 10) {\r\n    //         this.btnAtras = 'disabled';\r\n    //         this.btnAdelante = '';\r\n    //       }else if(this.desde === 0 && this.totalProductos < 11){\r\n    //         this.btnAtras = 'disabled';\r\n    //         this.btnAdelante = 'disabled';\r\n    //       }else if(this.desde > this.listaProductos.length){\r\n    //         this.btnAtras = '';\r\n    //         this.btnAdelante = 'disabled';\r\n    //       }else if((this.desde + 10) >= this.totalProductos){\r\n    //         this.btnAtras = '';\r\n    //         this.btnAdelante = 'disabled';\r\n    //       }else{\r\n    //         this.btnAtras = '';\r\n    //         this.btnAdelante = '';\r\n    //       }   \r\n    //       // BOTONOS DE ADELANTE Y ATRAS       \r\n            \r\n    //     });\r\n\r\n  }\r\n\r\n\r\n  /** ================================================================\r\n   *  BUSCAR PRODUCTOS\r\n  ==================================================================== */\r\n  buscarProducto( termino: string ){\r\n    \r\n    if (termino.length === 0) {\r\n      this.listaProductos = this.listaProductosTemp;\r\n      return;\r\n    }else{\r\n      \r\n      this.searchService.search('products', termino)\r\n          .subscribe(({total, resultados}) => {\r\n              \r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            if (resultados.length === 0) {\r\n              this.listaProductos = [];\r\n              this.totalProductos = 0;\r\n              return;                \r\n            }\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n\r\n            this.listaProductos = resultados;\r\n            this.totalProductos = total;\r\n  \r\n          });\r\n\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  SELECCIONAR PRODUCTO\r\n  ==================================================================== */\r\n  public productTemp: Product = {\r\n    code: '',\r\n    name: '',\r\n    type: '',\r\n    cost: 0,\r\n    gain: 0,\r\n    price: 0,\r\n    wholesale: 0,\r\n    getImage: ''\r\n  };\r\n\r\n  seleccionarProducto( producto: Product ){\r\n\r\n    this.searchProduct.nativeElement.value = '';\r\n\r\n    this.listaProductos = [];\r\n    this.totalProductos = 0;\r\n\r\n    this.productTemp = producto;\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  ENVIAR PRODUCTO AL CARRITO TEMPORAL POR EL BUSCADOR\r\n  ==================================================================== */\r\n  evniarAlCarrito( qty:number, mayoreo: boolean, code: string ){\r\n\r\n    if (code === '' || this.productTemp.price === 0) {\r\n      Swal.fire('Atención', 'No has seleccionado ningun producto', 'info');\r\n      return;\r\n    }\r\n\r\n    if (Number(qty) === 0 || qty < 0) {\r\n      Swal.fire('Atención', 'No has seleccionado una cantidad validad', 'info');\r\n      return;\r\n    }\r\n\r\n    let precio: number;\r\n\r\n    if (!mayoreo) {\r\n      precio = this.productTemp.price;\r\n    }else{\r\n      precio = this.productTemp.wholesale;\r\n    }\r\n    \r\n    // GUARDAR AL CARRITO\r\n    this.carritoTemp(this.productTemp, qty, precio);\r\n    // GUARDAR AL CARRITO\r\n\r\n    this.productTemp = {\r\n      code: '',\r\n      name: '',\r\n      type: '',\r\n      cost: 0,\r\n      gain: 0,\r\n      price: 0,\r\n      wholesale: 0,\r\n      getImage: ''\r\n    };\r\n\r\n    this.searchProduct.nativeElement.onFocus = true;\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  COMPROBAR PRECIOS comprobarPrecio\r\n  ==================================================================== */\r\n  @ViewChild('comprobarPrecio') comprobarPrecio: ElementRef;\r\n  public productoCom: Product;\r\n  comprobrarPrecio(code: string){\r\n\r\n    this.productService.cargarProductoCodigo(code)\r\n        .subscribe((producto) => {\r\n\r\n          this.productoCom = producto;\r\n\r\n          this.comprobarPrecio.nativeElement.value = '';\r\n          this.comprobarPrecio.nativeElement.focus();\r\n\r\n          console.log(this.productoCom);\r\n          \r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\r\n\r\n  }\r\n\r\n  /** ============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * INVOICE - INVOICE - INVOICE - INVOICE  \r\n  ==================================================================== */\r\n  \r\n  public payments: _payments[] = [];\r\n  public credit: boolean = false;\r\n\r\n  public invoiceForm = this.fb.group({\r\n    amount: ['', [Validators.required, Validators.min(this.total)]],\r\n    client: ['', [Validators.required]],\r\n    type: ['efectivo', [Validators.required]],\r\n    payments: [''], \r\n    products: [''],\r\n    credito: [this.credit],\r\n    fechaCredito: ['']\r\n  })\r\n\r\n  /** ================================================================\r\n   *  AGREGAR METODO DE PAGO\r\n  ==================================================================== */\r\n  @ViewChild('descripcionAdd') descripcionAdd: ElementRef;\r\n  @ViewChild('montoAdd') montoAdd: ElementRef;  \r\n\r\n  agregarPagos(type: string, amount:number, description:string = ''){\r\n\r\n    console.log('monto de pago: ', this.montoAdd.nativeElement.value);\r\n    \r\n\r\n    if (type === 'credito') {\r\n      this.credit = true;\r\n      this.descripcionAdd.nativeElement.value = '';\r\n      this.montoAdd.nativeElement.value = '';\r\n      return;\r\n    }\r\n\r\n    if (amount === 0 || amount < 1) {\r\n      Swal.fire('Atención', 'No has agregado un monto', 'info');\r\n      return;      \r\n    }\r\n\r\n    this.payments.push({\r\n      type,\r\n      amount: this.montoAdd.nativeElement.value,\r\n      description\r\n    });\r\n\r\n    this.descripcionAdd.nativeElement.value = '';\r\n    this.montoAdd.nativeElement.value = '';\r\n\r\n    this.sumarPagos();\r\n  }\r\n  /** ================================================================\r\n   *   ELIMINAR METODO DE PAGO\r\n  ==================================================================== */\r\n  eliminarPagos( item: any ){\r\n    \r\n    const i = this.payments.indexOf(item);\r\n\r\n    if ( i !== -1 ) { this.payments.splice(i, 1); }\r\n\r\n    this.sumarPagos();\r\n\r\n  }\r\n  /** ================================================================\r\n   *   LIMPIAR METODO DE PAGO\r\n  ==================================================================== */\r\n  limpiarPagos(tipo: string = ''){\r\n\r\n    if (tipo !== 'credito') {      \r\n      this.credit = false;     \r\n    }else{\r\n      this.credit = true;\r\n    }\r\n\r\n    this.payments = [];\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SUMAR METODO DE PAGO\r\n  ==================================================================== */\r\n  public totalPagos:number = 0;\r\n  sumarPagos(){\r\n    \r\n    this.totalPagos = 0;\r\n    if (this.payments.length > 0) {\r\n      \r\n      for (let i = 0; i < this.payments.length; i++) {\r\n        \r\n        this.totalPagos += Number( this.payments[i].amount );        \r\n      }\r\n\r\n    }\r\n\r\n  }\r\n  \r\n  /** ================================================================\r\n   *   CREAR FACTURA\r\n  ==================================================================== */\r\n  @ViewChild('fechCredito') fechCredito: ElementRef;  \r\n  crearFactura(){\r\n\r\n    if (this.totalPagos !== this.total && !this.credit) {\r\n      Swal.fire('Importante', 'El monto del pago es diferente al del total, porfavor verificar', 'warning');\r\n      return;      \r\n    }\r\n\r\n    if (this.invoiceForm.value.fechaCredito === '' && this.credit) {\r\n      Swal.fire('Importante', 'Debe de asignar una fecha de caducida a la factura a credito', 'warning');\r\n      return;      \r\n    }\r\n\r\n    try {\r\n\r\n      this.invoiceForm.setValue({\r\n        amount: this.total,\r\n        client: this.clienteTemp.cid,\r\n        type: this.invoiceForm.value.type,\r\n        payments: this.payments, \r\n        products: this.carrito,\r\n        credito: this.credit,\r\n        fechaCredito: this.invoiceForm.value.fechaCredito\r\n      });      \r\n\r\n      this.invoiceService.createInvoice(this.invoiceForm.value, this.turno.tid)\r\n\r\n          .subscribe( (resp:{ok: boolean, invoice: Invoice } ) => {            \r\n\r\n            this.invoiceForm.reset({\r\n              type: 'efectivo'\r\n            });\r\n\r\n            this.total = 0;\r\n            this.totalPagos = 0;\r\n            this.carrito = [];\r\n            this.payments = [];\r\n            this.clienteTemp = {\r\n              name : '',\r\n              cedula: '',\r\n              phone: '',\r\n              email: '',\r\n              address: '',\r\n              city: '',\r\n              cid: ''\r\n            };\r\n\r\n            // BORRAMOS LA FECHA CREDITO\r\n            this.credit = false;\r\n\r\n            Swal.fire('Success', `Se ha creado la factura <strong> #${ resp.invoice.invoice }</strong>, exitosamente`, 'success');\r\n            \r\n          }, (err) => {\r\n            Swal.fire('Error', err.error.msg, 'error');\r\n          });\r\n      \r\n    } catch (error) {\r\n      console.log(error);      \r\n      Swal.fire('Error', 'Aun faltan campos importantes, porfavor verificar', 'error');\r\n      \r\n    }    \r\n\r\n  }\r\n\r\n  /** ============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * CAJA - CAJA - CAJA - CAJA  \r\n  ==================================================================== */\r\n  public turno: LoadTurno;\r\n  cargarTurno(){\r\n\r\n    this.turnoService.getTurnoId(localStorage.getItem('turno'))\r\n        .subscribe( (turno) => {\r\n\r\n          this.turno = turno;\r\n          this.movimientos = turno.movements;\r\n          \r\n        });\r\n\r\n  }\r\n  \r\n  /** ================================================================\r\n   *   REGISTRAR ENTRADAS Y SALIDAS\r\n  ==================================================================== */\r\n  @ViewChild('montoE') montoE: ElementRef;\r\n  @ViewChild('descriptionE') descriptionE: ElementRef;\r\n\r\n  public movimientos: _movements[] = [];\r\n\r\n  entradaSalida(type: string, descripcion: string, monto: number){\r\n\r\n    // COMPROBAR QUE NO VENGA VACIO\r\n    if ( descripcion === '' || monto === 0) {\r\n      Swal.fire('Error', 'Todos los campos son obligatorios', 'error');\r\n      return;      \r\n    }\r\n    // COMPROBAR QUE NO VENGA VACIO\r\n    \r\n    // COMPROBAR EL TIPO SALIDA\r\n    if (type === 'salida') {\r\n      monto = monto * -1;            \r\n    }\r\n    // COMPROBAR EL TIPO SALIDA\r\n    \r\n    // AGREGAR EL MOVIMIENTO AL OBJECTO\r\n    this.movimientos.push({\r\n      type,\r\n      descripcion,\r\n      monto\r\n    });\r\n\r\n    this.turno.movements = this.movimientos;\r\n    // AGREGAR EL MOVIMIENTO AL OBJECTO\r\n    \r\n    // GUARDAR ACTUALIZAR EN LA BASE DE DATOS\r\n    this.turnoService.updateTurno(this.turno, this.turno.tid)\r\n    .subscribe((resp) => {\r\n      \r\n      console.log(resp);\r\n      \r\n      this.montoE.nativeElement.value = '';\r\n      this.descriptionE.nativeElement.value = '';\r\n\r\n    }, (err) =>{\r\n      Swal.fire('Error', err.error.msg, 'error');\r\n    }); \r\n    // GUARDAR ACTUALIZAR EN LA BASE DE DATOS\r\n\r\n  }\r\n\r\n  /** ============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   * =============================================================================================\r\n   *  DEPARTAMENTOS - DEPARTAMENTOS - DEPARTAMENTOS - DEPARTAMENTOS\r\n  ==================================================================== */\r\n  public departmentos: Department[] = [];\r\n  public departmentosTemp: Department[] = [];\r\n  public totalDepartamentos: number = 0;\r\n\r\n  cargarDepartamentos(){\r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n\r\n    this.departmentService.loadDepartment()\r\n        .subscribe(({ total, departments }) =>{   \r\n\r\n          this.totalDepartamentos = total;\r\n          this.departmentos = departments;\r\n          this.departmentosTemp = departments;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n\r\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); }\r\n        )\r\n  }\r\n\r\n\r\n  // FIN DE LA CLASE \r\n}\r\n","<!-- =========================================================================\r\n    TICKET 1 \r\n========================================================================= -->\r\n<div class=\"container-fluid\">\r\n\r\n    <div class=\"row\">\r\n\r\n        <div class=\"col-md-8 align-self-start\">\r\n\r\n            <!-- DEPARTAMENTOS -->\r\n            <div class=\"p-2 border-bottom my-2 d-flex justify-content-start overflow-auto container-scroll\">\r\n\r\n                    <div class=\"p-2\">\r\n\r\n                        <button type=\"button\" (click)=\"cargarProductos()\" class=\"btn bg-white btnW waves-effect waves-blue text-muted\"> \r\n                            <i class=\"bi-grid-3x3-gap\" style=\"font-size:2rem;\"></i> \r\n                            <h5>Todos</h5>\r\n                        </button>\r\n\r\n                    </div>\r\n                    <div class=\"p-2\" *ngFor=\"let departamento of departmentos\">\r\n\r\n                        <button type=\"button\" (click)=\"cargarProductosDepartamento(departamento.did)\" class=\"btn bg-white btnW waves-effect waves-blue text-muted p-2\"> \r\n                            <img class=\"avatar avatar-xs\" style=\"max-height: 50px; width: auto;\" src=\"http://localhost:3000/api/uploads/department/{{ departamento.img }}\" class=\"card-img-top\" alt=\"...\">\r\n                            <h6>{{ departamento.name }}</h6>\r\n                        </button>\r\n\r\n                    </div>\r\n            </div>\r\n            <!-- DEPARTAMENTOS -->\r\n            \r\n            <!-- PRODUCTOS -->\r\n            <div class=\"d-flex justify-content-center flex-wrap\" >\r\n\r\n                    <div *ngIf=\"listaProductos.length < 1\" class=\"py-4\">\r\n                        <h4 class=\"text-muted\">Sin Resultados</h4>\r\n                    </div>\r\n                    \r\n                    <div class=\"card m-1 animated fadeIn\" style=\"width: 12rem;\" *ngFor=\"let producto of listaProductos\" >\r\n                                            \r\n                        <img class=\"avatar-xxl avatar-img avatar-redondo-lg mx-auto\" style=\"height: 180px; width: auto;\" src=\"http://localhost:3000/api/uploads/products/{{ producto.img }}\" class=\"card-img-top\" alt=\"...\">\r\n                        \r\n                        <div class=\"card-body py-2\">\r\n                            <h6 class=\"card-title mb-1\">{{ producto.name }}</h6>\r\n                            <div class=\"d-flex align-items-center\">\r\n                                <p class=\"mb-0 text-success\">{{ producto.price | currency }}</p>\r\n                                <button type=\"button\" (click)=\"carritoTemp( producto, 1, producto.price )\" class=\"btn btn-link text-primary ms-auto\"><i class=\"bi bi-cart-plus\"></i></button>\r\n                            </div>                    \r\n                        </div>\r\n    \r\n                    </div>    \r\n            </div>\r\n            <!-- PRODUCTOS -->\r\n\r\n        </div>\r\n\r\n        <div class=\"col-md-4 bg-white py-4 px-2 border-start\" style=\"height: 100vh;\">\r\n\r\n            <div class=\"d-grid\">\r\n                <button type=\"button\" class=\"btn btn-outline-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#buscarCliente\"> Buscar Cliente </button>\r\n            </div>\r\n\r\n            <!-- INFORMACION DEL CLIENTE -->\r\n            <div class=\"row mt-2\">\r\n\r\n                <div class=\"col-md-8 text-left text-muted\">\r\n                                    \r\n                    <div class=\"\">\r\n                        <h6 class=\"mb-0 text-capitalize\"><strong>CLIENTE / RAZON SOCIAL:  </strong><small *ngIf=\"clienteTemp.name\">{{ clienteTemp.name }}</small></h6>\r\n                    </div>\r\n                    <div class=\"col\">\r\n                        <h6 class=\"text-wrap mb-0 text-capitalize\"><strong>CC / Nit: </strong> <small *ngIf=\"clienteTemp.cedula\"> {{ clienteTemp.cedula }}</small></h6>\r\n                    </div>\r\n\r\n                    <div class=\"\">\r\n                        <h6 class=\"text-wrap mb-0 text-capitalize\"><strong>TELEFONO: </strong> <small *ngIf=\"clienteTemp.phone\"> {{ clienteTemp.phone }}</small> </h6>\r\n                    </div>\r\n                    <div class=\"col\">\r\n                        <h6 class=\"text-wrap mb-0\"><strong>CORREO: </strong> <small *ngIf=\"clienteTemp.email\"> {{ clienteTemp.email }} </small></h6>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n            <!-- INFORMACION DEL CLIENTE -->\r\n\r\n            <hr class=\"my-2\">\r\n\r\n            <div class=\"table-responsive\">\r\n                <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                    <thead class=\"border-bottom \">\r\n                        <tr>\r\n                            <th class=\"text-muted text-left\" scope=\"col \" colspan=\"2 \">Descripción</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Precio</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Cantidad</th>\r\n                            <th class=\"text-muted \" scope=\"col \">Monto</th>\r\n                            <th class=\"text-muted \" scope=\"col \"></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr *ngIf=\"carrito.length === 0\" class=\"text-center \">\r\n                            <th colspan=\"10\" class=\"py-4\">\r\n                                <h4 class=\"text-muted\">No has seleccionado ningun producto</h4>\r\n                            </th>\r\n                        </tr>\r\n                        <ng-container *ngIf=\"carrito.length > 0\">\r\n                            <tr class=\"trHover\" *ngFor=\"let item of carrito; let i = index\">\r\n                                <td colspan=\"2\">{{ item.producto.name }}</td>\r\n                                <td>{{ item.price | currency}}</td>\r\n                                <td>{{ item.qty }}</td>\r\n                                <td>{{ item.price * item.qty | currency}}</td>\r\n                                <td><button type=\"button\" (click)=\"eliminarProductoCarrito(i)\" class=\"btn btn-link p-1 text-danger\"><i class=\"bi-trash\" style=\"font-size: 0.9rem\"></i></button></td>\r\n                            </tr>\r\n                        </ng-container>\r\n    \r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            <!-- TOTALES -->\r\n\r\n            <div class=\"py-2\" style=\"bottom: 0;\">\r\n    \r\n                <div class=\"d-flex justify-content-center\">\r\n\r\n                    <div class=\"col-4\">\r\n                        <button *ngIf=\"clienteTemp.cedula === '' || carrito.length === 0\" type=\"button\" class=\"btn disabled btn-dark btnW waves-effect waves-dark text-white\"> <h4 class=\"display-7\">Facturar</h4></button>\r\n                        <button *ngIf=\"clienteTemp.cedula !== '' && carrito.length > 0\" type=\"button\" class=\"btn btn-dark btnW waves-effect waves-dark text-white\" data-bs-toggle=\"modal\" data-bs-target=\"#facturar\"> <h4 class=\"display-6\">Facturar</h4></button>\r\n                        <!-- <button type=\"button\" class=\"btn btn-dark btnW waves-effect waves-dark text-white\" data-bs-toggle=\"modal\" data-bs-target=\"#facturar\"> <h4 class=\"display-6\">Facturar</h4></button> -->\r\n                    </div>\r\n\r\n                    <div class=\"col ms-auto text-end\">\r\n                        <h4 class=\"fw-normal text-primary\">{{ total | currency }}</h4>\r\n                        <small class=\"h6 fw-normal text-primary\">Sub-total {{ total / 1 | currency }}</small>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n\r\n</div>\r\n\r\n<!-- =========================================================================\r\n    TICKET 1 \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    MODAL BUSCAR CLIENTE \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"buscarCliente\" tabindex=\"-1\" aria-labelledby=\"buscarClienteModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"buscarClienteModal\"><i class=\"bi-people\" style=\"font-size: 1rem\"></i> Clientes</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n                <!-- NAV - NAV -->\r\n                <nav>\r\n                    <div class=\"nav nav-tabs\" id=\"nav-tab\" role=\"tablist\">\r\n                        <a class=\"nav-link active\" id=\"nav-buscarCliente-tab\" data-bs-toggle=\"tab\" href=\"#nav-buscarCliente\" role=\"tab\" aria-controls=\"nav-buscarCliente\" aria-selected=\"true\"><i class=\"bi-person-bounding-box\"></i>  Buscar Cliente</a>\r\n                        <a class=\"nav-link\" id=\"nav-crearCliente-tab\" data-bs-toggle=\"tab\" href=\"#nav-crearCliente\" role=\"tab\" aria-controls=\"nav-crearCliente\" aria-selected=\"false\"><i class=\"bi-person-plus\"></i> Crear Cliente</a>\r\n                    </div>\r\n                </nav>\r\n                <!-- NAV - NAV -->\r\n\r\n                <div class=\"tab-content\" id=\"nav-tabContent\">\r\n\r\n                    <!-- BUSCAR CLIENTE - BUSCAR CLIENTE - BUSCAR CLIENTE -->\r\n                    <div class=\"tab-pane fade show active\" id=\"nav-buscarCliente\" role=\"tabpanel\" aria-labelledby=\"nav-buscarCliente-tab\">\r\n\r\n                        <div class=\"col mt-4\">\r\n                            <div>\r\n                                <div class=\"mb-3\">\r\n                                    <input type=\"text\" class=\"form-control\" placeholder=\"buscar cliente\" (keyup)=\"buscarCliente(searchClient.value)\" #searchClient>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"table-responsive \">\r\n                                <table class=\"table table-borderless table-striped table-hover table-sm animated fadeIn \">\r\n                                    <thead class=\"border-bottom \">\r\n                                        <tr>\r\n                                            <th class=\"text-muted \" scope=\"col \">#</th>\r\n                                            <th class=\"text-muted \" scope=\"col \" colspan=\"2 \">CLIENTE</th>\r\n                                            <th class=\"text-muted \" scope=\"col \"></th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        <tr class=\"trHover\" *ngFor=\"let cliente of listaClientes; let i = index\">\r\n                                            <th>{{ i + 1 }}</th>\r\n                                            <td colspan=\"2\">\r\n                                                <h6 class=\"text-wrap mb-0\"> {{ cliente.name }}</h6>\r\n                                                <p class=\"mb-0\">{{ cliente.cedula }} <small *ngIf=\"cliente.email\"> - {{ cliente.email }}</small></p>\r\n                                                <small *ngIf=\"cliente.phone\"> {{ cliente.phone }} </small>\r\n                                            </td>\r\n                                            <td style=\"max-width: 50px;\"><button type=\"button\" (click)=\"seleccionarCliente(cliente)\" class=\"btn btn-link p-1 text-primary\"><i class=\"bi-box-arrow-up-right\" style=\"font-size: 0.9rem\"></i></button></td>\r\n                                        </tr>\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                            <div>\r\n                                <small>Total de clientes: {{ totalClientes }}</small>\r\n                            </div>\r\n\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n                    <!-- BUSCAR CLIENTE - BUSCAR CLIENTE - BUSCAR CLIENTE -->\r\n\r\n                    <!-- CREAR CLIENTE - CREAR CLIENTE - CREAR CLIENTE -->\r\n                    <div class=\"tab-pane fade\" id=\"nav-crearCliente\" role=\"tabpanel\" aria-labelledby=\"nav-crearCliente-tab\">\r\n\r\n                        <div class=\"mt-4\">\r\n\r\n                            <form autocomplete=\"off\" [formGroup]=\"newClientForm\" (ngSubmit)=\"crearCliente()\">\r\n\r\n                                <!-- =======================================================================\r\n                                    DATOS PERSONALES \r\n                                =========================================================================== -->\r\n\r\n                                <h5 class=\"text-muted\">Datos Personales</h5>\r\n\r\n\r\n                                <div class=\"col-md-10 mx-auto p-2 \">\r\n\r\n                                    <div class=\"form-floating\">\r\n                                        <input formControlName=\"name\" type=\"text\" class=\"form-control text-capitalize\" placeholder=\"Nombres\">\r\n                                        <label for=\"floatingInput\">Nombres</label>\r\n                                        <p *ngIf=\"campoValido('name')\" class=\"mb-1 animated fadeIn text-danger\">* El nombre es obligatorio</p>\r\n                                    </div>\r\n\r\n                                </div>\r\n                                <div class=\"col-md-10 mx-auto p-2  \">\r\n\r\n                                    <div class=\"form-floating\">\r\n                                        <input formControlName=\"cedula\" type=\"text\" class=\"form-control\" placeholder=\"Cedula de ciudadania\">\r\n                                        <label for=\"floatingInput\">Cedula de ciudadania</label>\r\n                                        <p *ngIf=\"campoValido('cedula')\" class=\"mb-1 animated fadeIn text-danger\">* La cedula de ciudadania es obligatoria</p>\r\n                                    </div>\r\n\r\n                                </div>\r\n\r\n\r\n\r\n                                <div class=\"col-md-10 mx-auto p-2 \">\r\n\r\n                                    <div class=\"form-floating\">\r\n                                        <input formControlName=\"email\" type=\"email\" class=\"form-control\" placeholder=\"Email\">\r\n                                        <label for=\"floatingInput\">Email</label>\r\n                                    </div>\r\n\r\n                                </div>\r\n                                <div class=\"col-md-10 mx-auto p-2 \">\r\n\r\n                                    <div class=\"form-floating\">\r\n                                        <input formControlName=\"phone\" type=\"text\" class=\"form-control\" placeholder=\"Telefono\">\r\n                                        <label for=\"floatingInput\">Telefono</label>\r\n                                    </div>\r\n\r\n                                </div>\r\n\r\n                                <button type=\"submit\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n                            \r\n                            </form>\r\n\r\n                        </div>\r\n\r\n\r\n                    </div>\r\n                    <!-- CREAR CLIENTE - CREAR CLIENTE - CREAR CLIENTE -->\r\n                </div>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    MODAL BUSCAR CLIENTE \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    BUSCAR PRODUCTO \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"buscarProducto\" tabindex=\"-1\" aria-labelledby=\"buscarProductoModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\" style=\"min-height: 350px;\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"buscarProductoModal\"><i class=\"bi-file-spreadsheet\" style=\"font-size: 1rem\"></i> Productos</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <div class=\"col\">\r\n\r\n                    <div class=\"my-2\">\r\n                        <div>\r\n                            <label for=\"precioM\">Buscar Productos:</label>\r\n                            <input type=\"text\" class=\"form-control\" placeholder=\"buscar producto\" (keyup)=\"buscarProducto(searchProduct.value)\" #searchProduct>\r\n                        </div>\r\n                        <div *ngIf=\"listaProductos.length > 0\" class=\"bg-white px-2 shadow col-10\" style=\"position: absolute; z-index: 1020;\">\r\n\r\n                            <ul class=\"list-group list-group-flush overflow-auto\" style=\"max-height: 200px;\">\r\n\r\n                                <li class=\"list-group-item py-1\">\r\n                                    <h6>Resultados: ({{ listaProductos.length }})</h6>\r\n                                </li>\r\n\r\n                                <li class=\"list-group-item py-1 trHover\" *ngFor=\"let item of listaProductos\">\r\n                                    <div class=\"d-flex \">\r\n                                        <div class=\"align-self-center\">\r\n                                            <span> {{ item.name }} </span>\r\n                                        </div>\r\n\r\n                                        <div class=\"ms-auto\">\r\n                                            <button class=\"btn btn-link p-1 text-success float-end\" (click)=\"seleccionarProducto(item)\"> <i class=\"bi-arrow-90deg-right\"></i></button>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                </li>\r\n\r\n                            </ul>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"mt-4\">\r\n\r\n                        <div class=\"form-group\">\r\n                            <label for=\"\">Codigo de barras:</label>\r\n                            <input readonly type=\"text\" class=\"form-control\" placeholder=\"Codigo de Barras\" [value]=\"productTemp.code\" #barcode>\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                            <label for=\"\">Nombre:</label>\r\n                            <input readonly type=\"text\" class=\"form-control\" placeholder=\"Nombre\" [value]=\"productTemp.name\">\r\n                        </div>\r\n\r\n                        <div class=\"row\">\r\n\r\n                            <div *ngIf=\"!mayoreo.checked\" class=\"form-group col-md-6\">\r\n                                <label for=\"precio\">Precio:</label>\r\n                                <input readonly type=\"number\" min=\"1\" class=\"form-control\" placeholder=\"Precio\" [value]=\"productTemp.price\" #precio>\r\n                            </div>\r\n\r\n                            <div *ngIf=\"mayoreo.checked\" class=\"form-group col-md-6\">\r\n                                <label for=\"precioM\">Precio Al Mayor:</label>\r\n                                <input readonly type=\"number\" min=\"1\" class=\"form-control\" placeholder=\"Precio Al Mayor\" [value]=\"productTemp.wholesale\" #precioM>\r\n                            </div>\r\n\r\n                            <div class=\"form-group col-md-6\">\r\n                                <label for=\"cantidad\">Cantidad:</label>\r\n                                <input type=\"number\" min=\"1\" class=\"form-control\" placeholder=\"\" value=\"1\" #cantidad>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"form-check form-switch mt-2\">\r\n                            <input class=\"form-check-input\" type=\"checkbox\" [(ngModel)]=\"mayoreo.checked\" #mayoreo>\r\n                            <label class=\"form-check-label\" for=\"mayor\">Aplicar Mayoreo</label>\r\n                        </div>\r\n\r\n                        <button ngClass type=\"button\" (click)=\"evniarAlCarrito(cantidad.value, mayoreo.checked, barcode.value)\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    BUSCAR PRODUCTO \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    MODAL FACTURAR \r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"facturar\" tabindex=\"-1\" aria-labelledby=\"facturarModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-xl modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-body p-0\">\r\n\r\n                <div class=\"container-fluid\">\r\n                    <div class=\"py-2\">\r\n\r\n                        <!-- COLUMNA IZQ -->\r\n                        <div class=\"col px-0 bg-white\">\r\n\r\n                            <!-- TITULO -->\r\n                            <div class=\"bg-header-blue py-1 px-2\">\r\n                                <h4 class=\"text-white fw-normal mb-0\">Cobrar</h4>\r\n                            </div>\r\n\r\n                            <div class=\"container-fluid py-4\">\r\n\r\n                                <!-- TOTAL -->\r\n                                <div class=\"text-center my-3\">\r\n                                    <h4 class=\"display-4 text-primary\">{{ total | currency }}</h4>\r\n                                </div>\r\n                                <!-- TOTAL -->\r\n\r\n\r\n                                <div class=\"d-flex justify-content-center\">\r\n\r\n                                    <div>\r\n\r\n                                        <!-- FORM INVOICE - FORM INVOICE -->\r\n                                        <form autocomplete=\"off\" [formGroup]=\"invoiceForm\">\r\n\r\n                                            <div class=\"row text-center\">\r\n                                                <div class=\"col p-2\">\r\n\r\n                                                    <input type=\"radio\" (click)=\"limpiarPagos()\" class=\"btn-check\" name=\"type\" formControlName=\"type\" id=\"efectivo-outlined\" value=\"efectivo\" autocomplete=\"off\" checked>\r\n                                                    <label class=\"btn btn-outline-success\" for=\"efectivo-outlined\">\r\n                                                    <i class=\"px-3 bi-cash-stack\" style=\"font-size: 1.5rem;\"></i>\r\n                                                    <p class=\"mb-0\">Efectivo</p>\r\n    \r\n                                                </label>\r\n\r\n                                                </div>\r\n                                                <div class=\"col p-2\">\r\n\r\n                                                    <input type=\"radio\" (click)=\"limpiarPagos()\" class=\"btn-check\" name=\"type\" formControlName=\"type\" id=\"tarjeta-outlined\" value=\"tarjeta\" autocomplete=\"off\">\r\n                                                    <label class=\"btn btn-outline-primary\" for=\"tarjeta-outlined\">\r\n                                                    <i class=\"px-3 bi-credit-card\" style=\"font-size: 1.5rem;\"></i>\r\n                                                    <p class=\"mb-0\">Tarjeta</p>\r\n                                                </label>\r\n\r\n                                                </div>\r\n\r\n                                                <div class=\"col p-2\">\r\n\r\n                                                    <input type=\"radio\" (click)=\"limpiarPagos()\" class=\"btn-check\" name=\"options-outlined\" name=\"type\" formControlName=\"type\" id=\"vale-outlined\" value=\"vale\" autocomplete=\"off\">\r\n                                                    <label class=\"btn btn-outline-secondary\" for=\"vale-outlined\">\r\n                                                    <i class=\"px-3 bi-card-heading\" style=\"font-size: 1.5rem;\"></i>\r\n                                                    <p class=\"mb-0\">Vale</p>\r\n                                                </label>\r\n\r\n                                                </div>\r\n\r\n                                                <div class=\"col p-2\">\r\n\r\n                                                    <input type=\"radio\" (click)=\"limpiarPagos()\" class=\"btn-check\" name=\"options-outlined\" name=\"type\" formControlName=\"type\" id=\"mixto-outlined\" value=\"mixto\" autocomplete=\"off\">\r\n                                                    <label class=\"btn btn-outline-dark\" for=\"mixto-outlined\">\r\n                                                    <i class=\"px-3 bi-patch-question\" style=\"font-size: 1.5rem;\"></i>\r\n                                                    <p class=\"mb-0\">Mixto</p>\r\n                                                </label>\r\n\r\n                                                </div>\r\n\r\n                                                <div class=\"col p-2\">\r\n\r\n                                                    <input type=\"radio\" (click)=\"limpiarPagos('credito')\" class=\"btn-check\" name=\"options-outlined\" name=\"type\" formControlName=\"type\" id=\"credito-outlined\" value=\"credito\" autocomplete=\"off\">\r\n                                                    <label class=\"btn btn-outline-warning\" for=\"credito-outlined\">\r\n                                                    <i class=\"px-3 bi-clock-history\" style=\"font-size: 1.5rem;\"></i>\r\n                                                    <p class=\"mb-0\">Credito</p>\r\n                                                </label>\r\n\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <div class=\"mx-auto\">\r\n\r\n                                                <!-- TABLA -->\r\n                                                <div class=\"table-responsive\">\r\n                                                    <table class=\"table table-sm table-borderless\">\r\n                                                        <thead>\r\n                                                            <tr>\r\n                                                                <th>#</th>\r\n                                                                <th>Descripcion</th>\r\n                                                                <th>Monto</th>\r\n                                                                <th></th>\r\n                                                            </tr>\r\n                                                        </thead>\r\n                                                        <tbody formArrayName=\"payments\">\r\n                                                            <tr class=\"trHover\" *ngFor=\"let control of payments; let i = index\">\r\n                                                                <th>{{ i + 1}}</th>\r\n                                                                <td>\r\n                                                                    <p class=\"mb-0\">{{ control.type }} <span *ngIf=\"control.description\">- {{ control.description }}</span></p>\r\n                                                                </td>\r\n                                                                <td> {{ control.amount | currency }} </td>\r\n                                                                <td>\r\n                                                                    <button type=\"button\" class=\"btn btn-link p-1 text-danger text-right\" (click)=\"eliminarPagos(control)\"> <i class=\"bi-trash\"></i> </button>\r\n                                                                </td>\r\n                                                            </tr>\r\n                                                        </tbody>\r\n                                                    </table>\r\n\r\n                                                </div>\r\n                                                <!-- TABLA -->\r\n\r\n                                                <!-- AGREGAR METODO DE PAGO -->\r\n\r\n                                                <div class=\"row g-3 d-flex justify-content-center\">\r\n\r\n                                                    <div class=\"col-auto\">\r\n\r\n                                                        <select class=\"form-select\" aria-label=\"Default select example\" (change)=\"typeAdd.value\" #typeAdd>\r\n                                                            <option *ngIf=\"invoiceForm.value.type === 'efectivo' || invoiceForm.value.type === 'mixto'\" value=\"efectivo\">Efectivo</option>\r\n                                                            <option *ngIf=\"invoiceForm.value.type === 'tarjeta' || invoiceForm.value.type === 'mixto'\" value=\"tarjeta\">Tarjeta</option>\r\n                                                            <option *ngIf=\"invoiceForm.value.type === 'vale' || invoiceForm.value.type === 'mixto'\" value=\"vale\">Vale</option>\r\n                                                            <option *ngIf=\"invoiceForm.value.type === 'credito'\" value=\"credito\">Credito</option>\r\n                                                        </select>\r\n\r\n                                                    </div>\r\n\r\n                                                    <div class=\"col-auto\" *ngIf=\"!credit\">\r\n                                                        <label for=\"Descripción\" class=\"visually-hidden\">Descripción</label>\r\n                                                        <input type=\"text\" class=\"form-control w100\" id=\"Descripción\" placeholder=\"Descripción\" (keyup)=\"descripcionAdd.value\" #descripcionAdd>\r\n                                                    </div>\r\n\r\n                                                    <div class=\"col-auto\" *ngIf=\"!credit\">\r\n                                                        <label for=\"monto\" class=\"visually-hidden\">Monto</label>\r\n                                                        <input type=\"number\" class=\"form-control\" id=\"monto\" placeholder=\"Monto\" (keyup)=\"montoAdd.value\" #montoAdd>\r\n                                                    </div>\r\n\r\n                                                    <div class=\"col-auto\" *ngIf=\"!credit\">\r\n                                                        <button type=\"button\" class=\"btn btn-primary mb-3\" (click)=\"agregarPagos(typeAdd.value, montoAdd.value, descripcionAdd.value)\">Agregar</button>\r\n                                                    </div>\r\n\r\n                                                    <div class=\"col-auto\" *ngIf=\"credit\">\r\n                                                        <label for=\"credi\" class=\"visually-hidden\">Fecha limite</label>\r\n                                                        <input type=\"date\" formControlName=\"fechaCredito\" class=\"form-control\" id=\"credi\" placeholder=\"Selecciona una fecha limite\" #fechCredito>\r\n                                                    </div>\r\n\r\n                                                </div>\r\n                                                <!-- AGREGAR METODO DE PAGO -->\r\n\r\n                                            </div>\r\n\r\n\r\n                                        </form>\r\n                                        <!-- FORM INVOICE - FORM INVOICE -->\r\n\r\n                                        <p class=\"mb-0 mt-4\">Validar: {{ credit }}</p>\r\n\r\n                                    </div>\r\n\r\n\r\n                                </div>\r\n                            </div>\r\n\r\n\r\n                        </div>\r\n                        <!-- COLUMNA IZQ -->\r\n\r\n                    </div>\r\n\r\n                    <!-- BTN CREAR FACTURA -->\r\n                    <div class=\"my-4 float-end\">\r\n                        <button type=\"button\" (click)=\"crearFactura()\" class=\"btn btn-outline-primary\">Imprimir</button>\r\n                    </div>\r\n                    <!-- BTN CREAR FACTURA -->\r\n\r\n\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    MODAL FACTURAR \r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\n    MODAL REGISTRAR ENTRADAS Y SALIDAS\r\n========================================================================= -->\r\n\r\n<div class=\"modal fade\" id=\"entradaSalidas\" tabindex=\"-1\" aria-labelledby=\"entradaSalidasModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"entradaSalidasModal\"><i class=\"bi-arrow-left-right\" style=\"font-size: 1rem\"></i> Movimientos </h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n\r\n            <div class=\"modal-body\">\r\n\r\n                <!-- NAV - NAV -->\r\n                <nav>\r\n                    <div class=\"nav nav-tabs\" id=\"nav-tab\" role=\"tablist\">\r\n                        <a class=\"nav-link active\" id=\"nav-entradas-tab\" data-bs-toggle=\"tab\" href=\"#nav-entradas\" role=\"tab\" aria-controls=\"nav-entradas\" aria-selected=\"true\"><i class=\"bi-box-arrow-in-right\"></i>  Entradas</a>\r\n                        <a class=\"nav-link\" id=\"nav-salidas-tab\" data-bs-toggle=\"tab\" href=\"#nav-salidas\" role=\"tab\" aria-controls=\"nav-salidas\" aria-selected=\"false\"><i class=\"bi-box-arrow-right\"></i> Salidas</a>\r\n                    </div>\r\n                </nav>\r\n                <!-- NAV - NAV -->\r\n\r\n                <div class=\"tab-content\" id=\"nav-tabContent\">\r\n\r\n                    <!-- ENTRADAS - ENTRADAS - ENTRADAS -->\r\n                    <div class=\"tab-pane fade show active\" id=\"nav-entradas\" role=\"tabpanel\" aria-labelledby=\"nav-entradas-tab\">\r\n                        \r\n                        <div class=\"py-4\">\r\n\r\n                            <div class=\"form-group\">\r\n                                <label for=\"\">Entrada</label>\r\n                                <input type=\"number\" class=\"form-control\" placeholder=\"Monto de entrada\" #montoE>\r\n                              </div>\r\n      \r\n                              <div class=\"form-group\">\r\n                                  <label for=\"\">Descripción</label>\r\n                                  <input type=\"text\" class=\"form-control\" placeholder=\"Descripción\" #descriptionE>\r\n                              </div>\r\n      \r\n                              <div class=\"col py-2\">      \r\n                                  <button type=\"button\" (click)=\"entradaSalida('entrada', descriptionE.value, montoE.value)\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>                              \r\n                            </div>\r\n\r\n                        </div>                     \r\n\r\n\r\n                    </div>\r\n                    <!-- ENTRADAS - ENTRADAS - ENTRADAS -->\r\n                    <!-- SALIDAS - SALIDAS - SALIDAS -->\r\n                    <div class=\"tab-pane fade\" id=\"nav-salidas\" role=\"tabpanel\" aria-labelledby=\"nav-salidas-tab\">\r\n                        \r\n                        <div class=\"py-4\">\r\n\r\n                            <div class=\"form-group\">\r\n                                <label for=\"\">Salida</label>\r\n                                <input type=\"number\" class=\"form-control\" placeholder=\"Monto de salida\" #montoS>\r\n                              </div>\r\n      \r\n                              <div class=\"form-group\">\r\n                                  <label for=\"\">Descripción</label>\r\n                                  <input type=\"text\" class=\"form-control\" placeholder=\"Descripción\" #descriptionS>\r\n                              </div>\r\n      \r\n                              <div class=\"col py-2\">      \r\n                                  <button type=\"button\" (click)=\"entradaSalida('salida', descriptionS.value, montoS.value)\" class=\"btn btnW waves-effect waves-ligth px-3 btn-primary\">Guardar</button>                              \r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n                    <!-- SALIDAS - SALIDAS - SALIDAS -->\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- =========================================================================\r\n    MODAL REGISTRAR ENTRADAS Y SALIDAS\r\n========================================================================= -->\r\n\r\n<!-- =========================================================================\r\nVERIFICADOR DE PRECIOS\r\n========================================================================= -->\r\n<div class=\"modal fade\" id=\"verificarPrecio\" tabindex=\"-1\" aria-labelledby=\"verificarPrecioModal\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"verificarPrecioModal\"><i class=\"bi-upc-scan\" style=\"font-size: 1rem\"></i> Verificar Precio </h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n\r\n            <div class=\"modal-body\">\r\n\r\n                <div class=\"text-center pb-4\">\r\n                    <h4 class=\"text-muted\">Comprobar Precio</h4>\r\n                    <div class=\"form-group\">\r\n                      <input type=\"text\" class=\"form-control\" placeholder=\"Escanear Codigo\" (keyup.enter)=\"comprobrarPrecio(comprobarPrecio.value)\" #comprobarPrecio>\r\n                    </div>\r\n\r\n                    <div *ngIf=\"productoCom\" class=\"mt-4\">\r\n                        <h6 class=\"text-muted mb-0\"> {{ productoCom.name }} </h6>\r\n                        <h4 class=\"display-2 text-primary\"> {{ productoCom.price | currency }} </h4>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- =========================================================================\r\nVERIFICADOR DE PRECIOS\r\n========================================================================= -->\r\n","import { Component, OnInit } from '@angular/core';\r\nimport Swal from 'sweetalert2';\r\nimport { Router } from '@angular/router';\r\n\r\n// MODELS\r\nimport { Mesa } from '../../models/mesas.model';\r\n\r\n// SERVICES\r\nimport { MesasService } from '../../services/mesas.service';\r\nimport { UserService } from '../../services/user.service';\r\nimport { User } from 'src/app/models/user.model';\r\nimport { SearchService } from 'src/app/services/search.service';\r\nimport { PisosService } from 'src/app/services/pisos.service';\r\nimport { Piso } from 'src/app/models/pisos.model';\r\n\r\n@Component({\r\n  selector: 'app-ventas',\r\n  templateUrl: './ventas.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class VentasComponent implements OnInit {\r\n\r\n  public listaMesas: Mesa[] = [];\r\n  public listaMesasTemp: Mesa[] = [];\r\n  public totalMesas: number = 0;\r\n\r\n  public resultado: number = 0;\r\n  public desde: number = 0;\r\n  public cargando: boolean = true;\r\n  public sinResultados: boolean = true;\r\n\r\n  public btnAtras: string = '';\r\n  public btnAdelante: string = '';\r\n  \r\n  public role : string = '';\r\n  public user: string;\r\n\r\n  constructor(  private router: Router,\r\n                private mesasService: MesasService,\r\n                private userService:UserService,\r\n                private pisosService: PisosService,\r\n                private searchService: SearchService) {\r\n\r\n                  const reloadMesa = setInterval( () => {\r\n\r\n                    let ruta = window.location.href;\r\n                    let rutaArray = ruta.split('/');\r\n                  \r\n                    if (rutaArray.length > 5 ) {\r\n                      clearInterval(reloadMesa);\r\n                    }else if (rutaArray[4] === 'ventas'){                      \r\n                      this.cargarMesasQuery();          \r\n                    }else{\r\n                      clearInterval(reloadMesa);\r\n                    }\r\n            \r\n                  }, 30000);\r\n\r\n                }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.role = this.userService.role;\r\n\r\n    this.user = this.userService.user.uid;\r\n    \r\n\r\n    if (localStorage.getItem('turno') === '' && localStorage.getItem('turno') === null) {\r\n\r\n      Swal.fire('No autorizado', 'Debes de abrir caja para iniciar', 'info');\r\n      this.router.navigateByUrl('/');\r\n      return;\r\n\r\n    }\r\n\r\n    // CARGAR PISOS\r\n    this.loadPisos();\r\n\r\n    // CARGAR MESAS\r\n    this.cargarMesasQuery();\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   BUSCAR MESA\r\n  ==================================================================== */\r\n  buscar(termino){\r\n    \r\n    this.sinResultados = true;\r\n    if (termino.length === 0) {\r\n      this.listaMesas = this.listaMesasTemp;\r\n      this.resultado = 0;\r\n      return;\r\n    }else{\r\n\r\n      this.sinResultados = true;\r\n      this.searchService.search('mesa', termino)\r\n          .subscribe(({total, resultados}) => {\r\n\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n            if (resultados.length === 0) {\r\n              this.sinResultados = false;\r\n              this.listaMesas = [];\r\n              this.resultado = 0;\r\n              return;                \r\n            }\r\n            // COMPROBAR SI EXISTEN RESULTADOS\r\n\r\n            this.totalMesas = total;\r\n            this.listaMesas = resultados; \r\n            this.resultado = resultados.length; \r\n\r\n          });\r\n          \r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR MESAS\r\n  ==================================================================== */\r\n  cargarMesas(){\r\n\r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n\r\n    this.mesasService.loadMesas(this.desde)\r\n        .subscribe(({ total, mesas }) => {\r\n          \r\n          this.totalMesas = total;\r\n          this.listaMesas = mesas;\r\n          this.listaMesasTemp = mesas;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n\r\n        });\r\n    \r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR MESAS\r\n  ==================================================================== */\r\n  public query: any = {\r\n    desde: 0,\r\n    hasta: 999999\r\n  }\r\n  cargarMesasQuery(){\r\n\r\n    this.cargando = true;\r\n    this.sinResultados = true;\r\n\r\n    this.mesasService.loadMesasQuery(this.query)\r\n        .subscribe( ({mesas, total}) => {\r\n\r\n          this.totalMesas = total;\r\n          this.listaMesas = mesas;\r\n          this.listaMesasTemp = mesas;\r\n          this.resultado = 0;\r\n          this.cargando = false;\r\n\r\n        }, (err) => {\r\n          console.log(err.error);\r\n          Swal.fire('Error', err.error.msg, 'error');\r\n          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR PISOS\r\n  ==================================================================== */\r\n  public pisos: Piso[] = [];\r\n  loadPisos(){\r\n\r\n    this.pisosService.loadPisos({desde: 0, hasta: 999999, sort: {}})\r\n        .subscribe( ({pisos}) => {\r\n          this.pisos = pisos;\r\n        }, (err) => {\r\n          console.log(err);\r\n          Swal.fire('Error', err.error.msg, 'error');          \r\n        })\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SELECT PISO\r\n  ==================================================================== */\r\n  selectPiso(piso:string){\r\n\r\n    if (piso === 'todos') {\r\n      delete this.query.piso;\r\n    }else{\r\n      this.query.piso = piso\r\n    }\r\n\r\n    this.cargarMesasQuery();\r\n\r\n  }\r\n\r\n}\r\n","<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<header>\r\n    <div class=\"bg-header-blue py-2 px-3 mb-2\">\r\n        <h5 class=\"text-white m-0\">Ventas</h5>\r\n    </div>\r\n\r\n    <ul class=\"nav nav-tabs px-3\">\r\n        <li class=\"nav-item\">\r\n          <a (click)=\"selectPiso('todos')\" class=\"nav-link text-dark active cursor\" id=\"todos-tab\"  data-bs-toggle=\"tab\" role=\"tab\" aria-controls=\"todos\" aria-selected=\"true\" >Todos</a>\r\n        </li>\r\n        <li class=\"nav-item\" *ngFor=\"let piso of pisos\">\r\n          <a (click)=\"selectPiso(piso.piid)\" class=\"nav-link text-dark cursor\" id=\"{{piso.name}}-tab\"  data-bs-toggle=\"tab\" role=\"tab\" aria-controls=\"{{piso.name}}\" aria-selected=\"true\"> {{ piso.name }} </a>\r\n        </li>\r\n      </ul>\r\n</header>\r\n<!-- =========================================================================\r\n    HEADER \r\n========================================================================= -->\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->\r\n<div class=\"container-fluid\">\r\n\r\n    <!-- MESAS -->\r\n    <div class=\"p-2 border-bottom my-2\">\r\n        <h4 class=\"mb-2 text-muted\">Tickets</h4>\r\n\r\n        <div class=\"col-md-8 mx-auto\">\r\n            <div class=\"form-floating mb-2\">\r\n                <span class=\"position-absolute top-50 start-90 translate-middle\"><i class=\" bi-search \" style=\"font-size: 1rem \"></i></span>\r\n                <input type=\"text\" class=\"form-control\" id=\"floatingInput2\" placeholder=\"Buscar\" (keyup)=\"buscar(search.value)\" #search>\r\n                <label for=\"floatingInput2 \">Buscar</label>\r\n            </div>\r\n        </div>\r\n\r\n        <hr>\r\n\r\n        <div class=\"d-flex flex-wrap\">\r\n\r\n\r\n            <ng-container *ngIf=\"role === 'WAITER'\">\r\n\r\n                <div *ngFor=\"let mesa of listaMesas\">\r\n\r\n                    <div class=\"p-2\" *ngIf=\"mesa.mesero._id === user && mesa.status\">\r\n                        <button [routerLink]=\"['/dashboard/ventas/mesa', mesa.mid]\" type=\"button\" style=\"width: 10rem;\" class=\" text-wrap bg-white p-3 btn btnW waves-effect waves-ligth position-relative\"> \r\n                            <small *ngIf=\"!mesa.disponible\" class=\"text-danger\"> Ocupada </small>\r\n                            <small *ngIf=\"mesa.disponible\" class=\"text-success\"> Disponible </small>\r\n                            <i [ngClass]=\"{'text-danger': mesa.disponible == false, 'text-success': mesa.disponible == true}\" class=\"bi-dot position-absolute top-0 start-100 translate-middle pe-4 pt-2\" style=\"font-size: 2.5rem;\"></i>\r\n                            <h5 class=\"mb-0 text-wrap\">{{ mesa.name }}</h5>                    \r\n                            <img src=\"../../../assets/img/icons/{{ mesa.img || 'ticket.svg' }}\" alt=\"\" style=\"max-height: 100px;\">\r\n                            <h6 class=\"mb-0 text-wrap fw-normal\"> {{ mesa.mesero.name }} </h6>\r\n                            <hr>\r\n                            <small *ngIf=\"!mesa.disponible\" class=\"mb-0 text-muted lh-1\">\r\n                                <span *ngIf=\"mesa.cliente\"> {{ mesa.cliente.name }} </span>\r\n                                <span *ngIf=\"mesa.placa\"> - {{ mesa.placa }}</span> \r\n                                <span *ngIf=\"!mesa.cliente\">Consumidor Final</span>\r\n                            </small>      \r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n            </ng-container>\r\n\r\n            <ng-container *ngIf=\"role !== 'WAITER'\">\r\n\r\n                <ng-container *ngIf=\"role === 'CASHIER'\">\r\n\r\n                    <div *ngFor=\"let mesa of listaMesas\">\r\n\r\n                        <div class=\"p-2\" *ngIf=\"mesa.mesero._id === user && mesa.status\">\r\n                            <button [routerLink]=\"['/dashboard/ventas/mesa', mesa.mid]\" type=\"button\" style=\"width: 10rem;\" class=\" text-wrap bg-white p-3 btn btnW waves-effect waves-ligth position-relative\"> \r\n                                <small *ngIf=\"!mesa.disponible\" class=\"text-danger\"> Ocupada </small>\r\n                                <small *ngIf=\"mesa.disponible\" class=\"text-success\"> Disponible </small>\r\n                                <i [ngClass]=\"{'text-danger': mesa.disponible == false, 'text-success': mesa.disponible == true}\" class=\"bi-dot position-absolute top-0 start-100 translate-middle pe-4 pt-2\" style=\"font-size: 2.5rem;\"></i>\r\n                                <h5 class=\"mb-0 text-wrap\">{{ mesa.name }}</h5>                    \r\n                                <img src=\"../../../assets/img/icons/{{ mesa.img || 'ticket.svg' }}\" alt=\"\" style=\"max-height: 80px;\">\r\n                                <h6 class=\"mb-0 text-wrap fw-normal\"> {{ mesa.mesero.name }} </h6>\r\n                                <hr>\r\n                                <small *ngIf=\"!mesa.disponible\" class=\"mb-0 text-muted lh-1\"> \r\n                                    <span *ngIf=\"mesa.cliente\"> {{ mesa.cliente.name }}</span> \r\n                                    <span *ngIf=\"mesa.placa\"> - {{ mesa.placa }}</span> \r\n                                </small>                 \r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                </ng-container>\r\n\r\n                <ng-container *ngIf=\"role !== 'CASHIER'\">\r\n\r\n                    <div  class=\"p-2\" *ngFor=\"let mesa of listaMesas\">\r\n                        <button *ngIf=\"mesa.status\" [routerLink]=\"['/dashboard/ventas/mesa', mesa.mid]\" type=\"button\" style=\"width: 10rem;\" class=\" text-wrap bg-white text-wrap p-3 btn btnW waves-effect waves-ligth position-relative\"> \r\n                            <small *ngIf=\"!mesa.disponible\" class=\"text-danger\"> Ocupada </small>\r\n                            <small *ngIf=\"mesa.disponible\" class=\"text-success\"> Disponible </small>\r\n                            <i [ngClass]=\"{'text-danger': mesa.disponible == false, 'text-success': mesa.disponible == true}\" class=\"bi-dot position-absolute top-0 start-100 translate-middle pe-4 pt-2\" style=\"font-size: 2.5rem;\"></i>\r\n                            <h5 class=\"mb-0 text-wrap\">{{ mesa.name }}</h5>                    \r\n                            <img src=\"../../../assets/img/icons/{{ mesa.img || 'ticket.svg' }}\" alt=\"\" style=\"max-height: 100px;\">\r\n                            <h6 *ngIf=\"mesa.mesero\" class=\"mb-0 text-wrap fw-normal\"> {{ mesa.mesero.name }} </h6>\r\n                            <hr *ngIf=\"!mesa.disponible\" class=\"mb-2\">\r\n                            <span *ngIf=\"mesa.cliente\"> {{ mesa.cliente.name }}</span> \r\n                            <span *ngIf=\"mesa.placa\"> - {{ mesa.placa }}</span>                 \r\n                        </button>\r\n                    </div>\r\n\r\n                </ng-container>\r\n\r\n            </ng-container>\r\n\r\n        </div>\r\n    </div>\r\n    <!-- MESAS -->\r\n\r\n</div>\r\n<!-- =========================================================================\r\n    BODY \r\n========================================================================= -->","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { EmpresaService } from '../services/empresa.service';\r\nimport { Datos } from '../models/empresa.model';\r\n\r\n@Pipe({\r\n  name: 'divisa'\r\n})\r\nexport class DivisaPipe implements PipeTransform {\r\n\r\n  public empresa: Datos;\r\n  constructor(  private empresaService: EmpresaService){\r\n    \r\n  }\r\n\r\n  transform(monto: any, moneda: 'COP' | 'USD' | 'BS' | 'none' = 'none'): any {\r\n       \r\n    this.empresa = this.empresaService.myEmpresa;\r\n    \r\n    if (monto.length === 0 || monto === 0 || !monto) {\r\n      monto = 0;      \r\n    }    \r\n\r\n    if (moneda === 'none') {\r\n      if(!this.empresa?.moneda){\r\n        this.empresa.moneda = 'COP';\r\n      }\r\n    }else{      \r\n      this.empresa.moneda = moneda;\r\n    }\r\n        \r\n    if (!this.empresa?.decimal) {\r\n      monto =  Math.round(monto/ 100) * 100;\r\n      // monto =  Math.round(monto);\r\n    }else{\r\n      monto = Number.parseFloat(monto).toFixed(2) ;\r\n    }\r\n    \r\n    let newMonto:any;\r\n    const exp = /(\\d)(?=(\\d{3})+(?!\\d))/g;\r\n    const rep = '$1,';\r\n\r\n    // AGREGAR SEPARADORES\r\n    monto = monto.toString().split('.');\r\n    monto[0] = monto[0].replace(exp,rep);\r\n    monto[1] ? monto.join('.'): monto[0];\r\n    // AGREGAR SEPARADORES    \r\n    \r\n    if (this.empresa?.moneda === 'COP') {\r\n      newMonto = `$${monto}`;\r\n    }else if(this.empresa?.moneda === 'USD'){\r\n      newMonto = `${monto}$`;\r\n    }else if(this.empresa?.moneda === 'BS'){\r\n      newMonto = `${monto}bs`;\r\n    }\r\n\r\n    return newMonto;\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\nimport { environment } from \"../../environments/environment\"\r\n\r\nconst base_url = environment.base_url;\r\nconst local_url = environment.local_url;\r\n\r\n@Pipe({\r\n  name: 'imagen'\r\n})\r\nexport class ImagenPipe implements PipeTransform {\r\n\r\n  transform(img: string, tipo: 'products' | 'logo' | 'user' | 'department' | 'taller' = 'taller'): string {\r\n    if (img) {            \r\n        return `${base_url}/uploads/${tipo}/${img}`;\r\n    }else{\r\n        return `${base_url}/uploads/${tipo}/no-image`;\r\n    }\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ImagenPipe } from '../pipes/imagen.pipe';\r\nimport { SplitPipe } from './split.pipe';\r\nimport { DivisaPipe } from './divisa.pipe';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [ ImagenPipe, SplitPipe, DivisaPipe ],\r\n  exports: [ \r\n    ImagenPipe, \r\n    SplitPipe,\r\n    DivisaPipe\r\n  ],\r\n  imports: [\r\n    CommonModule\r\n  ]\r\n})\r\nexport class PipesModule { }\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'split'\r\n})\r\nexport class SplitPipe implements PipeTransform {\r\n\r\n  transform( factura:string ): unknown {\r\n    let numero = factura.split('#'); \r\n    return numero[1];\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { delay, map, tap } from 'rxjs/operators';\r\nimport { Alquiler } from '../models/alquileres.model';\r\n\r\nimport { environment } from '../../environments/environment';\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AlquileresService {\r\n\r\n  constructor(  private http:HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREATE ALQUILER\r\n  ==================================================================== */\r\n  createAlquiler(formData: any){    \r\n    return this.http.post<{ok: boolean, alquiler: Alquiler}>(`${base_url}/alquileres`, formData, this.headers);\r\n  }\r\n  \r\n  /** ================================================================\r\n   *  LOAD ALQUILERES\r\n  ==================================================================== */\r\n  loadAlquileres(query: any){    \r\n    return this.http.post<{ok: boolean, total: number, alquileres: Alquiler[]}>(`${base_url}/alquileres/query`, query, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD ALQUILER ID\r\n  ==================================================================== */\r\n  loadAlquilerId(id: string){    \r\n    return this.http.get<{ok: boolean, alquiler: Alquiler}>(`${base_url}/alquileres/${id}`, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE ALQUILER\r\n  ==================================================================== */\r\n  updateAlquiler(formData: any, id: string){    \r\n    return this.http.put<{ok: boolean, alquiler: Alquiler}>(`${base_url}/alquileres/${id}`, formData, this.headers);\r\n  }\r\n\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { delay, map, tap } from 'rxjs/operators';\r\n\r\nimport { Banco } from '../models/bancos.model';\r\nimport { LoadBancos } from '../interfaces/load-bancos.interface';\r\n\r\nimport { environment } from '../../environments/environment';\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BancosService {\r\n\r\n  constructor(  private http:HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREATE BANCOS\r\n  ==================================================================== */\r\n  createBanco(formData: any){\r\n    \r\n    return this.http.post<{ok: boolean, banco: Banco}>(`${base_url}/bancos`, formData, this.headers);\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD BANCOS\r\n  ==================================================================== */\r\n  loadBancos(){\r\n    \r\n    return this.http.get<LoadBancos>(`${base_url}/bancos`, this.headers)\r\n                .pipe(\r\n                  map( resp => {\r\n                      return resp;\r\n                    })\r\n                )\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD BANCO ID\r\n  ==================================================================== */\r\n  loadBancoId( banco: string ){\r\n\r\n    return this.http.get(`${base_url}/bancos/${banco}`, this.headers)\r\n                .pipe(\r\n                  map( (resp: { ok: boolean, banco: Banco}) =>{\r\n                    return resp.banco\r\n                  })\r\n                )\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE BANCO\r\n  ==================================================================== */\r\n  updateBanco(formData: any, id: string){\r\n    \r\n    return this.http.put<{ok: boolean, banco: Banco}>(`${base_url}/bancos/${id}`, formData, this.headers);\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE ESTATUS BANCO\r\n  ==================================================================== */\r\n  statusUpdateBanco(id: string){\r\n    \r\n    return this.http.delete<{ok: boolean, banco: Banco}>(`${base_url}/bancos/${id}`, this.headers)\r\n                .pipe(\r\n                  map( (resp: {ok: boolean, banco: Banco}) => { \r\n                    return resp.banco \r\n                  })\r\n                );\r\n\r\n  }\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { delay, map, tap } from 'rxjs/operators';\r\n\r\nimport { environment } from '../../environments/environment';\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BasculaService {\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD PESO\r\n  ==================================================================== */\r\n  loadPeso(type: string = '1', path: string = 'COM1', kg: boolean = true){\r\n\r\n    return this.http.get(`http://localhost:3000/api/bascula?type=${type}&&path=${path}&&kg=${kg}`, this.headers)\r\n                .pipe(\r\n                  map( (resp: { ok: boolean, pesos: number})=> {\r\n                      return resp.pesos;\r\n                    })\r\n                )\r\n\r\n  }\r\n\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\n\r\nimport { environment } from '../../environments/environment';\r\nimport { Bodega } from '../models/bodegas.model';\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BodegasService {\r\n\r\n  constructor(  private http:HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREATE BANCOS\r\n  ==================================================================== */\r\n  createBodega(formData: any){    \r\n    return this.http.post<{ok: boolean, bodega: Bodega}>(`${base_url}/bodega`, formData, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD BANCOS\r\n  ==================================================================== */\r\n  loadBodegas(query: any){    \r\n    return this.http.post<{ok: boolean, bodegas: Bodega[], total: number}>(`${base_url}/bodega/query`, query, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD BANCO ID\r\n  ==================================================================== */\r\n  loadBodegaId( bodega: string ){\r\n    return this.http.get<{ok: boolean, bodega: Bodega}>(`${base_url}/bodega/${bodega}`, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE BANCO\r\n  ==================================================================== */\r\n  updateBodega(formData: any, id: string){    \r\n    return this.http.put<{ok: boolean, bodega: Bodega}>(`${base_url}/bodega/${id}`, formData, this.headers);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { delay, map, tap } from 'rxjs/operators';\r\n\r\n// INTERFACES\r\nimport { LoadCaja, _caja } from '../interfaces/load-caja.interface';\r\n\r\n// CAJA\r\nimport { Caja } from '../models/caja.model';\r\n\r\nimport { environment } from '../../environments/environment';\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CajaService {\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREATE CAJA\r\n  ==================================================================== */\r\n  createCaja(formData: Caja){\r\n    \r\n    return this.http.post(`${base_url}/caja`, formData, this.headers);\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD CAJAS\r\n  ==================================================================== */\r\n  loadCajas(){\r\n    \r\n    return this.http.get<LoadCaja>(`${base_url}/caja`, this.headers)\r\n                .pipe(\r\n                  map( resp => {\r\n                      return resp;\r\n                    })\r\n                )\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD ONE CAJA\r\n  ==================================================================== */\r\n  loadOneCaja( turno: string ){\r\n\r\n    return this.http.get(`${base_url}/caja/turno/${turno}`, this.headers)\r\n                .pipe(\r\n                  map( (resp: { ok: boolean, caja: Caja}) =>{\r\n                    return resp.caja\r\n                  })\r\n                )\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE CAJA\r\n  ==================================================================== */\r\n  updateCaja(formData: any, id: string){\r\n    \r\n    return this.http.put(`${base_url}/caja/${id}`, formData, this.headers);\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE ESTATUS CAJAS\r\n  ==================================================================== */\r\n  statusUpdateCaja(id: string){\r\n    \r\n    return this.http.delete(`${base_url}/caja/${id}`, this.headers)\r\n                .pipe(\r\n                  map( (resp: {ok: boolean, caja: Caja}) => { \r\n                    return resp.caja \r\n                  })\r\n                );\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { delay, map, tap } from 'rxjs/operators'\r\n\r\n// MODEL\r\n\r\n// INTERFACES\r\nimport { LoadCalendario } from '../interfaces/calendario.interface';\r\n\r\nimport { environment } from '../../environments/environment';\r\n\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CalendarioService {\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD CALENDARIO\r\n  ==================================================================== */\r\n  loadCalendario(){\r\n\r\n    return this.http.get<LoadCalendario>(`${base_url}/calendario`, this.headers)\r\n        .pipe(\r\n          map( resp =>{\r\n            return resp;\r\n          })\r\n        );\r\n        \r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREATE CALENDARIO\r\n  ==================================================================== */\r\n  createCalendario(formData: any){\r\n    \r\n    return this.http.post(`${base_url}/calendario`, formData, this.headers);\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   DELETE EVENT OF CALENDAR\r\n  ==================================================================== */\r\n  deleteCalendario( _id: string){\r\n    return this.http.delete(`${base_url}/calendario/${_id}`, this.headers);\r\n  }\r\n\r\n\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Car } from '../models/cars.model';\r\n\r\nimport { environment } from '../../environments/environment';\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CarsService {\r\n\r\n  constructor(  private http:HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREATE CAR\r\n  ==================================================================== */\r\n  createCar(formData: any){    \r\n    return this.http.post<{ok: boolean, car: Car}>(`${base_url}/cars`, formData, this.headers);\r\n  }\r\n  \r\n  /** ================================================================\r\n   *  LOAD CAR\r\n  ==================================================================== */\r\n  loadCars(query: any){    \r\n    return this.http.post<{ok: boolean, total: number, cars: Car[]}>(`${base_url}/cars/query`, query, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE CAR\r\n  ==================================================================== */\r\n  updateCar(formData: any, id: string){    \r\n    return this.http.put<{ok: boolean, car: Car}>(`${base_url}/cars/${id}`, formData, this.headers);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { delay, map, tap } from 'rxjs/operators'\r\n\r\n// MODEL\r\nimport { Categoria } from '../models/categoria.model';\r\n\r\n// INTERFACES\r\nimport { LoadCategoria } from '../interfaces/load-categoria.interface';\r\n\r\nimport { environment } from '../../environments/environment';\r\n\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class CategoriaService {\r\n\r\n  public categoria: Categoria;\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD DEPARTMENT\r\n  ==================================================================== */\r\n  loadDepartment(){\r\n\r\n    return this.http.get<LoadCategoria>(`${base_url}/categorias`, this.headers)\r\n        .pipe(\r\n          map( resp =>{\r\n            return resp;\r\n          })\r\n        );\r\n        \r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREATE DEPARTMENT\r\n  ==================================================================== */\r\n  createDepartment(formData: any){\r\n    \r\n    return this.http.post(`${base_url}/categorias`, formData, this.headers);\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE DEPARTMENT\r\n  ==================================================================== */\r\n  updateDepartment(formData: any, id:string){\r\n    \r\n    return this.http.put(`${base_url}/categorias/${id}`, formData, this.headers);\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE STATUS DEPARTMENT\r\n  ==================================================================== */\r\n  statusUpdateDepartment(id: string){\r\n    \r\n    return this.http.delete(`${base_url}/categorias/${id}`, this.headers)\r\n                .pipe(\r\n                  map( (resp: {ok: boolean, department: Categoria}) => { \r\n                    return resp.department \r\n                  })\r\n                );\r\n\r\n  }\r\n\r\n\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n\r\n\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { delay, map, tap } from 'rxjs/operators'\r\n\r\n// MODELS\r\nimport { Client } from '../models/client.model';\r\n\r\n// INTERFACES\r\nimport { LoadClients } from '../interfaces/load-clients.interface';\r\n\r\nimport { environment } from '../../environments/environment';\r\n\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ClientService {\r\n\r\n  public client: Client;\r\n\r\n  constructor( private http: HttpClient ) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR CLIENTES clients\r\n  ==================================================================== */\r\n  cargarClientes(desde: number = 0){\r\n    \r\n    const endPoint = `/clients?desde=${desde}`;\r\n    return this.http.get<LoadClients>(`${base_url}${endPoint}`, this.headers)\r\n            .pipe(\r\n              delay(500),\r\n              map( resp => {\r\n                return resp;\r\n              })\r\n            );\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREATE CLIENT\r\n  ==================================================================== */\r\n  createClient( formData: any ){    \r\n    return this.http.post<{client: Client, ok: boolean}>(`${base_url}/clients`, formData, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREATE CLIENT EXCEL\r\n  ==================================================================== */\r\n  loadClientsQuery( formData: any ){    \r\n    return this.http.post<{ok: boolean, clients: Client[], total: number}>(`${base_url}/clients/query`, formData, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREATE CLIENT EXCEL\r\n  ==================================================================== */\r\n  createClientExcel( formData: any ){    \r\n    return this.http.post<{ok: boolean, total: number}>(`${base_url}/clients/create/excel`, formData, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   UPDATE CLIENT\r\n  ==================================================================== */\r\n  updateClient(formData:any, _id:string){\r\n    return this.http.put(`${base_url}/clients/${_id}`, formData, this.headers);\r\n  }\r\n\r\n\r\n  /** ================================================================\r\n   *   DELETE CLIENT\r\n  ==================================================================== */\r\n  deleteClient( _id: string){\r\n    return this.http.delete(`${base_url}/clients/${_id}`, this.headers);\r\n  }\r\n                \r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Compra } from '../models/compras.model';\r\n\r\nimport { environment } from '../../environments/environment';\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ComprasService {\r\n\r\n  constructor(  private http:HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREATE COMPRA\r\n  ==================================================================== */\r\n  createCompra(formData: any){    \r\n    return this.http.post<{ok: boolean, compra: Compra}>(`${base_url}/compras`, formData, this.headers);\r\n  }\r\n  \r\n  /** ================================================================\r\n   *  LOAD COMPRA\r\n  ==================================================================== */\r\n  loadCompras(query: any){    \r\n    return this.http.post<{ok: boolean, total: number, compras: Compra[]}>(`${base_url}/compras/query`, query, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD COMPRA\r\n  ==================================================================== */\r\n  loadCompraID(compra: any){    \r\n    return this.http.get<{ok: boolean, compra: Compra}>(`${base_url}/compras/one/${compra}`, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE COMPRA\r\n  ==================================================================== */\r\n  updateCompra(formData: any, id: string){    \r\n    return this.http.put<{ok: boolean, compra: Compra}>(`${base_url}/compras/${id}`, formData, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  RETURN COMPRA\r\n  ==================================================================== */\r\n  returnCompra(id: string){\r\n    return this.http.delete<{ok: boolean, msg: string}>(`${base_url}/compras/${id}`, this.headers)\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { delay, map, tap } from 'rxjs/operators';\r\n\r\nimport { environment } from '../../environments/environment';\r\nimport { DataicoInterface } from '../interfaces/dataico.interface';\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DataicoService {\r\n\r\n  constructor(  private http:HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD DATA DATAICO\r\n  ==================================================================== */\r\n  loadDataDataico(){    \r\n    return this.http.get<{dataico: DataicoInterface, ok: boolean}>(`${base_url}/dataico`, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  POST DATAICO\r\n  ==================================================================== */\r\n  postDataico(formData: any){\r\n    return this.http.post<{dataico: DataicoInterface, ok: boolean}>(`${base_url}/dataico`, formData, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  POST DATAICO\r\n  ==================================================================== */\r\n  updateDataico(formData: any, id: string){\r\n    return this.http.put<{dataico: DataicoInterface, ok: boolean}>(`${base_url}/dataico/${id}`, formData, this.headers);\r\n  }\r\n\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { delay, map, tap } from 'rxjs/operators'\r\n\r\n// MODEL\r\nimport { Department } from '../models/department.model';\r\n\r\n// INTERFACES\r\nimport { LoadDepartment } from '../interfaces/load-department.interface';\r\n\r\nimport { environment } from '../../environments/environment';\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class DepartmentService {\r\n\r\n  public department: Department;\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD DEPARTMENT\r\n  ==================================================================== */\r\n  loadDepartment(){\r\n\r\n    return this.http.get<LoadDepartment>(`${base_url}/departments`, this.headers)\r\n        .pipe(\r\n          map( resp =>{\r\n            return resp;\r\n          })\r\n        );\r\n        \r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREATE DEPARTMENT\r\n  ==================================================================== */\r\n  createDepartment(formData: any){\r\n    \r\n    return this.http.post(`${base_url}/departments`, formData, this.headers);\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE DEPARTMENT\r\n  ==================================================================== */\r\n  updateDepartment(formData: any, id:string){\r\n    \r\n    return this.http.put(`${base_url}/departments/${id}`, formData, this.headers);\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE STATUS DEPARTMENT\r\n  ==================================================================== */\r\n  statusUpdateDepartment(id: string){\r\n    \r\n    return this.http.delete(`${base_url}/departments/${id}`, this.headers)\r\n                .pipe(\r\n                  map( (resp: {ok: boolean, department: Department}) => { \r\n                    return resp.department \r\n                  })\r\n                );\r\n\r\n  }\r\n\r\n\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\n\r\nimport { environment } from '../../environments/environment';\r\nimport { Domicilio } from '../models/domicilios.model';\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DomiciliosService {\r\n\r\n  constructor(  private http:HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREATE DOMICILIO\r\n  ==================================================================== */\r\n  createDomicilio(formData: any){    \r\n    return this.http.post<{ok: boolean, domicilio: Domicilio}>(`${base_url}/domicilios`, formData, this.headers);\r\n  }\r\n  \r\n  /** ================================================================\r\n   *  LOAD PARQUEO\r\n  ==================================================================== */\r\n  loadDomicilios(query: any){    \r\n    return this.http.post<{ok: boolean, total: number, domicilios: Domicilio[], pendientes: number, enviandos: number, entregados: number}>(`${base_url}/domicilios/query`, query, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE PARQUEO\r\n  ==================================================================== */\r\n  updateDomicilios(formData: any, id: string){    \r\n    return this.http.put<{ok: boolean, domicilio: Domicilio}>(`${base_url}/domicilios/${id}`, formData, this.headers);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\n\r\nimport { delay, map, tap } from 'rxjs/operators';\r\n\r\nimport { environment } from '../../environments/environment';\r\n\r\n// INTERFACES\r\nimport { DataicoInterface } from '../interfaces/dataico.interface';\r\nimport { LoadInvoice } from '../interfaces/invoice.interface';\r\nimport { Actions, Customer, FacturaElectronica, InvoiceElectronic, Item, Tax } from '../models/invoiceelectronic.model';\r\nimport { Impuestos } from '../models/impuestos.model';\r\n\r\nconst base_url = environment.base_url;\r\nconst dataico_url = environment.dataico_url;\r\n\r\ninterface _Department {\r\n  codigo: string,\r\n  departamento: string,\r\n}\r\n\r\ninterface _City {\r\n  \"codigo departamento\": string,\r\n  departamento: string,\r\n  codigo: string,\r\n  ciudad: string,\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ElectronicaService {\r\n\r\n  constructor(  private http: HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  ENVIAR FACTURA A DATAICO\r\n  ==================================================================== */\r\n  postFacturaDataico(invoice: LoadInvoice, dataico: DataicoInterface, impuestos: Impuestos[]) {\r\n    \r\n    let customer: Customer = {\r\n      department: dataico.department,\r\n      city: dataico.city,\r\n      address_line: 'No aplica',\r\n      party_type: 'PERSONA_NATURAL',\r\n      tax_level_code: 'NO_RESPONSABLE_DE_IVA',\r\n      email: dataico.email,\r\n      country_code: 'CO',\r\n      first_name: 'Consumidor',\r\n      family_name: 'Final',\r\n      phone: dataico.phone,\r\n      party_identification_type: 'CC',\r\n      company_name: '',\r\n      regimen: 'SIMPLE',\r\n      party_identification: '222222222222' ,\r\n    };\r\n\r\n    if (invoice.client) {\r\n      customer = {\r\n        department:                 invoice.client.codigodepartamento,\r\n        city:                       invoice.client.codigociudad,\r\n        address_line:               invoice.client.address,\r\n        party_type:                 invoice.client.party_type,\r\n        tax_level_code:             invoice.client.tax_level_code,\r\n        email:                      invoice.client.email,\r\n        country_code:               invoice.client.country_code,\r\n        first_name:                 invoice.client.first_name,\r\n        phone:                      invoice.client.phone,\r\n        party_identification_type:  invoice.client.party_identification_type,\r\n        company_name:               invoice.client.company_name,\r\n        family_name:                invoice.client.family_name,\r\n        regimen:                    invoice.client.regimen,\r\n        party_identification:       invoice.client.cedula\r\n      }\r\n    }\r\n\r\n    if(customer.party_type === 'PERSONA_JURIDICA'){\r\n      delete customer.first_name;\r\n      delete customer.family_name;\r\n    }else{\r\n      delete customer.company_name;\r\n    }    \r\n\r\n    // SETEAR FECHA\r\n    let d = new Date();\r\n    let f = `${d.getDate()}/${d.getMonth()+1}/${d.getFullYear()}`.split('/');\r\n    (Number(f[0]) < 10)? f[0] = `0${f[0]}` : f[0];\r\n    (Number(f[1]) < 10)? f[1] = `0${f[1]}` : f[1];\r\n    let fecha = `${f[0]}/${f[1]}/${f[2]}`;\r\n    // SETEAR FECHA\r\n   \r\n    let {  ...actions } = dataico.actions;\r\n    delete actions._id;\r\n    delete dataico.numbering._id;\r\n\r\n    let items: Item[] = [];\r\n\r\n     for (const product of invoice.products)  {      \r\n\r\n      // let impuesto = impuestos.filter( tax => tax._id === product.product.taxid );\r\n      let impuesto = product.product.taxid;\r\n\r\n      let tax: Tax[] = [];\r\n\r\n      let type = '94';\r\n      if (product.product.type === 'Granel') {\r\n        type = 'AB';\r\n      }else if(product.product.type === 'Paquete'){\r\n        type = 'PA';\r\n      }\r\n\r\n      tax.push({\r\n        \"tax-category\": impuesto.taxcategory,\r\n        \"tax-rate\":   impuesto.valor\r\n      });\r\n      \r\n      let item: Item = {\r\n        \"sku\":            product.product.code,\r\n        \"quantity\":       product.qty,\r\n        \"price\":          product.price,\r\n        \"description\":    product.product.name,\r\n        \"taxes\":          tax,\r\n        \"measuring-unit\": type\r\n      }\r\n\r\n      items.push(item);\r\n\r\n    }\r\n\r\n    \r\n    \r\n    // \"issue_date\": `${fecha.getDate()}/${fecha.getMonth()+1}/${fecha.getFullYear()}`,\r\n    let factura: FacturaElectronica = {\r\n      \"issue_date\": fecha,\r\n      \"invoice_type_code\": dataico.invoice_type_code,\r\n      \"items\": items,\r\n      \"payment_means_type\": 'DEBITO',\r\n      \"number\": invoice.invoice.toString(),\r\n      \"numbering\": dataico.numbering,\r\n      \"dataico_account_id\": dataico.dataico_account_id,\r\n      \"payment_date\": fecha,\r\n      \"env\": 'PRODUCCION',\r\n      \"customer\": customer,\r\n      \"payment_means\": 'DEBIT_CARD'\r\n    };\r\n\r\n    dataico.actions.send_email = true;\r\n    \r\n    let data: InvoiceElectronic = {\r\n      actions: dataico.actions,\r\n      invoice: factura\r\n    }; \r\n\r\n    let desde;\r\n    \r\n    if(!dataico.desde || dataico.desde === 0){\r\n      desde = 0;\r\n    }else{\r\n      desde = (dataico.desde - 1);\r\n    }\r\n    \r\n    return this.http.post(`${base_url}/electronica/${dataico.authtoken}/${invoice.iid}/${desde}`, data, this.headers)\r\n\r\n  }\r\n  \r\n  // FIN DE LA CLASE\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { delay, map, tap } from 'rxjs/operators'\r\n\r\n// INTERFACES\r\nimport { LoadEmpresa } from '../interfaces/load-empresa.interface';\r\n\r\nimport { environment } from '../../environments/environment';\r\nimport { Datos } from '../models/empresa.model';\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class EmpresaService {\r\n\r\n  public myEmpresa: Datos;\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n    /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET DATOS EMPRESA\r\n  ==================================================================== */\r\n  getDatos(){\r\n\r\n    return this.http.get(`${base_url}/datos`, this.headers)\r\n                .pipe(\r\n                  map( (resp: {ok: boolean, datos: Datos}) => { \r\n                    \r\n                    if (!resp.datos.comandas) {\r\n                      resp.datos.comandas = false;\r\n                    }\r\n\r\n                    this.myEmpresa = resp.datos;\r\n                    return resp.datos; \r\n                    \r\n                  })\r\n                );\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   UPDATE DATOS EMPRESA\r\n  ==================================================================== */\r\n  createDatos( formData: any){\r\n\r\n    return this.http.post(`${base_url}/datos`, formData, this.headers);\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   UPDATE DATOS EMPRESA\r\n  ==================================================================== */\r\n  updateDatos( formData: any, id: string ){\r\n\r\n    return this.http.put(`${base_url}/datos/${id}`, formData, this.headers);\r\n\r\n  }\r\n\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { delay, map, tap } from 'rxjs/operators'\r\n\r\n// MODEL\r\n\r\n// INTERFACES\r\n\r\nimport { environment } from '../../environments/environment';\r\nimport { LoadEntradas } from '../interfaces/load-entradas.interface';\r\nimport { Entradas } from '../models/entradas.model';\r\n\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class EntradasService {\r\n\r\n  constructor(  private http: HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  POST QUERY TURNOS\r\n  ==================================================================== */\r\n  loadMovimientosQuery(query: any){\r\n    return this.http.post<LoadEntradas>(`${base_url}/movimientos/query`, query, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  GET TURNOS\r\n  ==================================================================== */\r\n  loadMovimientos(desde: number = 0, hasta: number = 50){        \r\n    return this.http.get<LoadEntradas>(`${base_url}/movimientos?desde=${desde}&hasta=${hasta}`, this.headers)\r\n                .pipe(\r\n                  map( resp => {\r\n                    return resp;\r\n                  })\r\n                );\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD MOVIMIENTOS DATE\r\n  ==================================================================== */\r\n  loadMovimientosDate(initial: Date, end: Date, tipo: string = 'none'){\r\n    const endpoint = `${base_url}/movimientos/date?initial=${initial}&end=${end}&tipo=${tipo}`  \r\n    return this.http.get<LoadEntradas>(`${endpoint}`, this.headers)\r\n                .pipe(\r\n                  map( resp => {\r\n                    return resp;\r\n                  })\r\n                );\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREATE MOVIMIENTO\r\n  ==================================================================== */\r\n  createMovimiento( formData: any ){\r\n\r\n    return this.http.post<{ movimiento: Entradas, ok: boolean }>(`${base_url}/movimientos`, formData, this.headers);\r\n\r\n  }\r\n\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { environment } from '../../environments/environment';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nconst base_url = environment.base_url;\r\nconst local_url = environment.local_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class FileUploadService {\r\n\r\n  constructor(  private http: HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *   UPDATE IMAGES\r\n  ==================================================================== */\r\n  async updateImage(\r\n    archivo: File,\r\n    type: 'products' | 'logo' | 'user' | 'department' | 'categoria' | 'taller',\r\n    id: string\r\n  ){\r\n\r\n    try {\r\n      \r\n      const url = `${base_url}/uploads/${type}/${id}`;\r\n\r\n      const formData = new FormData();\r\n      formData.append('image', archivo);\r\n\r\n      const resp = await fetch(url, {\r\n        method: 'PUT',\r\n        headers:{\r\n          'x-token': localStorage.getItem('token') || ''\r\n        },\r\n        body: formData\r\n      });\r\n\r\n      const data = await resp.json();\r\n\r\n      if (data.ok) {\r\n        return data.nombreArchivo;\r\n      }else{\r\n        return false;\r\n\r\n      }      \r\n      \r\n    } catch (error) {\r\n      console.log(error);      \r\n      return false;\r\n    }\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   DELETE IMAGES\r\n  ==================================================================== */\r\n  deleteFile(\r\n    img: string, \r\n    id: string,\r\n    type: 'mesa',\r\n    ){\r\n    return this.http.delete<any>(`${base_url}/uploads/delete/${type}/${img}/${id}`, this.headers);\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { delay, map, tap } from 'rxjs/operators';\r\n\r\n// INTERFACES\r\nimport { LoadImpuestos } from '../interfaces/load-impuesto.interface';\r\nimport { Impuesto } from '../models/impuesto.model';\r\n\r\nimport { environment } from '../../environments/environment';\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class ImpuestosService {\r\n\r\n  constructor(  private http:HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREATE IMPUESTOS\r\n  ==================================================================== */\r\n  createImpuesto(formData: any){\r\n    \r\n    return this.http.post<{ok: boolean, tax: Impuesto}>(`${base_url}/tax`, formData, this.headers);\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD IMPUESTOS\r\n  ==================================================================== */\r\n  loadImpuestos(){\r\n    \r\n    return this.http.get<LoadImpuestos>(`${base_url}/tax`, this.headers)\r\n                .pipe(\r\n                  map( resp => {\r\n                      return resp;\r\n                    })\r\n                )\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD IMPUESTO ID\r\n  ==================================================================== */\r\n  loadImpuestoId( impuesto: string ){\r\n\r\n    return this.http.get(`${base_url}/tax/impuesto/${impuesto}`, this.headers)\r\n                .pipe(\r\n                  map( (resp: { ok: boolean, tax: Impuesto}) =>{\r\n                    return resp.tax\r\n                  })\r\n                )\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE IMPUESTO\r\n  ==================================================================== */\r\n  updateImpuesto(formData: any, id: string){\r\n    \r\n    return this.http.put<{ok: boolean, tax: Impuesto}>(`${base_url}/tax/${id}`, formData, this.headers);\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE ESTATUS IMPUESTO\r\n  ==================================================================== */\r\n  statusUpdateImpuestos(id: string){\r\n    \r\n    return this.http.delete<{ok: boolean, tax: Impuesto}>(`${base_url}/tax/${id}`, this.headers)\r\n                .pipe(\r\n                  map( (resp: {ok: boolean, tax: Impuesto}) => { \r\n                    return resp.tax \r\n                  })\r\n                );\r\n\r\n  }\r\n\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { delay, map, tap } from 'rxjs/operators'\r\n\r\n// INTERFACES\r\nimport { LoadInvoice, ListInvoice, ListCreditoCliente } from '../interfaces/invoice.interface';\r\n\r\nimport { environment } from '../../environments/environment';\r\n\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class InvoiceService {\r\n\r\n  constructor(private http: HttpClient) { }\r\n  \r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREATE INVOICE\r\n  ==================================================================== */\r\n  createInvoice(formData:any, turno: string){    \r\n    return this.http.post(`${ base_url }/invoice/${turno}`, formData, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   UPDATE INVOICE\r\n  ==================================================================== */\r\n  updateInvoice(formData:any, id: string, abono:boolean = false){    \r\n    return this.http.put(`${ base_url }/invoice/pago/${id}?abono=${abono}`, formData, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   UPDATE INVOICE\r\n  ==================================================================== */\r\n  updateProdutInvoice(factura: string, id: string, qty: number){    \r\n    return this.http.put(`${ base_url }/invoice/${factura}/product/${id}/qty/${qty}`, '', this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   LOAD INVOICE DATE\r\n  ==================================================================== */\r\n  loadInvoicesDate(initial: Date, end: Date, user: string = 'none', status:boolean, credito:boolean = false){\r\n    const endpoint = `${base_url}/invoice/fecha?initial=${initial}&end=${end}&user=${user}&status=${status}&credito=${credito}`  \r\n    return this.http.get<ListInvoice>(`${endpoint}`, this.headers)\r\n                .pipe(\r\n                  map( resp => {\r\n                    return resp;\r\n                  })\r\n                );\r\n  }\r\n\r\n  /** ================================================================\r\n   *   LOAD INVOICE DATE\r\n  ==================================================================== */\r\n  loadInvoicesVencidas(fecha: any){\r\n    const endpoint = `${base_url}/invoice/vencidas/${fecha}`\r\n    return this.http.get<ListInvoice>(`${endpoint}`, this.headers)\r\n                .pipe(\r\n                  map( resp => {\r\n                    return resp;\r\n                  })\r\n                );\r\n  }\r\n\r\n  /** ================================================================\r\n   *   LOAD INVOICE\r\n  ==================================================================== */\r\n  loadInvoices( desde: number = 0 ){\r\n    return this.http.get<ListInvoice>(`${ base_url }/invoice?desde=${ desde }`, this.headers)\r\n                    .pipe(\r\n                      delay(500),\r\n                      map( resp => {\r\n                        return resp;\r\n                      })\r\n                    );\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   LOAD INVOICE CREDITO\r\n  ==================================================================== */\r\n  loadInvoicesCredito( desde: number = 0 ){\r\n    return this.http.get<ListInvoice>(`${ base_url }/invoice/credito?desde=${ desde }`, this.headers)\r\n                    .pipe(\r\n                      delay(500),\r\n                      map( resp => {\r\n                        return resp;\r\n                      })\r\n                    );\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   LOAD INVOICE ID\r\n  ==================================================================== */\r\n  loadInvoiceId( id: string ){\r\n    return this.http.get<{ok: boolean, invoice: LoadInvoice}>(`${base_url}/invoice/${id}`, this.headers);\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   LOAD INVOICE CREDIT CLIENT\r\n  ==================================================================== */\r\n  loadInvoiceCreditClient( client: string, credito:boolean ){\r\n    return this.http.get(`${base_url}/invoice/${client}/${credito}`, this.headers)\r\n                    .pipe(\r\n                      map( (resp: {ok: boolean, invoice: LoadInvoice[]} ) => resp.invoice)\r\n                    );\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   LOAD INVOICE CREDIT CLIENT\r\n  ==================================================================== */\r\n  loadInvoiceCreditCajeroMesa( mesa: string ){\r\n    return this.http.get<ListInvoice>(`${base_url}/invoice/vendedor/mesa/${mesa}`, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   LOAD INVOICE TURNS\r\n  ==================================================================== */\r\n  loadInvoiceCierre( endPoint: string ){\r\n    return this.http.get<ListInvoice>(`${base_url}/invoice/cierre${endPoint}`, this.headers)\r\n                    .pipe(\r\n                      map( resp => {\r\n                        return resp;\r\n                      })\r\n                    );\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   RETURN INVOICE ID\r\n  ==================================================================== */\r\n  returnInvoice(id: string){\r\n    return this.http.delete(`${base_url}/invoice/${id}`, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   POST QUERY INVOICE\r\n  ==================================================================== */\r\n  postQueryInvoice(query: any){\r\n    return this.http.post<ListInvoice>(`${base_url}/invoice/search/query`, query,this.headers);\r\n  }\r\n\r\n\r\n  /** ================================================================\r\n   *   DELETE PRODUCT INVOICE\r\n  ==================================================================== */\r\n  deleteProductInvoice(factura: string, product: string){\r\n\r\n    return this.http.delete(`${base_url}/invoice/${factura}/product/${product}`, this.headers);\r\n\r\n  }\r\n\r\n\r\n  // FIN CLASE\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { delay, map, tap } from 'rxjs/operators';\r\n\r\n// INTERFACES\r\nimport { LoadLogProducts } from '../interfaces/load-log-products.interface';\r\n\r\nimport { environment } from '../../environments/environment';\r\nimport { LogProductsModel } from '../models/log-products';\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class LogProductsService {\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD LOGS PRODUCTS QUERY\r\n  ==================================================================== */\r\n  loadLogProductsQuery(query: any){\r\n    return this.http.post<LoadLogProducts>(`${base_url}/log/products/query`, query, this.headers)\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD LOGS PRODUCTS\r\n  ==================================================================== */\r\n  loadLogP(desde:number, limite){\r\n    \r\n    return this.http.get<LoadLogProducts>(`${base_url}/log/products?desde=${desde}&limite=${limite}`, this.headers)\r\n                .pipe(\r\n                  map( resp => {\r\n                      return resp;\r\n                    })\r\n                )\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD LOGS PRODUCTS DATE\r\n  ==================================================================== */\r\n  loadDateLogs(initial: Date, end: Date, query: string){\r\n    return this.http.get<{ products: LogProductsModel[], ok: boolean }>(`${base_url}/log/products/query/date?initial=${initial}&end=${end}&query=${query}`, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD LOGS PRODUCTS DATE\r\n  ==================================================================== */\r\n  loadOneProductLogs(initial: Date = new Date , end: Date = new Date, code: string, fecha: string, desde : number = 0, limite: number = 10){\r\n    return this.http.get<{ products: LogProductsModel[], ok: boolean, total: number }>(`${base_url}/log/products/product/${code}/date?initial=${initial}&end=${end}&fecha=${fecha}&desde=${desde}&limite=${limite}`, this.headers);\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { delay, map, tap } from 'rxjs/operators'\r\n\r\nimport { environment } from '../../environments/environment';\r\nconst base_url = environment.base_url;\r\n\r\n// MODELS\r\nimport { Mesa } from '../models/mesas.model';\r\n\r\n// INTERFACES\r\nimport { LoadMesas, LoadMesaId } from '../interfaces/load-mesas.interface';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class MesasService {\r\n\r\n  constructor(  private http: HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD PISOS QUERY\r\n  ==================================================================== */\r\n  loadMesasQuery(query: any){    \r\n    return this.http.post<LoadMesas>(`${base_url}/mesas/query`, query, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREATE MESA\r\n  ==================================================================== */\r\n  createMesa(formData: Mesa){\r\n\r\n    return this.http.post(`${base_url}/mesas`, formData, this.headers);\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   LOAD MESAS\r\n  ==================================================================== */\r\n  loadMesas(desde: number = 0){\r\n    const endPoint = `/mesas?desde=${desde}`;\r\n    return this.http.get<LoadMesas>(`${base_url}${endPoint}`, this.headers)\r\n                .pipe(\r\n                  delay(500),\r\n                  map( resp => { return resp; })\r\n                );\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   LOAD MESAS COMANDA\r\n  ==================================================================== */\r\n  loadMesasComanda(){\r\n    const endPoint = `/mesas/comandas/`;\r\n    return this.http.get<LoadMesas>(`${base_url}${endPoint}`, this.headers)\r\n                .pipe(\r\n                  delay(500),\r\n                  map( resp => { return resp; })\r\n                );\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   LOAD MESA ID\r\n  ==================================================================== */\r\n  loadMesaId(id: string){\r\n\r\n    return this.http.get(`${base_url}/mesas/${id}`, this.headers)\r\n                .pipe(\r\n                  map( (resp: { ok: boolean, mesa: any  }) => \r\n                  { return resp.mesa; } )\r\n                );\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   UPDATE MESA ID\r\n  ==================================================================== */\r\n  updateMesa(data: any, id: string){\r\n    return this.http.put(`${base_url}/mesas/${id}`, data, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   UPDATE MESA ID\r\n  ==================================================================== */\r\n  updateNotaMesa(data: any, id: string, add: boolean = true){\r\n    return this.http.put(`${base_url}/mesas/notas/${id}?add=${add}`, data, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   UPDATE MESA ID\r\n  ==================================================================== */\r\n  updatePedidoMesa(id: string, confirmar: boolean){\r\n    return this.http.put(`${base_url}/mesas/mesa/${id}/menu/${confirmar}`, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   DELETE CLIENT\r\n  ==================================================================== */\r\n  deleteClientMesa(mesa: string, cliente: string){\r\n    return this.http.delete<{ok: boolean, mesa: Mesa}>(`${base_url}/mesas/${mesa}/cliente/${cliente}`, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   DELETE INGREDIENTE\r\n  ==================================================================== */\r\n  deleteIngrediente(mesa: string, comanda: string, ingrediente: string){\r\n\r\n    return this.http.delete(`${base_url}/mesas/${mesa}/comanda/${comanda}/ingrediente/${ingrediente}`, this.headers);\r\n\r\n  }\r\n\r\n\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\n\r\nimport { Parqueo } from '../models/parqueo.model';\r\n\r\nimport { environment } from '../../environments/environment';\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ParqueoService {\r\n\r\n  constructor(  private http:HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREATE PARQUEO\r\n  ==================================================================== */\r\n  createParqueo(formData: any){    \r\n    return this.http.post<{ok: boolean, parqueo: Parqueo}>(`${base_url}/parqueos`, formData, this.headers);\r\n  }\r\n  \r\n  /** ================================================================\r\n   *  LOAD PARQUEO\r\n  ==================================================================== */\r\n  loadParqueos(query: any){    \r\n    return this.http.post<{ok: boolean, total: number, parqueos: Parqueo[]}>(`${base_url}/parqueos/query`, query, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE PARQUEO\r\n  ==================================================================== */\r\n  updateParqueo(formData: any, id: string){    \r\n    return this.http.put<{ok: boolean, parqueo: Parqueo}>(`${base_url}/parqueos/${id}`, formData, this.headers);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { delay, map, tap } from 'rxjs/operators'\r\n\r\n// MODELS\r\nimport { Pedido } from '../models/pedido.models';\r\n\r\n\r\n// INTERFACES\r\nimport { LoadPedido } from '../interfaces/load-pedido.interface';\r\n\r\nimport { environment } from '../../environments/environment';\r\n\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PedidosService {\r\n\r\n  public pedido: Pedido;\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREATE PEDIDOS\r\n  ==================================================================== */\r\n  createPedidos(formData : any, cid: string, mesaID: string){\r\n\r\n    return this.http.post(`${base_url}/pedidos?local=true&cid=${cid}&mesa=true&mid=${mesaID}`, formData, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREATE PEDIDOS LOCAL\r\n  ==================================================================== */\r\n  createPedidosLocal(formData : any){\r\n    return this.http.post<{ok: boolean, pedido: Pedido}>(`${base_url}/pedidos/local`, formData, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD PEDIDOS\r\n  ==================================================================== */\r\n  loadPedidos(query: string = ''){\r\n\r\n    return this.http.get<LoadPedido>(`${base_url}/pedidos?${query}`, this.headers)\r\n        .pipe(\r\n          map( resp =>{\r\n            return resp;\r\n          })\r\n        );\r\n        \r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD PEDIDOS /one/:id\r\n  ==================================================================== */\r\n  loadPedidoOne(id: string){\r\n\r\n    return this.http.get(`${base_url}/pedidos/one/${id}`, this.headers)\r\n        .pipe(\r\n          map( (resp: {ok: boolean, pedido: Pedido}) =>{\r\n            return resp;\r\n          })\r\n        );\r\n        \r\n  }\r\n\r\n  /** ================================================================\r\n   *   ACTUALIZAR PEDIDO\r\n  ==================================================================== */\r\n  actualizarEstatusPedido(formData:any, _id:string){\r\n    return this.http.put(`${base_url}/pedidos/${_id}`, formData, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   DELETE PEDIDO\r\n  ==================================================================== */\r\n  deletePedidos( _id: string){\r\n    return this.http.delete(`${base_url}/pedidos/${_id}`, this.headers);\r\n  }\r\n\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\n\r\nimport { environment } from '../../environments/environment';\r\nimport { Piso } from '../models/pisos.model';\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PisosService {\r\n\r\n  constructor(  private http: HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD PISOS QUERY\r\n  ==================================================================== */\r\n  loadPisos(query: any){    \r\n    return this.http.post<{ok: boolean, pisos: Piso[], total: number}>(`${base_url}/pisos/query`, query, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREATE PISOS\r\n  ==================================================================== */\r\n  createPiso( formData: any ){    \r\n    return this.http.post<{ok: boolean, piso: Piso}>(`${base_url}/pisos`, formData, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE PISOS\r\n  ==================================================================== */\r\n  updatePiso(formData: any, id: string){    \r\n    return this.http.put<{ok: boolean, piso: Piso}>(`${base_url}/pisos/${id}`, formData, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  DELETE PISOS\r\n  ==================================================================== */\r\n  deletePiso(id: string){    \r\n    return this.http.delete<{ok: boolean, msg: string}>(`${base_url}/pisos/${id}`, this.headers);\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Prestamo } from '../models/prestamos.model';\r\n\r\nimport { environment } from '../../environments/environment';\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PrestamosService {\r\n\r\n  constructor(  private http: HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD PRESTAMOS\r\n  ==================================================================== */\r\n  loadPrestamos(desde: number, hasta: number){    \r\n    return this.http.get<{ok: boolean, prestamos: Prestamo[], total: number }>(`${base_url}/prestamos?desde=${desde}&hasta=${hasta}`, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREATE PRESTAMOS\r\n  ==================================================================== */\r\n  createPrestamo(formData: any){\r\n    return this.http.post<{ok: boolean, prestamo: Prestamo}>(`${base_url}/prestamos`, formData, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD PRESTAMO ID\r\n  ==================================================================== */\r\n  loadPrestamoID(id: string){\r\n    return this.http.get<{ok: boolean, prestamo: Prestamo}>(`${base_url}/prestamos/${id}`, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD PRESTAMO ID\r\n  ==================================================================== */\r\n  loadPrestamosDates(fecha: number){\r\n    return this.http.get<{ok: boolean, prestamos: Prestamo[], total: number}>(`${base_url}/prestamos/date/${fecha}`, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD PRESTAMOS CLIENT\r\n  ==================================================================== */\r\n  loadPrestamoClient(client: string){\r\n    return this.http.get<{ok: boolean, prestamos: Prestamo[], total: number}>(`${base_url}/prestamos/client/${client}`, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE PRESTAMO\r\n  ==================================================================== */\r\n  updatePrestamo(formData: any, id: string){\r\n    return this.http.put<{ok: boolean, prestamo: Prestamo}>(`${base_url}/prestamos/${id}`, formData, this.headers);\r\n  }\r\n\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { delay, map, tap } from 'rxjs/operators'\r\n\r\n// INTERFACES\r\nimport { LoadProduct, LoadCost } from '../interfaces/load-products.interface';\r\n\r\n// MODELS\r\nimport { Product } from '../models/product.model';\r\n\r\nimport { environment } from '../../environments/environment';\r\n\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ProductService {\r\n\r\n  public product: Product;\r\n\r\n  constructor( private http: HttpClient ) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREATE PRODUCT\r\n  ==================================================================== */\r\n  createProduct(formData:any){\r\n    \r\n    return this.http.post(`${base_url}/products`, formData, this.headers)\r\n        .pipe(\r\n          delay(200),\r\n          map( resp => {\r\n            return resp;\r\n          })\r\n        );\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREATE PRODUCT\r\n  ==================================================================== */\r\n  searchQueryProducts(formData:any){    \r\n    return this.http.post<{ok: boolean, products: Product[], total: number}>(`${base_url}/products/search/query`, formData);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREATE PRODUCT\r\n  ==================================================================== */\r\n  createProductExcel(formData:any){    \r\n    return this.http.post<{ok: boolean, total: number}>(`${base_url}/products/create/excel`, formData, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR PRODUCTOS\r\n  ==================================================================== */\r\n  cargarProductos(endPoitn: string){\r\n    const endPoint = `/products${endPoitn}`;\r\n    return this.http.get<LoadProduct>(`${base_url}${endPoint}`, this.headers)\r\n            .pipe(\r\n              map( resp => {\r\n                return resp;\r\n              })\r\n            );\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR COSTS PRODUCTOS\r\n  ==================================================================== */\r\n  cargarProductoCost(){\r\n    const endPoint = `/products/cost/`;\r\n    return this.http.get<LoadCost>(`${base_url}${endPoint}`, this.headers)\r\n            .pipe(\r\n              map( resp => {\r\n                return resp;\r\n              })\r\n            );\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR PRODUCTOS ELIMINADOS\r\n  ==================================================================== */\r\n  cargarProductosEliminados(){\r\n    const endPoint = `/products/eliminados`;\r\n    return this.http.get<LoadProduct>(`${base_url}${endPoint}`, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR PRODUCTOS POR ID\r\n  ==================================================================== */\r\n  cargarProductoId( id: string){\r\n    const endPoint = `/products/${id}`;\r\n    return this.http.get(`${base_url}${endPoint}`, this.headers)\r\n            .pipe(\r\n              map( (resp: {ok: boolean, product: Product} ) => resp.product)\r\n            );\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR PRODUCTOS POR CODIGO\r\n  ==================================================================== */\r\n  cargarProductoCodigo( code: string ){\r\n    const endPoint = `/products/code/${code}`;\r\n    return this.http.get(`${base_url}${endPoint}`, this.headers)\r\n              .pipe(\r\n                map( (resp: {ok: boolean, product: Product} ) => resp.product)\r\n              );\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR PRODUCTOS POR DEPARTAMENTO\r\n  ==================================================================== */\r\n  cargarProductoDepartamento( department: string ){\r\n    const endPoint = `/products/department/${department}`;\r\n    return this.http.get<LoadProduct>(`${base_url}${endPoint}`, this.headers)\r\n                    .pipe(\r\n                      map( resp => {\r\n                        return resp;\r\n                      })\r\n                    );\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ACTUALIZAR PRODUCTO\r\n  ==================================================================== */\r\n  actualizarProducto(formData:any, _id:string, inventario: boolean = false){\r\n    return this.http.put(`${base_url}/products/${_id}?inventario=${inventario}`, formData, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ACTUALIZAR PRODUCTO EXCEL\r\n  ==================================================================== */\r\n  actualizarProductoExcel(formData:any){\r\n    return this.http.put<{ok: boolean, total: number}>(`${base_url}/products/excel/update`, formData, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   REPAIR INVENTARIO\r\n  ==================================================================== */\r\n  repararInventario(){\r\n    return this.http.put(`${base_url}/products/repair/inventario`, '',this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   RESET INVENTARIO\r\n  ==================================================================== */\r\n  resetInventario(){\r\n    return this.http.put(`${base_url}/products/reset/inventario`, '',this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   IVA A TODOS\r\n  ==================================================================== */\r\n  ivaAllProducts(formData:any){\r\n    return this.http.put(`${base_url}/products/iva/all`, formData,this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   AJUSTAR INVENTARIO\r\n  ==================================================================== */\r\n  ajustarInventario(id: string, data: any){\r\n    return this.http.put(`${base_url}/products/ajustar/inventario/${id}`, data,this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   DELETE PRODUCTO\r\n  ==================================================================== */\r\n  deleteProduct( _id: string){\r\n    return this.http.delete(`${base_url}/products/${_id}`, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ACTUALIZAR PRODUCTO\r\n  ==================================================================== */\r\n  productExcel(){\r\n    const endPoint = `/products/excel/`;\r\n    return this.http.get<LoadProduct>(`${base_url}${endPoint}`)\r\n                    .pipe(\r\n                      map( resp => {\r\n                        return resp;\r\n                      })\r\n                    );\r\n  }\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { delay, map, tap } from 'rxjs/operators'\r\n\r\n\r\n// MODEL\r\nimport { Proveedor } from '../models/proveedor.model';\r\nimport { LoadProveedores } from '../interfaces/load-proveedor.interface';\r\n\r\nimport { environment } from '../../environments/environment';\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ProveedoresService {\r\n\r\n  public proveedor: Proveedor\r\n\r\n  constructor(  private http: HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CARGAR PROVEEDORES\r\n  ==================================================================== */\r\n  cargarProveedores(desde: number = 0){\r\n    \r\n    const endPoint = `/proveedores?desde=${desde}`;\r\n    return this.http.get<LoadProveedores>(`${base_url}${endPoint}`, this.headers)\r\n            .pipe(\r\n              delay(500),\r\n              map( resp => {\r\n                return resp;\r\n              })\r\n            );\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD PROVEEDORES QUERY\r\n  ==================================================================== */\r\n  loadProveedores(query: any){    \r\n    return this.http.post<{ok: boolean, proveedores: Proveedor[], total: number}>(`${base_url}/proveedores/query`, query, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREATE PROVEEDORES\r\n  ==================================================================== */\r\n  createProveedor( formData: any ){    \r\n    return this.http.post<{ok: boolean, proveedor: Proveedor}>(`${base_url}/proveedores`, formData, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE PROVEEDOR\r\n  ==================================================================== */\r\n  updateProveedor(formData: any, id: string){    \r\n    return this.http.put<{ok: boolean, proveedor: Proveedor}>(`${base_url}/proveedores/${id}`, formData, this.headers);\r\n  }\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { environment } from '../../environments/environment';\r\nimport { delay, map } from 'rxjs/operators';\r\n\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SearchService {\r\n\r\n  constructor( private http: HttpClient ) { }\r\n  \r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *   SEARCH\r\n  ==================================================================== */\r\n  search(\r\n      tipo: 'users'|'clients' |'departments'|'products' |'caja' |'mesa' |'turno'|'log' | 'categorias' | 'invoice' | 'pedidos' | 'car' | 'proveedores' | 'vehiculo',\r\n      termino: string,\r\n      parametros: boolean = false,\r\n      query: string = ''\r\n    ){\r\n      let endPoint = `/search/${tipo}/${termino}?${query}`;\r\n\r\n      return this.http.get<any[]>(`${base_url}${endPoint}`, this.headers)\r\n            .pipe(\r\n              map( (resp: any) => {              \r\n                return resp;\r\n              })\r\n            );\r\n  }\r\n\r\n\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Traslado } from '../models/traslados.model';\r\n\r\nimport { environment } from '../../environments/environment';\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TrasladosService {\r\n\r\n  constructor(  private http:HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREATE TRASLADO\r\n  ==================================================================== */\r\n  createTraslado(formData: any){    \r\n    return this.http.post<{ok: boolean, traslado: Traslado}>(`${base_url}/traslados`, formData, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  ENVIAR TRASLADO\r\n  ==================================================================== */\r\n  sendTraslado(formData: any, bodega: any){    \r\n    return this.http.post<{ok: boolean, traslado: Traslado}>(`${bodega}/traslados`, formData, this.headers);\r\n  }\r\n  \r\n  /** ================================================================\r\n   *  LOAD TRASLADO\r\n  ==================================================================== */\r\n  loadTraslados(query: any){    \r\n    return this.http.post<{ok: boolean, total: number, traslados: Traslado[]}>(`${base_url}/traslados/query`, query, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD TRASLADO\r\n  ==================================================================== */\r\n  loadTrasladosBodega(query: any, bodega: string){    \r\n    return this.http.post<{ok: boolean, total: number, traslados: Traslado[]}>(`${bodega}/traslados/query`, query, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD TRASLADO\r\n  ==================================================================== */\r\n  loadTrasladoID(traslado: any){    \r\n    return this.http.get<{ok: boolean, traslado: Traslado}>(`${base_url}/traslados/one/${traslado}`, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE TRASLADO\r\n  ==================================================================== */\r\n  updateTraslado(formData: any, id: string){    \r\n    return this.http.put<{ok: boolean, traslado: Traslado}>(`${base_url}/traslados/${id}`, formData, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE TRASLADO\r\n  ==================================================================== */\r\n  updateTrasladoBodega(formData: any, id: string, bodega: any){    \r\n    return this.http.put<{ok: boolean, traslado: Traslado}>(`${bodega}/traslados/${id}`, formData, this.headers);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { delay, map, tap } from 'rxjs/operators'\r\n\r\n// INTERFACE\r\nimport { LoadTurno, LoadsTurnos } from '../interfaces/load-turno.interface';\r\n\r\nimport { environment } from '../../environments/environment';\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TurnoService {\r\n\r\n  constructor(  private http: HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREATE NEW TURNO\r\n  ==================================================================== */\r\n  createCaja(formData: any){\r\n    \r\n    return this.http.post(`${base_url}/turno`, formData, this.headers);\r\n\r\n  }\r\n  /** ================================================================\r\n   *  GET TURNOS\r\n  ==================================================================== */\r\n  loadTurno(desde: number = 0){        \r\n    return this.http.get<LoadsTurnos>(`${base_url}/turno?desde=${desde}`, this.headers)\r\n                .pipe(\r\n                  map( resp => {\r\n                    return resp;\r\n                  })\r\n                );\r\n  }\r\n\r\n  /** ================================================================\r\n   *  GET TURNO DATE\r\n  ==================================================================== */\r\n  loadTurnoDate(initial: Date, end: Date, user: string = 'none'){\r\n    const endpoint = `${base_url}/turno/date?initial=${initial}&end=${end}&user=${user}`  \r\n    return this.http.get<LoadsTurnos>(`${endpoint}`, this.headers)\r\n                .pipe(\r\n                  map( resp => {\r\n                    return resp;\r\n                  })\r\n                );\r\n  }\r\n\r\n  /** ================================================================\r\n   *  GET TURNO ID\r\n  ==================================================================== */\r\n  getTurnoId(turno: string){\r\n        \r\n    return this.http.get(`${base_url}/turno/${turno}`, this.headers)\r\n                .pipe(\r\n                  map( (resp: {ok:boolean, turno: LoadTurno}) => {\r\n                    return resp.turno;\r\n                  })\r\n                );\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE TURNO\r\n  ==================================================================== */\r\n  updateTurno(body: any, _id: string){\r\n\r\n    return this.http.put(`${base_url}/turno/${_id}`, body, this.headers);\r\n\r\n  }\r\n\r\n\r\n  // FIN DE LA CLASE\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Typeparq } from '../models/typearq.model';\r\n\r\nimport { environment } from '../../environments/environment';\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TypeparqService {\r\n\r\n  constructor(  private http:HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  CREATE TYPEPARQ\r\n  ==================================================================== */\r\n  createTypeparq(formData: any){    \r\n    return this.http.post<{ok: boolean, typeparq: Typeparq}>(`${base_url}/typeparq`, formData, this.headers);\r\n  }\r\n  \r\n  /** ================================================================\r\n   *  LOAD TYPEPARQ\r\n  ==================================================================== */\r\n  loadTypeparqs(query: any){    \r\n    return this.http.post<{ok: boolean, total: number, typeparqs: Typeparq[]}>(`${base_url}/typeparq/query`, query, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE ALQUILER\r\n  ==================================================================== */\r\n  updateTypeparq(formData: any, id: string){    \r\n    return this.http.put<{ok: boolean, typeparq: Typeparq}>(`${base_url}/typeparq/${id}`, formData, this.headers);\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\n\r\nimport { catchError, map, tap } from 'rxjs/operators'\r\nimport { Observable, of } from 'rxjs';\r\nimport { Router } from '@angular/router';\r\n\r\n// SERVICES\r\nimport { TurnoService } from './turno.service';\r\n\r\n// INTERFACE\r\nimport { LoginForm } from '../interfaces/login-form.interface';\r\nimport { LoadUsers } from '../interfaces/load-users.interface';\r\nimport { LoadTurno } from '../interfaces/load-turno.interface';\r\n\r\n// ENVIRONMENT\r\nimport { environment } from '../../environments/environment';\r\n\r\n// MODELS\r\nimport { User } from '../models/user.model';\r\nimport Swal from 'sweetalert2';\r\nimport { EmpresaService } from './empresa.service';\r\n\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UserService {\r\n\r\n  public user: User;\r\n\r\n  constructor( private http: HttpClient,\r\n                private router: Router,\r\n                private turnoService: TurnoService,\r\n                private empresaService: EmpresaService) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET ROLES\r\n  ==================================================================== */\r\n  get role(): 'ADMIN' | 'STAFF' | 'CASHIER' | 'WAITER'  | 'WAITERALL' {\r\n    return this.user.role;\r\n  }\r\n\r\n  /** ================================================================\r\n   *   LOGOUT\r\n  ==================================================================== */\r\n  logout(){\r\n    \r\n    localStorage.removeItem('token');\r\n    this.router.navigateByUrl('/login');\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   VALIDATE TOKEN OR RENEW TOKEN\r\n  ==================================================================== */\r\n  validateToken():Observable<boolean>{\r\n\r\n    this.empresaService.getDatos();\r\n\r\n    const token = localStorage.getItem('token') || '';\r\n    \r\n    return this.http.get(`${base_url}/login/renew`, {\r\n      headers: {\r\n        'x-token': token\r\n      }\r\n    }).pipe(\r\n      tap((resp: any)  => {\r\n        \r\n        const { usuario, name, role, img, uid, status, cerrada, turno, privilegios} = resp.usuario;\r\n\r\n        this.user = new User( usuario, name, '', role, img || 'no-image', uid, status, cerrada, turno, privilegios);        \r\n\r\n        localStorage.setItem('token', resp.token);\r\n\r\n      }),\r\n      map( resp => true ),\r\n      catchError( error => of(false) )\r\n    );\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREATE USER\r\n  ==================================================================== */\r\n  createUser( formData: any ){\r\n      \r\n    return this.http.post(`${base_url}/users`, formData, this.headers);\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   UPDATE USER\r\n  ==================================================================== */\r\n  updateUser(formData: any, id: string){\r\n\r\n    return this.http.put(`${base_url}/users/${id}`, formData, this.headers);\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   ACTIVE OR DESACTIVE USER\r\n  ==================================================================== */\r\n  statusUser(id: string){\r\n\r\n    return this.http.delete(`${base_url}/users/${id}`, this.headers)\r\n                .pipe(\r\n                  map((resp: {ok: boolean, user: User}) => { \r\n                    return resp.user\r\n                  })\r\n                );\r\n\r\n  }\r\n\r\n  /** ================================================================\r\n   *   LOAD USERS\r\n  ==================================================================== */\r\n  loadUsers(){\r\n    return this.http.get<LoadUsers>(`${base_url}/users`, this.headers)\r\n                .pipe(\r\n                  map( resp => {\r\n                      return resp;\r\n                    })\r\n                )\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOGIN\r\n  ==================================================================== */\r\n  login( formData: LoginForm ){\r\n    \r\n    return this.http.post<{ok: boolean, token: string}>(`${base_url}/login`, formData);\r\n  }\r\n\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\n\r\n// MODELS\r\nimport { Vehiculo } from '../models/vehiculos.model';\r\n\r\nimport { environment } from '../../environments/environment';\r\nconst base_url = environment.base_url;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VehiculosService {\r\n\r\n  constructor(  private http: HttpClient) { }\r\n\r\n  /** ================================================================\r\n   *   GET TOKEN\r\n  ==================================================================== */\r\n  get token():string {\r\n    return localStorage.getItem('token') || '';\r\n  }\r\n\r\n  /** ================================================================\r\n   *   GET HEADERS\r\n  ==================================================================== */\r\n  get headers() {\r\n    return {\r\n      headers: {\r\n        'x-token': this.token\r\n      }\r\n    }\r\n  }\r\n\r\n  /** ================================================================\r\n   *  LOAD VEHICULOS QUERY\r\n  ==================================================================== */\r\n  loadVehiculos(query: any){    \r\n    return this.http.post<{ok: boolean, vehiculos: Vehiculo[], total: number}>(`${base_url}/vehiculos/query`, query, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *   CREATE VEHICULOS\r\n  ==================================================================== */\r\n  createVehiculo( formData: any ){    \r\n    return this.http.post<{ok: boolean, vehiculo: Vehiculo}>(`${base_url}/vehiculos`, formData, this.headers);\r\n  }\r\n\r\n  /** ================================================================\r\n   *  UPDATE VEHICULO\r\n  ==================================================================== */\r\n  updateVehiculo(formData: any, id: string){    \r\n    return this.http.put<{ok: boolean, vehiculo: Vehiculo}>(`${base_url}/vehiculos/${id}`, formData, this.headers);\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-footer',\r\n  templateUrl: './footer.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class FooterComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<p>footer works!</p>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n// MODELS\r\nimport { User } from '../../models/user.model';\r\nimport { Datos } from '../../models/empresa.model';\r\n\r\n// SERVICES\r\nimport { UserService } from '../../services/user.service';\r\nimport { EmpresaService } from '../../services/empresa.service';\r\n\r\nimport { environment } from '../../../environments/environment';\r\nimport { Meta, Title } from '@angular/platform-browser';\r\n\r\n\r\n@Component({\r\n  selector: 'app-header',\r\n  templateUrl: './header.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class HeaderComponent implements OnInit  {\r\n\r\n  public empresaT = environment.empresa; \r\n\r\n  public user: User;\r\n  public empresa: Datos;\r\n\r\n  constructor(  private userService: UserService,\r\n                private empresaService: EmpresaService,\r\n                private titleService: Title,\r\n                private metaService: Meta) { \r\n    \r\n    this.user = userService.user;   \r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.getDatos();\r\n\r\n    // Configuración SEO\r\n    this.titleService.setTitle(this.empresaT.name);\r\n\r\n    // OpenGraph / Facebook\r\n    this.metaService.updateTag({ \r\n      property: 'og:title', \r\n      content: this.empresaT.name \r\n    });\r\n    \r\n    this.metaService.updateTag({ \r\n      property: 'og:url', \r\n      content: window.location.href \r\n    });\r\n    \r\n  }\r\n\r\n  public vencido: boolean = false;\r\n\r\n  getDatos(){\r\n\r\n    this.empresaService.getDatos()\r\n        .subscribe( resp => {\r\n\r\n          this.empresa = resp;\r\n\r\n          if (this.empresa.nube) {\r\n            if (new Date(this.empresa.vence).getTime() < new Date().getTime()) {\r\n              this.vencido = true;              \r\n            }\r\n          }\r\n          \r\n\r\n        });   \r\n\r\n  }\r\n\r\n  logout(){\r\n    this.userService.logout();\r\n  }\r\n\r\n  \r\n\r\n  \r\n\r\n}\r\n","<div *ngIf=\"vencido\" class=\"alert alert-warning d-flex align-items-center mb-0\" role=\"alert\">\r\n    <div>\r\n        <i class=\"fw-bold bi bi-exclamation-triangle-fill\"></i> <span class=\"fw-bold ms-1\"> Atención: </span> {{ empresa.msgv || 'Recuerda hacer el pago de la nube antes del 5, para evitar que se desactive!. Si ya realizaste el pago, envia el comprobante, gracias por preferirnos!' }}\r\n    </div>\r\n</div>\r\n<header class=\"bg-dark border-bottom\">\r\n\r\n    <nav class=\"navbar navbar-expand-lg bg-body-tertiary rounded\" aria-label=\"Eleventh navbar example\">\r\n        <div class=\"container-fluid\">\r\n            <a class=\"navbar-brand text-white text-uppercase\" routerLink=\"./\"> {{ empresaT.name || 'SIMIDS' }} </a>\r\n            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarsExample09\" aria-controls=\"navbarsExample09\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                <span class=\"bi bi-list text-white\"></span>\r\n            </button>\r\n\r\n            <div class=\"navbar-collapse collapse\" id=\"navbarsExample09\" style=\"\">\r\n                <ul class=\"navbar-nav me-auto mb-2 mb-lg-0\">\r\n                    <li class=\"nav-item\">\r\n                        <a class=\"nav-link text-white-50\" routerLinkActive=\"activeH\" aria-current=\"page\" routerLink=\"./ventas\"> Ventas</a>\r\n                    </li>\r\n                    <li class=\"nav-item\">\r\n                        <a class=\"nav-link text-white-50\" routerLinkActive=\"activeH\" routerLink=\"./clientes\"> Clientes</a>\r\n                    </li>\r\n                    <li class=\"nav-item\">\r\n                        <a class=\"nav-link text-white-50\" routerLinkActive=\"activeH\" routerLink=\"./facturas\"> Facturas</a>\r\n                    </li>\r\n                    <li class=\"nav-item\" *ngIf=\"empresa?.comandas\">\r\n                        <a class=\"nav-link text-white-50\" routerLinkActive=\"activeH\" routerLink=\"./comandas\"> Comandas</a>\r\n                    </li>\r\n                    <li class=\"nav-item\" *ngIf=\"empresa?.alquileres\">\r\n                        <a class=\"nav-link text-white-50\" routerLinkActive=\"activeH\" routerLink=\"./alquileres\"> Alquileres</a>\r\n                    </li>\r\n                    <li class=\"nav-item\" *ngIf=\"empresa?.taller\">\r\n                        <a class=\"nav-link text-white-50\" routerLinkActive=\"activeH\" routerLink=\"./vehiculos\"> Vehiculos</a>\r\n                    </li>\r\n                    <li class=\"nav-item\" *ngIf=\"empresa?.parqueadero\">\r\n                        <a class=\"nav-link text-white-50\" routerLinkActive=\"activeH\" routerLink=\"./configuracion/parqueadero\"> Parqueadero</a>\r\n                    </li>\r\n                    <li class=\"nav-item\">\r\n                        <a class=\"nav-link text-white-50\" routerLinkActive=\"activeH\" routerLink=\"./configuracion/compras\"> Compras</a>\r\n                    </li>\r\n                    <li class=\"nav-item\" *ngIf=\"empresa?.domi\">\r\n                        <a class=\"nav-link text-white-50\" routerLinkActive=\"activeH\" routerLink=\"./domicilios\"> Domicilios</a>\r\n                    </li>\r\n                    <li class=\"nav-item\">\r\n                        <a class=\"nav-link text-white-50\" routerLinkActive=\"activeH\" routerLink=\"./productos\"> Productos</a>\r\n                    </li>\r\n                    <li class=\"nav-item\">\r\n                        <a class=\"nav-link text-white-50\" routerLinkActive=\"activeH\" routerLink=\"./calendario\"> Calendario</a>\r\n                    </li>\r\n                    <li class=\"nav-item\">\r\n                        <a class=\"nav-link text-white-50\" routerLinkActive=\"activeH\" routerLink=\"./corte\"> Corte</a>\r\n                    </li>\r\n                    <li class=\"nav-item\">\r\n                        <a class=\"nav-link text-white-50\" routerLinkActive=\"activeH\" routerLink=\"./configuracion\"> Configuracion</a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n\r\n            <a class=\"text-white-50 align-items-center\" href=\"whatsapp://send?text=Hola,+necesito+que+me+ayuden+con+algo!&phone=+{{empresaT.phone}}\" target=\"_blank\"> \r\n                <i class=\"bi bi-whatsapp fs-4\"></i>\r\n            </a>\r\n            <div class=\"dropdown btn-group dropstart\">\r\n                <!-- WHATSAPP -->\r\n                \r\n                <!-- DROWPDOWN -->\r\n                <button class=\"btn text-white\" type=\"button\" id=\"dropdownMenuButton\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n                    <div class=\"avatar shadow\" >\r\n                        <img class=\"avatar-img img-fluid border border-2 border-light\" [src]=\"user.getImage\" >\r\n                    </div>\r\n                </button>\r\n\r\n                <ul class=\"dropdown-menu dropdown-menu-dark bg-dark\" aria-labelledby=\"dropdownMenuButton\">\r\n\r\n                    <h6 class=\"dropdown-header\">\r\n                        <div class=\"avatar avatar-lg me-2\">\r\n                            <img class=\"avatar-img img-fluid border border-2 border-light\" [src]=\"user.getImage\">\r\n                        </div>\r\n                        <div class=\"dropdown-user-details\">\r\n                            <div class=\"dropdown-user-details-name\">{{ user.name }}</div>\r\n                            <small class=\"dropdown-user-details-email text-center\">{{ user.usuario }}</small>\r\n                        </div>\r\n                    </h6>\r\n                    <li>\r\n                        <hr class=\"dropdown-divider\">\r\n                    </li>\r\n                    <li><a class=\"dropdown-item text-white\" routerLink=\"./perfil\">Perfil</a></li>\r\n                    <li><a class=\"dropdown-item cursor text-white\" (click)=\"logout()\">Salir</a></li>\r\n                </ul>\r\n            </div>\r\n\r\n        </div>\r\n    </nav>\r\n\r\n    <!-- <div class=\"px-2\">\r\n        <div class=\"bg-dark clearfix\">\r\n\r\n            <a class=\"navbar-brand float-start text-white \" routerLink=\"./\"> SIMIDS </a>\r\n            <div class=\"dropdown float-end\">\r\n                <button class=\"btn text-white\" type=\"button\" id=\"dropdownMenuButton\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n                    <div class=\"avatar shadow\" >\r\n                        <img class=\"avatar-img img-fluid border border-2 border-light\" [src]=\"user.getImage\" >\r\n                    </div>\r\n                </button>\r\n                <ul class=\"dropdown-menu dropdown-menu-dark bg-dark\" aria-labelledby=\"dropdownMenuButton\">\r\n\r\n                    <h6 class=\"dropdown-header d-flex align-items-center\">\r\n                        <div class=\"avatar avatar-lg me-2\">\r\n                            <img class=\"avatar-img img-fluid border border-2 border-light\" [src]=\"user.getImage\">\r\n                        </div>\r\n                        <div class=\"dropdown-user-details\">\r\n                            <div class=\"dropdown-user-details-name\">{{ user.name }}</div>\r\n                            <small class=\"dropdown-user-details-email text-center\">{{ user.usuario }}</small>\r\n                        </div>\r\n                    </h6>\r\n                    <li>\r\n                        <hr class=\"dropdown-divider\">\r\n                    </li>\r\n                    <li><a class=\"dropdown-item\" routerLink=\"./perfil\">Perfil</a></li>\r\n                    <li><a class=\"dropdown-item cursor\" (click)=\"logout()\">Salir</a></li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <nav class=\"navbar navbar-expand-lg navbar-light bg-light p-0 py-3\" aria-label=\"Eighth navbar example\">\r\n        <div class=\"px-2\">\r\n\r\n            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarsExample07\" aria-controls=\"navbarsExample07\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                <span class=\"navbar-toggler-icon\"></span>\r\n            </button>\r\n\r\n            <div class=\"collapse navbar-collapse\" id=\"navbarsExample07\">\r\n                <ul class=\"navbar-nav me-auto mb-2 mb-lg-0\">\r\n                    <li class=\"nav-item p-1\">\r\n                        <a class=\"nav-link btnW waves-effect waves-grey px-3 mx-1\" routerLinkActive=\"activeBtn\" aria-current=\"page\" routerLink=\"./ventas\"><i class=\"bi-cart2\" style=\"font-size: 1rem\"></i> Ventas</a>\r\n                    </li>\r\n                    <li class=\"nav-item p-1\">\r\n                        <a class=\"nav-link btnW waves-effect waves-grey px-3 mx-1\" routerLinkActive=\"activeBtn\" routerLink=\"./clientes\"><i class=\"bi-people\" style=\"font-size: 1rem\"></i> Clientes</a>\r\n                    </li>\r\n                    <li class=\"nav-item p-1\">\r\n                        <a class=\"nav-link btnW waves-effect waves-grey px-3 mx-1\" routerLinkActive=\"activeBtn\" routerLink=\"./facturas\"><i class=\"bi-receipt\" style=\"font-size: 1rem\"></i> Facturas</a>\r\n                    </li>\r\n                    <li class=\"nav-item p-1\" *ngIf=\"empresa?.comandas\">\r\n                        <a class=\"nav-link btnW waves-effect waves-grey px-3 mx-1\" routerLinkActive=\"activeBtn\" routerLink=\"./comandas\"><i class=\"bi-app\" style=\"font-size: 1rem\"></i> Comandas</a>\r\n                    </li>\r\n                    <li class=\"nav-item p-1\" *ngIf=\"empresa?.alquileres\">\r\n                        <a class=\"nav-link btnW waves-effect waves-grey px-3 mx-1\" routerLinkActive=\"activeBtn\" routerLink=\"./alquileres\"><i class=\"bi-hourglass\" style=\"font-size: 1rem\"></i> Alquileres</a>\r\n                    </li>\r\n                    <li class=\"nav-item p-1\" *ngIf=\"empresa?.parqueadero\">\r\n                        <a class=\"nav-link btnW waves-effect waves-grey px-3 mx-1\" routerLinkActive=\"activeBtn\" routerLink=\"./configuracion/parqueadero\"><i class=\"bi-car-front\" style=\"font-size: 1rem\"></i> Parqueadero</a>\r\n                    </li>\r\n                    <li class=\"nav-item p-1\" *ngIf=\"empresa?.domi\">\r\n                        <a class=\"nav-link btnW waves-effect waves-grey px-3 mx-1\" routerLinkActive=\"activeBtn\" routerLink=\"./domicilios\"><i class=\"bi-geo-alt\" style=\"font-size: 1rem\"></i> Domicilios</a>\r\n                    </li>\r\n                    <li class=\"nav-item p-1\">\r\n                        <a class=\"nav-link btnW waves-effect waves-grey px-3 mx-1\" routerLinkActive=\"activeBtn\" routerLink=\"./productos\"><i class=\"bi-file-spreadsheet\" style=\"font-size: 1rem\"></i> Productos</a>\r\n                    </li>\r\n                    <li class=\"nav-item p-1\">\r\n                        <a class=\"nav-link btnW waves-effect waves-grey px-3 mx-1\" routerLinkActive=\"activeBtn\" routerLink=\"./calendario\"><i class=\"bi-calendar3\" style=\"font-size: 1rem\"></i> Calendario</a>\r\n                    </li>\r\n                    <li class=\"nav-item p-1\">\r\n                        <a class=\"nav-link btnW waves-effect waves-grey px-3 mx-1\" routerLinkActive=\"activeBtn\" routerLink=\"./corte\"><i class=\"bi-bar-chart\" style=\"font-size: 1rem\"></i> Corte</a>\r\n                    </li>\r\n                    <li class=\"nav-item p-1\">\r\n                        <a class=\"nav-link btnW waves-effect waves-grey px-3 mx-1\" routerLinkActive=\"activeBtn\" routerLink=\"./configuracion\"><i class=\"bi-gear\" style=\"font-size: 1rem\"></i> Configuracion</a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n\r\n        </div>\r\n    </nav> -->\r\n</header>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\n\r\n// COMPONENTS\r\nimport { HeaderComponent } from './header/header.component';\r\nimport { FooterComponent } from './footer/footer.component';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    HeaderComponent,\r\n    FooterComponent\r\n  ],\r\n  exports: [\r\n    HeaderComponent,\r\n    FooterComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule\r\n  ]\r\n})\r\nexport class SharedModule { }\r\n","import { Component, OnInit } from '@angular/core';\nimport { EmpresaService } from '../services/empresa.service';\n\nimport {UUID} from 'uuid-generator-ts';\n\nimport Swal from 'sweetalert2';\nimport { Datos } from '../models/empresa.model';\nimport { ProductService } from '../services/product.service';\nimport { Product } from '../models/product.model';\nimport { DepartmentService } from '../services/department.service';\nimport { Department } from '../models/department.model';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { Carrito, LoadCarrito } from '../interfaces/carrito.interface';\nimport { PedidosService } from '../services/pedidos.service';\n\ninterface _carrito{\n  qty: number,\n  product: Product\n  price: number\n}\n\n@Component({\n  selector: 'app-shop',\n  templateUrl: './shop.component.html',\n  styleUrls: ['./shop.component.css']\n})\nexport class ShopComponent implements OnInit {\n\n  constructor(  private empresaService: EmpresaService,\n                private departmentService: DepartmentService,\n                private fb: FormBuilder,\n                private pedidosService: PedidosService,\n                private productService: ProductService\n  ) { }\n\n  ngOnInit(): void {\n\n    this.cargarDatos();\n    this.loadDeparments();\n    this.loadProducts();\n\n  }\n\n  /** ================================================================\n   *   CARGAR DATOS DE LA EMPRESA\n  ==================================================================== */\n  public empresa: Datos;\n  cargarDatos(){\n    this.empresaService.getDatos()\n      .subscribe( datos => {\n        this.empresa = datos;  \n      }, (err) => { Swal.fire('Error', err.error.msg, 'error'); });\n  }\n\n  /** ================================================================\n   *   CARGAR DEPARTAMENTOS\n  ==================================================================== */\n  public departamentos: Department[] = [];\n  loadDeparments(){\n\n    this.departmentService.loadDepartment()\n        .subscribe( ({departments}) => {\n\n          this.departamentos = departments;\n\n        }, (err) => { Swal.fire('Error', err.error.msg, 'error'); })\n\n  }\n\n  /** ================================================================\n   *   FILTRAR POR DEPARTAMENTO DEPARTAMENTOS\n  ==================================================================== */\n  filterDeparments(department: string){\n\n    if(department === 'all'){\n      delete this.queryP.department;\n    }else{\n      this.queryP.department = department;\n    }\n\n    this.loadProducts();\n\n  }\n\n  /** ================================================================\n   *   CARGAR PRODUCTOS\n  ==================================================================== */\n  public products: Product[] = [];\n  public total: Number = 0;\n  public queryP: any = {\n    desde: 0,\n    hasta: 50,\n    status: true,\n    visibility: true,\n    $and : [{ inventario: { $gte: 0.0001 } }],\n    low: false,\n    sort: {}\n  }\n\n  loadProducts(){\n\n    this.productService.searchQueryProducts(this.queryP)\n        .subscribe( ({products, total}) => {\n\n          this.products = products;\n          this.total = total;          \n\n        }, (err) => {\n          console.log(err);\n          Swal.fire('Error', err.error.msg, 'error');          \n        })\n\n  }\n\n  /** ================================================================\n   *   ADD CARRTIO\n   * \n   * \n      first_name\n      family_name\n      cedula\n   * \n      products\n      amount\n      cliente\n      ciudad\n      departamento\n      direccion\n      telefono\n      comentario\n      local\n  ==================================================================== */\n  public carrito: _carrito[] = [];\n  addItem(product: Product){\n\n    // VALIDAR ITEM\n    const validarItem = this.carrito.findIndex( (resp) =>{      \n      if (resp.product.pid === product.pid ) {\n        return true;\n      }else {\n        return false;\n      }\n    });\n\n    // AGREGAR PRODUCTO\n    if (validarItem === -1) {\n      this.carrito.push({\n        product,\n        qty: 1,\n        price: product.price\n      })\n    }else{\n\n      this.carrito.map( (item) => {\n        if (item.product.code === product.code) {\n          item.qty ++;\n        }\n      })\n    }    \n\n    // SUMAR TOTALES\n    this.sumarTotales();\n\n    Swal.fire({\n      toast: true,\n      position: \"top-end\",\n      showConfirmButton: false,\n      timer: 2000,\n      icon: \"success\",\n      title: \"Producto agregado\"\n    })    \n\n  }\n\n  /** ================================================================\n   *  BORRAR ITEM\n  ==================================================================== */\n  deleteItem(i: any){\n\n    this.carrito.splice(i,1);\n    this.sumarTotales();\n\n  }\n\n  /** ================================================================\n   *   SUMAR TOTALES\n  ==================================================================== */\n  public amount: number = 0;\n  sumarTotales(){\n\n    this.amount = 0;\n    for (const item of this.carrito) {\n\n      if (item.product.tax) {\n        this.amount += (((item.price * item.product.taxid.valor)/100 ) + item.price) * item.qty; \n      }else{\n        this.amount += item.qty * item.price;\n      }\n      \n    }\n    \n  }\n  \n  /** ================================================================\n   *   CREAR PEDIDO\n  ==================================================================== */\n  public uuid!: any;\n  public pedidoSubmitted: boolean = false;\n  public pedidoForm = this.fb.group({\n    first_name: ['', [Validators.required]],\n    family_name: ['', [Validators.required]],\n    cedula: ['', [Validators.required]],\n    ciudad: ['', [Validators.required]],\n    departamento: ['', [Validators.required]],\n    direccion: ['', [Validators.required]],\n    telefono: ['', [Validators.required]],\n    comentario: '',\n  })\n\n  crear(){\n\n    this.pedidoSubmitted = true;\n    \n    if (this.pedidoForm.invalid) {\n      return;\n    }\n\n    this.uuid = new UUID();\n\n    let products: any[] = [];\n    for (const item of this.carrito) {\n\n      products.push({\n        product: item.product.pid,\n        qty: item.qty,\n        price: item.price\n      })\n      \n    }\n\n    let formData: any = {\n      products,\n      amount: this.amount,\n      cliente: {\n        first_name: this.pedidoForm.value.first_name,\n        family_name: this.pedidoForm.value.family_name,\n        cedula: this.pedidoForm.value.cedula\n      },\n      ciudad: this.pedidoForm.value.ciudad,\n      departamento: this.pedidoForm.value.departamento,\n      direccion: this.pedidoForm.value.direccion,\n      telefono: this.pedidoForm.value.telefono,\n      comentario: this.pedidoForm.value.comentario,\n      local: true,\n      referencia: this.uuid.getDashFreeUUID(),\n      transaccion: this.uuid.getDashFreeUUID()\n    }\n\n    this.pedidosService.createPedidosLocal(formData)\n        .subscribe( ({pedido}) => {\n          \n          this.pedidoSubmitted = false;\n          this.pedidoForm.reset();\n          this.carrito = [];\n          this.amount = 0;\n          Swal.fire('Estupendo', 'Se ha creado el pedido exitosamente!', 'success');\n\n        }, (err) => {\n          console.log(err);\n          Swal.fire('Error', err.error.msg, 'error');          \n        })\n\n\n  }\n\n\n  validate(campo: string) :boolean{\n    return (this.pedidoSubmitted && this.pedidoForm.get(campo).invalid)? true: false;\n  }\n\n}\n","<header *ngIf=\"empresa\" data-bs-theme=\"dark\">\n    <div class=\"navbar navbar-dark bg-dark shadow-sm\">\n        <div class=\"container\">\n            <strong class=\"text-white\"> {{ empresa.name }} </strong>\n            <button type=\"button\" class=\"btn btn-sm btn-light rounded-pill position-relative\" data-bs-toggle=\"offcanvas\" data-bs-target=\"#offcanvasExample\" aria-controls=\"offcanvasExample\">\n              <i class=\"bi bi-cart\"></i>\n              <span *ngIf=\"carrito.length > 0\" class=\"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger\">\n                {{ carrito.length }}\n              </span>\n            </button>\n        </div>\n    </div>\n</header>\n\n<div id=\"dd\" class=\"p-2 my-2 d-flex flex-wrap justify-content-start gap-2\" style=\"max-height: 105px; overflow-y: scroll;\">\n\n    <button (click)=\"filterDeparments('all')\" style=\"width: auto;\" type=\"button\" class=\"btn bg-white p-0 m-0 btnW waves-effect waves-blue text-muted d-flex align-items-center\"> \n        <!-- <img style=\"width: 1.5rem; height: 1.5rem; object-fit: cover; \" [src]=\"departamento.img | imagen:'department'\" alt=\"...\"> -->\n        <p class=\"mb-0 mx-1\" style=\"font-size: 0.9rem\">Todos</p>\n    </button>\n    <ng-container *ngFor=\"let departamento of departamentos\">\n        <div *ngIf=\"departamento.visibility && departamento.status\">\n\n            <button (click)=\"filterDeparments(departamento.did)\" style=\"width: auto;\" type=\"button\" class=\"btn bg-white p-0 m-0 btnW waves-effect waves-blue text-muted d-flex align-items-center\"> \n                <img style=\"width: 1.5rem; height: 1.5rem; object-fit: cover; \" [src]=\"departamento.img | imagen:'department'\" alt=\"...\">\n                <p class=\"mb-0 mx-1\" style=\"font-size: 0.9rem\">{{ departamento.name }}</p>\n            </button>\n\n        </div>\n\n    </ng-container>\n\n</div>\n\n<main>\n\n<div class=\"album py-5 bg-body-tertiary\">\n  <div class=\"container-fluid\">\n\n    <div class=\"d-flex flex-wrap justify-content-center gap-3\">\n\n      <div *ngFor=\"let product of products\" style=\"width: 16rem;\">\n        <div  class=\"card shadow-sm\" >\n\n          <div style=\"width: 100%; height: 200px; background-color: #f5f5f5;\">\n            <img [src]=\"product.img | imagen: 'products'\" alt=\"\" style=\"width: 100%; height: 100%; object-fit: cover;\">\n          </div>\n\n          <div class=\"card-body\">\n            <h6 class=\"mb-1 fw-bold\"> {{ product.name }} </h6>\n            <p class=\"card-text\"> \n              <span *ngIf=\"product.description\">\n                {{ product.description.length > 100 ? (product.description | slice: 0:100) + '...' : product.description }} \n              </span>\n            </p>\n            <p class=\"fw-bold text-success\">\n              {{ ((product.tax)? ((product.price * product.taxid.valor)/100) + product.price : product.price )  | currency}}\n            </p>\n            <div class=\"d-flex justify-content-between align-items-center\">\n              <div class=\"btn-group\">\n                <button (click)=\"addItem(product)\" type=\"button\" class=\"btn btn-sm btn-outline-secondary\">Agregar</button>\n              </div>\n              <small class=\"text-body-secondary\">stock {{product.inventario | number}} </small>\n            </div>\n          </div>\n        </div>    \n      </div>\n\n\n    </div>\n\n  </div>\n</div>\n\n<!-- CARRITO DE COMPRAS -->\n<div class=\"offcanvas offcanvas-start\" tabindex=\"-1\" id=\"offcanvasExample\" aria-labelledby=\"offcanvasExampleLabel\">\n  <div class=\"offcanvas-header\">\n    <h5 class=\"offcanvas-title\" id=\"offcanvasScrollingLabel\">Carrito de Compras</h5>\n    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"offcanvas\" aria-label=\"Close\"></button>\n  </div>\n  <div class=\"offcanvas-body\">\n\n    <div class=\"card border-0 shadow mb-4\">\n\n      <div class=\"card-body\">\n\n        <p class=\"mb-0 mx-auto text-center\"><small>TOTAL:</small></p>\n        <h4 class=\" text-center mb-3\"> {{ amount | currency }} </h4>\n\n        <div class=\"table-responsive\">\n          <table class=\"table table-sm\" style=\"border-top: 0;\">\n            <thead>\n              <tr>\n                <th scope=\"col\"></th>\n                <th scope=\"col\">Producto</th>\n                <th scope=\"col\">Precio</th>\n                <th scope=\"col\">Cant.</th>\n                <th scope=\"col\">Monto</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr *ngIf=\"carrito.length === 0\" class=\"\">\n                <td colspan=\"5\" scope=\"row\">No has agregado ningun poducto...</td>\n              </tr>\n    \n              <tr *ngFor=\"let item of carrito; let i = index\">\n                <td>\n                  <button type=\"button\" (click)=\"deleteItem(i)\" class=\"btn btn-sm btn-link p-1 text-danger\">\n                    <i class=\"bi-trash\" style=\"font-size: 0.7rem\"></i>\n                  </button> \n                </td>\n                <td> {{ item.product.name }} </td>\n                <td> \n                  <span *ngIf=\"!item.product.tax\"> {{ item.price | currency }} </span>\n                  <span *ngIf=\"item.product.tax\">\n                    {{ ((item.product.tax)? ((item.product.price * item.product.taxid.valor)/100) + item.product.price : item.product.price )  | currency}}\n                  </span>\n                </td>\n                <td> {{ item.qty | number }} </td>\n                <td> {{ ((item.product.tax)? (((item.product.price * item.product.taxid.valor)/100) + item.product.price) * item.qty : item.product.price * item.qty )  | currency}} </td>\n              </tr>\n    \n            </tbody>            \n          </table>\n        </div>\n\n      </div>     \n\n    </div>\n\n    <div *ngIf=\"carrito.length > 0\" class=\"card border-0 shadow mb-4\">\n      <div class=\"card-body\">\n\n        <h5 class=\"offcanvas-title\">Información</h5>\n    \n        <form autocomplete=\"off\" [formGroup]=\"pedidoForm\" (ngSubmit)=\"crear()\" *ngIf=\"carrito.length > 0\">\n    \n          <div class=\"mb-3\">\n            <label for=\"first_name\" class=\"form-label\">Nombres</label>\n            <input formControlName=\"first_name\" type=\"text\" id=\"first_name\" class=\"form-control\" placeholder=\"Nombres\" aria-describedby=\"helpId\"/>\n            <small *ngIf=\"validate('first_name')\" id=\"helpId\" class=\"text-danger\">Este campo es obligatorio</small>\n          </div>\n          \n          <div class=\"mb-3\">\n            <label for=\"family_name\" class=\"form-label\">Apellidos</label>\n            <input formControlName=\"family_name\" type=\"text\" id=\"family_name\" class=\"form-control\" placeholder=\"Apellidos\" aria-describedby=\"helpId\"/>\n            <small *ngIf=\"validate('family_name')\" id=\"helpId\" class=\"text-danger\">Este campo es obligatorio</small>\n          </div>\n    \n          <div class=\"mb-3\">\n            <label for=\"cedula\" class=\"form-label\">CC/NIT</label>\n            <input formControlName=\"cedula\" type=\"text\" id=\"cedula\" class=\"form-control\" placeholder=\"CC/NIT\" aria-describedby=\"helpId\"/>\n            <small *ngIf=\"validate('cedula')\" id=\"helpId\" class=\"text-danger\">Este campo es obligatorio</small>\n          </div>\n          \n          <div class=\"mb-3\">\n            <label for=\"ciudad\" class=\"form-label\">Ciudad</label>\n            <input formControlName=\"ciudad\" type=\"text\" id=\"ciudad\" class=\"form-control\" placeholder=\"Ciudad\" aria-describedby=\"helpId\"/>\n            <small *ngIf=\"validate('ciudad')\" id=\"helpId\" class=\"text-danger\">Este campo es obligatorio</small>\n          </div>\n          \n          <div class=\"mb-3\">\n            <label for=\"departamento\" class=\"form-label\">Departamento</label>\n            <input formControlName=\"departamento\" type=\"text\" id=\"departamento\" class=\"form-control\" placeholder=\"Departamento\" aria-describedby=\"helpId\"/>\n            <small *ngIf=\"validate('departamento')\" id=\"helpId\" class=\"text-danger\">Este campo es obligatorio</small>\n          </div>\n    \n          <div class=\"mb-3\">\n            <label for=\"direccion\" class=\"form-label\">Dirección</label>\n            <input formControlName=\"direccion\" type=\"text\" id=\"direccion\" class=\"form-control\" placeholder=\"Dirección\" aria-describedby=\"helpId\"/>\n            <small *ngIf=\"validate('direccion')\" id=\"helpId\" class=\"text-danger\">Este campo es obligatorio</small>\n          </div>\n          \n          <div class=\"mb-3\">\n            <label for=\"telefono\" class=\"form-label\">Telefono</label>\n            <input formControlName=\"telefono\" type=\"text\" id=\"telefono\" class=\"form-control\" placeholder=\"Telefono\" aria-describedby=\"helpId\"/>\n            <small *ngIf=\"validate('telefono')\" id=\"helpId\" class=\"text-danger\">Este campo es obligatorio</small>\n          </div>\n    \n          <div class=\"form-floating mb-3\">\n            <textarea formControlName=\"comentario\"  class=\"form-control\" placeholder=\"Describe una nota o comentario adicional...\" id=\"floatingTextarea2\" style=\"height: 100px\"></textarea>\n            <label for=\"floatingTextarea2\">Nota...</label>\n          </div>\n\n          <button type=\"submit\" class=\"btn btn-primary w-100\">\n            Crear pedido\n          </button>    \n        </form>\n\n      </div>\n    </div>\n    \n\n    \n\n  </div>\n</div>\n\n\n</main>\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.ss\r\n/** \r\n  base_url: 'https://admin.franciastore.com/api',\r\n  base_url: 'https://admin.akieztupollo.com/api',\r\n  base_url: 'https://admin.jdr127.com/api',\r\n  base_url: 'https://tiendaschicco.simids.com.co/api',\r\n\r\n  base_url: 'http://localhost:3000/api',\r\n  base_url: 'http://192.168.1.150:3000/api',\r\n\r\n  base_url: 'https://admin.castitoner.com/api',\r\n\r\n  base_url: 'https://forhimforherparrilla.poslatino.com/api',\r\n\r\n  base_url: 'https://custommer999.loggikpos.online/api',\r\n\r\n  name: 'simids',\r\n  url: 'simids.com',\r\n  phone: '573007325684'\r\n  \r\n  name: 'LoggikPos',\r\n  url: 'loggikpos.com',\r\n  phone: '573007325684'\r\n  \r\n*/\r\n\r\n\r\nexport const environment = {\r\n  production: false,\r\n  empresa:{\r\n    name: 'simids',\r\n    url: 'simids.com',\r\n    phone: '573007325684'\r\n  },\r\n  base_url: 'http://localhost:3000/api',\r\n  local_url: 'https://castitoner.com/api',\r\n  dataico_url: 'https://api.dataico.com/dataico_api/v2'\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLIi.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n","/* (ignored) */","/* (ignored) */","/* (ignored) */"],"names":[],"sourceRoot":"webpack:///"}